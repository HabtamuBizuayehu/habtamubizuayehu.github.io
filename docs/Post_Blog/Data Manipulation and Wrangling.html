<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Habtamu Bizuayehu">

<title>Date Manipulation and Wrangling using R ‚Äì H. Mellie B</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="../site_libs/plotly-binding-4.10.4/plotly.js"></script>

<script src="../site_libs/typedarray-0.1/typedarray.min.js"></script>

<script src="../site_libs/jquery-3.5.1/jquery.min.js"></script>

<link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<link href="../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

<script src="../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>



<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">H. Mellie B</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Skillsets.html"> 
<span class="menu-text">Skills and Expertise</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../CV.html"> 
<span class="menu-text">Resume/CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Publication_report.html"> 
<span class="menu-text">Publication and Reports</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Podcast_Blog.html"> 
<span class="menu-text">Blog and Podcast</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../contact.html"> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/" target="_blank"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text">GitHub</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://twitter.com" target="_blank"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text">Twitter</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.linkedin.com/in/dr-habtamu-mellie-bizuayehu-94285980/" target="_blank"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text">LinkedIn</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="mailto:hmba2003@gmail.com" target="_blank"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text">Email</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#comprehensive-data-manipulation-and-wrangling-via-r" id="toc-comprehensive-data-manipulation-and-wrangling-via-r" class="nav-link active" data-scroll-target="#comprehensive-data-manipulation-and-wrangling-via-r"><span class="header-section-number">1</span> <strong>Comprehensive Data Manipulation and Wrangling via R</strong></a>
  <ul class="collapse">
  <li><a href="#part-i-foundations-and-introduction" id="toc-part-i-foundations-and-introduction" class="nav-link" data-scroll-target="#part-i-foundations-and-introduction"><span class="header-section-number">1.1</span> <strong>PART I: FOUNDATIONS AND INTRODUCTION</strong></a></li>
  <li><a href="#summary-quarto-and-r-markdown-chunk-options" id="toc-summary-quarto-and-r-markdown-chunk-options" class="nav-link" data-scroll-target="#summary-quarto-and-r-markdown-chunk-options"><span class="header-section-number">1.2</span> üîç Summary: Quarto and R Markdown Chunk Options</a></li>
  <li><a href="#part-ii-data-loading-and-exploration" id="toc-part-ii-data-loading-and-exploration" class="nav-link" data-scroll-target="#part-ii-data-loading-and-exploration"><span class="header-section-number">1.3</span> <strong>PART II: DATA LOADING AND EXPLORATION</strong></a></li>
  <li><a href="#part-iii-wrangling-with-dplyr" id="toc-part-iii-wrangling-with-dplyr" class="nav-link" data-scroll-target="#part-iii-wrangling-with-dplyr"><span class="header-section-number">1.4</span> <strong>PART III: WRANGLING WITH <code>dplyr</code></strong></a></li>
  <li><a href="#part-iv-advanced-wrangling-and-integration" id="toc-part-iv-advanced-wrangling-and-integration" class="nav-link" data-scroll-target="#part-iv-advanced-wrangling-and-integration"><span class="header-section-number">1.5</span> <strong>PART IV: ADVANCED WRANGLING AND INTEGRATION</strong></a></li>
  <li><a href="#part-vi-descriptive-statistics-and-tabulation" id="toc-part-vi-descriptive-statistics-and-tabulation" class="nav-link" data-scroll-target="#part-vi-descriptive-statistics-and-tabulation"><span class="header-section-number">1.6</span> <strong>üî¢ PART VI: Descriptive Statistics and Tabulation</strong></a></li>
  <li><a href="#part-vii-data-visualization-with-ggplot2" id="toc-part-vii-data-visualization-with-ggplot2" class="nav-link" data-scroll-target="#part-vii-data-visualization-with-ggplot2"><span class="header-section-number">1.7</span> <strong>PART VII: DATA VISUALIZATION WITH <code>ggplot2</code></strong></a></li>
  <li><a href="#part-viii-shiny-app-building-web-apps" id="toc-part-viii-shiny-app-building-web-apps" class="nav-link" data-scroll-target="#part-viii-shiny-app-building-web-apps"><span class="header-section-number">1.8</span> <strong>PART VIII: SHINY App: BUILDING WEB APPS</strong></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">
<!-- logo.Rhtml -->

<div style="display: flex; align-items: center; justify-content: left; padding: 10px; position: fixed; top: 10px; left: 10px; z-index: 1000;">

  <img src="top_logo.jpg" alt="Logo" style="height: 50px; width: auto; margin-right: 10px;">

  <h1 style="margin: 0;">H. Mellie B</h1>

</div>




<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Date Manipulation and Wrangling using R</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Habtamu Bizuayehu </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="comprehensive-data-manipulation-and-wrangling-via-r" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> <strong>Comprehensive Data Manipulation and Wrangling via R</strong></h1>
<p>This presentation provides a comprehensive walkthrough of data manipulation and wrangling in R, covering foundational setup, core syntax, data importing, exploration, and transformation techniques. It systematically introduces essential R packages and functions for cleaning, summarizing, and visualizing data, followed by advanced topics such as working with dates and handling missing values. Practical sections on looping, writing functions, and building interactive Shiny applications are also included to enhance automation and interactivity. The presentation concludes with real-world case studies, demonstrating how to apply these techniques to healthcare and public health datasets. This guide is designed to build technical proficiency and practical confidence for effective data analysis using R.</p>
<hr>
<section id="part-i-foundations-and-introduction" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="part-i-foundations-and-introduction"><span class="header-section-number">1.1</span> <strong>PART I: FOUNDATIONS AND INTRODUCTION</strong></h2>
<section id="getting-started-with-r" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="getting-started-with-r"><span class="header-section-number">1.1.1</span> <strong>1.1 Getting Started with R</strong></h3>
<p>This section will cover the following contents</p>
<p>- Installing R and RStudio</p>
<p>- Setting working directories</p>
<p>- Clearing environment and console</p>
<p>- Installing and loading packages (eg <code>tidyverse</code>, <code>janitor</code>, etc.)</p>
<ul>
<li><strong>Installing R and RStudio</strong></li>
</ul>
<p>When we begin working with R, the very first step we take is installing two important tools: R itself (the engine) and RStudio (the friendly interface we use every day). I recommend that we install R first and then RStudio immediately after.</p>
<p>To make this clear, I have prepared a complete video tutorial that you can watch step-by-step:</p>
<p>Wathc at <a href="https://www.youtube.com/watch?v=wFaBBRfaABw" target="_blank">AnalyticsHub YouTube</a></p>
<p>The video, shows:</p>
<ul>
<li><p>How to Download R from the CRAN website.</p></li>
<li><p>Install RStudio, which gives us a powerful yet simple environment to work in.</p></li>
<li><p>Briefly explore basic options like font size, theme (dark/light mode), and code editor settings to make RStudio comfortable for coding.</p></li>
<li><p><strong>Setting working directories<br>
</strong>When we work in R, it‚Äôs very important that we know <em>where</em> R is reading from and saving to.<br>
I often think of the <strong>working directory</strong> as the ‚Äúhome folder‚Äù where all my files live during an R session.</p>
<p>We can easily <strong>check</strong> our current working directory by typing:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C:/Users/User/Desktop/Materials_ Course and proposals/VIP collection for Syntax code or project titles/R codes/Website profile Mod 2/Post_Blog"</code></pre>
</div>
</div></li>
</ul>
<p>This command tells us exactly where R is currently looking for files.</p>
<p>If we want to <strong>change</strong> the working directory to a folder we are working on (for example, a project folder or a course material folder), we can use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/User/Desktop/Materials_ Course and proposals/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Always make sure the folder path is in <strong>quotation marks</strong> and I use <strong>forward slashes <code>/</code></strong> or double backslashes <code>\\</code> when typing the path.</p>
<p>üìå We can also set the working directory easily by clicking:</p>
<blockquote class="blockquote">
<p><strong>Session ‚ûî Set Working Directory ‚ûî Choose Directory‚Ä¶</strong></p>
</blockquote>
<p><strong>üìö Note about API tokens and special folders:</strong></p>
<p>If you are using R for connecting to APIs, cloud storage, or services like GitHub, Dropbox, or Google Drive,<br>
sometimes you will need to <strong>set a working directory</strong> where your <strong>API token file</strong> is stored (for authentication).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/YourName/.credentials/"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>‚ö†Ô∏è <strong>Important</strong>: Always make sure API tokens and confidential files are in a secure private directory.</p>
<ul>
<li><p><strong>Clearing environment and console</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clear environment and console</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()) <span class="co"># To clear the environment (remove all objects in memory)</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\014</span><span class="st">"</span>) <span class="co"># To clear the console (like wiping a whiteboard)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div style="page-break-after: always;"></div>
</div>
<p>Before starting fresh in any R session, I like to <strong>clear out everything</strong>‚Äîall variables, data, and even the clutter in the console.</p></li>
<li><p><strong>Installing and loading packages</strong></p>
<p>We rely on a range of <strong>packages</strong> in R for data wrangling, visualization, dashboards, and reporting.<br>
I typically create a vector of required packages and write a small loop to install any missing ones.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------ Set CRAN Repository ------------------</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">repos =</span> <span class="fu">c</span>(<span class="at">CRAN =</span> <span class="st">"https://cran.rstudio.com"</span>))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------ List of required packages for Data Wrangling and Analysis ------------------</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"lubridate"</span>, <span class="st">"dplyr"</span>, <span class="st">"stringr"</span>, <span class="st">"zoo"</span>, <span class="st">"tsibble"</span>, <span class="st">"ggplot2"</span>, <span class="st">"plotly"</span>, </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"readr"</span>, <span class="st">"readxl"</span>, <span class="st">"haven"</span>, <span class="st">"openxlsx"</span>, <span class="st">"labelled"</span>, <span class="st">"forecast"</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"prettydoc"</span>, <span class="st">"janitor"</span>, <span class="st">"knitr"</span>, <span class="st">"rmarkdown"</span>, <span class="st">"yaml"</span>, </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"flextable"</span>, <span class="st">"scales"</span>, <span class="st">"gt"</span>, <span class="st">"reactable"</span>, <span class="st">"DT"</span>, <span class="st">"gmodels"</span>, <span class="st">"Hmisc"</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tidyverse"</span>, <span class="st">"tidyr"</span>, <span class="st">"officer"</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"shiny"</span>, <span class="st">"shinydashboard"</span>, <span class="st">"shinythemes"</span>, <span class="st">"mice"</span>, <span class="st">"shinyWidgets"</span>, <span class="st">"bslib"</span>, <span class="st">"quarto"</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------ Install and load packages ------------------</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (pkg <span class="cf">in</span> packages) {</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(pkg, <span class="at">character.only =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">install.packages</span>(pkg)</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------ Load required libraries with descriptions ------------------</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)     <span class="co"># Simplifies the manipulation of dates and times in R (e.g., formatting, extracting components)</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)         <span class="co"># Data manipulation: filtering, summarizing, and transforming data</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)       <span class="co"># Simplifies string manipulation</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)         <span class="co"># Data tidying: reshaping with pivot_longer, pivot_wider, etc.</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)         <span class="co"># Functional programming: map functions over lists/vectors</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)       <span class="co"># Categorical data: reordering and labeling factor levels</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)           <span class="co"># Infrastructure for time series objects</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tsibble)       <span class="co"># Tidy temporal data frames and time series modeling</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)      <span class="co"># Forecasting functions for time series models</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)         <span class="co"># Read rectangular data like CSVs</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)        <span class="co"># Read Excel files (.xls and .xlsx)</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)         <span class="co"># Import data from SAS, SPSS, and Stata</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)      <span class="co"># Write to Excel with more control</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(labelled)      <span class="co"># Attach and work with variable labels</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)       <span class="co"># Create elegant data visualizations using the grammar of graphics</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)        <span class="co"># Interactive visualizations using ggplot2 or standalone plotly</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)        <span class="co"># Provides scale functions for ggplot2 (e.g., log, percent)</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)       <span class="co"># Clean data: make column names nice, tabulate, etc.</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gmodels)       <span class="co"># CrossTables and other classic stats tools</span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Hmisc)         <span class="co"># Summarization and advanced table/label handling</span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mice)           <span class="co"># missing data imputation</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)         <span class="co"># Dynamic report generation in R</span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rmarkdown)     <span class="co"># Convert R scripts to reports in various formats</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(prettydoc)     <span class="co"># Beautiful HTML document templates</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(yaml)          <span class="co"># Read and write YAML files (used in R Markdown, Quarto)</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(officer)       <span class="co"># Export tables and reports to Word/PowerPoint</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)     <span class="co"># Create nicely formatted tables</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)            <span class="co"># Grammar of tables for HTML and PDF output</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reactable)     <span class="co"># Interactive data tables</span></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)            <span class="co"># Wrapper of JavaScript DataTables for R</span></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)         <span class="co"># Build interactive web applications directly from R</span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinydashboard)<span class="co"># Create dashboard layouts for Shiny apps</span></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinythemes)   <span class="co"># Prebuilt UI themes for Shiny apps</span></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinyWidgets)  <span class="co"># Enhanced UI widgets for Shiny</span></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bslib)         <span class="co"># Bootstrap themes for Shiny and rmarkdown</span></span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quarto)        <span class="co"># Rendering Quarto documents</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-syntax-symbols-and-essentials" class="level3" data-number="1.1.2">
<h3 data-number="1.1.2" class="anchored" data-anchor-id="r-syntax-symbols-and-essentials"><span class="header-section-number">1.1.2</span> <strong>1.2 R Syntax Symbols and Essentials</strong></h3>
<ul>
<li>Operators: <code>&lt;-</code>, <code>%&gt;%</code>, <code>==</code>, <code>&amp;</code>, <code>|</code>, <code>~</code></li>
<li>Additional Operators: <code>%in%</code>, <code>::</code>, <code>%&lt;&gt;%</code>, <code>|&gt;</code></li>
<li>Symbols: <code>()</code>, <code>[]</code>, <code>{}</code>, <code>""</code>, <code>#</code></li>
<li>Commenting, structure, and help functions (<code>?function</code>, <code>args()</code>)</li>
<li>Using R scripts vs.&nbsp;R Markdown vs.&nbsp;Quarto</li>
</ul>
<p>In this section, we walk through the fundamental syntax building blocks of R.<br>
Mastering these basics helps write cleaner, more efficient, and more readable code.</p>
<p>üîπ <strong>Operators</strong></p>
<p>In R, operators are used to perform operations on objects and values:</p>
<ul>
<li><strong>Assignment operators</strong> (<code>&lt;-</code>, <code>=</code>) store values into objects.</li>
<li><strong>Pipe operators</strong> (<code>%&gt;%</code>, <code>%&lt;&gt;%</code>, <code>|&gt;</code>) allow chaining multiple commands together.</li>
<li><strong>Comparison operators</strong> (<code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>) compare values for equality or relational logic.</li>
<li><strong>Logical operators</strong> (<code>&amp;</code>, <code>|</code>, <code>!</code>) build logical expressions (AND, OR, NOT).</li>
<li><strong>Formula operator</strong> (<code>~</code>) defines models and formulas, e.g., <code>y ~ x1 + x2</code>.</li>
<li><strong>Membership operator</strong> (<code>%in%</code>) checks whether an element belongs to a set.</li>
<li><strong>Package access operator</strong> (<code>::</code>) calls a function from a package without loading the full package.</li>
</ul>
<p>üîπ <strong>Symbols</strong></p>
<p>Symbols are special characters used in structuring R code:</p>
<ul>
<li><code>()</code> : Used for function calls and setting arguments.</li>
<li><code>[]</code> : Indexing vectors, matrices, or data frames.</li>
<li><code>{}</code> : Grouping multiple expressions into a code block.</li>
<li><code>""</code> or <code>''</code> : Define character strings.</li>
<li><code>#</code> : Create comments that are ignored during code execution.</li>
</ul>
<p>üîπ <strong>Help Functions</strong></p>
<ul>
<li><p><code>?function_name</code> : Access the help documentation for any function.</p></li>
<li><p><code>args(function_name)</code> : Display the arguments a function accepts.</p>
<p>üîπ Scripting in .R, .Rmd, .qmd</p>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 35%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Format</th>
<th>Description</th>
<th>Best Use Case</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>.R</code></td>
<td>Basic R script. Contains code only, no formatting or output.</td>
<td>Exploratory coding, testing snippets</td>
</tr>
<tr class="even">
<td><code>.Rmd</code></td>
<td>R Markdown file. Supports code + text + output in one file.</td>
<td>Reproducible reports, presentations, notebooks</td>
</tr>
<tr class="odd">
<td><code>.qmd</code></td>
<td>Quarto document. Successor to R Markdown with more flexible publishing.</td>
<td>Polished reports, web publishing, multi-language</td>
</tr>
</tbody>
</table></li>
</ul>
<p>üìä R Syntax Essentials Summary</p>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Element</strong></th>
<th style="text-align: left;"><strong>Symbol / Syntax</strong></th>
<th style="text-align: left;"><strong>What It Does</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Assignment</td>
<td style="text-align: left;"><code>&lt;-</code>, <code>=</code></td>
<td style="text-align: left;">Assign a value to a variable (e.g., <code>x &lt;- 5</code>)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pipe</td>
<td style="text-align: left;"><code>%&gt;%</code>, <code>%&lt;&gt;%</code>, <code>|&gt;</code></td>
<td style="text-align: left;">Pass or transform results between functions</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Comparison</td>
<td style="text-align: left;"><code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code></td>
<td style="text-align: left;">Compare values (equal, not equal, less than, etc.)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Logical</td>
<td style="text-align: left;"><code>&amp;</code>, <code>|</code>, <code>!</code></td>
<td style="text-align: left;">Logical conditions: AND, OR, NOT</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Formula</td>
<td style="text-align: left;"><code>~</code></td>
<td style="text-align: left;">Define model formulas (e.g., <code>y ~ x1 + x2</code>)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Membership Test</td>
<td style="text-align: left;"><code>%in%</code></td>
<td style="text-align: left;">Check if an element exists within a vector</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Package Function Access</td>
<td style="text-align: left;"><code>::</code></td>
<td style="text-align: left;">Call a function from a specific package without loading it</td>
</tr>
<tr class="even">
<td style="text-align: left;">Function Call</td>
<td style="text-align: left;"><code>()</code></td>
<td style="text-align: left;">Call a function with arguments (e.g., <code>mean(x)</code>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Indexing</td>
<td style="text-align: left;"><code>[]</code></td>
<td style="text-align: left;">Access parts of data structures (e.g., <code>x[1]</code>, <code>df[2,3]</code>)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Code Block</td>
<td style="text-align: left;"><code>{}</code></td>
<td style="text-align: left;">Group multiple lines (loops, conditionals)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Strings</td>
<td style="text-align: left;"><code>"text"</code>, <code>'text'</code></td>
<td style="text-align: left;">Define character strings</td>
</tr>
<tr class="even">
<td style="text-align: left;">Commenting</td>
<td style="text-align: left;"><code>#</code></td>
<td style="text-align: left;">Insert a comment ignored by R</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Help Functions</td>
<td style="text-align: left;"><code>?function</code>, <code>args(function)</code></td>
<td style="text-align: left;">Access help or check function arguments</td>
</tr>
<tr class="even">
<td style="text-align: left;">Output Format</td>
<td style="text-align: left;"><code>.R</code>, <code>.Rmd</code>, <code>.qmd</code></td>
<td style="text-align: left;">File formats for scripting or reporting</td>
</tr>
</tbody>
</table>
<p>?mean # Opens the help page for the ‚Äòmean‚Äô function</p>
<p>args(mean) # Lists input arguments for ‚Äòmean‚Äô</p>
</section>
<section id="keyboard-shortcut-and-functions" class="level3" data-number="1.1.3">
<h3 data-number="1.1.3" class="anchored" data-anchor-id="keyboard-shortcut-and-functions"><span class="header-section-number">1.1.3</span> <strong>1.3 Keyboard Shortcut and Functions</strong></h3>
<p>In this section, I highlight essential RStudio shortcut keys that improve coding efficiency and simplify the workflow for scripting and reporting.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Shortcut</strong></th>
<th style="text-align: left;"><strong>Action</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>Ctrl + Z</code></td>
<td style="text-align: left;">Undo the last action</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Ctrl + Shift + Z</code></td>
<td style="text-align: left;">Redo the undone action</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>Ctrl + Enter</code></td>
<td style="text-align: left;">Execute the current line or selected block</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Alt + -</code></td>
<td style="text-align: left;">Insert assignment operator <code>&lt;-</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>Ctrl + Shift + M</code></td>
<td style="text-align: left;">Insert pipe operator <code>%&gt;%</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Ctrl + L</code></td>
<td style="text-align: left;">Clear the console output</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>Ctrl + Shift + C</code></td>
<td style="text-align: left;">Comment or uncomment selected lines</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Ctrl + Shift + S</code></td>
<td style="text-align: left;">Source and run the entire script</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>Ctrl + Alt + I</code></td>
<td style="text-align: left;">Insert a new R Markdown or Quarto code chunk</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="terms-and-definitions-r-objects" class="level3" data-number="1.1.4">
<h3 data-number="1.1.4" class="anchored" data-anchor-id="terms-and-definitions-r-objects"><span class="header-section-number">1.1.4</span> <strong>1.4. Terms and Definitions: R Objects</strong></h3>
<p>Element | Vector | Matrix | |Data Frame | Data Table | List | Factor | Variable | Object</p>
<p>This section provides a brief overview of foundational R data structures.<br>
For more detailed explanations and demonstrations, refer to:</p>
<ul>
<li><a href="https://studio.youtube.com/channel/UCLVKP0g8GvHhOh0kn20T8eg/videos/upload?filter=%5B%5D&amp;sort=%7B%22columnType%22%3A%22date%22%2C%22sortOrder%22%3A%22DESCENDING%22%7D">YouTube: AnalyticsHub</a></li>
<li><a href="https://github.com/HabtamuBizuayehu?tab=repositories">GitHub: HabtamuBizuayehu Repositories</a></li>
</ul>
<p>Understanding these fundamental terms is essential for working effectively with R data analysis and wrangling.</p>
<p>üîπ <strong>Brief Narration of Key Terms</strong></p>
<ul>
<li><strong>Element</strong>: A single piece of data, such as a number or a character.</li>
<li><strong>Vector</strong>: An ordered collection of elements of the same type (numeric, character, logical).</li>
<li><strong>Matrix</strong>: A two-dimensional collection of elements arranged by rows and columns, all of the same type.</li>
<li><strong>Data Frame</strong>: A two-dimensional table where each column can contain different types of data (numeric, character, factor).</li>
<li><strong>Data Table</strong>: A high-performance extension from the <strong><code>data.table</code></strong> package ‚Äî for very large datasets and faster manipulation.</li>
<li><strong>List</strong>: A flexible container that can hold elements of different types and structures (vectors, data frames, even other lists).</li>
<li><strong>Factor</strong>: A special type of vector used for categorical data, storing levels internally.</li>
<li><strong>Variable</strong>: A named object that holds data (vectors, lists, data frames, etc.).</li>
<li><strong>Object</strong>: A general term for any data structure stored in R.</li>
</ul>
<hr>
<p><strong>üîç Summary Table: R Objects</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 75%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Term</strong></th>
<th style="text-align: left;"><strong>Definition</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Element</td>
<td style="text-align: left;">A single unit of data (e.g., <code>5</code>, <code>"apple"</code>)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Vector</td>
<td style="text-align: left;">A sequence of elements of the same type</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Matrix</td>
<td style="text-align: left;">A two-dimensional collection of homogeneous elements</td>
</tr>
<tr class="even">
<td style="text-align: left;">Data Frame</td>
<td style="text-align: left;">A two-dimensional table with heterogeneous column types</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Data Table</td>
<td style="text-align: left;">A fast and memory-efficient data frame extension (<code>data.table</code> package)</td>
</tr>
<tr class="even">
<td style="text-align: left;">List</td>
<td style="text-align: left;">A flexible container for different types of elements</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Factor</td>
<td style="text-align: left;">A categorical variable with predefined levels</td>
</tr>
<tr class="even">
<td style="text-align: left;">Variable</td>
<td style="text-align: left;">A named object that stores data</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Object</td>
<td style="text-align: left;">Any entity stored in R (data, functions, models, etc.)</td>
</tr>
</tbody>
</table>
</section>
<section id="quarto-and-r-markdown-options" class="level3" data-number="1.1.5">
<h3 data-number="1.1.5" class="anchored" data-anchor-id="quarto-and-r-markdown-options"><span class="header-section-number">1.1.5</span> 1.5. Quarto and R Markdown Options</h3>
<p>This section summarizes key chunk options and syntax used in Quarto and R Markdown.<br>
These settings allow flexible control over code execution, output display, figure formatting, and reporting behavior.</p>
</section>
</section>
<section id="summary-quarto-and-r-markdown-chunk-options" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="summary-quarto-and-r-markdown-chunk-options"><span class="header-section-number">1.2</span> üîç Summary: Quarto and R Markdown Chunk Options</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 49%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Feature</strong></th>
<th style="text-align: left;"><strong>Quarto Syntax</strong></th>
<th style="text-align: left;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Code Chunks</td>
<td style="text-align: left;"><code>{r}</code></td>
<td style="text-align: left;">Used to write and execute R code. You can specify options like echo, results.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Echoing Code</td>
<td style="text-align: left;"><code>echo: true</code></td>
<td style="text-align: left;">Displays the code in the output (default is true). Set to <code>false</code> to hide the code.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Include Code</td>
<td style="text-align: left;"><code>include: false</code></td>
<td style="text-align: left;">Executes code but does not show the code in the final output.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Evaluating Code</td>
<td style="text-align: left;"><code>eval: false</code></td>
<td style="text-align: left;">Prevents the code from running but still displays the code in the output.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Results Control</td>
<td style="text-align: left;"><code>results: 'markup'</code> or <code>results: 'asis'</code></td>
<td style="text-align: left;">Controls how output results are displayed (formatted or raw).</td>
</tr>
<tr class="even">
<td style="text-align: left;">Message and Warnings</td>
<td style="text-align: left;"><code>message: false</code>, <code>warning: false</code></td>
<td style="text-align: left;">Controls whether messages and warnings appear in the output.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Output File Format</td>
<td style="text-align: left;"><code>output: html</code></td>
<td style="text-align: left;">Specifies output format (html, pdf, word). Default is html.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Table Output</td>
<td style="text-align: left;"><code>results: 'asis'</code> or <code>results: 'markup'</code></td>
<td style="text-align: left;">Ensures clean table rendering for formatted output.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Chunk Labeling</td>
<td style="text-align: left;"><code># Label</code></td>
<td style="text-align: left;">Labels help organize and reference code chunks easily.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Inline Code</td>
<td style="text-align: left;">Your value is 2 times.</td>
<td style="text-align: left;">Embeds live code inside text for dynamic reporting.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Caching Results</td>
<td style="text-align: left;"><code>cache: true</code></td>
<td style="text-align: left;">Saves chunk results to avoid rerunning unchanged code. It stores the output (like objects, plots, and printed results) in a cache directory</td>
</tr>
<tr class="even">
<td style="text-align: left;">Figure Options</td>
<td style="text-align: left;"><code>fig.width: 7</code>, <code>fig.height: 5</code>, <code>fig.align: 'center'</code></td>
<td style="text-align: left;">Adjusts figure size and alignment in output documents.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Output as LaTeX</td>
<td style="text-align: left;"><code>latex: true</code></td>
<td style="text-align: left;">Allows LaTeX formatting (mainly for PDFs and math expressions).</td>
</tr>
<tr class="even">
<td style="text-align: left;">Commenting Code</td>
<td style="text-align: left;"><code># (within chunks)</code></td>
<td style="text-align: left;">Standard way to comment within R code chunks.</td>
</tr>
</tbody>
</table>
<p>‚û°Ô∏è Mastering these options ensures smoother report generation, cleaner outputs, and faster rendering when building professional documents in Quarto or R Markdown.</p>
</section>
<section id="part-ii-data-loading-and-exploration" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="part-ii-data-loading-and-exploration"><span class="header-section-number">1.3</span> <strong>PART II: DATA LOADING AND EXPLORATION</strong></h2>
<section id="reading-and-importing-data" class="level3" data-number="1.3.1">
<h3 data-number="1.3.1" class="anchored" data-anchor-id="reading-and-importing-data"><span class="header-section-number">1.3.1</span> <strong>2.1 Reading and Importing Data</strong></h3>
<ul>
<li>File path setup and working with <code>getwd()</code>, <code>paste()</code></li>
<li><code>read_csv()</code>, <code>read_excel()</code>, <code>read.delim()</code>, <code>readRDS()</code></li>
<li>Reading <code>.tsv</code>, <code>.dta</code>, and <code>.sav</code> files (foreign and haven packages)</li>
<li>Reading from ZIP Files</li>
</ul>
<p>Before we begin analyzing data in R, we need to <strong>bring it in</strong> from where it‚Äôs stored‚Äîyour computer, the cloud, or an online source.</p>
<p>There are many formats we commonly work with in public health and analytics: CSV, Excel, text files, RDS, SPSS, and others.<br>
Below is a <strong>summary table</strong> of functions used to read each data type.</p>
<p>üìä <strong>Reading Common Data Types in R</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 22%">
<col style="width: 22%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Data Type</strong></th>
<th><strong>Function</strong></th>
<th><strong>Package</strong></th>
<th><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CSV</td>
<td><code>read_csv()</code>, <code>read.csv()</code></td>
<td>readr / base</td>
<td><code>read_csv("file.csv")</code></td>
</tr>
<tr class="even">
<td>Excel (.xls/.xlsx)</td>
<td><code>read_excel()</code></td>
<td>readxl</td>
<td><code>read_excel("file.xlsx")</code></td>
</tr>
<tr class="odd">
<td>Tab-separated (.tsv)</td>
<td><code>read_tsv()</code></td>
<td>readr</td>
<td><code>read_tsv("file.tsv")</code></td>
</tr>
<tr class="even">
<td>Text (.txt)</td>
<td><code>read.delim()</code></td>
<td>base</td>
<td><code>read.delim("file.txt")</code></td>
</tr>
<tr class="odd">
<td>Stata (.dta)</td>
<td><code>read_dta()</code></td>
<td>haven</td>
<td><code>read_dta("file.dta")</code></td>
</tr>
<tr class="even">
<td>SPSS (.sav)</td>
<td><code>read_sav()</code></td>
<td>haven</td>
<td><code>read_sav("file.sav")</code></td>
</tr>
<tr class="odd">
<td>RDS (R object)</td>
<td><code>readRDS()</code></td>
<td>base</td>
<td><code>readRDS("object.rds")</code></td>
</tr>
<tr class="even">
<td>ZIP archives</td>
<td><code>unzip()</code></td>
<td>utils (base)</td>
<td><code>unzip("data.zip", exdir = "folder")</code></td>
</tr>
<tr class="odd">
<td>Online Excel/CSV</td>
<td><code>download.file()</code> + reader</td>
<td>base + readxl</td>
<td>Download file, then <code>read_excel(temp_file)</code></td>
</tr>
</tbody>
</table>
<p>Before reading files, I usually set the working directory to the folder where my files are saved. This avoids typing full file paths every time.</p>
<p>To combine folder names and filenames dynamically: paste(getwd(), ‚Äúmy_data.csv‚Äù, sep = ‚Äú/‚Äù)</p>
<p><strong>Reading Local Files</strong></p>
<p>Once you‚Äôre in the right working directory, you can read in your files like below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/User/Desktop/Materials_ Course and proposals/Course Related/DataCamp/Data/Synthetic_data"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>patients <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"patients.csv"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>vaccination <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"immunizations.csv"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>medications <span class="ot">&lt;-</span> <span class="fu">read.csv</span> (<span class="fu">paste</span>(<span class="fu">getwd</span>(), <span class="st">"medications.csv"</span>, <span class="at">sep =</span> <span class="st">"/"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>These are <strong>standard CSVs</strong> and can be read using <code>read.csv()</code> from base R, or <code>read_csv()</code> from the <code>readr</code> package for cleaner output.</p>
<p><strong>Reading from ZIP Files</strong></p>
<p>Sometimes, especially when downloading from government databases or health systems, data is compressed into <code>.zip</code> files. In R, we can easily unzip these files and extract their contents.</p>
<p><strong>Set working directory to the folder where the zip file is located</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Define base folder manually (safe way without setwd)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>base_folder <span class="ot">&lt;-</span> <span class="st">"C:/Users/User/Desktop/Materials_ Course and proposals/Course Related/DataCamp/Data/Synthetic_data"</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Extract ZIP file into 'procedures' folder inside base</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span>(<span class="fu">file.path</span>(base_folder, <span class="st">"procedures.zip"</span>), <span class="at">exdir =</span> <span class="fu">file.path</span>(base_folder, <span class="st">"procedures"</span>))</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># --- List extracted files</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>(<span class="fu">file.path</span>(base_folder, <span class="st">"procedures"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "procedures"     "procedures.csv"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Read extracted CSV</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>procedures <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">file.path</span>(base_folder, <span class="st">"procedures"</span>, <span class="st">"procedures.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Reading Online Files</strong></p>
<p>If the file is online, we first <strong>download it</strong>, save it to a <strong>temporary file</strong>, and then read it:</p>
<p>It is useful when working with <strong>shared datasets, APIs, or GitHub repos</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Upload Online data</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/HabtamuBizuayehu/Data-sources/main/Breast_cancer_screening.xls"</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>temp_file <span class="ot">&lt;-</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">".xls"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(url, temp_file, <span class="at">mode =</span> <span class="st">"wb"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>breast_cancer_data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(temp_file)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>2.2 Exploring Data</strong></p>
<ul>
<li><code>str()</code>, <code>summary()</code>, <code>glimpse()</code>, <code>head()</code>, <code>tail()</code>, <code>count()</code></li>
<li>Viewing data: <code>view()</code>, <code>nrow()</code>, <code>ncol()</code></li>
<li>Cleaning variable names: <code>janitor::clean_names()</code></li>
<li>Creating a data dictionary</li>
<li>Working with column names and types</li>
</ul>
<p>Once we load data into R, it‚Äôs important to <strong>explore it properly</strong> before doing any analysis.<br>
This step helps us <strong>understand</strong>:</p>
<ul>
<li><p>What variables we have</p></li>
<li><p>How the data is structured</p></li>
<li><p>If there are any issues (like missing values, wrong data types, weird names)</p></li>
</ul>
<p>In this part, we‚Äôll look at some essential functions we often use at the very beginning of a project.</p>
<p>üîç <strong>Key Tools for Exploring Data (with Important Details and Tips)</strong></p>
<p><strong>1. <code>str()</code>, <code>summary()</code>, <code>glimpse()</code>, <code>head()</code>, <code>tail()</code>, <code>count()</code></strong></p>
<ul>
<li><p><code>str(df)</code> shows the <strong>structure of the entire dataset</strong>: number of observations (rows), number of variables (columns), and data types.</p></li>
<li><p><code>str(df$var)</code> shows the <strong>structure of a specific variable</strong> (single column), useful to quickly check type and contents.</p></li>
<li><p><code>summary(df)</code> gives <strong>basic descriptive statistics</strong> for <strong>all variables</strong> at once.</p></li>
<li><p><code>summary(df$var)</code> gives a <strong>summary for one specific variable</strong>.</p></li>
<li><p><code>glimpse(df)</code> (from <code>dplyr</code>) provides a <strong>compact sideways overview</strong> showing each variable name, type, and preview of values.</p></li>
<li><p><code>head(df)</code> shows the <strong>first 6 rows</strong> of the dataset by default.</p></li>
<li><p><code>head(df, n = 10)</code> shows the <strong>first 10 rows</strong> (you can customize the number with <code>n =</code>).</p></li>
<li><p><code>tail(df)</code> shows the <strong>last 6 rows</strong> of the dataset.</p></li>
<li><p><code>tail(df, n = 8)</code> shows the <strong>last 8 rows</strong>.</p></li>
<li><p><code>count(df, var)</code> (from <code>dplyr</code>) <strong>counts occurrences</strong> of each unique value in a variable.</p></li>
</ul>
<p>‚û°Ô∏è Using <code>str(df$var)</code> and <code>summary(df$var)</code> is a fast way to inspect just <strong>one column</strong> without needing the whole dataset.</p>
<hr>
<p><strong>2. Viewing Data</strong></p>
<ul>
<li><code>view(df)</code> opens an <strong>Excel-like data viewer window</strong> inside RStudio for easy manual exploration.</li>
<li><code>nrow(df)</code> returns the <strong>number of rows</strong>.</li>
<li><code>ncol(df)</code> returns the <strong>number of columns</strong>.</li>
<li><code>dim(df)</code> returns a <strong>two-number vector</strong>: (rows, columns).</li>
</ul>
<p>‚û°Ô∏è Use <code>view(df)</code> when you want to <strong>sort/filter manually</strong> without coding.</p>
<hr>
<p><strong>3. Cleaning Variable Names</strong></p>
<ul>
<li><code>janitor::clean_names(df)</code> standardizes messy variable names:
<ul>
<li>Makes all names <strong>lowercase</strong></li>
<li><strong>Replaces spaces and special characters</strong> with underscores</li>
<li>Removes parentheses, punctuation, etc.</li>
</ul></li>
</ul>
<p>‚û°Ô∏è Run <code>clean_names()</code> immediately after loading raw survey, registry, or administrative datasets.</p>
<p>Example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(patients)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Id"                  "BIRTHDATE"           "DEATHDATE"          
 [4] "SSN"                 "DRIVERS"             "PASSPORT"           
 [7] "PREFIX"              "FIRST"               "MIDDLE"             
[10] "LAST"                "SUFFIX"              "MAIDEN"             
[13] "MARITAL"             "RACE"                "ETHNICITY"          
[16] "GENDER"              "BIRTHPLACE"          "ADDRESS"            
[19] "CITY"                "STATE"               "COUNTY"             
[22] "FIPS"                "ZIP"                 "LAT"                
[25] "LON"                 "HEALTHCARE_EXPENSES" "HEALTHCARE_COVERAGE"
[28] "INCOME"             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(patients)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(temp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "id"                  "birthdate"           "deathdate"          
 [4] "ssn"                 "drivers"             "passport"           
 [7] "prefix"              "first"               "middle"             
[10] "last"                "suffix"              "maiden"             
[13] "marital"             "race"                "ethnicity"          
[16] "gender"              "birthplace"          "address"            
[19] "city"                "state"               "county"             
[22] "fips"                "zip"                 "lat"                
[25] "lon"                 "healthcare_expenses" "healthcare_coverage"
[28] "income"             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(temp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>üîç <strong>Listing All Data Frames and Variables</strong></p>
<p>To organize and review datasets loaded in the environment, the following workflow lists all data frames and their variables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> (breast_cancer_data, patients)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. List all data frames in the environment</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>dfs <span class="ot">&lt;-</span> <span class="fu">ls</span>(<span class="at">envir =</span> .GlobalEnv)[<span class="fu">sapply</span>(<span class="fu">ls</span>(<span class="at">envir =</span> .GlobalEnv), <span class="cf">function</span>(x) <span class="fu">is.data.frame</span>(<span class="fu">get</span>(x)))]</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. For each data frame, list its variable (column) names</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>df_variables <span class="ot">&lt;-</span> <span class="fu">lapply</span>(dfs, <span class="cf">function</span>(df_name) {</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  vars <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">get</span>(df_name))</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">DataFrame =</span> df_name,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">Variable =</span> vars,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Combine into one clean table</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>df_variables_all <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, df_variables)</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="co"># View the result</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(df_variables_all)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     DataFrame          Variable
1  medications             START
2  medications              STOP
3  medications           PATIENT
4  medications             PAYER
5  medications         ENCOUNTER
6  medications              CODE
7  medications       DESCRIPTION
8  medications         BASE_COST
9  medications    PAYER_COVERAGE
10 medications         DISPENSES
11 medications         TOTALCOST
12 medications        REASONCODE
13 medications REASONDESCRIPTION
14  procedures             START
15  procedures              STOP
16  procedures           PATIENT
17  procedures         ENCOUNTER
18  procedures            SYSTEM
19  procedures              CODE
20  procedures       DESCRIPTION
21  procedures         BASE_COST
22  procedures        REASONCODE
23  procedures REASONDESCRIPTION
24 vaccination              DATE
25 vaccination           PATIENT
26 vaccination         ENCOUNTER
27 vaccination              CODE
28 vaccination       DESCRIPTION
29 vaccination         BASE_COST</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> (df_variables_all, df_variables) <span class="co"># clean working enviroment </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>4. Creating a Data Dictionary</strong></p>
<p>A <strong>data dictionary</strong> is a simple but critical table that documents:</p>
<ul>
<li><strong>Variable names</strong> (column names)</li>
<li><strong>Descriptions</strong> (what each variable represents)</li>
<li><strong>Types</strong> (numeric, character, factor)</li>
</ul>
<p>‚û°Ô∏è We can automate building a basic data dictionary by combining <code>names()</code>, <code>sapply()</code>, and <code>class()</code> functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>data_dictionary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">names</span>(patients),</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Type =</span> <span class="fu">sapply</span>(patients, class)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The dictionary can be expanded by manually adding descriptions, coding instructions, or value mappings where necessary.</p>
<p><strong>5. Working with Column Names and Types</strong></p>
<ul>
<li><p><code>names(df)</code> or <code>colnames(df)</code> retrieves a list of all column names.</p></li>
<li><p><code>class(df$var)</code> reveals the <strong>data type of a specific variable</strong>.</p></li>
<li><p><code>sapply(df, class)</code> applies <code>class()</code> across all variables and summarizes their types.</p></li>
<li><p>If needed, variables can be recast to appropriate types.</p></li>
</ul>
<p>üìä <strong>Summary Table: Key Functions for Exploring Data</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 29%">
<col style="width: 43%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Task</strong></th>
<th style="text-align: left;"><strong>Function</strong></th>
<th style="text-align: left;"><strong>Purpose / What It Does</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">View structure of dataset</td>
<td style="text-align: left;"><code>str(df)</code></td>
<td style="text-align: left;">Shows structure: number of rows, columns, and variable types</td>
</tr>
<tr class="even">
<td style="text-align: left;">View structure of variable</td>
<td style="text-align: left;"><code>str(df$var)</code></td>
<td style="text-align: left;">Shows structure/type of a specific variable</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Summarize statistics (dataset)</td>
<td style="text-align: left;"><code>summary(df)</code></td>
<td style="text-align: left;">Provides summary stats (min, max, mean, NA count) for all variables</td>
</tr>
<tr class="even">
<td style="text-align: left;">Summarize statistics (variable)</td>
<td style="text-align: left;"><code>summary(df$var)</code></td>
<td style="text-align: left;">Summary stats for a specific variable</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Compact structure overview</td>
<td style="text-align: left;"><code>glimpse(df)</code></td>
<td style="text-align: left;">Quick, sideways compact view of dataset (from <code>dplyr</code>)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Preview first rows</td>
<td style="text-align: left;"><code>head(df)</code>, <code>head(df, n = 10)</code></td>
<td style="text-align: left;">Displays first 6 or specified number of rows</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Preview last rows</td>
<td style="text-align: left;"><code>tail(df)</code>, <code>tail(df, n = 8)</code></td>
<td style="text-align: left;">Displays last 6 or specified number of rows</td>
</tr>
<tr class="even">
<td style="text-align: left;">Count frequencies</td>
<td style="text-align: left;"><code>count(df, var)</code></td>
<td style="text-align: left;">Counts unique values and frequency of a specified variable</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Open full viewer</td>
<td style="text-align: left;"><code>view(df)</code></td>
<td style="text-align: left;">Opens Excel-style data viewer window (RStudio)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Check number of rows</td>
<td style="text-align: left;"><code>nrow(df)</code></td>
<td style="text-align: left;">Returns number of rows (observations)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Check number of columns</td>
<td style="text-align: left;"><code>ncol(df)</code></td>
<td style="text-align: left;">Returns number of columns (variables)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Check both dimensions</td>
<td style="text-align: left;"><code>dim(df)</code></td>
<td style="text-align: left;">Returns (rows, columns) as a two-number vector</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Clean column names</td>
<td style="text-align: left;"><code>janitor::clean_names(df)</code></td>
<td style="text-align: left;">Converts messy names into lowercase, underscore-separated names</td>
</tr>
<tr class="even">
<td style="text-align: left;">List variable names</td>
<td style="text-align: left;"><code>names(df)</code>, <code>colnames(df)</code></td>
<td style="text-align: left;">Lists all column names in a data frame</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Check variable type</td>
<td style="text-align: left;"><code>class(df$var)</code></td>
<td style="text-align: left;">Returns data type of a specific variable</td>
</tr>
<tr class="even">
<td style="text-align: left;">Check types for all variables</td>
<td style="text-align: left;"><code>sapply(df, class)</code></td>
<td style="text-align: left;">Returns data types for every column in the dataset</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Create basic data dictionary</td>
<td style="text-align: left;"><code>data.frame(Variable = names(df), Type = sapply(df, class))</code></td>
<td style="text-align: left;">Table summarizing variable names and types</td>
</tr>
<tr class="even">
<td style="text-align: left;">List all data frames in environment</td>
<td style="text-align: left;"><code>dfs &lt;- ls(...)[sapply(...)]</code></td>
<td style="text-align: left;">Identifies and lists all data frames currently loaded</td>
</tr>
<tr class="odd">
<td style="text-align: left;">List all variables from all data frames</td>
<td style="text-align: left;"><code>lapply(dfs, function(x) names(get(x)))</code></td>
<td style="text-align: left;">Creates table listing data frames and their variables</td>
</tr>
</tbody>
</table>
<p>Now I can apply some of the above to my datasets (df): such as breast_cancer_data, vaccination, patients</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>breast_cancer_data_demo <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sa3name, state, year, part50_74, rate50_74)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Structure of the demo dataset</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(breast_cancer_data_demo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   1364 obs. of  5 variables:
 $ sa3name  : chr  "Queanbeyan" "Queanbeyan" "Queanbeyan" "Queanbeyan" ...
 $ state    : chr  "NSW" "NSW" "NSW" "NSW" ...
 $ year     : int  201617 201718 201819 201920 201617 201718 201819 201920 201617 201718 ...
 $ part50_74: num  4875 5048 5276 5179 1850 ...
 $ rate50_74: num  60.5 60.8 61.4 58.2 59.7 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics for rate50_74</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(breast_cancer_data_demo<span class="sc">$</span>rate50_74)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   5.40   50.07   54.50   53.63   57.88   80.20     135 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display first 10 rows</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_cancer_data_demo, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           sa3name state   year part50_74 rate50_74
1       Queanbeyan   NSW 201617      4875  60.50000
2       Queanbeyan   NSW 201718      5048  60.75961
3       Queanbeyan   NSW 201819      5276  61.43839
4       Queanbeyan   NSW 201920      5179  58.16834
5  Snowy Mountains   NSW 201617      1850  59.70000
6  Snowy Mountains   NSW 201718      1910  61.54862
7  Snowy Mountains   NSW 201819      2039  65.12912
8  Snowy Mountains   NSW 201920      1979  62.23419
9      South Coast   NSW 201617      9469  62.80000
10     South Coast   NSW 201718      9565  62.94230</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count number of records</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(breast_cancer_data_demo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     n
1 1364</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show variable names</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(breast_cancer_data_demo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "sa3name"   "state"     "year"      "part50_74" "rate50_74"</code></pre>
</div>
</div>
</section>
</section>
<section id="part-iii-wrangling-with-dplyr" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="part-iii-wrangling-with-dplyr"><span class="header-section-number">1.4</span> <strong>PART III: WRANGLING WITH <code>dplyr</code></strong></h2>
<p>In this part, we focus on mastering core data wrangling skills using the <code>dplyr</code> package, one of the most powerful tools in R for data manipulation.<br>
We will learn how to select, rename, create, modify, group, sort, slice, and reshape datasets.<br>
These operations form the foundation for preparing clean, organized, and analysis-ready data.</p>
<p>Each subsection introduces a set of essential verbs (<code>select()</code>, <code>mutate()</code>, <code>group_by()</code>, etc.) that allow for data transformation pipelines. Examples and practical applications will be provided throughout to demonstrate how to use <code>dplyr</code>.</p>
<hr>
<section id="selecting-dropping-reordering-and-renaming-variables-columns" class="level3" data-number="1.4.1">
<h3 data-number="1.4.1" class="anchored" data-anchor-id="selecting-dropping-reordering-and-renaming-variables-columns"><span class="header-section-number">1.4.1</span> <strong>3.1 Selecting, Dropping, Reordering, and Renaming Variables (Columns)</strong></h3>
<ul>
<li><code>select()</code>, <code>rename()</code>, relocate()`</li>
<li>Column helpers: <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>, <code>last_clos</code>, <code>matches</code></li>
<li>Allow modifying entire groups of column names by adding prefixes or suffixes</li>
<li>Handling null/missing column names</li>
</ul>
<p>Selecting, reordering, and renaming variables is often the first step when preparing a dataset for analysis.<br>
In <code>dplyr</code>, we use functions such as <code>select()</code>, <code>rename()</code>, and <code>relocate()</code> to organize variables, clean up data, and prepare for transformations.<br>
Dropping unnecessary columns or reordering variables can make the data cleaner, faster to work with, and easier to understand.</p>
<p>Additional tools allow modifying groups of column names by adding prefixes or suffixes, and safely handling missing columns during selection.</p>
<hr>
<p><strong>üîπ Summary of Functions for Selecting, Reordering, Dropping, and Renaming</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Task</strong></th>
<th style="text-align: left;"><strong>Function</strong></th>
<th style="text-align: left;"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Select specific columns</td>
<td style="text-align: left;"><code>select()</code></td>
<td style="text-align: left;">Choose a subset of columns based on name or condition</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rename columns</td>
<td style="text-align: left;"><code>rename()</code></td>
<td style="text-align: left;">Rename one or multiple columns</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Relocate columns</td>
<td style="text-align: left;"><code>relocate()</code></td>
<td style="text-align: left;">Move selected columns to a new position</td>
</tr>
<tr class="even">
<td style="text-align: left;">Reorder manually</td>
<td style="text-align: left;"><code>select(a, b, c, everything())</code></td>
<td style="text-align: left;">Explicitly define column order</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Find columns by pattern</td>
<td style="text-align: left;"><code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>, <code>matches()</code></td>
<td style="text-align: left;">Select columns matching a pattern</td>
</tr>
<tr class="even">
<td style="text-align: left;">Drop single column</td>
<td style="text-align: left;"><code>select(-col1)</code></td>
<td style="text-align: left;">Remove one variable</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Drop multiple columns</td>
<td style="text-align: left;"><code>select(-col1, -col2)</code></td>
<td style="text-align: left;">Remove several variables</td>
</tr>
<tr class="even">
<td style="text-align: left;">Drop by pattern</td>
<td style="text-align: left;"><code>select(-starts_with("temp"))</code>, <code>select(-contains("score"))</code></td>
<td style="text-align: left;">Remove variables based on naming patterns</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Add prefix to column names</td>
<td style="text-align: left;"><code>rename_with(~ paste0("prefix_", .x))</code></td>
<td style="text-align: left;">Add a prefix to selected columns</td>
</tr>
<tr class="even">
<td style="text-align: left;">Add suffix to column names</td>
<td style="text-align: left;"><code>rename_with(~ paste0(.x, "_suffix"))</code></td>
<td style="text-align: left;">Add a suffix to selected columns</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Handle missing columns safely</td>
<td style="text-align: left;"><code>if("var" %in% names(df)) {}</code></td>
<td style="text-align: left;">Avoid errors when column does not exist</td>
</tr>
</tbody>
</table>
<hr>
<p>‚û°Ô∏è These techniques allow quick restructuring of datasets, improving workflow efficiency and clarity.</p>
<hr>
<p>üîπ Examples Using the <code>vaccination</code> Dataset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting specific columns manually</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>breast_selected <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sa3code, sa3name, year, part50_74, pop50_74)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_selected, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sa3code    sa3name   year part50_74 pop50_74
1   10102 Queanbeyan 201617      4875     8052
2   10102 Queanbeyan 201718      5048     8309
3   10102 Queanbeyan 201819      5276     8588</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reordering columns manually (bring year, sa3name, state first)</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>bc_reorder_manual <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, sa3name, state, <span class="fu">everything</span>())</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_reorder_manual, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    year    sa3name state sa3code sa3coden part50_74 pop50_74 rate50_74
1 201617 Queanbeyan   NSW   10102    10102      4875     8052  60.50000
2 201718 Queanbeyan   NSW   10102    10102      5048     8309  60.75961
3 201819 Queanbeyan   NSW   10102    10102      5276     8588  61.43839
  agen50_74 expct50_74 part50_69 pop50_69 rate50_69 agen50_69 expct50_69
1         3       4428      4309     7145  60.30000         2       3929
2         3       4553      4448     7338  60.62238         2       4013
3         3       4706      4629     7548  61.33203         2       4113
  part50_54 pop50_54 rate50_54 agen50_54 expct50_54 part55_59 pop55_59
1      1284     2251  57.00000         1       1118      1188     1970
2      1285     2306  55.72035         1       1143      1260     2030
3      1375     2342  58.70977         1       1166      1252     2093
  rate55_59 agen55_59 expct55_59 part60_64 pop60_64 rate60_64 agen60_64
1  60.30000         4       1046      1012     1625  62.30000         5
2  62.09035         4       1069      1048     1646  63.69947         5
3  59.81504         4       1098      1105     1689  65.43657         5
  expct60_64 part65_69 pop65_69 rate65_69 agen65_69 expct65_69 part70_74
1        950       826     1300  63.50000         6        781       566
2        953       855     1357  63.02558         6        812       600
3        967       898     1426  63.00429         6        849       647
  pop70_74 rate70_74 agen70_74 expct70_74
1      907  62.40000         7        498
2      971  61.79725         7        541
3     1040  62.21032         7        585</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relocating specific columns before another variable</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>bc_relocate_before <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(part50_74, pop50_74, <span class="at">.before =</span> rate50_74)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_relocate_before, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sa3code sa3coden    sa3name state   year part50_74 pop50_74 rate50_74
1   10102    10102 Queanbeyan   NSW 201617      4875     8052  60.50000
2   10102    10102 Queanbeyan   NSW 201718      5048     8309  60.75961
3   10102    10102 Queanbeyan   NSW 201819      5276     8588  61.43839
  agen50_74 expct50_74 part50_69 pop50_69 rate50_69 agen50_69 expct50_69
1         3       4428      4309     7145  60.30000         2       3929
2         3       4553      4448     7338  60.62238         2       4013
3         3       4706      4629     7548  61.33203         2       4113
  part50_54 pop50_54 rate50_54 agen50_54 expct50_54 part55_59 pop55_59
1      1284     2251  57.00000         1       1118      1188     1970
2      1285     2306  55.72035         1       1143      1260     2030
3      1375     2342  58.70977         1       1166      1252     2093
  rate55_59 agen55_59 expct55_59 part60_64 pop60_64 rate60_64 agen60_64
1  60.30000         4       1046      1012     1625  62.30000         5
2  62.09035         4       1069      1048     1646  63.69947         5
3  59.81504         4       1098      1105     1689  65.43657         5
  expct60_64 part65_69 pop65_69 rate65_69 agen65_69 expct65_69 part70_74
1        950       826     1300  63.50000         6        781       566
2        953       855     1357  63.02558         6        812       600
3        967       898     1426  63.00429         6        849       647
  pop70_74 rate70_74 agen70_74 expct70_74
1      907  62.40000         7        498
2      971  61.79725         7        541
3     1040  62.21032         7        585</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relocating specific columns after another variable</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>bc_relocate_after <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(sa3name, state, <span class="at">.after =</span> year)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_relocate_after, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sa3code sa3coden   year    sa3name state part50_74 pop50_74 rate50_74
1   10102    10102 201617 Queanbeyan   NSW      4875     8052  60.50000
2   10102    10102 201718 Queanbeyan   NSW      5048     8309  60.75961
3   10102    10102 201819 Queanbeyan   NSW      5276     8588  61.43839
  agen50_74 expct50_74 part50_69 pop50_69 rate50_69 agen50_69 expct50_69
1         3       4428      4309     7145  60.30000         2       3929
2         3       4553      4448     7338  60.62238         2       4013
3         3       4706      4629     7548  61.33203         2       4113
  part50_54 pop50_54 rate50_54 agen50_54 expct50_54 part55_59 pop55_59
1      1284     2251  57.00000         1       1118      1188     1970
2      1285     2306  55.72035         1       1143      1260     2030
3      1375     2342  58.70977         1       1166      1252     2093
  rate55_59 agen55_59 expct55_59 part60_64 pop60_64 rate60_64 agen60_64
1  60.30000         4       1046      1012     1625  62.30000         5
2  62.09035         4       1069      1048     1646  63.69947         5
3  59.81504         4       1098      1105     1689  65.43657         5
  expct60_64 part65_69 pop65_69 rate65_69 agen65_69 expct65_69 part70_74
1        950       826     1300  63.50000         6        781       566
2        953       855     1357  63.02558         6        812       600
3        967       898     1426  63.00429         6        849       647
  pop70_74 rate70_74 agen70_74 expct70_74
1      907  62.40000         7        498
2      971  61.79725         7        541
3     1040  62.21032         7        585</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dropping one variable</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>bc_drop_one <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>expct50_74)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_drop_one, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sa3code sa3coden    sa3name state   year part50_74 pop50_74 rate50_74
1   10102    10102 Queanbeyan   NSW 201617      4875     8052  60.50000
2   10102    10102 Queanbeyan   NSW 201718      5048     8309  60.75961
3   10102    10102 Queanbeyan   NSW 201819      5276     8588  61.43839
  agen50_74 part50_69 pop50_69 rate50_69 agen50_69 expct50_69 part50_54
1         3      4309     7145  60.30000         2       3929      1284
2         3      4448     7338  60.62238         2       4013      1285
3         3      4629     7548  61.33203         2       4113      1375
  pop50_54 rate50_54 agen50_54 expct50_54 part55_59 pop55_59 rate55_59
1     2251  57.00000         1       1118      1188     1970  60.30000
2     2306  55.72035         1       1143      1260     2030  62.09035
3     2342  58.70977         1       1166      1252     2093  59.81504
  agen55_59 expct55_59 part60_64 pop60_64 rate60_64 agen60_64 expct60_64
1         4       1046      1012     1625  62.30000         5        950
2         4       1069      1048     1646  63.69947         5        953
3         4       1098      1105     1689  65.43657         5        967
  part65_69 pop65_69 rate65_69 agen65_69 expct65_69 part70_74 pop70_74
1       826     1300  63.50000         6        781       566      907
2       855     1357  63.02558         6        812       600      971
3       898     1426  63.00429         6        849       647     1040
  rate70_74 agen70_74 expct70_74
1  62.40000         7        498
2  61.79725         7        541
3  62.21032         7        585</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dropping multiple variables</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>bc_drop_multiple <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>expct50_74, <span class="sc">-</span>expct50_69)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_drop_multiple, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sa3code sa3coden    sa3name state   year part50_74 pop50_74 rate50_74
1   10102    10102 Queanbeyan   NSW 201617      4875     8052  60.50000
2   10102    10102 Queanbeyan   NSW 201718      5048     8309  60.75961
3   10102    10102 Queanbeyan   NSW 201819      5276     8588  61.43839
  agen50_74 part50_69 pop50_69 rate50_69 agen50_69 part50_54 pop50_54 rate50_54
1         3      4309     7145  60.30000         2      1284     2251  57.00000
2         3      4448     7338  60.62238         2      1285     2306  55.72035
3         3      4629     7548  61.33203         2      1375     2342  58.70977
  agen50_54 expct50_54 part55_59 pop55_59 rate55_59 agen55_59 expct55_59
1         1       1118      1188     1970  60.30000         4       1046
2         1       1143      1260     2030  62.09035         4       1069
3         1       1166      1252     2093  59.81504         4       1098
  part60_64 pop60_64 rate60_64 agen60_64 expct60_64 part65_69 pop65_69
1      1012     1625  62.30000         5        950       826     1300
2      1048     1646  63.69947         5        953       855     1357
3      1105     1689  65.43657         5        967       898     1426
  rate65_69 agen65_69 expct65_69 part70_74 pop70_74 rate70_74 agen70_74
1  63.50000         6        781       566      907  62.40000         7
2  63.02558         6        812       600      971  61.79725         7
3  63.00429         6        849       647     1040  62.21032         7
  expct70_74
1        498
2        541
3        585</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dropping variables by pattern (e.g., columns ending with "_69")</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>bc_drop_by_pattern <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">ends_with</span>(<span class="st">"_69"</span>))</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_drop_by_pattern, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sa3code sa3coden    sa3name state   year part50_74 pop50_74 rate50_74
1   10102    10102 Queanbeyan   NSW 201617      4875     8052  60.50000
2   10102    10102 Queanbeyan   NSW 201718      5048     8309  60.75961
3   10102    10102 Queanbeyan   NSW 201819      5276     8588  61.43839
  agen50_74 expct50_74 part50_54 pop50_54 rate50_54 agen50_54 expct50_54
1         3       4428      1284     2251  57.00000         1       1118
2         3       4553      1285     2306  55.72035         1       1143
3         3       4706      1375     2342  58.70977         1       1166
  part55_59 pop55_59 rate55_59 agen55_59 expct55_59 part60_64 pop60_64
1      1188     1970  60.30000         4       1046      1012     1625
2      1260     2030  62.09035         4       1069      1048     1646
3      1252     2093  59.81504         4       1098      1105     1689
  rate60_64 agen60_64 expct60_64 part70_74 pop70_74 rate70_74 agen70_74
1  62.30000         5        950       566      907  62.40000         7
2  63.69947         5        953       600      971  61.79725         7
3  65.43657         5        967       647     1040  62.21032         7
  expct70_74
1        498
2        541
3        585</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Renaming a column for clarity</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>breast_renamed <span class="ot">&lt;-</span> breast_selected <span class="sc">%&gt;%</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">SA3_Code =</span> sa3code, <span class="at">SA3_Name =</span> sa3name, <span class="at">Year =</span> year)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_renamed, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  SA3_Code   SA3_Name   Year part50_74 pop50_74
1    10102 Queanbeyan 201617      4875     8052
2    10102 Queanbeyan 201718      5048     8309
3    10102 Queanbeyan 201819      5276     8588</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding a prefix to all column names</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>bc_prefixed <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">paste0</span>(<span class="st">"bc_"</span>, .x))</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_prefixed, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  bc_sa3code bc_sa3coden bc_sa3name bc_state bc_year bc_part50_74 bc_pop50_74
1      10102       10102 Queanbeyan      NSW  201617         4875        8052
2      10102       10102 Queanbeyan      NSW  201718         5048        8309
3      10102       10102 Queanbeyan      NSW  201819         5276        8588
  bc_rate50_74 bc_agen50_74 bc_expct50_74 bc_part50_69 bc_pop50_69 bc_rate50_69
1     60.50000            3          4428         4309        7145     60.30000
2     60.75961            3          4553         4448        7338     60.62238
3     61.43839            3          4706         4629        7548     61.33203
  bc_agen50_69 bc_expct50_69 bc_part50_54 bc_pop50_54 bc_rate50_54 bc_agen50_54
1            2          3929         1284        2251     57.00000            1
2            2          4013         1285        2306     55.72035            1
3            2          4113         1375        2342     58.70977            1
  bc_expct50_54 bc_part55_59 bc_pop55_59 bc_rate55_59 bc_agen55_59
1          1118         1188        1970     60.30000            4
2          1143         1260        2030     62.09035            4
3          1166         1252        2093     59.81504            4
  bc_expct55_59 bc_part60_64 bc_pop60_64 bc_rate60_64 bc_agen60_64
1          1046         1012        1625     62.30000            5
2          1069         1048        1646     63.69947            5
3          1098         1105        1689     65.43657            5
  bc_expct60_64 bc_part65_69 bc_pop65_69 bc_rate65_69 bc_agen65_69
1           950          826        1300     63.50000            6
2           953          855        1357     63.02558            6
3           967          898        1426     63.00429            6
  bc_expct65_69 bc_part70_74 bc_pop70_74 bc_rate70_74 bc_agen70_74
1           781          566         907     62.40000            7
2           812          600         971     61.79725            7
3           849          647        1040     62.21032            7
  bc_expct70_74
1           498
2           541
3           585</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding a suffix to all column names</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>bc_suffixed <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">paste0</span>(.x, <span class="st">"_info"</span>))</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_suffixed, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sa3code_info sa3coden_info sa3name_info state_info year_info part50_74_info
1        10102         10102   Queanbeyan        NSW    201617           4875
2        10102         10102   Queanbeyan        NSW    201718           5048
3        10102         10102   Queanbeyan        NSW    201819           5276
  pop50_74_info rate50_74_info agen50_74_info expct50_74_info part50_69_info
1          8052       60.50000              3            4428           4309
2          8309       60.75961              3            4553           4448
3          8588       61.43839              3            4706           4629
  pop50_69_info rate50_69_info agen50_69_info expct50_69_info part50_54_info
1          7145       60.30000              2            3929           1284
2          7338       60.62238              2            4013           1285
3          7548       61.33203              2            4113           1375
  pop50_54_info rate50_54_info agen50_54_info expct50_54_info part55_59_info
1          2251       57.00000              1            1118           1188
2          2306       55.72035              1            1143           1260
3          2342       58.70977              1            1166           1252
  pop55_59_info rate55_59_info agen55_59_info expct55_59_info part60_64_info
1          1970       60.30000              4            1046           1012
2          2030       62.09035              4            1069           1048
3          2093       59.81504              4            1098           1105
  pop60_64_info rate60_64_info agen60_64_info expct60_64_info part65_69_info
1          1625       62.30000              5             950            826
2          1646       63.69947              5             953            855
3          1689       65.43657              5             967            898
  pop65_69_info rate65_69_info agen65_69_info expct65_69_info part70_74_info
1          1300       63.50000              6             781            566
2          1357       63.02558              6             812            600
3          1426       63.00429              6             849            647
  pop70_74_info rate70_74_info agen70_74_info expct70_74_info
1           907       62.40000              7             498
2           971       61.79725              7             541
3          1040       62.21032              7             585</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Handling missing columns safely during selection</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="st">"non_existing_column"</span> <span class="sc">%in%</span> <span class="fu">names</span>(breast_cancer_data)) {</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  bc_safe_select <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(non_existing_column)</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(bc_safe_select, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">"Column 'non_existing_column' not found in breast_cancer_data."</span>)</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Column 'non_existing_column' not found in breast_cancer_data.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove all temporary objects created in this chunk</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(breast_selected, breast_renamed, bc_drop_one, bc_drop_multiple, bc_drop_by_pattern,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>   bc_reorder_manual, bc_relocate_before, bc_relocate_after,</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>   bc_prefixed, bc_suffixed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creating-and-modifying-variables-columns" class="level3" data-number="1.4.2">
<h3 data-number="1.4.2" class="anchored" data-anchor-id="creating-and-modifying-variables-columns"><span class="header-section-number">1.4.2</span> <strong>3.2 Creating and Modifying Variables (Columns)</strong></h3>
<ul>
<li><code>mutate()</code>, <code>transmute()</code>, recoding, <code>case_when()</code>, <code>if_else()</code></li>
<li><code>str_detect(), regex(), %in%</code></li>
<li>Creating dummy/flag variables</li>
<li>String manipulation: <code>strsplit()</code>, <code>sub()</code>, <code>gsub()</code>, <code>tolower(), `janitor::clean_names()`</code></li>
</ul>
<p>Creating new variables or modifying existing ones is a key part of preparing data for analysis.<br>
In <code>dplyr</code>, we use functions like <code>mutate()</code> and <code>transmute()</code> to add, transform, or recode variables.<br>
We can also create conditional variables with <code>case_when()</code> or <code>if_else()</code>, and apply string operations such as splitting, replacing, or converting text.</p>
<p>These steps help structure the data more logically, highlight important features, or derive new indicators for analysis.</p>
<hr>
<p>üîπ <strong>Summary of Functions for Creating and Modifying Variables</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 25%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Task</strong></th>
<th style="text-align: left;"><strong>Function</strong></th>
<th style="text-align: left;"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Create or modify variables</td>
<td style="text-align: left;"><code>mutate()</code></td>
<td style="text-align: left;">Add or transform variables, keeping all columns</td>
</tr>
<tr class="even">
<td style="text-align: left;">Create new variables only</td>
<td style="text-align: left;"><code>transmute()</code></td>
<td style="text-align: left;">Keep only new variables created</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Conditional variable creation</td>
<td style="text-align: left;"><code>case_when()</code></td>
<td style="text-align: left;">Create new variables based on multiple conditions</td>
</tr>
<tr class="even">
<td style="text-align: left;">Simple conditional assignment</td>
<td style="text-align: left;"><code>if_else()</code></td>
<td style="text-align: left;">Assign based on TRUE/FALSE logic</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Split strings into parts</td>
<td style="text-align: left;"><code>strsplit()</code></td>
<td style="text-align: left;">Split a string into components</td>
</tr>
<tr class="even">
<td style="text-align: left;">Replace text (first occurrence)</td>
<td style="text-align: left;"><code>sub()</code></td>
<td style="text-align: left;">Replace first match of a pattern</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Replace text (all occurrences)</td>
<td style="text-align: left;"><code>gsub()</code></td>
<td style="text-align: left;">Replace all matches of a pattern</td>
</tr>
<tr class="even">
<td style="text-align: left;">Convert text to lowercase</td>
<td style="text-align: left;"><code>tolower()</code></td>
<td style="text-align: left;">Standardize text to lowercase</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Detect text patterns</td>
<td style="text-align: left;"><code>str_detect()</code></td>
<td style="text-align: left;">Check if a pattern exists in text</td>
</tr>
<tr class="even">
<td style="text-align: left;">Flexible pattern matching</td>
<td style="text-align: left;"><code>regex()</code></td>
<td style="text-align: left;">Use regular expressions for complex patterns</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Membership check</td>
<td style="text-align: left;"><code>%in%</code></td>
<td style="text-align: left;">Test if a value is part of a group</td>
</tr>
</tbody>
</table>
<hr>
<p>‚û°Ô∏è These functions allow transforming the dataset systematically to extract new features, categorize information, or clean fields.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating and Modifying Variables (patients dataset)</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a new age group variable</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>patients_mutated <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_group =</span> <span class="fu">if_else</span>(BIRTHDATE <span class="sc">&lt;=</span> <span class="fu">as.Date</span>(<span class="st">"1970-01-01"</span>), <span class="st">"Below 70"</span>, <span class="st">"70+"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(age_group, <span class="at">.after =</span> BIRTHDATE) <span class="sc">%&gt;%</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Id, <span class="sc">-</span>DEATHDATE, <span class="sc">-</span>SSN, <span class="sc">-</span>LAT, <span class="sc">-</span>LON, <span class="sc">-</span>SUFFIX, <span class="sc">-</span>ZIP)</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_mutated, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    BIRTHDATE age_group   DRIVERS   PASSPORT PREFIX       FIRST       MIDDLE
1  1994-02-06       70+ S99996852 X47758697X    Mr.   Joshua658      Alvin56
2  1968-08-06  Below 70 S99993577 X28173268X    Mr.   Bennie663             
3  2008-12-21       70+                               Hunter736  Mckinley734
4  1994-01-27       70+ S99995100 X83694889X   Mrs.   Carlyn477 Florencia449
5  2019-07-27       70+                                 Robin66    Jeramy610
6  2019-04-18       70+                               Arthur650             
7  2013-08-10       70+                                 Caryl47     Lelia627
8  1968-08-06  Below 70 S99911538 X37637991X    Mr.  Willian804    Shelton25
9  2006-07-02       70+ S99943171               Ms. Domenica436             
10 1948-05-28  Below 70 S99941458 X59458953X    Mr.  Arnulfo253    Jordan900
            LAST   MAIDEN MARITAL  RACE   ETHNICITY GENDER
1       Kunde533                M white nonhispanic      M
2       Ebert178                D white nonhispanic      M
3     Gerlach374                  white nonhispanic      M
4  Williamson769 Rogahn59       M asian nonhispanic      F
5   Gleichner915                  white nonhispanic      M
6     Roberts511                  white nonhispanic      M
7    Kassulke119                  white nonhispanic      F
8      Keeling57                M white nonhispanic      M
9         Rau926                  white    hispanic      F
10  Jaskolski867                D white nonhispanic      M
                         BIRTHPLACE                     ADDRESS         CITY
1         Boston  Massachusetts  US            811 Kihn Viaduct    Braintree
2       Chicopee  Massachusetts  US 975 Pfannerstill Throughway    Braintree
3        Spencer  Massachusetts  US             548 Heller Lane Mattapoisett
4       Franklin  Massachusetts  US  160 Fadel Crossroad Apt 65      Wareham
5       Brockton  Massachusetts  US      766 Grant Loaf Unit 15    Groveland
6       Plymouth  Massachusetts  US            866 Kulas Harbor    Cambridge
7  East Falmouth  Massachusetts  US            578 Dickens Camp    Arlington
8        Methuen  Massachusetts  US      848 Ebert Knoll Unit 7    Braintree
9        Maynard  Massachusetts  US             963 Senger Fort    Haverhill
10        Boston  Massachusetts  US    757 Lockman Annex Apt 10   Georgetown
           STATE           COUNTY  FIPS HEALTHCARE_EXPENSES HEALTHCARE_COVERAGE
1  Massachusetts   Norfolk County 25021            56904.96            18019.99
2  Massachusetts   Norfolk County 25021           124024.12             1075.06
3  Massachusetts  Plymouth County    NA            45645.06             6154.94
4  Massachusetts  Plymouth County    NA            12895.15           659951.61
5  Massachusetts     Essex County    NA            18500.02             5493.57
6  Massachusetts Middlesex County 25017            14478.23              693.39
7  Massachusetts Middlesex County 25017             9821.14            27142.51
8  Massachusetts   Norfolk County 25021           175817.63            55473.97
9  Massachusetts     Essex County 25009            52933.16            11941.44
10 Massachusetts     Essex County    NA           242013.44           322768.97
   INCOME
1  100511
2   49737
3  133816
4   17382
5   52159
6   75767
7   58294
8   49737
9   77756
10  35255</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract month and year from date in form of date is YYYY-MM-DD HH:MM:SS</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span> (vaccination<span class="sc">$</span>DATE) <span class="co"># date is YYYY-MM-DD HH:MM:SS format.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:1619] "2016-04-10T09:04:48Z" "2016-04-10T09:04:48Z" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>vaccination <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_date =</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(DATE, <span class="at">format =</span> <span class="st">"%Y-%m-%dT%H:%M:%SZ"</span>)),  <span class="co"># First create vacc_date</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">format</span>(vacc_date, <span class="st">"%Y"</span>),         <span class="co"># Extract year</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">format</span>(vacc_date, <span class="st">"%B"</span>)          <span class="co"># Extract full month name (January, February, etc.)</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(vaccination)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "DATE"        "PATIENT"     "ENCOUNTER"   "CODE"        "DESCRIPTION"
[6] "BASE_COST"   "vacc_date"   "year"        "month"      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vaccination)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  DATE                              PATIENT
1 2016-04-10T09:04:48Z 30a6452c-4297-a1ac-977a-6a23237c7b46
2 2016-04-10T09:04:48Z 30a6452c-4297-a1ac-977a-6a23237c7b46
3 2016-04-10T09:04:48Z 30a6452c-4297-a1ac-977a-6a23237c7b46
4 2016-04-10T09:04:48Z 30a6452c-4297-a1ac-977a-6a23237c7b46
5 2002-10-29T19:07:21Z 34a4dcc4-35fb-6ad5-ab98-be285c586a4f
6 2005-11-01T19:07:21Z 34a4dcc4-35fb-6ad5-ab98-be285c586a4f
                             ENCOUNTER CODE
1 0b03e41b-06a6-66fa-b972-acc5a83b134a  140
2 0b03e41b-06a6-66fa-b972-acc5a83b134a  113
3 0b03e41b-06a6-66fa-b972-acc5a83b134a   43
4 0b03e41b-06a6-66fa-b972-acc5a83b134a  114
5 30ab48ec-35a7-7704-86e5-113ef6a90c03  140
6 d00bda57-b134-0654-e152-831ef486da53  140
                                                   DESCRIPTION BASE_COST
1           Influenza  seasonal  injectable  preservative free       136
2 Td (adult)  5 Lf tetanus toxoid  preservative free  adsorbed       136
3                                                 Hep B  adult       136
4                                          meningococcal MCV4P       136
5           Influenza  seasonal  injectable  preservative free       136
6           Influenza  seasonal  injectable  preservative free       136
   vacc_date year    month
1 2016-04-10 2016    April
2 2016-04-10 2016    April
3 2016-04-10 2016    April
4 2016-04-10 2016    April
5 2002-10-29 2002  October
6 2005-11-01 2005 November</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a dataset keeping only new variables (transmute)</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>patients_transmuted <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_name =</span> <span class="fu">paste</span>(FIRST, LAST, <span class="at">sep =</span> <span class="st">" "</span>), </span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">birth_year =</span> <span class="fu">format</span>(<span class="fu">as.Date</span>(BIRTHDATE), <span class="st">"%Y"</span>)</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> (patients_transmuted)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                full_name birth_year
1      Joshua658 Kunde533       1994
2      Bennie663 Ebert178       1968
3    Hunter736 Gerlach374       2008
4 Carlyn477 Williamson769       1994
5    Robin66 Gleichner915       2019
6    Arthur650 Roberts511       2019</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate a birth_year_group variable based on birth_year values</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>patients_transmuted <span class="ot">&lt;-</span> patients_transmuted <span class="sc">%&gt;%</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">birth_year_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&lt;</span> <span class="dv">1940</span> <span class="sc">~</span> <span class="st">"Before 1940"</span>,</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&gt;=</span> <span class="dv">1940</span> <span class="sc">&amp;</span> birth_year <span class="sc">&lt;=</span> <span class="dv">1959</span> <span class="sc">~</span> <span class="st">"1940‚Äì1959"</span>,</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&gt;=</span> <span class="dv">1960</span> <span class="sc">&amp;</span> birth_year <span class="sc">&lt;=</span> <span class="dv">1979</span> <span class="sc">~</span> <span class="st">"1960‚Äì1979"</span>,</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&gt;=</span> <span class="dv">1980</span> <span class="sc">&amp;</span> birth_year <span class="sc">&lt;=</span> <span class="dv">1999</span> <span class="sc">~</span> <span class="st">"1980‚Äì1999"</span>,</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&gt;=</span> <span class="dv">2000</span> <span class="sc">~</span> <span class="st">"2000 and later"</span>,</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_transmuted)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                full_name birth_year birth_year_group
1      Joshua658 Kunde533       1994        1980‚Äì1999
2      Bennie663 Ebert178       1968        1960‚Äì1979
3    Hunter736 Gerlach374       2008   2000 and later
4 Carlyn477 Williamson769       1994        1980‚Äì1999
5    Robin66 Gleichner915       2019   2000 and later
6    Arthur650 Roberts511       2019   2000 and later</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># other option to achieve similar result for the above </span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>patients_transmuted <span class="ot">&lt;-</span> patients_transmuted <span class="sc">%&gt;%</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">birth_year =</span> <span class="fu">as.numeric</span>(birth_year),   <span class="co"># Convert to numeric</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">birth_year_group =</span> <span class="fu">cut</span>(birth_year,     <span class="co"># Apply cut()</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>                                <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1939</span>, <span class="dv">1959</span>, <span class="dv">1979</span>, <span class="dv">1999</span>, <span class="cn">Inf</span>),</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>                                <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Before 1940"</span>, <span class="st">"1940‚Äì1959"</span>, <span class="st">"1960‚Äì1979"</span>, <span class="st">"1980‚Äì1999"</span>, <span class="st">"2000 and later"</span>),</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>                                <span class="at">right =</span> <span class="cn">TRUE</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>         ))</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_transmuted)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                full_name birth_year birth_year_group
1      Joshua658 Kunde533       1994        1980‚Äì1999
2      Bennie663 Ebert178       1968        1960‚Äì1979
3    Hunter736 Gerlach374       2008   2000 and later
4 Carlyn477 Williamson769       1994        1980‚Äì1999
5    Robin66 Gleichner915       2019   2000 and later
6    Arthur650 Roberts511       2019   2000 and later</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using case_when to assign marital status values</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>patients_case_when <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">marital_status_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    MARITAL <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">~</span> <span class="st">"Married"</span>,</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    MARITAL <span class="sc">==</span> <span class="st">"S"</span> <span class="sc">~</span> <span class="st">"Single"</span>,</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    MARITAL <span class="sc">==</span> <span class="st">"D"</span> <span class="sc">~</span> <span class="st">"Divorced"</span>,</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Unknown"</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(MARITAL, marital_status_group, RACE)</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_case_when, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   MARITAL marital_status_group  RACE
1        M              Married white
2        D             Divorced white
3                       Unknown white
4        M              Married asian
5                       Unknown white
6                       Unknown white
7                       Unknown white
8        M              Married white
9                       Unknown white
10       D             Divorced white</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(patients_case_when<span class="sc">$</span>marital_status, <span class="at">useNA =</span> <span class="st">"ifany"</span>)  <span class="co"># Show missing values in the table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Divorced  Married   Single  Unknown 
      15       33       12       46 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode marital status while leaving unknown values as missing</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>patients_case_when <span class="ot">&lt;-</span> patients_case_when <span class="sc">%&gt;%</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">marital_2group =</span> <span class="fu">case_when</span>(</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    MARITAL <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">~</span> <span class="st">"Partnered"</span>,</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    MARITAL <span class="sc">==</span> <span class="st">"D"</span> <span class="sc">|</span> MARITAL <span class="sc">==</span> <span class="st">"S"</span> <span class="sc">|</span> MARITAL <span class="sc">==</span> <span class="st">"W"</span> <span class="sc">~</span> <span class="st">"Not partnered"</span>,</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span>  <span class="co"># Replaces unknown values with missing (NA)</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>  )) </span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_case_when)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  MARITAL marital_status_group  RACE marital_2group
1       M              Married white      Partnered
2       D             Divorced white  Not partnered
3                      Unknown white           &lt;NA&gt;
4       M              Married asian      Partnered
5                      Unknown white           &lt;NA&gt;
6                      Unknown white           &lt;NA&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode race status while leaving unknown values as missing</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>patients_case_when <span class="ot">&lt;-</span> patients_case_when <span class="sc">%&gt;%</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race_grouped =</span> <span class="fu">case_when</span>(</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    RACE <span class="sc">==</span> <span class="st">'white'</span> <span class="sc">~</span> <span class="st">"White"</span>,</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>    RACE <span class="sc">==</span> <span class="st">"asian"</span> <span class="sc">~</span> <span class="st">"Asian"</span>,</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    RACE <span class="sc">==</span> <span class="st">"native"</span> <span class="sc">|</span> RACE <span class="sc">==</span> <span class="st">"other"</span> <span class="sc">~</span> <span class="st">"Other"</span>,</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(RACE, race_grouped)</span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_case_when, <span class="at">n=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    RACE race_grouped
1  white        White
2  white        White
3  white        White
4  asian        Asian
5  white        White
6  white        White
7  white        White
8  white        White
9  white        White
10 white        White</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple conditional assignment with if_else</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>patients<span class="sc">$</span>PASSPORT[patients<span class="sc">$</span>PASSPORT <span class="sc">==</span> <span class="st">""</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span> <span class="co"># formatting the variable to know missing values</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sum</span>(<span class="fu">is.na</span>(patients<span class="sc">$</span>PASSPORT))) <span class="co">#  31 missing value</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>patients_if_else <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">has_passport =</span> <span class="fu">if_else</span>(<span class="sc">!</span><span class="fu">is.na</span>(PASSPORT), <span class="st">"Yes"</span>, <span class="st">"No"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PASSPORT, has_passport)</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_if_else, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     PASSPORT has_passport
1  X47758697X          Yes
2  X28173268X          Yes
3        &lt;NA&gt;           No
4  X83694889X          Yes
5        &lt;NA&gt;           No
6        &lt;NA&gt;           No
7        &lt;NA&gt;           No
8  X37637991X          Yes
9        &lt;NA&gt;           No
10 X59458953X          Yes</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace the first occurrence (e.g., fix misspelled city name)</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>patients_sub <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">city_fixed =</span> <span class="fu">sub</span>(<span class="st">"Nwe York"</span>, <span class="st">"New York"</span>, CITY)) <span class="sc">%&gt;%</span> </span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Id, <span class="sc">-</span>DEATHDATE, <span class="sc">-</span>SSN, <span class="sc">-</span>LAT, <span class="sc">-</span>LON, <span class="sc">-</span>SUFFIX, <span class="sc">-</span>ZIP)</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_sub, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   BIRTHDATE   DRIVERS   PASSPORT PREFIX     FIRST      MIDDLE       LAST
1 1994-02-06 S99996852 X47758697X    Mr. Joshua658     Alvin56   Kunde533
2 1968-08-06 S99993577 X28173268X    Mr. Bennie663               Ebert178
3 2008-12-21                 &lt;NA&gt;        Hunter736 Mckinley734 Gerlach374
  MAIDEN MARITAL  RACE   ETHNICITY GENDER                  BIRTHPLACE
1              M white nonhispanic      M   Boston  Massachusetts  US
2              D white nonhispanic      M Chicopee  Massachusetts  US
3                white nonhispanic      M  Spencer  Massachusetts  US
                      ADDRESS         CITY         STATE          COUNTY  FIPS
1            811 Kihn Viaduct    Braintree Massachusetts  Norfolk County 25021
2 975 Pfannerstill Throughway    Braintree Massachusetts  Norfolk County 25021
3             548 Heller Lane Mattapoisett Massachusetts Plymouth County    NA
  HEALTHCARE_EXPENSES HEALTHCARE_COVERAGE INCOME   city_fixed
1            56904.96            18019.99 100511    Braintree
2           124024.12             1075.06  49737    Braintree
3            45645.06             6154.94 133816 Mattapoisett</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace all occurrences (e.g., replace spaces with underscores)</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>patients_gsub <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">birthplace_clean =</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, BIRTHPLACE)) <span class="sc">%&gt;%</span> </span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(BIRTHPLACE, birthplace_clean)</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_gsub, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   BIRTHPLACE            birthplace_clean
1   Boston  Massachusetts  US   Boston__Massachusetts__US
2 Chicopee  Massachusetts  US Chicopee__Massachusetts__US
3  Spencer  Massachusetts  US  Spencer__Massachusetts__US</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert last names to lowercase</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span> </span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Id, <span class="sc">-</span>DEATHDATE, <span class="sc">-</span>SSN, <span class="sc">-</span>LAT, <span class="sc">-</span>LON, <span class="sc">-</span>SUFFIX, <span class="sc">-</span>ZIP)</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>patients_tolower <span class="ot">&lt;-</span> temp </span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(patients_tolower) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">colnames</span>(patients_tolower)) </span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_tolower, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   birthdate   drivers   passport prefix     first      middle       last
1 1994-02-06 S99996852 X47758697X    Mr. Joshua658     Alvin56   Kunde533
2 1968-08-06 S99993577 X28173268X    Mr. Bennie663               Ebert178
3 2008-12-21                 &lt;NA&gt;        Hunter736 Mckinley734 Gerlach374
  maiden marital  race   ethnicity gender                  birthplace
1              M white nonhispanic      M   Boston  Massachusetts  US
2              D white nonhispanic      M Chicopee  Massachusetts  US
3                white nonhispanic      M  Spencer  Massachusetts  US
                      address         city         state          county  fips
1            811 Kihn Viaduct    Braintree Massachusetts  Norfolk County 25021
2 975 Pfannerstill Throughway    Braintree Massachusetts  Norfolk County 25021
3             548 Heller Lane Mattapoisett Massachusetts Plymouth County    NA
  healthcare_expenses healthcare_coverage income
1            56904.96            18019.99 100511
2           124024.12             1075.06  49737
3            45645.06             6154.94 133816</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(temp)</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="co">#`janitor::clean_names(df)` standardizes variable names:</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(patients)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Id"                  "BIRTHDATE"           "DEATHDATE"          
 [4] "SSN"                 "DRIVERS"             "PASSPORT"           
 [7] "PREFIX"              "FIRST"               "MIDDLE"             
[10] "LAST"                "SUFFIX"              "MAIDEN"             
[13] "MARITAL"             "RACE"                "ETHNICITY"          
[16] "GENDER"              "BIRTHPLACE"          "ADDRESS"            
[19] "CITY"                "STATE"               "COUNTY"             
[22] "FIPS"                "ZIP"                 "LAT"                
[25] "LON"                 "HEALTHCARE_EXPENSES" "HEALTHCARE_COVERAGE"
[28] "INCOME"             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(patients)</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(temp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "id"                  "birthdate"           "deathdate"          
 [4] "ssn"                 "drivers"             "passport"           
 [7] "prefix"              "first"               "middle"             
[10] "last"                "suffix"              "maiden"             
[13] "marital"             "race"                "ethnicity"          
[16] "gender"              "birthplace"          "address"            
[19] "city"                "state"               "county"             
[22] "fips"                "zip"                 "lat"                
[25] "lon"                 "healthcare_expenses" "healthcare_coverage"
[28] "income"             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove all temporary objects created in this chunk</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(patients_mutated, patients_transmuted, patients_case_when, patients_if_else,</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>   patients_split, patients_sub, patients_gsub, patients_tolower, temp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in rm(patients_mutated, patients_transmuted, patients_case_when, :
object 'patients_split' not found</code></pre>
</div>
</div>
<section id="creating-variable-from-long-text-splitting-text-extracting-words-in-to-different-variables" class="level4" data-number="1.4.2.1">
<h4 data-number="1.4.2.1" class="anchored" data-anchor-id="creating-variable-from-long-text-splitting-text-extracting-words-in-to-different-variables"><span class="header-section-number">1.4.2.1</span> <strong>3.2.1 Creating variable from long text: Splitting text: Extracting words in to different variables</strong></h4>
<p><strong>Parsing Text Fields in R: Handling Multi-Word Names</strong></p>
<p>In real-world datasets, it‚Äôs common to encounter text fields where multiple data elements‚Äîsuch as city, state, and country‚Äîare embedded within a single string. These entries often include inconsistent spacing, making them challenging to analyze directly.</p>
<p><strong>Parsing</strong> refers to the process of systematically breaking down these complex text fields into structured, usable components.</p>
<p><strong>parsing involves</strong></p>
<ul>
<li><strong>Detecting patterns</strong> in spacing‚Äîfor instance, identifying how many spaces exist between different parts of a string.</li>
<li><strong>Deciding where to split</strong> the string. For example, a single space might separate words within a single name such as city name (e.g., <code>"East Falmouth"</code>), while two or more spaces might indicate the boundary between city, state, and country (e.g., <code>"East Falmouth  Massachusetts  US"</code>).</li>
<li><strong>Creating new variables or columns</strong> such as <code>city</code>, <code>state</code>, and <code>country</code> for cleaner and more structured data representation.</li>
</ul>
<p><strong>parsing is important</strong></p>
<ul>
<li>Many administrative or imported datasets contain <strong>combined or messy fields</strong> that hinder direct analysis.</li>
<li>Proper parsing helps to <strong>standardize</strong> and <strong>clean</strong> these fields, which is a critical step for effective <strong>data management, visualization, and analysis</strong>.</li>
<li>It enables downstream tasks such as <strong>geographic grouping</strong>, <strong>mapping</strong>, and <strong>report generation</strong>.</li>
</ul>
<p><strong>Summary Table</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 40%">
<col style="width: 59%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>str_view()</code></td>
<td>Visually inspect spacing patterns between components</td>
</tr>
<tr class="even">
<td><code>str_extract_all(" +")</code></td>
<td>Extract all space sequences</td>
</tr>
<tr class="odd">
<td><code>map_int(..., length)</code></td>
<td>Count the number of space groups per entry</td>
</tr>
<tr class="even">
<td><code>str_count("\\S+")</code></td>
<td>Count the number of words</td>
</tr>
<tr class="odd">
<td><code>nchar()</code> with <code>map_chr()</code></td>
<td>Show the length of each space between words</td>
</tr>
<tr class="even">
<td><code>arrange(desc(word_count))</code></td>
<td>Identify rows with the most words (potential outliers)</td>
</tr>
</tbody>
</table>
<p><strong>Detecting and Understanding Space Patterns</strong></p>
<p>To begin, I used example data from the <code>patients$BIRTHPLACE</code> column to identify how different rows are structured and where inconsistencies might exist.</p>
<p><strong>1. Visual Inspection of Spacing</strong> We can use str_view() from the stringr package to highlight space sequences:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(patients<span class="sc">$</span>BIRTHPLACE[<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>], <span class="at">pattern =</span> <span class="st">" +"</span>, <span class="at">match =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] ‚îÇ Boston&lt;  &gt;Massachusetts&lt;  &gt;US
 [2] ‚îÇ Chicopee&lt;  &gt;Massachusetts&lt;  &gt;US
 [3] ‚îÇ Spencer&lt;  &gt;Massachusetts&lt;  &gt;US
 [4] ‚îÇ Franklin&lt;  &gt;Massachusetts&lt;  &gt;US
 [5] ‚îÇ Brockton&lt;  &gt;Massachusetts&lt;  &gt;US
 [6] ‚îÇ Plymouth&lt;  &gt;Massachusetts&lt;  &gt;US
 [7] ‚îÇ East&lt; &gt;Falmouth&lt;  &gt;Massachusetts&lt;  &gt;US
 [8] ‚îÇ Methuen&lt;  &gt;Massachusetts&lt;  &gt;US
 [9] ‚îÇ Maynard&lt;  &gt;Massachusetts&lt;  &gt;US
[10] ‚îÇ Boston&lt;  &gt;Massachusetts&lt;  &gt;US
[11] ‚îÇ Framingham&lt;  &gt;Massachusetts&lt;  &gt;US
[12] ‚îÇ Wayland&lt;  &gt;Massachusetts&lt;  &gt;US
[13] ‚îÇ Toulouse&lt;  &gt;Occitanie&lt;  &gt;FR
[14] ‚îÇ Framingham&lt;  &gt;Massachusetts&lt;  &gt;US
[15] ‚îÇ Lynn&lt;  &gt;Massachusetts&lt;  &gt;US</code></pre>
</div>
</div>
<p>This shows, for example: East&lt; &gt;Falmouth&lt; &gt;Massachusetts&lt; &gt;US Where: - One space connects city words (‚ÄúEast Falmouth‚Äù) - Two spaces separate city, state, and country</p>
<p><strong>2. Extract and Inspect Space Sequences</strong> Each row shows the space segments between words. This helps us detect whether extra or inconsistent spacing is present.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">space_groups =</span> <span class="fu">str_extract_all</span>(BIRTHPLACE, <span class="st">" +"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(BIRTHPLACE, space_groups) <span class="sc">%&gt;%</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   BIRTHPLACE space_groups
1   Boston  Massachusetts  US         ,   
2 Chicopee  Massachusetts  US         ,   
3  Spencer  Massachusetts  US         ,   
4 Franklin  Massachusetts  US         ,   
5 Brockton  Massachusetts  US         ,   
6 Plymouth  Massachusetts  US         ,   </code></pre>
</div>
</div>
<p><strong>3. Count Number of Space Groups</strong> This gives a frequency table showing how many rows have 2, 3, 4, or more space groups. A row with more than 2 groups may have extra words or inconsistent formatting.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">space_groups =</span> <span class="fu">str_extract_all</span>(BIRTHPLACE, <span class="st">" +"</span>),</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_spaces =</span> <span class="fu">map_int</span>(space_groups, length)</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(n_spaces)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  n_spaces  n
1        2 84
2        3 15
3        4  4
4        5  3</code></pre>
</div>
</div>
<p><strong>4. Count the Number of Words</strong> This confirms how many ‚Äúword segments‚Äù are in each row and helps identify malformed entries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">space_count =</span> <span class="fu">str_count</span>(BIRTHPLACE, <span class="st">" +"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(space_count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  space_count  n
1           2 84
2           3 15
3           4  4
4           5  3</code></pre>
</div>
</div>
<p><strong>5. Combine Word Count and Space Width</strong> To fully understand the complexity of each row, I extracted the number of words and the exact space widths between them:</p>
<p>This helps in identifying patterns like:</p>
<p>‚ÄúEast Falmouth Massachusetts US‚Äù ‚Üí 4 words, with spacing like 1 | 2 | 1</p>
<p>‚ÄúBoston Massachusetts US‚Äù ‚Üí 3 words, spacing 2 | 2</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">word_count =</span> <span class="fu">str_count</span>(BIRTHPLACE, <span class="st">"</span><span class="sc">\\</span><span class="st">S+"</span>),  <span class="co"># count non-space words</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">space_groups =</span> <span class="fu">str_extract_all</span>(BIRTHPLACE, <span class="st">" +"</span>),</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">space_lengths =</span> <span class="fu">map_chr</span>(space_groups, <span class="sc">~</span> <span class="fu">paste</span>(<span class="fu">nchar</span>(.x), <span class="at">collapse =</span> <span class="st">" | "</span>))  <span class="co"># lengths of spaces</span></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(word_count)) <span class="sc">%&gt;%</span></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(BIRTHPLACE, word_count, space_lengths) <span class="sc">%&gt;%</span></span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                 BIRTHPLACE word_count     space_lengths
1  Santiago de los Caballeros  Santiago  DO          6 1 | 1 | 1 | 2 | 2
2  Santiago de los Caballeros  Santiago  DO          6 1 | 1 | 1 | 2 | 2
3  Santiago de los Caballeros  Santiago  DO          6 1 | 1 | 1 | 2 | 2
4             San Salvador  El Salvador  SV          5     1 | 2 | 1 | 2
5      Santo Domingo  National District  DO          5     1 | 2 | 1 | 2
6         Portsmouth  Saint John Parish  DM          5     2 | 1 | 1 | 2
7           Wesley  Saint Andrew Parish  DM          5     2 | 1 | 1 | 2
8          East Falmouth  Massachusetts  US          4         1 | 2 | 2
9       West Springfield  Massachusetts  US          4         1 | 2 | 2
10        North Pembroke  Massachusetts  US          4         1 | 2 | 2
11    North Attleborough  Massachusetts  US          4         1 | 2 | 2
12                   Ponce  Puerto Rico  PR          4         2 | 1 | 2
13            Fall River  Massachusetts  US          4         1 | 2 | 2
14       South Deerfield  Massachusetts  US          4         1 | 2 | 2
15                 Bayamon  Puerto Rico  PR          4         2 | 1 | 2
16            Oak Bluffs  Massachusetts  US          4         1 | 2 | 2
17       North Lakeville  Massachusetts  US          4         1 | 2 | 2
18            Guatemala City  Guatemala  GT          4         1 | 2 | 2
19         North Andover  Massachusetts  US          4         1 | 2 | 2
20         North Reading  Massachusetts  US          4         1 | 2 | 2</code></pre>
</div>
</div>
<p>From observations in the data, split BIRTHPLACE by 2+ spaces would be more appropriate. Those two words having one space are the names for a city, state or country</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean and split birthplace into city, state/region, and country</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>patients_clean <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">parts =</span> <span class="fu">str_split</span>(BIRTHPLACE, <span class="st">" {2,}"</span>),             <span class="co"># split BIRTHPLACE by 2+ spaces</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># %||% is a shorthand from the rlang package (used implicitly here via purrr) that returns the left-hand side if it exists, otherwise returns the right-hand side.</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># eg If .x[2] exists, use it; otherwise, use NA (missing character).</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">city =</span> <span class="fu">map_chr</span>(parts, <span class="sc">~</span> .x[<span class="dv">1</span>] <span class="sc">%||%</span> <span class="cn">NA_character_</span>),  <span class="co"># city name (first part)</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> <span class="fu">map_chr</span>(parts, <span class="sc">~</span> .x[<span class="dv">2</span>] <span class="sc">%||%</span> <span class="cn">NA_character_</span>), <span class="co"># state or region (second part)</span></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">country =</span> <span class="fu">map_chr</span>(parts, <span class="sc">~</span> .x[<span class="dv">3</span>] <span class="sc">%||%</span> <span class="cn">NA_character_</span>)<span class="co"># country code (third part)</span></span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(BIRTHPLACE, city, state, country)</span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_clean, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         BIRTHPLACE          city         state country
1         Boston  Massachusetts  US        Boston Massachusetts      US
2       Chicopee  Massachusetts  US      Chicopee Massachusetts      US
3        Spencer  Massachusetts  US       Spencer Massachusetts      US
4       Franklin  Massachusetts  US      Franklin Massachusetts      US
5       Brockton  Massachusetts  US      Brockton Massachusetts      US
6       Plymouth  Massachusetts  US      Plymouth Massachusetts      US
7  East Falmouth  Massachusetts  US East Falmouth Massachusetts      US
8        Methuen  Massachusetts  US       Methuen Massachusetts      US
9        Maynard  Massachusetts  US       Maynard Massachusetts      US
10        Boston  Massachusetts  US        Boston Massachusetts      US</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(patients_clean, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                  BIRTHPLACE                       city
97                 Boston  Massachusetts  US                     Boston
98     North Attleborough  Massachusetts  US         North Attleborough
99                Taunton  Massachusetts  US                    Taunton
100            Chelmsford  Massachusetts  US                 Chelmsford
101                Boston  Massachusetts  US                     Boston
102             Holliston  Massachusetts  US                  Holliston
103 Santiago de los Caballeros  Santiago  DO Santiago de los Caballeros
104           Springfield  Massachusetts  US                Springfield
105             Fitchburg  Massachusetts  US                  Fitchburg
106       Millis-Clicquot  Massachusetts  US            Millis-Clicquot
            state country
97  Massachusetts      US
98  Massachusetts      US
99  Massachusetts      US
100 Massachusetts      US
101 Massachusetts      US
102 Massachusetts      US
103      Santiago      DO
104 Massachusetts      US
105 Massachusetts      US
106 Massachusetts      US</code></pre>
</div>
</div>
<p><strong>Conclusion</strong> From this exploration, we observe that:</p>
<ul>
<li><p>Most entries use single spaces within city names (e.g., ‚ÄúEast Falmouth‚Äù)</p></li>
<li><p>Two or more spaces are commonly used to separate city, state, and country names</p></li>
<li><p>Parsing using a split on ‚Äú{2,}‚Äù (two or more spaces) is a reliable strategy</p></li>
</ul>
</section>
<section id="text-pattern-analysis-and-variable-extraction-from-freeunstructured-text" class="level4" data-number="1.4.2.2">
<h4 data-number="1.4.2.2" class="anchored" data-anchor-id="text-pattern-analysis-and-variable-extraction-from-freeunstructured-text"><span class="header-section-number">1.4.2.2</span> <strong>3.2.2 Text Pattern Analysis and Variable Extraction from Free/unstructured Text</strong></h4>
<p>Free-text fields are common in public-health, administrative, and clinical datasets. While they are rich in information, the lack of structure and consistent vocabulary can limit their usefulness. In real-world datasets, especially in health, administration, and survey data, free-text fields often contain rich information hidden in inconsistent or varied language. A single concept (e.g., ‚ÄúCOVID-19 vaccine‚Äù) might appear in many forms such as ‚Äúcovid jab‚Äù, ‚Äúcovid-19 injection‚Äù, or ‚ÄúSARS-CoV-2 shot‚Äù. This presentation demonstrates how to transform unstructured text into structured, analyzable data using R. The workflow covers</p>
<ul>
<li>tokenization,</li>
<li>word-frequency analysis,</li>
<li>stop-word removal,</li>
<li>TF‚ÄìIDF to highlight context-specific terms,</li>
<li>word-cloud visualisation,</li>
<li>bigram and trigram extraction, and</li>
<li>pattern detection with regular expressions to create categorical variables.</li>
</ul>
<p><strong>Basic Tokenisation and Word-Frequency Table</strong></p>
<p>Tokenisation splits long strings of text into individual words or terms (‚Äútokens‚Äù). This enables us to calculate how often each word appears, which is essential for understanding vocabulary patterns.</p>
<p>We begin by loading the necessary R packages. If a package is not already installed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install packages when they are not already available</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"tidytext"</span>)) <span class="fu">install.packages</span>(<span class="st">"tidytext"</span>, <span class="at">dependencies =</span> <span class="cn">TRUE</span>)</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"wordcloud"</span>)) <span class="fu">install.packages</span>(<span class="st">"wordcloud"</span>, <span class="at">dependencies =</span> <span class="cn">TRUE</span>)</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"tm"</span>))        <span class="fu">install.packages</span>(<span class="st">"tm"</span>,        <span class="at">dependencies =</span> <span class="cn">TRUE</span>)</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)   <span class="co"># text mining utilities</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud)  <span class="co"># word-cloud plots</span></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)         <span class="co"># text-mining helpers used by wordcloud</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>word_freq <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, DESCRIPTION) <span class="sc">%&gt;%</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(word) <span class="sc">&amp;</span> word <span class="sc">!=</span> <span class="st">""</span>)</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(word_freq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          word   n
1         free 929
2 preservative 929
3    influenza 859
4   injectable 859
5     seasonal 859
6         dose 230</code></pre>
</div>
</div>
<p><strong>Remove Stop Words</strong></p>
<p>Stop words are common terms like ‚Äúand‚Äù, ‚Äúthe‚Äù, or ‚Äúin‚Äù that typically do not contribute meaningful information in analysis. Removing these helps us focus on content-rich terms.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"stop_words"</span>)          <span class="co"># built-in tidytext stop-word list</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>word_freq_clean <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, DESCRIPTION) <span class="sc">%&gt;%</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words, <span class="at">by =</span> <span class="st">"word"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(word_freq_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          word   n
1         free 929
2 preservative 929
3    influenza 859
4   injectable 859
5     seasonal 859
6         dose 230</code></pre>
</div>
</div>
<hr>
<p><strong>Visualise Word Frequencies</strong></p>
<p>This bar chart provides a visual overview of the most common meaningful words in the dataset after stop-word removal.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>word_freq_clean <span class="sc">%&gt;%</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(word, n), <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Most Frequent Words After Stop-Word Removal"</span>,</span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Word"</span>,</span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
<p><strong>Create a Word Cloud</strong></p>
<p>A word cloud presents word frequencies visually, with more frequent words appearing larger. It offers a quick snapshot of key terms in the dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>))  <span class="co"># reduce plot margins</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(<span class="at">words =</span> word_freq_clean<span class="sc">$</span>word,</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">freq =</span> word_freq_clean<span class="sc">$</span>n,</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">min.freq =</span> <span class="dv">1</span>,</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">max.words =</span> <span class="dv">100</span>,</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">random.order =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
<p><strong>TF‚ÄìIDF Analysis</strong></p>
<p>TF‚ÄìIDF (Term Frequency‚ÄìInverse Document Frequency) highlights words that are common within a group but rare across groups. This helps identify terms that are contextually important for specific subgroups.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example assumes a column called 'source_id' identifies individual documents</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>tfidf_result <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(source_id, DESCRIPTION) <span class="sc">%&gt;%</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, DESCRIPTION) <span class="sc">%&gt;%</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words, <span class="at">by =</span> <span class="st">"word"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(source_id, word, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_tf_idf</span>(word, source_id, n) <span class="sc">%&gt;%</span></span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(tf_idf))</span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tfidf_result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><strong>Bigrams and Trigrams (n-grams)</strong></p>
<p>Sometimes the context of words matters more than individual terms. N-grams (bigrams, trigrams, etc.) allow us to capture meaningful phrases instead of isolated words.</p>
<p><strong>Bigrams ‚Äì two-word phrases</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>bigrams <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(bigram, DESCRIPTION, <span class="at">token =</span> <span class="st">"ngrams"</span>, <span class="at">n =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(bigram, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bigrams)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   bigram   n
1       preservative free 929
2      influenza seasonal 859
3 injectable preservative 859
4     seasonal injectable 859
5                    &lt;NA&gt; 185
6                covid 19 144</code></pre>
</div>
</div>
<p><strong>Trigrams ‚Äì three-word phrases</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>trigrams <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(trigram, DESCRIPTION, <span class="at">token =</span> <span class="st">"ngrams"</span>, <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(trigram, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(trigrams)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                           trigram   n
1    influenza seasonal injectable 859
2     injectable preservative free 859
3 seasonal injectable preservative 859
4                             &lt;NA&gt; 319
5                      19 mrna lnp 142
6                    covid 19 mrna 142</code></pre>
</div>
</div>
<hr>
<p><strong>Create Categorical Variables from free and unstructured Text</strong></p>
<p>We use regular expressions to classify unstructured free-text values into consistent categories. This transformation is critical for summarising or modelling based on text. We can identify and map all words that contain a certain substring (like ‚Äúcovid‚Äù in ‚ÄúCOVID-19‚Äù, ‚Äúcovid_19‚Äù, or ‚Äúcovid‚Äù). You can use str_detect() with a case-insensitive regular expression to filter your word frequency table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>vaccination <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vaccine_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"covid|sars-cov-2"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"COVID-19"</span>,</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"influenza"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Influenza"</span>,</span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"hepatitis|hep a|hep b"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Hepatitis"</span>,</span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"hpv"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"HPV"</span>,</span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"mmr"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"MMR"</span>,</span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"dtap|tdap|tetanus|td </span><span class="sc">\\</span><span class="st">(?adult</span><span class="sc">\\</span><span class="st">)?"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"DTP group"</span>,</span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"ipv"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"IPV"</span>,</span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"hib"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Hib"</span>,</span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"meningococcal|mcv4"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Meningococcal"</span>,</span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"pneumococcal.*13"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Pneumococcal PCV13"</span>,</span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"pneumococcal.*23"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Pneumococcal PPV23"</span>,</span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"rotavirus"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Rotavirus"</span>,</span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"varicella"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Varicella"</span>,</span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"zoster"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Zoster"</span>,</span>
<span id="cb118-17"><a href="#cb118-17" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span></span>
<span id="cb118-18"><a href="#cb118-18" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb118-19"><a href="#cb118-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-20"><a href="#cb118-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency check</span></span>
<span id="cb118-21"><a href="#cb118-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-22"><a href="#cb118-22" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(vaccination<span class="sc">$</span>vaccine_group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
          COVID-19          DTP group          Hepatitis                Hib 
               144                152                114                 32 
               HPV          Influenza                IPV      Meningococcal 
                61                859                 51                 52 
               MMR Pneumococcal PCV13 Pneumococcal PPV23          Rotavirus 
                26                 52                  8                 21 
         Varicella             Zoster 
                26                 21 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouping Values Using %in% Inside case_when()</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>vaccination <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vacc_group3 =</span> <span class="fu">case_when</span>(</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>    vaccine_group <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"COVID-19"</span>, <span class="st">"Influenza"</span>) <span class="sc">~</span> <span class="st">"Respiratory vaccines"</span>,</span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a>    vaccine_group <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DTP group"</span>, <span class="st">"Hepatitis"</span>, <span class="st">"HPV"</span>, <span class="st">"Hib"</span>, <span class="st">"IPV"</span>, </span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Meningococcal"</span>, <span class="st">"MMR"</span>) <span class="sc">~</span> <span class="st">"Childhood vaccines"</span>,</span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span></span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>ENCOUNTER, <span class="sc">-</span>CODE)</span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> (vaccination)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  DATE                              PATIENT
1 2016-04-10T09:04:48Z 30a6452c-4297-a1ac-977a-6a23237c7b46
2 2016-04-10T09:04:48Z 30a6452c-4297-a1ac-977a-6a23237c7b46
3 2016-04-10T09:04:48Z 30a6452c-4297-a1ac-977a-6a23237c7b46
4 2016-04-10T09:04:48Z 30a6452c-4297-a1ac-977a-6a23237c7b46
5 2002-10-29T19:07:21Z 34a4dcc4-35fb-6ad5-ab98-be285c586a4f
6 2005-11-01T19:07:21Z 34a4dcc4-35fb-6ad5-ab98-be285c586a4f
                                                   DESCRIPTION BASE_COST
1           Influenza  seasonal  injectable  preservative free       136
2 Td (adult)  5 Lf tetanus toxoid  preservative free  adsorbed       136
3                                                 Hep B  adult       136
4                                          meningococcal MCV4P       136
5           Influenza  seasonal  injectable  preservative free       136
6           Influenza  seasonal  injectable  preservative free       136
   vacc_date year    month vaccine_group          vacc_group3
1 2016-04-10 2016    April     Influenza Respiratory vaccines
2 2016-04-10 2016    April     DTP group   Childhood vaccines
3 2016-04-10 2016    April     Hepatitis   Childhood vaccines
4 2016-04-10 2016    April Meningococcal   Childhood vaccines
5 2002-10-29 2002  October     Influenza Respiratory vaccines
6 2005-11-01 2005 November     Influenza Respiratory vaccines</code></pre>
</div>
</div>
<p><strong>Conclusion</strong></p>
<p>By combining the <code>tidytext</code>, <code>stringr</code>, and <code>dplyr</code> packages we converted messy free-text into structured data ready for analysis. This approach supports reproducible work, clearer insights, and more robust statistical modelling.</p>
</section>
</section>
<section id="factors-and-labels" class="level3" data-number="1.4.3">
<h3 data-number="1.4.3" class="anchored" data-anchor-id="factors-and-labels"><span class="header-section-number">1.4.3</span> <strong>3.3 Factors and Labels</strong></h3>
<ul>
<li>Creating factor levels and relabeling<br>
</li>
<li>Applying labels with <code>label()</code> and <code>val_labels()</code><br>
</li>
<li>Descriptive summaries with <code>describe()</code></li>
</ul>
<p>In R, categorical variables can be represented as <strong>factors</strong> to support grouping, modeling, and formatting for reporting. Factor variables store both the value and its associated level label.</p>
<p>This section introduces key functions to:</p>
<ul>
<li>Convert variables into factors<br>
</li>
<li>Rename or reorder levels for clarity<br>
</li>
<li>Apply variable-level labels using <code>label()</code> or <code>var_label()</code><br>
</li>
<li>Assign value labels using <code>val_labels()</code> (e.g., <code>1 = Male</code>)<br>
</li>
<li>Generate descriptive metadata summaries using <code>Hmisc::describe()</code></li>
</ul>
<p><strong>Value labels</strong> are especially useful when numeric codes represent categorical responses. These can be shown in summaries or retained for export and display.</p>
<p>You can choose to display or hide value labels:</p>
<p>options(labelled::val_labels_visible = TRUE) # Show values like ‚Äú1 = Male‚Äù options(labelled::val_labels_visible = FALSE) # Show only ‚ÄúMale‚Äù</p>
<p><strong>üîπ Summary of Functions for Working with Factors and Labels</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 31%">
<col style="width: 43%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Task</strong></th>
<th><strong>Function</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Convert to factor</td>
<td><code>as.factor(x)</code></td>
<td>Convert a character or numeric variable into a factor</td>
</tr>
<tr class="even">
<td>Reorder levels</td>
<td><code>factor(x, levels = ...)</code></td>
<td>Define a specific order for levels</td>
</tr>
<tr class="odd">
<td>Rename factor levels</td>
<td><code>levels(x) &lt;- c(...)</code></td>
<td>Manually change the displayed names of factor levels</td>
</tr>
<tr class="even">
<td>Recode with <code>forcats</code></td>
<td><code>fct_recode()</code>, <code>fct_relevel()</code></td>
<td>Relabel, reorder, or collapse factor levels using tidyverse tools</td>
</tr>
<tr class="odd">
<td>Apply variable label</td>
<td><code>label(x) &lt;- "..."</code> or <code>var_label(x) &lt;- "..."</code></td>
<td>Assign a description to a variable</td>
</tr>
<tr class="even">
<td>Apply value labels</td>
<td><code>val_labels(x) &lt;- c("Label" = code)</code></td>
<td>Define how codes map to category names (e.g., <code>1 = Male</code>)</td>
</tr>
<tr class="odd">
<td>Retrieve labels</td>
<td><code>label(x)</code>, <code>val_labels(x)</code></td>
<td>View current labels or mappings</td>
</tr>
<tr class="even">
<td>Generate summary with labels</td>
<td><code>Hmisc::describe(df)</code></td>
<td>Return a summary including variable names, labels, types, and distributions</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select two categorical variables</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>vacc_factor <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gender, marital)</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert character to factor</span></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>vacc_factor <span class="ot">&lt;-</span> vacc_factor <span class="sc">%&gt;%</span></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender =</span> <span class="fu">factor</span>(gender),</span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">marital =</span> <span class="fu">factor</span>(marital)</span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Relabel factor levels using fct_recode()</span></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>vacc_factor <span class="ot">&lt;-</span> vacc_factor <span class="sc">%&gt;%</span></span>
<span id="cb122-14"><a href="#cb122-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb122-15"><a href="#cb122-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender =</span> <span class="fu">fct_recode</span>(gender, <span class="st">"Male"</span> <span class="ot">=</span> <span class="st">"M"</span>, <span class="st">"Female"</span> <span class="ot">=</span> <span class="st">"F"</span>),</span>
<span id="cb122-16"><a href="#cb122-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">marital =</span> <span class="fu">fct_recode</span>(marital,</span>
<span id="cb122-17"><a href="#cb122-17" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Married"</span> <span class="ot">=</span> <span class="st">"M"</span>,</span>
<span id="cb122-18"><a href="#cb122-18" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Divorced"</span> <span class="ot">=</span> <span class="st">"D"</span>,</span>
<span id="cb122-19"><a href="#cb122-19" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Single"</span> <span class="ot">=</span> <span class="st">"S"</span>,</span>
<span id="cb122-20"><a href="#cb122-20" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Widowed"</span> <span class="ot">=</span> <span class="st">"W"</span>)</span>
<span id="cb122-21"><a href="#cb122-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb122-22"><a href="#cb122-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-23"><a href="#cb122-23" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(vacc_factor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     gender marital
1614 Female  Single
1615 Female  Single
1616 Female  Single
1617 Female  Single
1618 Female  Single
1619 Female  Single</code></pre>
</div>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign variable labels</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(vacc_factor<span class="sc">$</span>gender) <span class="ot">&lt;-</span> <span class="st">"Biological Sex"</span></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(vacc_factor<span class="sc">$</span>marital) <span class="ot">&lt;-</span> <span class="st">"Marital Status"</span></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign value labels</span></span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a>vacc_factor<span class="sc">$</span>gender_chr <span class="ot">&lt;-</span> <span class="fu">as.character</span>(vacc_factor<span class="sc">$</span>gender) <span class="co"># Convert factor to character</span></span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a><span class="fu">val_labels</span>(vacc_factor<span class="sc">$</span>gender_chr) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Male"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"Female"</span>)</span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a><span class="co"># View internal structure and label info</span></span>
<span id="cb124-11"><a href="#cb124-11" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(vacc_factor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   1619 obs. of  3 variables:
 $ gender    : Factor w/ 2 levels "Female","Male": 2 2 2 2 2 2 2 2 2 2 ...
  ..- attr(*, "label")= chr "Biological Sex"
 $ marital   : Factor w/ 5 levels "","Divorced",..: 3 3 3 3 3 3 2 2 2 2 ...
  ..- attr(*, "label")= chr "Marital Status"
 $ gender_chr: chr+lbl [1:1619] Male  , Male  , Male  , Male  , Male  , Male  , Male ...
   ..@ labels: Named chr  "Male" "Female"
   .. ..- attr(*, "names")= chr [1:2] "1" "2"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove bad labels if needed:</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(vacc_factor<span class="sc">$</span>gender) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove temporary object</span></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vacc_factor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="grouping-and-summarizing-data" class="level3" data-number="1.4.4">
<h3 data-number="1.4.4" class="anchored" data-anchor-id="grouping-and-summarizing-data"><span class="header-section-number">1.4.4</span> <strong>3.4 Grouping and Summarizing Data</strong></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select two categorical variables</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>vacc_factor <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gender, marital)</span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert character to factor</span></span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a>vacc_factor <span class="ot">&lt;-</span> vacc_factor <span class="sc">%&gt;%</span></span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender =</span> <span class="fu">factor</span>(gender),</span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">marital =</span> <span class="fu">factor</span>(marital)</span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Relabel factor levels using fct_recode()</span></span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a>vacc_factor <span class="ot">&lt;-</span> vacc_factor <span class="sc">%&gt;%</span></span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb127-15"><a href="#cb127-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender =</span> <span class="fu">fct_recode</span>(gender, <span class="st">"Male"</span> <span class="ot">=</span> <span class="st">"M"</span>, <span class="st">"Female"</span> <span class="ot">=</span> <span class="st">"F"</span>),</span>
<span id="cb127-16"><a href="#cb127-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">marital =</span> <span class="fu">fct_recode</span>(marital,</span>
<span id="cb127-17"><a href="#cb127-17" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Married"</span> <span class="ot">=</span> <span class="st">"M"</span>,</span>
<span id="cb127-18"><a href="#cb127-18" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Divorced"</span> <span class="ot">=</span> <span class="st">"D"</span>,</span>
<span id="cb127-19"><a href="#cb127-19" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Single"</span> <span class="ot">=</span> <span class="st">"S"</span>,</span>
<span id="cb127-20"><a href="#cb127-20" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Widowed"</span> <span class="ot">=</span> <span class="st">"W"</span>)</span>
<span id="cb127-21"><a href="#cb127-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb127-22"><a href="#cb127-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-23"><a href="#cb127-23" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(vacc_factor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     gender marital
1614 Female  Single
1615 Female  Single
1616 Female  Single
1617 Female  Single
1618 Female  Single
1619 Female  Single</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign variable labels</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(vacc_factor<span class="sc">$</span>gender) <span class="ot">&lt;-</span> <span class="st">"Biological Sex"</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(vacc_factor<span class="sc">$</span>marital) <span class="ot">&lt;-</span> <span class="st">"Marital Status"</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign value labels</span></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>vacc_factor<span class="sc">$</span>gender_chr <span class="ot">&lt;-</span> <span class="fu">as.character</span>(vacc_factor<span class="sc">$</span>gender) <span class="co"># Convert factor to character</span></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a><span class="fu">val_labels</span>(vacc_factor<span class="sc">$</span>gender_chr) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Male"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"Female"</span>)</span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a><span class="co"># View internal structure and label info</span></span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(vacc_factor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   1619 obs. of  3 variables:
 $ gender    : Factor w/ 2 levels "Female","Male": 2 2 2 2 2 2 2 2 2 2 ...
  ..- attr(*, "label")= chr "Biological Sex"
 $ marital   : Factor w/ 5 levels "","Divorced",..: 3 3 3 3 3 3 2 2 2 2 ...
  ..- attr(*, "label")= chr "Marital Status"
 $ gender_chr: chr+lbl [1:1619] Male  , Male  , Male  , Male  , Male  , Male  , Male ...
   ..@ labels: Named chr  "Male" "Female"
   .. ..- attr(*, "names")= chr [1:2] "1" "2"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove bad labels if needed:</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(vacc_factor<span class="sc">$</span>gender) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove temporary object</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vacc_factor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>group_by()</code>, <code>summarize()</code>, <code>ungroup()</code></li>
<li>Row and column percentages: details presented in section 7.2 below</li>
<li>Weighted summaries with <code>wt =</code></li>
</ul>
<p>Grouping and summarizing data is fundamental for understanding patterns, distributions, and relationships within datasets.<br>
In <code>dplyr</code>, the functions <code>group_by()</code> and <code>summarize()</code> are used together to calculate statistics across different groups.<br>
We can also calculate proportions (row-wise or column-wise) and perform weighted summaries when necessary. The details regarding row and column percentages are presented in section 7.2 below.</p>
<p>These steps are critical for aggregating information into meaningful insights, especially when working with categorical, grouped, or longitudinal data.</p>
<hr>
<p>üîπ <strong>Summary of Functions for Grouping and Summarizing</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 29%">
<col style="width: 29%">
<col style="width: 41%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Task</strong></th>
<th style="text-align: left;"><strong>Function</strong></th>
<th style="text-align: left;"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Group data by one or more variables</td>
<td style="text-align: left;"><code>group_by()</code></td>
<td style="text-align: left;">Define groups for aggregation</td>
</tr>
<tr class="even">
<td style="text-align: left;">Summarize grouped data</td>
<td style="text-align: left;"><code>summarize()</code></td>
<td style="text-align: left;">Apply aggregation functions (e.g., mean, sum, count)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Remove grouping structure</td>
<td style="text-align: left;"><code>ungroup()</code></td>
<td style="text-align: left;">Return to ungrouped state after summary</td>
</tr>
<tr class="even">
<td style="text-align: left;">Calculate row-wise or column-wise proportions</td>
<td style="text-align: left;">Manual with <code>mutate()</code>, <code>prop.table()</code>, etc.</td>
<td style="text-align: left;">Understand percentage distribution within/between groups</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Weighted summaries</td>
<td style="text-align: left;"><code>summarize(wt = )</code></td>
<td style="text-align: left;">Compute weighted means, sums, or percentages when different rows contribute differently</td>
</tr>
</tbody>
</table>
<hr>
<p>‚û°Ô∏è Grouping and summarization allow efficient exploration of key relationships and preparation of clean summary tables.</p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouping and Summarizing Breast Cancer Data</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouping by SA3 name, State, and Year, and summarizing participation</span></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>bc_summary_year <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_participants =</span> <span class="fu">sum</span>(part50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb132-10"><a href="#cb132-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_population =</span> <span class="fu">sum</span>(pop50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb132-11"><a href="#cb132-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_screening_rate =</span> <span class="fu">mean</span>(rate50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb132-12"><a href="#cb132-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb132-13"><a href="#cb132-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb132-14"><a href="#cb132-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_summary_year, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 4
    year total_participants total_population mean_screening_rate
   &lt;int&gt;              &lt;dbl&gt;            &lt;dbl&gt;               &lt;dbl&gt;
1 201617            1720463          3127749                54.9
2 201718            1748606          3187574                54.7
3 201819            1781484          3247470                54.6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Create Vaccination Pattern Dataset ---</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>df_vaccination_plot <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month, vaccine_group) <span class="sc">%&gt;%</span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(),  <span class="co"># Number of records per year-month-vaccine_group combination</span></span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb134-9"><a href="#cb134-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month) <span class="sc">%&gt;%</span></span>
<span id="cb134-10"><a href="#cb134-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb134-11"><a href="#cb134-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">count_month =</span> <span class="fu">sum</span>(count)  <span class="co"># Total vaccines in that year-month across all groups</span></span>
<span id="cb134-12"><a href="#cb134-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb134-13"><a href="#cb134-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb134-14"><a href="#cb134-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb134-15"><a href="#cb134-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">proportion_month =</span> <span class="fu">round</span>((count <span class="sc">/</span> count_month) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)  <span class="co"># % per vaccine group within month</span></span>
<span id="cb134-16"><a href="#cb134-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb134-17"><a href="#cb134-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb134-18"><a href="#cb134-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb134-19"><a href="#cb134-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_year =</span> <span class="fu">sum</span>(count)  <span class="co"># Total vaccines across the year</span></span>
<span id="cb134-20"><a href="#cb134-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb134-21"><a href="#cb134-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb134-22"><a href="#cb134-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">proportion_year =</span> <span class="fu">round</span>((count <span class="sc">/</span> total_year) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)  <span class="co"># % per vaccine group within year</span></span>
<span id="cb134-23"><a href="#cb134-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb134-24"><a href="#cb134-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb134-25"><a href="#cb134-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-26"><a href="#cb134-26" aria-hidden="true" tabindex="-1"></a><span class="co"># View first few rows</span></span>
<span id="cb134-27"><a href="#cb134-27" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(df_vaccination_plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 8
  year  month     vaccine_group count count_month proportion_month total_year
  &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;         &lt;int&gt;       &lt;int&gt;            &lt;dbl&gt;      &lt;int&gt;
1 2024  October   Zoster            1          15              6.7        122
2 2024  September COVID-19          1          15              6.7        122
3 2024  September DTP group         2          15             13.3        122
4 2024  September HPV               2          15             13.3        122
5 2024  September Influenza         9          15             60          122
6 2024  September Meningococcal     1          15              6.7        122
# ‚Ñπ 1 more variable: proportion_year &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Enhanced summary of breast cancer screening data with SA3, State, and National Year-level proportions</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="co"># use na.rm = TRUE to remove (ignore) missing values (NA) when calculating</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>bc_summary <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Group by SA3 area, State, and Year</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sa3name, state, year) <span class="sc">%&gt;%</span></span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_participants =</span> <span class="fu">sum</span>(part50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),  <span class="co"># Sum of screened participants</span></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_population =</span> <span class="fu">sum</span>(pop50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),     <span class="co"># Sum of target population</span></span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb136-12"><a href="#cb136-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate SA3-level screening rate and proportion</span></span>
<span id="cb136-13"><a href="#cb136-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb136-14"><a href="#cb136-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">screening_rate =</span> <span class="fu">round</span>((total_participants <span class="sc">/</span> total_population) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>),  <span class="co"># % screened in that SA3</span></span>
<span id="cb136-15"><a href="#cb136-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">proportion_area =</span> <span class="fu">round</span>((total_participants <span class="sc">/</span> <span class="fu">sum</span>(total_participants)) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)  <span class="co"># % contribution to national participants</span></span>
<span id="cb136-16"><a href="#cb136-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb136-17"><a href="#cb136-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add State-level aggregated summaries</span></span>
<span id="cb136-18"><a href="#cb136-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year) <span class="sc">%&gt;%</span></span>
<span id="cb136-19"><a href="#cb136-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb136-20"><a href="#cb136-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_sa3 =</span> <span class="fu">n</span>(),  <span class="co"># Number of SA3 areas within each State-Year</span></span>
<span id="cb136-21"><a href="#cb136-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_total_participants =</span> <span class="fu">sum</span>(total_participants, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),  <span class="co"># State-wide participants</span></span>
<span id="cb136-22"><a href="#cb136-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_total_population =</span> <span class="fu">sum</span>(total_population, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),      <span class="co"># State-wide target population</span></span>
<span id="cb136-23"><a href="#cb136-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_screening_rate =</span> <span class="fu">round</span>((state_total_participants <span class="sc">/</span> state_total_population) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>),  <span class="co"># % screened at State level</span></span>
<span id="cb136-24"><a href="#cb136-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_proportion =</span> <span class="fu">round</span>((state_total_participants <span class="sc">/</span> <span class="fu">sum</span>(total_participants)) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)  <span class="co"># State share of total participants</span></span>
<span id="cb136-25"><a href="#cb136-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb136-26"><a href="#cb136-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb136-27"><a href="#cb136-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add National Year-level aggregated summaries</span></span>
<span id="cb136-28"><a href="#cb136-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb136-29"><a href="#cb136-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb136-30"><a href="#cb136-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">year_sa3 =</span> <span class="fu">n</span>(),  <span class="co"># Number of SA3 areas within each Year</span></span>
<span id="cb136-31"><a href="#cb136-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">year_total_participants =</span> <span class="fu">sum</span>(total_participants, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),  <span class="co"># Australia-wide participants for that year</span></span>
<span id="cb136-32"><a href="#cb136-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">year_total_population =</span> <span class="fu">sum</span>(total_population, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),      <span class="co"># Australia-wide target population for that year</span></span>
<span id="cb136-33"><a href="#cb136-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">year_screening_rate =</span> <span class="fu">round</span>((year_total_participants <span class="sc">/</span> year_total_population) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>),  <span class="co"># National % screened</span></span>
<span id="cb136-34"><a href="#cb136-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">year_proportion =</span> <span class="fu">round</span>((year_total_participants <span class="sc">/</span> <span class="fu">sum</span>(total_participants)) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)  <span class="co"># National share</span></span>
<span id="cb136-35"><a href="#cb136-35" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb136-36"><a href="#cb136-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb136-37"><a href="#cb136-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, state, sa3name)   <span class="co"># Final arrangement for neat viewing</span></span>
<span id="cb136-38"><a href="#cb136-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-39"><a href="#cb136-39" aria-hidden="true" tabindex="-1"></a><span class="co"># View the last few rows</span></span>
<span id="cb136-40"><a href="#cb136-40" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(bc_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 17
  sa3name        state   year total_participants total_population screening_rate
  &lt;chr&gt;          &lt;chr&gt;  &lt;int&gt;              &lt;dbl&gt;            &lt;dbl&gt;          &lt;dbl&gt;
1 Stirling       WA    201920              13878            27265           50.9
2 Swan           WA    201920               8513            17274           49.3
3 Wanneroo       WA    201920              12032            24345           49.4
4 West Pilbara   WA    201920                828             2409           34.4
5 Wheat Belt - ‚Ä¶ WA    201920               4947             9813           50.4
6 Wheat Belt - ‚Ä¶ WA    201920               1446             3342           43.3
# ‚Ñπ 11 more variables: proportion_area &lt;dbl&gt;, state_sa3 &lt;int&gt;,
#   state_total_participants &lt;dbl&gt;, state_total_population &lt;dbl&gt;,
#   state_screening_rate &lt;dbl&gt;, state_proportion &lt;dbl&gt;, year_sa3 &lt;int&gt;,
#   year_total_participants &lt;dbl&gt;, year_total_population &lt;dbl&gt;,
#   year_screening_rate &lt;dbl&gt;, year_proportion &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating Proportions: details presented in section 7.2 below</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding participation proportion within each SA3-year group</span></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a>bc_summary_with_prop <span class="ot">&lt;-</span> bc_summary <span class="sc">%&gt;%</span></span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">participation_rate =</span> (total_participants <span class="sc">/</span> total_population) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb138-9"><a href="#cb138-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb138-10"><a href="#cb138-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(participation_rate)</span>
<span id="cb138-11"><a href="#cb138-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-12"><a href="#cb138-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_summary_with_prop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 1
  participation_rate
               &lt;dbl&gt;
1               56.1
2              NaN  
3               53.8
4              NaN  
5               54.5
6               55.1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Weighted Summarization (Weighted Average Screening Rate)</span></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate weighted mean screening rate by SA3</span></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>bc_weighted_summary <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sa3name, state, year) <span class="sc">%&gt;%</span></span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_participants =</span> <span class="fu">sum</span>(part50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb140-10"><a href="#cb140-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_population =</span> <span class="fu">sum</span>(pop50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb140-11"><a href="#cb140-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">weighted_screening_rate =</span> <span class="fu">round</span>(<span class="fu">sum</span>(rate50_74 <span class="sc">*</span> pop50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">sum</span>(pop50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">1</span>),</span>
<span id="cb140-12"><a href="#cb140-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb140-13"><a href="#cb140-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb140-14"><a href="#cb140-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-15"><a href="#cb140-15" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_weighted_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 6
  sa3name        state   year total_participants total_population
  &lt;chr&gt;          &lt;chr&gt;  &lt;int&gt;              &lt;dbl&gt;            &lt;dbl&gt;
1 Adelaide City  SA    201617               1280             2537
2 Adelaide City  SA    201718               1314             2608
3 Adelaide City  SA    201819               1368             2642
4 Adelaide City  SA    201920               1208             2707
5 Adelaide Hills SA    201617               7010            11636
6 Adelaide Hills SA    201718               7096            11876
# ‚Ñπ 1 more variable: weighted_screening_rate &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove all temporary objects created in this chunk</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(bc_summary, bc_summary_with_prop, bc_weighted_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sorting-reordering-slicing-and-arranging" class="level3" data-number="1.4.5">
<h3 data-number="1.4.5" class="anchored" data-anchor-id="sorting-reordering-slicing-and-arranging"><span class="header-section-number">1.4.5</span> <strong>3.5 Sorting, Reordering, Slicing, and Arranging</strong></h3>
<ul>
<li><code>arrange()</code>, <code>desc()</code></li>
<li><code>slice_max()</code>, <code>slice_min()</code>, <code>top_n()</code></li>
<li>Ranking data and filtering top/bottom groups</li>
</ul>
<p>Sorting and reordering data is important for finding trends, identifying extremes (top or bottom performers), and preparing tables for reporting or visualization.<br>
In <code>dplyr</code>, the <code>arrange()</code> function sorts datasets by one or more variables, while <code>desc()</code> allows descending (reverse) order.<br>
For selecting specific rows like top N or bottom N values, <code>slice_max()</code> and <code>slice_min()</code> are commonly used.</p>
<p>These techniques allow focusing on key records, comparing rankings across groups, and making datasets easier to review.</p>
<hr>
<p><strong>üîπ Summary of Functions for Sorting and Reordering</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 26%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Task</strong></th>
<th style="text-align: left;"><strong>Function</strong></th>
<th style="text-align: left;"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Sort ascending order</td>
<td style="text-align: left;"><code>arrange()</code></td>
<td style="text-align: left;">Sort rows by one or more variables (lowest to highest)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sort descending order</td>
<td style="text-align: left;"><code>arrange(desc())</code></td>
<td style="text-align: left;">Sort rows highest to lowest</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Select top N rows by a variable</td>
<td style="text-align: left;"><code>slice_max()</code></td>
<td style="text-align: left;">Keep top N records based on a variable</td>
</tr>
<tr class="even">
<td style="text-align: left;">Select bottom N rows by a variable</td>
<td style="text-align: left;"><code>slice_min()</code></td>
<td style="text-align: left;">Keep bottom N records based on a variable</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Select top N rows (old method)</td>
<td style="text-align: left;"><code>top_n()</code></td>
<td style="text-align: left;">Deprecated alternative to <code>slice_max()</code> (not recommended now)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rank within groups</td>
<td style="text-align: left;"><code>mutate(rank = row_number())</code></td>
<td style="text-align: left;">Create custom ranking inside grouped data</td>
</tr>
</tbody>
</table>
<hr>
<p>‚û°Ô∏è Sorting and slicing help prioritize key data points and create targeted outputs for decision-making or visualization.</p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Sorting, Reordering, Slicing, and Arranging (Breast Cancer Data)</span></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Sorting by Screening Rate in Ascending Order</span></span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a>bc_sorted_rate <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(rate50_74) <span class="sc">%&gt;%</span></span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sa3code, sa3coden, sa3name, state, year,</span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a>         part50_74, pop50_74, rate50_74, agen50_74, expct50_74)</span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_sorted_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sa3code sa3coden        sa3name state   year part50_74 pop50_74 rate50_74
1   90104    90104 Norfolk Island Other 201920        24      441   5.40000
2   90104    90104 Norfolk Island Other 201819        31      422   7.30000
3   90104    90104 Norfolk Island Other 201718        39      401   9.70000
4   70205    70205      Katherine    NT 201920       412     2011  20.51335
5   51002    51002   East Pilbara    WA 201920       562     1987  28.26220
6   51002    51002   East Pilbara    WA 201819       567     1918  29.55425
  agen50_74 expct50_74
1         3        220
2         3        231
3         3        219
4         3       1003
5         3        991
6         3       1051</code></pre>
</div>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sorting by Screening Rate in Descending Order</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>bc_sorted_rate_desc <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(rate50_74)) <span class="sc">%&gt;%</span></span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sa3code, sa3coden, sa3name, state, year,</span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a>         part50_74, pop50_74, rate50_74, agen50_74, expct50_74)</span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_sorted_rate_desc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sa3code sa3coden                        sa3name state   year part50_74
1   90102    90102        Cocos (Keeling) Islands Other 201920        81
2   31801    31801 Charters Towers - Ayr - Ingham   Qld 201617      4628
3   60102    60102            Hobart - North East   Tas 201718      5856
4   60104    60104        Hobart - South and West   Tas 201718      3643
5   11004    11004            Tamworth - Gunnedah   NSW 201819      8426
6   31801    31801 Charters Towers - Ayr - Ingham   Qld 201718      4612
  pop50_74 rate50_74 agen50_74 expct50_74
1      101  80.20000         3         50
2     6713  68.90000         3       3692
3     8566  68.36348         3       4694
4     5331  68.34190         3       2921
5    12333  68.32168         3       6758
6     6759  68.23824         3       3703</code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Slicing Top 10 SA3s with Highest Screening Rates</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>bc_top_screening <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> rate50_74, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sa3code, sa3coden, sa3name, state, year,</span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a>         part50_74, pop50_74, rate50_74, agen50_74, expct50_74)</span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true" tabindex="-1"></a>bc_top_screening</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   sa3code sa3coden                        sa3name state   year part50_74
1    90102    90102        Cocos (Keeling) Islands Other 201920        81
2    31801    31801 Charters Towers - Ayr - Ingham   Qld 201617      4628
3    60102    60102            Hobart - North East   Tas 201718      5856
4    60104    60104        Hobart - South and West   Tas 201718      3643
5    11004    11004            Tamworth - Gunnedah   NSW 201819      8426
6    31801    31801 Charters Towers - Ayr - Ingham   Qld 201718      4612
7    11001    11001                       Armidale   NSW 201617      3810
8    60102    60102            Hobart - North East   Tas 201819      5881
9    31801    31801 Charters Towers - Ayr - Ingham   Qld 201819      4588
10   31801    31801 Charters Towers - Ayr - Ingham   Qld 201920      4580
   pop50_74 rate50_74 agen50_74 expct50_74
1       101  80.20000         3         50
2      6713  68.90000         3       3692
3      8566  68.36348         3       4694
4      5331  68.34190         3       2921
5     12333  68.32168         3       6758
6      6759  68.23824         3       3703
7      5602  68.00000         3       3081
8      8698  67.61016         3       4766
9      6797  67.49974         3       3724
10     6818  67.17431         3       3402</code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Slicing Bottom 5 SA3s with Lowest Screening Rates</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>bc_bottom_screening <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(<span class="at">order_by =</span> rate50_74, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sa3code, sa3coden, sa3name, state, year,</span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a>         part50_74, pop50_74, rate50_74, agen50_74, expct50_74)</span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a>bc_bottom_screening</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sa3code sa3coden        sa3name state   year part50_74 pop50_74 rate50_74
1   90104    90104 Norfolk Island Other 201920        24      441   5.40000
2   90104    90104 Norfolk Island Other 201819        31      422   7.30000
3   90104    90104 Norfolk Island Other 201718        39      401   9.70000
4   70205    70205      Katherine    NT 201920       412     2011  20.51335
5   51002    51002   East Pilbara    WA 201920       562     1987  28.26220
  agen50_74 expct50_74
1         3        220
2         3        231
3         3        219
4         3       1003
5         3        991</code></pre>
</div>
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ranking Within Each State</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>bc_ranked <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(rate50_74), <span class="at">.by_group =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">screening_rank =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(screening_rank, rate50_74, state) <span class="sc">%&gt;%</span> </span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb151-8"><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-9"><a href="#cb151-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_ranked, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 √ó 3
   screening_rank rate50_74 state
            &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;
 1              1      59.9 ACT  
 2              2      58.8 ACT  
 3              3      58.4 ACT  
 4              4      58   ACT  
 5              5      57.7 ACT  
 6              6      57.4 ACT  
 7              7      57.2 ACT  
 8              8      57.1 ACT  
 9              9      57.0 ACT  
10             10      56.7 ACT  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove all temporary objects created in this chunk</span></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(bc_sorted_rate, bc_sorted_rate_desc, bc_top_screening, bc_bottom_screening, bc_ranked)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="reshaping-and-tidy-data" class="level3" data-number="1.4.6">
<h3 data-number="1.4.6" class="anchored" data-anchor-id="reshaping-and-tidy-data"><span class="header-section-number">1.4.6</span> <strong>3.6 Reshaping and Tidy Data</strong></h3>
<ul>
<li><code>pivot_longer()</code>, <code>pivot_wider()</code></li>
<li>Wide-to-long and long-to-wide transformations</li>
<li>Separating and uniting columns with <code>separate()</code> and <code>unite()</code><br>
</li>
</ul>
<p>In data analysis, datasets often need to be reorganized ‚Äî from wide format to long format, or vice versa ‚Äî to suit different types of analysis or visualization.<br>
The goal is to follow <strong>Tidy Data principles</strong> where: - Each variable forms a column - Each observation forms a row - Each type of observational unit forms a table</p>
<p><code>dplyr</code> and <code>tidyr</code> provide key functions for reshaping: - <code>pivot_longer()</code> turns many columns into two columns (variable name and value). - <code>pivot_wider()</code> spreads one column into multiple columns. - <code>separate()</code> splits one column into multiple columns based on a separator. - <code>unite()</code> combines multiple columns into one.</p>
<p>These tools help create clean, organized datasets ready for efficient analysis and plotting.</p>
<hr>
<p><strong>üîπ Summary of Functions for Reshaping and Tidy Data</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 25%">
<col style="width: 41%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Task</strong></th>
<th style="text-align: left;"><strong>Function</strong></th>
<th style="text-align: left;"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Reshape wide to long</td>
<td style="text-align: left;"><code>pivot_longer()</code></td>
<td style="text-align: left;">Collapse multiple columns into key-value pairs</td>
</tr>
<tr class="even">
<td style="text-align: left;">Reshape long to wide</td>
<td style="text-align: left;"><code>pivot_wider()</code></td>
<td style="text-align: left;">Spread key-value pairs across multiple columns</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Split a column into multiple parts</td>
<td style="text-align: left;"><code>separate()</code></td>
<td style="text-align: left;">Separate one column into several columns by a delimiter</td>
</tr>
<tr class="even">
<td style="text-align: left;">Combine multiple columns into one</td>
<td style="text-align: left;"><code>unite()</code></td>
<td style="text-align: left;">Merge several columns into a single column</td>
</tr>
</tbody>
</table>
<hr>
<p>‚û°Ô∏è These reshaping techniques make it easy to transform datasets into a tidy structure for summaries, modeling, or visualization.</p>
<blockquote class="blockquote">
<p>** üîé Regular Expression Tip for <code>names_pattern</code>**</p>
</blockquote>
<blockquote class="blockquote">
<p>In <code>pivot_longer()</code>, we use a regular expression to split the column names into two components: - <code>part</code>, <code>pop</code>, <code>rate</code>, or <code>expct</code> ‚Üí <strong>measure</strong> - <code>50_54</code>, <code>55_59</code>, etc. ‚Üí <strong>age group</strong> The pattern <code>([0-9]{2}_[0-9]{2})</code> works as follows:</p>
</blockquote>
<blockquote class="blockquote">
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Component</strong></th>
<th style="text-align: left;"><strong>Meaning</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>[0-9]</code></td>
<td style="text-align: left;">Match any digit (0‚Äì9)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>{2}</code></td>
<td style="text-align: left;">Exactly two digits</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>_</code></td>
<td style="text-align: left;">An underscore</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>[0-9]{2}</code></td>
<td style="text-align: left;">Another two digits</td>
</tr>
</tbody>
</table>
<p>‚û°Ô∏è This captures typical age formats like <code>50_54</code>, <code>60_64</code>, etc.</p>
</blockquote>
<p>Original Column Name: rate50_54</p>
<p>Components: ‚îå‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îê ‚Ä¶.&gt; ‚îÇrate ‚îÇ ‚îÇ50_54 ‚îÇ &gt; ‚îî‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îò</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshaping, Separate and Unite Columns: Breast Cancer Data</span></span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot longer by extracting measure type and age group separately</span></span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>breast_cancer_long <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"part"</span>) <span class="sc">|</span> <span class="fu">starts_with</span>(<span class="st">"pop"</span>) <span class="sc">|</span> <span class="fu">starts_with</span>(<span class="st">"rate"</span>) <span class="sc">|</span> <span class="fu">starts_with</span>(<span class="st">"expct"</span>),</span>
<span id="cb154-9"><a href="#cb154-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"measure"</span>, <span class="st">"age_group"</span>),</span>
<span id="cb154-10"><a href="#cb154-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_pattern =</span> <span class="st">"(part|pop|rate|expct)([0-9]{2}_[0-9]{2})"</span>,</span>
<span id="cb154-11"><a href="#cb154-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb154-12"><a href="#cb154-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb154-13"><a href="#cb154-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(measure, age_group, <span class="at">.before =</span> sa3code)</span>
<span id="cb154-14"><a href="#cb154-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-15"><a href="#cb154-15" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_cancer_long, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 √ó 15
   measure age_group sa3code sa3coden sa3name   state   year agen50_74 agen50_69
   &lt;chr&gt;   &lt;chr&gt;       &lt;int&gt;    &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;  &lt;int&gt;     &lt;int&gt;     &lt;int&gt;
 1 part    50_74       10102    10102 Queanbey‚Ä¶ NSW   201617         3         2
 2 part    50_69       10102    10102 Queanbey‚Ä¶ NSW   201617         3         2
 3 part    50_54       10102    10102 Queanbey‚Ä¶ NSW   201617         3         2
 4 part    55_59       10102    10102 Queanbey‚Ä¶ NSW   201617         3         2
 5 part    60_64       10102    10102 Queanbey‚Ä¶ NSW   201617         3         2
 6 part    65_69       10102    10102 Queanbey‚Ä¶ NSW   201617         3         2
 7 part    70_74       10102    10102 Queanbey‚Ä¶ NSW   201617         3         2
 8 pop     50_74       10102    10102 Queanbey‚Ä¶ NSW   201617         3         2
 9 pop     50_69       10102    10102 Queanbey‚Ä¶ NSW   201617         3         2
10 pop     50_54       10102    10102 Queanbey‚Ä¶ NSW   201617         3         2
# ‚Ñπ 6 more variables: agen50_54 &lt;int&gt;, agen55_59 &lt;int&gt;, agen60_64 &lt;int&gt;,
#   agen65_69 &lt;int&gt;, agen70_74 &lt;int&gt;, value &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot wider to spread measures into separate columns</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>breast_cancer_final <span class="ot">&lt;-</span> breast_cancer_long <span class="sc">%&gt;%</span></span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> measure,</span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> value</span>
<span id="cb156-6"><a href="#cb156-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb156-7"><a href="#cb156-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(part, pop, rate, expct, <span class="at">.before =</span> sa3code)</span>
<span id="cb156-8"><a href="#cb156-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-9"><a href="#cb156-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_cancer_final, <span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 17
  age_group  part   pop  rate expct sa3code sa3coden sa3name    state   year
  &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;int&gt;    &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;  &lt;int&gt;
1 50_74      4875  8052  60.5  4428   10102    10102 Queanbeyan NSW   201617
2 50_69      4309  7145  60.3  3929   10102    10102 Queanbeyan NSW   201617
3 50_54      1284  2251  57    1118   10102    10102 Queanbeyan NSW   201617
4 55_59      1188  1970  60.3  1046   10102    10102 Queanbeyan NSW   201617
5 60_64      1012  1625  62.3   950   10102    10102 Queanbeyan NSW   201617
# ‚Ñπ 7 more variables: agen50_74 &lt;int&gt;, agen50_69 &lt;int&gt;, agen50_54 &lt;int&gt;,
#   agen55_59 &lt;int&gt;, agen60_64 &lt;int&gt;, agen65_69 &lt;int&gt;, agen70_74 &lt;int&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Separate 'age_group' into two new columns: start and end age</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>breast_cancer_separated <span class="ot">&lt;-</span> breast_cancer_long <span class="sc">%&gt;%</span></span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> age_group,</span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"age_start"</span>, <span class="st">"age_end"</span>),</span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"_"</span>,</span>
<span id="cb158-7"><a href="#cb158-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">convert =</span> <span class="cn">TRUE</span></span>
<span id="cb158-8"><a href="#cb158-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb158-9"><a href="#cb158-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">"age_start"</span>, <span class="st">"age_end"</span>, <span class="fu">everything</span>())</span>
<span id="cb158-10"><a href="#cb158-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-11"><a href="#cb158-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_cancer_separated, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 16
  age_start age_end measure sa3code sa3coden sa3name    state   year agen50_74
      &lt;int&gt;   &lt;int&gt; &lt;chr&gt;     &lt;int&gt;    &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;  &lt;int&gt;     &lt;int&gt;
1        50      74 part      10102    10102 Queanbeyan NSW   201617         3
2        50      69 part      10102    10102 Queanbeyan NSW   201617         3
3        50      54 part      10102    10102 Queanbeyan NSW   201617         3
# ‚Ñπ 7 more variables: agen50_69 &lt;int&gt;, agen50_54 &lt;int&gt;, agen55_59 &lt;int&gt;,
#   agen60_64 &lt;int&gt;, agen65_69 &lt;int&gt;, agen70_74 &lt;int&gt;, value &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Unite 'age_start' and 'age_end' into a single age group label</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>breast_cancer_united <span class="ot">&lt;-</span> breast_cancer_separated <span class="sc">%&gt;%</span></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(</span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> age_group_combined,</span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a>    age_start, age_end,</span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"-"</span>,</span>
<span id="cb160-7"><a href="#cb160-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="cn">FALSE</span></span>
<span id="cb160-8"><a href="#cb160-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb160-9"><a href="#cb160-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-10"><a href="#cb160-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_cancer_united, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 17
  age_group_combined age_start age_end measure sa3code sa3coden sa3name    state
  &lt;chr&gt;                  &lt;int&gt;   &lt;int&gt; &lt;chr&gt;     &lt;int&gt;    &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;
1 50-74                     50      74 part      10102    10102 Queanbeyan NSW  
2 50-69                     50      69 part      10102    10102 Queanbeyan NSW  
3 50-54                     50      54 part      10102    10102 Queanbeyan NSW  
# ‚Ñπ 9 more variables: year &lt;int&gt;, agen50_74 &lt;int&gt;, agen50_69 &lt;int&gt;,
#   agen50_54 &lt;int&gt;, agen55_59 &lt;int&gt;, agen60_64 &lt;int&gt;, agen65_69 &lt;int&gt;,
#   agen70_74 &lt;int&gt;, value &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove temporary objects created in this chunk</span></span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(breast_cancer_long, breast_cancer_separated, breast_cancer_united, breast_cancer_final)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="part-iv-advanced-wrangling-and-integration" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="part-iv-advanced-wrangling-and-integration"><span class="header-section-number">1.5</span> <strong>PART IV: ADVANCED WRANGLING AND INTEGRATION</strong></h2>
<section id="date-and-time-data-manipulation" class="level3" data-number="1.5.1">
<h3 data-number="1.5.1" class="anchored" data-anchor-id="date-and-time-data-manipulation"><span class="header-section-number">1.5.1</span> <strong>4.1 Date and Time data manipulation</strong></h3>
<ul>
<li><code>lubridate::ymd()</code>, <code>as_date()</code>, <code>format()</code>, <code>%p</code>, <code>weekdays()</code></li>
<li>Extracting date components: year, month, quarter</li>
</ul>
<p>Working with dates is essential in many datasets, particularly for time-based trends, age calculations, seasonal effects, and survival analysis.<br>
We use the <code>lubridate</code> package to parse, extract, and manipulate dates efficiently. The details about time and date data has been presented separately.</p>
<p>‚û°Ô∏è <strong>For full tutorials and videos:</strong> - <strong>YouTube (AnalyticsHub)</strong>: <a href="https://studio.youtube.com/video/AZjUWcakEEY/edit">Watch Full Video</a> - <strong>GitHub</strong>: <a href="https://github.com/HabtamuBizuayehu/Date-and-Time-Manipulation-and-Analysis_Data_insight">Access Here</a></p>
<p><strong>Summary of Functions for Date Handling</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 30%">
<col style="width: 29%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Task</strong></th>
<th style="text-align: left;"><strong>Function</strong></th>
<th style="text-align: left;"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Parse ISO dates</td>
<td style="text-align: left;"><code>as.Date()</code>, <code>strptime()</code></td>
<td style="text-align: left;">Read and convert raw string timestamps</td>
</tr>
<tr class="even">
<td style="text-align: left;">Format date output</td>
<td style="text-align: left;"><code>format()</code></td>
<td style="text-align: left;">Customize how dates are displayed</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Extract components</td>
<td style="text-align: left;"><code>year()</code>, <code>month()</code>, <code>day()</code>, <code>quarter()</code>, <code>week()</code></td>
<td style="text-align: left;">Pull year, month, day, quarter, week from dates</td>
</tr>
<tr class="even">
<td style="text-align: left;">Weekday labels</td>
<td style="text-align: left;"><code>wday(label = TRUE)</code></td>
<td style="text-align: left;">Get day of week in text form</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Date arithmetic</td>
<td style="text-align: left;"><code>difftime()</code>, <code>-</code></td>
<td style="text-align: left;">Calculate differences between dates</td>
</tr>
<tr class="even">
<td style="text-align: left;">Logical operations</td>
<td style="text-align: left;"><code>&lt;</code>, <code>&gt;</code>, <code>between()</code></td>
<td style="text-align: left;">Filter by date ranges</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Fiscal/seasonal grouping</td>
<td style="text-align: left;"><code>case_when()</code></td>
<td style="text-align: left;">Categorize based on seasons or financial years</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>Demonstration using Vaccination Dataset</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert DATE into usable R date format</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>vaccination <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_date =</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(date, <span class="at">format =</span> <span class="st">"%Y-%m-%dT%H:%M:%SZ"</span>)),</span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_year =</span> <span class="fu">year</span>(vacc_date),</span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_month =</span> <span class="fu">month</span>(vacc_date, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>)</span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>description, base_cost)</span>
<span id="cb163-9"><a href="#cb163-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-10"><a href="#cb163-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vaccination)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  date                              patient base_cost
1 2016-04-10T09:04:48Z 30a6452c-4297-a1ac-977a-6a23237c7b46       136
2 2016-04-10T09:04:48Z 30a6452c-4297-a1ac-977a-6a23237c7b46       136
3 2016-04-10T09:04:48Z 30a6452c-4297-a1ac-977a-6a23237c7b46       136
4 2016-04-10T09:04:48Z 30a6452c-4297-a1ac-977a-6a23237c7b46       136
5 2002-10-29T19:07:21Z 34a4dcc4-35fb-6ad5-ab98-be285c586a4f       136
6 2005-11-01T19:07:21Z 34a4dcc4-35fb-6ad5-ab98-be285c586a4f       136
   vacc_date year    month vaccine_group          vacc_group3 vacc_year
1 2016-04-10 2016    April     Influenza Respiratory vaccines      2016
2 2016-04-10 2016    April     DTP group   Childhood vaccines      2016
3 2016-04-10 2016    April     Hepatitis   Childhood vaccines      2016
4 2016-04-10 2016    April Meningococcal   Childhood vaccines      2016
5 2002-10-29 2002  October     Influenza Respiratory vaccines      2002
6 2005-11-01 2005 November     Influenza Respiratory vaccines      2005
  vacc_month
1      April
2      April
3      April
4      April
5    October
6   November</code></pre>
</div>
</div>
<p>Calculating Time Differences</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating Time Differences</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert column names to lowercase</span></span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(patients) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">colnames</span>(patients))</span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(vaccination) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">colnames</span>(vaccination))</span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true" tabindex="-1"></a><span class="co"># vacc_pt_merged &lt;- left_join(patients, vaccination, by = "id" )</span></span>
<span id="cb165-8"><a href="#cb165-8" aria-hidden="true" tabindex="-1"></a>vacc_pt_merged <span class="ot">&lt;-</span> <span class="fu">left_join</span>(patients, vaccination, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>))</span>
<span id="cb165-9"><a href="#cb165-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-10"><a href="#cb165-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span> (vacc_pt_merged)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   1619 obs. of  37 variables:
 $ id                 : chr  "30a6452c-4297-a1ac-977a-6a23237c7b46" "30a6452c-4297-a1ac-977a-6a23237c7b46" "30a6452c-4297-a1ac-977a-6a23237c7b46" "30a6452c-4297-a1ac-977a-6a23237c7b46" ...
 $ birthdate          : chr  "1994-02-06" "1994-02-06" "1994-02-06" "1994-02-06" ...
 $ deathdate          : chr  "" "" "" "" ...
 $ ssn                : chr  "999-52-8591" "999-52-8591" "999-52-8591" "999-52-8591" ...
 $ drivers            : chr  "S99996852" "S99996852" "S99996852" "S99996852" ...
 $ passport           : chr  "X47758697X" "X47758697X" "X47758697X" "X47758697X" ...
 $ prefix             : chr  "Mr." "Mr." "Mr." "Mr." ...
 $ first              : chr  "Joshua658" "Joshua658" "Joshua658" "Joshua658" ...
 $ middle             : chr  "Alvin56" "Alvin56" "Alvin56" "Alvin56" ...
 $ last               : chr  "Kunde533" "Kunde533" "Kunde533" "Kunde533" ...
 $ suffix             : logi  NA NA NA NA NA NA ...
 $ maiden             : chr  "" "" "" "" ...
 $ marital            : chr  "M" "M" "M" "M" ...
 $ race               : chr  "white" "white" "white" "white" ...
 $ ethnicity          : chr  "nonhispanic" "nonhispanic" "nonhispanic" "nonhispanic" ...
 $ gender             : chr  "M" "M" "M" "M" ...
 $ birthplace         : chr  "Boston  Massachusetts  US" "Boston  Massachusetts  US" "Boston  Massachusetts  US" "Boston  Massachusetts  US" ...
 $ address            : chr  "811 Kihn Viaduct" "811 Kihn Viaduct" "811 Kihn Viaduct" "811 Kihn Viaduct" ...
 $ city               : chr  "Braintree" "Braintree" "Braintree" "Braintree" ...
 $ state              : chr  "Massachusetts" "Massachusetts" "Massachusetts" "Massachusetts" ...
 $ county             : chr  "Norfolk County" "Norfolk County" "Norfolk County" "Norfolk County" ...
 $ fips               : int  25021 25021 25021 25021 25021 25021 25021 25021 25021 25021 ...
 $ zip                : int  2184 2184 2184 2184 2184 2184 2184 2184 2184 2184 ...
 $ lat                : num  42.2 42.2 42.2 42.2 42.2 ...
 $ lon                : num  -71 -71 -71 -71 -71 ...
 $ healthcare_expenses: num  56905 56905 56905 56905 56905 ...
 $ healthcare_coverage: num  18020 18020 18020 18020 18020 ...
 $ income             : int  100511 100511 100511 100511 100511 100511 49737 49737 49737 49737 ...
 $ date               : chr  "2016-04-10T09:04:48Z" "2016-04-10T09:04:48Z" "2016-04-10T09:04:48Z" "2016-04-10T09:04:48Z" ...
 $ base_cost          : num  136 136 136 136 136 136 136 136 136 136 ...
 $ vacc_date          : Date, format: "2016-04-10" "2016-04-10" ...
 $ year               : chr  "2016" "2016" "2016" "2016" ...
 $ month              : chr  "April" "April" "April" "April" ...
 $ vaccine_group      : chr  "Influenza" "DTP group" "Hepatitis" "Meningococcal" ...
 $ vacc_group3        : chr  "Respiratory vaccines" "Childhood vaccines" "Childhood vaccines" "Childhood vaccines" ...
 $ vacc_year          : num  2016 2016 2016 2016 2019 ...
 $ vacc_month         : Ord.factor w/ 12 levels "January"&lt;"February"&lt;..: 4 4 4 4 4 4 10 11 8 8 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>vacc_pt_merged <span class="sc">%&gt;%</span> </span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_date =</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(date, <span class="at">format =</span> <span class="st">"%Y-%m-%dT%H:%M:%SZ"</span>)),</span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">birthdate =</span> <span class="fu">as.Date</span>(birthdate),</span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">days_to_vax =</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(vacc_date, birthdate, <span class="at">units =</span> <span class="st">"days"</span>)),</span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">weeks_to_vax =</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(vacc_date, birthdate, <span class="at">units =</span> <span class="st">"weeks"</span>)),</span>
<span id="cb167-7"><a href="#cb167-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">months_to_vax =</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(vacc_date, birthdate, <span class="at">units =</span> <span class="st">"days"</span>)) <span class="sc">/</span> <span class="fl">30.44</span>,</span>
<span id="cb167-8"><a href="#cb167-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">years_to_vax =</span> <span class="fu">floor</span>(<span class="fu">as.numeric</span>(<span class="fu">difftime</span>(vacc_date, birthdate, <span class="at">units =</span> <span class="st">"days"</span>)) <span class="sc">/</span> <span class="fl">365.25</span>)</span>
<span id="cb167-9"><a href="#cb167-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> vacc_pt_merged</span>
<span id="cb167-10"><a href="#cb167-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-11"><a href="#cb167-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vacc_pt_merged<span class="sc">$</span>days_to_vax)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      0    2548    7742   10375   18263   36813 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vacc_pt_merged<span class="sc">$</span>years_to_vax)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00    6.00   21.00   28.02   50.00  100.00 </code></pre>
</div>
</div>
<p>Extracting Date Components</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>vacc_pt_merged <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_day =</span> <span class="fu">day</span>(vacc_date),</span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_month_num =</span> <span class="fu">month</span>(vacc_date),</span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_month_name =</span> <span class="fu">month</span>(vacc_date, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>),</span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_weekday =</span> <span class="fu">wday</span>(vacc_date, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>),</span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_week =</span> <span class="fu">week</span>(vacc_date),</span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_quarter =</span> <span class="fu">quarter</span>(vacc_date),</span>
<span id="cb171-9"><a href="#cb171-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_year =</span> <span class="fu">year</span>(vacc_date),  <span class="co"># Define vacc_year first</span></span>
<span id="cb171-10"><a href="#cb171-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_fy =</span> <span class="fu">if_else</span>(vacc_month_num <span class="sc">&gt;=</span> <span class="dv">7</span>, vacc_year, vacc_year <span class="sc">-</span> <span class="dv">1</span>),  <span class="co"># FY starts 1 July in Australia</span></span>
<span id="cb171-11"><a href="#cb171-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_season =</span> <span class="fu">case_when</span>(</span>
<span id="cb171-12"><a href="#cb171-12" aria-hidden="true" tabindex="-1"></a>      vacc_month_num <span class="sc">%in%</span> <span class="dv">12</span><span class="sc">:</span><span class="dv">2</span> <span class="sc">~</span> <span class="st">"Summer"</span>,</span>
<span id="cb171-13"><a href="#cb171-13" aria-hidden="true" tabindex="-1"></a>      vacc_month_num <span class="sc">%in%</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>  <span class="sc">~</span> <span class="st">"Autumn"</span>,</span>
<span id="cb171-14"><a href="#cb171-14" aria-hidden="true" tabindex="-1"></a>      vacc_month_num <span class="sc">%in%</span> <span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>  <span class="sc">~</span> <span class="st">"Winter"</span>,</span>
<span id="cb171-15"><a href="#cb171-15" aria-hidden="true" tabindex="-1"></a>      vacc_month_num <span class="sc">%in%</span> <span class="dv">9</span><span class="sc">:</span><span class="dv">11</span> <span class="sc">~</span> <span class="st">"Spring"</span></span>
<span id="cb171-16"><a href="#cb171-16" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb171-17"><a href="#cb171-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_weekend =</span> <span class="fu">wday</span>(vacc_date) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">7</span>),</span>
<span id="cb171-18"><a href="#cb171-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">days_since_ref =</span> <span class="fu">floor</span>(<span class="fu">as.numeric</span>(<span class="fu">difftime</span>(vacc_date, <span class="fu">as.Date</span>(<span class="st">"2020-01-01"</span>), <span class="at">units =</span> <span class="st">"days"</span>)))</span>
<span id="cb171-19"><a href="#cb171-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb171-20"><a href="#cb171-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-21"><a href="#cb171-21" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb171-22"><a href="#cb171-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(vacc_day, vacc_month_num, vacc_month_name, vacc_weekday, vacc_week,</span>
<span id="cb171-23"><a href="#cb171-23" aria-hidden="true" tabindex="-1"></a>         vacc_quarter, vacc_year, vacc_fy, vacc_season, is_weekend, days_since_ref)</span>
<span id="cb171-24"><a href="#cb171-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-25"><a href="#cb171-25" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(temp, <span class="at">n =</span> <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  vacc_day vacc_month_num vacc_month_name vacc_weekday vacc_week vacc_quarter
1       10              4           April       Sunday        15            2
2       10              4           April       Sunday        15            2
3       10              4           April       Sunday        15            2
4       10              4           April       Sunday        15            2
5       14              4           April       Sunday        15            2
6       17              4           April       Sunday        16            2
7       29             10         October      Tuesday        44            4
8        1             11        November      Tuesday        44            4
  vacc_year vacc_fy vacc_season is_weekend days_since_ref
1      2016    2015      Summer       TRUE          -1361
2      2016    2015      Summer       TRUE          -1361
3      2016    2015      Summer       TRUE          -1361
4      2016    2015      Summer       TRUE          -1361
5      2019    2018      Summer       TRUE           -262
6      2022    2021      Summer       TRUE            837
7      2002    2002      Summer      FALSE          -6273
8      2005    2005      Summer      FALSE          -5174</code></pre>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> (temp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Filtering Between Date Ranges</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate Age as of 31 December 2024</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="co"># str(vacc_pt_merged$birthdate) </span></span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>vacc_pt_merged <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb174-6"><a href="#cb174-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">floor</span>(<span class="fu">time_length</span>(<span class="fu">difftime</span>(<span class="fu">as.Date</span>(<span class="st">"2024-12-31"</span>), birthdate), <span class="at">unit =</span> <span class="st">"years"</span>))</span>
<span id="cb174-7"><a href="#cb174-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb174-8"><a href="#cb174-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-9"><a href="#cb174-9" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span> (vacc_pt_merged<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  1   2   5   6   7  10  11  12  13  14  15  16  17  18  19  20  21  23  24  25 
 46  24  64  66  34 102  38  59  21  21  34  83  18  36  18  34  48  13  12  47 
 27  28  29  30  33  34  36  37  38  40  41  42  43  44  45  46  47  48  49  50 
 17  30   9  38   4   7   6   8   6  20  37  16   9  17  15  13   9  21  30  15 
 51  52  53  55  56  58  60  61  62  63  64  65  68  69  71  73  74  76  78  80 
 13  30  16  30  30  14  12  27  49  13  26  14  14  57  15  27  15  14  12  13 
 85  97 110 
 12  20   1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Categorize into Age Groups</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>vacc_pt_merged <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_group =</span> <span class="fu">cut</span>(</span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a>      age,</span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">9</span>, <span class="dv">19</span>, <span class="dv">29</span>, <span class="dv">49</span>, <span class="dv">100</span>),</span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"0‚Äì9"</span>, <span class="st">"10‚Äì19"</span>, <span class="st">"20‚Äì29"</span>, <span class="st">"30‚Äì49"</span>, <span class="st">"50+"</span>),</span>
<span id="cb176-8"><a href="#cb176-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">right =</span> <span class="cn">TRUE</span></span>
<span id="cb176-9"><a href="#cb176-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb176-10"><a href="#cb176-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb176-11"><a href="#cb176-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-12"><a href="#cb176-12" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span> (vacc_pt_merged<span class="sc">$</span>age_group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  0‚Äì9 10‚Äì19 20‚Äì29 30‚Äì49   50+ 
  234   430   210   256   488 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vaccinations only in 2022</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>vacc_2022 <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(vacc_date <span class="sc">&gt;=</span> <span class="fu">ymd</span>(<span class="st">"2022-01-01"</span>) <span class="sc">&amp;</span> vacc_date <span class="sc">&lt;=</span> <span class="fu">ymd</span>(<span class="st">"2022-12-31"</span>))</span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Vaccinations between 2015 and 2024</span></span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(vacc_year <span class="sc">&gt;=</span> <span class="dv">2015</span> <span class="sc">&amp;</span> vacc_year <span class="sc">&lt;=</span> <span class="dv">2024</span>)</span>
<span id="cb178-8"><a href="#cb178-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-9"><a href="#cb178-9" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(vacc_1524<span class="sc">$</span>vacc_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
2015 2016 2017 2018 2019 2020 2021 2022 2023 2024 
 153  139  137  151  161  137  263  120  170  122 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vacc_2022)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="duplicate-observations-and-creating-id" class="level3" data-number="1.5.2">
<h3 data-number="1.5.2" class="anchored" data-anchor-id="duplicate-observations-and-creating-id"><span class="header-section-number">1.5.2</span> <strong>4.2 Duplicate Observations and Creating ID</strong></h3>
<ul>
<li>ID Creation (if missing): paste(), substr(), as.Date(), unite()</li>
<li>Detecting Duplicates: duplicated(), distinct(), n_distinct(), row_number(), count(distinct(‚Ä¶))</li>
<li>Tagging Duplicates: row_number(), duplicated(), mutate(dup = row_number())</li>
<li>Validating Duplicates: group_by() + filter(n() &gt; 1), arrange(), subset()</li>
<li>Removing Duplicates: filter(dup == 1), distinct(), summarise()</li>
<li>Optional Filtering Rules: Keep first/last by date, non-missing only, domain-specific logic</li>
</ul>
<p>Duplicate records in health or survey data can compromise the integrity of analyses. A critical first step is ensuring each individual has a consistent and unique identifier (ID). When explicit IDs are missing or unreliable, they can be constructed using combinations of variables such as names, dates of birth, and location (e.g., using <code>paste()</code>, <code>substr()</code>, or <code>unite()</code>). Once IDs are established, duplicates can be detected, reviewed, and resolved systematically through tagging (<code>row_number()</code>), visual inspection, and appropriate retention or removal strategies.</p>
<hr>
<p>üîπ Key Aspects of Duplicate Management</p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Aspect</strong></th>
<th><strong>What to Address</strong></th>
<th><strong>Why It Matters</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Detection Methods</td>
<td>Use <code>duplicated()</code>, <code>distinct()</code>, <code>n_distinct()</code>, <code>row_number()</code> by ID or keys</td>
<td>Helps quantify and locate potential duplicates</td>
</tr>
<tr class="even">
<td>Validation</td>
<td>Visual/manual review using <code>arrange()</code>, <code>group_by()</code> + <code>filter()</code></td>
<td>Prevents removal of legitimate but similar entries</td>
</tr>
<tr class="odd">
<td>Tagging Duplicates</td>
<td>Label using <code>row_number()</code> or <code>duplicated()</code></td>
<td>Allows flexible filtering or analysis of repeats</td>
</tr>
<tr class="even">
<td>Deciding What to Keep</td>
<td>Keep first, latest (by date), or non-missing based on rules</td>
<td>Avoids loss of useful or most complete records</td>
</tr>
<tr class="odd">
<td>Removal or Aggregation</td>
<td>Drop with <code>filter()</code>, or use <code>summarise()</code> to collapse duplicates</td>
<td>Depends on context: reporting vs.&nbsp;recordkeeping</td>
</tr>
<tr class="even">
<td>ID Creation / Fixing</td>
<td>Use <code>mutate()</code> to create or correct IDs</td>
<td>Enables future joins and tracking</td>
</tr>
</tbody>
</table>
<hr>
<p>The following table shows the summary with some data manipulation options</p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Task</strong></th>
<th><strong>Function / Code</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Identify blank IDs or fields</td>
<td><code>x[x == ""] &lt;- NA</code></td>
<td>Convert empty strings to <code>NA</code> for proper detection</td>
</tr>
<tr class="even">
<td>Count missing values</td>
<td><code>sum(is.na(x))</code></td>
<td>Check how many values are missing</td>
</tr>
<tr class="odd">
<td>Count unique observations</td>
<td><code>count(distinct(df, id))</code></td>
<td>Determine the number of unique records</td>
</tr>
<tr class="even">
<td>Generate row numbers per group</td>
<td><code>group_by(id) %&gt;% mutate(dup = row_number())</code></td>
<td>Label duplicates within each ID</td>
</tr>
<tr class="odd">
<td>Check duplication status</td>
<td><code>table(df$dup)</code> or <code>sum(dup &gt;= 2)</code></td>
<td>Summarise duplication pattern</td>
</tr>
<tr class="even">
<td>Subset for review</td>
<td><code>subset(df, dup == 2)</code></td>
<td>View specific duplicates for manual inspection</td>
</tr>
<tr class="odd">
<td>Filter duplicated individuals</td>
<td><code>filter(n() &gt; 1)</code></td>
<td>Extract only duplicated IDs</td>
</tr>
<tr class="even">
<td>Remove duplicates</td>
<td><code>filter(!(dup &gt;= 2))</code></td>
<td>Keep only the first instance per group (if needed)</td>
</tr>
<tr class="odd">
<td>Clean temporary object</td>
<td><code>rm()</code></td>
<td>Remove intermediate datasets from environment</td>
</tr>
</tbody>
</table>
<p>This setup ensures duplicates are clearly identified, reviewed, and removed where appropriate.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>patients <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">birthdate =</span> <span class="fu">as.Date</span>(birthdate),</span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">id_text =</span> <span class="fu">paste0</span>(<span class="fu">substr</span>(first, <span class="dv">1</span>, <span class="dv">4</span>), <span class="st">"|"</span>, <span class="fu">substr</span>(last, <span class="dv">1</span>, <span class="dv">4</span>), <span class="st">"|"</span>, birthdate)</span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview new ID</span></span>
<span id="cb181-7"><a href="#cb181-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients<span class="sc">$</span>id_text, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Josh|Kund|1994-02-06" "Benn|Eber|1968-08-06" "Hunt|Gerl|2008-12-21"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Step 2: Create random numeric ID per individual ---</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)  <span class="co"># for reproducibility</span></span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>patients <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id_num =</span> <span class="fu">sample</span>(<span class="dv">100000</span><span class="sc">:</span><span class="dv">999999</span>, <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">FALSE</span>))</span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview both ID columns</span></span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(first, last, birthdate, id_text, id_num) <span class="sc">%&gt;%</span></span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      first          last  birthdate              id_text id_num
1 Joshua658      Kunde533 1994-02-06 Josh|Kund|1994-02-06 861679
2 Bennie663      Ebert178 1968-08-06 Benn|Eber|1968-08-06 730677
3 Hunter736    Gerlach374 2008-12-21 Hunt|Gerl|2008-12-21 404107
4 Carlyn477 Williamson769 1994-01-27 Carl|Will|1994-01-27 395845
5   Robin66  Gleichner915 2019-07-27 Robi|Glei|2019-07-27 226054</code></pre>
</div>
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean-up if needed</span></span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a><span class="co"># rm(id_text, id_num) # optional if you store externally</span></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span> (patients<span class="sc">$</span>race)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 asian  black native  other  white 
     8      6      1      3     88 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>otherrace <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(race <span class="sc">!=</span> <span class="st">"white"</span>)</span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a>patients <span class="ot">&lt;-</span> <span class="fu">rbind</span>(patients, otherrace)</span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-6"><a href="#cb187-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Count total and unique records</span></span>
<span id="cb187-7"><a href="#cb187-7" aria-hidden="true" tabindex="-1"></a>n_total <span class="ot">&lt;-</span> <span class="fu">nrow</span>(patients)</span>
<span id="cb187-8"><a href="#cb187-8" aria-hidden="true" tabindex="-1"></a>n_unique <span class="ot">&lt;-</span> <span class="fu">n_distinct</span>(patients<span class="sc">$</span>id_text)</span>
<span id="cb187-9"><a href="#cb187-9" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">"Total records: {n_total}, Unique IDs: {n_unique}"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Total records: 124, Unique IDs: 106</code></pre>
</div>
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tag duplicates using row_number()</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>patients <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id_text) <span class="sc">%&gt;%</span></span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_text) <span class="sc">%&gt;%</span></span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dup =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb189-7"><a href="#cb189-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Count number of true duplicates</span></span>
<span id="cb189-8"><a href="#cb189-8" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(patients<span class="sc">$</span>dup)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  1   2 
106  18 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sum</span>(patients<span class="sc">$</span>dup <span class="sc">&gt;=</span> <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18</code></pre>
</div>
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep only records from individuals who have duplicates</span></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>duplicates <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_text) <span class="sc">%&gt;%</span></span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>() <span class="sc">&gt;=</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_text, id_num, race, marital, gender, birthdate) <span class="sc">%&gt;%</span></span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb193-7"><a href="#cb193-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-8"><a href="#cb193-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview records from duplicated individuals</span></span>
<span id="cb193-9"><a href="#cb193-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(duplicates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 6
  id_text              id_num race  marital gender birthdate 
  &lt;chr&gt;                 &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;date&gt;    
1 Alen|Gusi|1927-03-20 361202 other M       F      1927-03-20
2 Alen|Gusi|1927-03-20 361202 other M       F      1927-03-20
3 Bert|Alem|1983-05-07 513589 black M       F      1983-05-07
4 Bert|Alem|1983-05-07 513589 black M       F      1983-05-07
5 Blan|Rein|1951-11-22 465318 asian S       F      1951-11-22
6 Blan|Rein|1951-11-22 465318 asian S       F      1951-11-22</code></pre>
</div>
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(duplicates, n_total, n_unique)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="merging-joining-and-appending-datasets" class="level3" data-number="1.5.3">
<h3 data-number="1.5.3" class="anchored" data-anchor-id="merging-joining-and-appending-datasets"><span class="header-section-number">1.5.3</span> <strong>4.3 Merging (Joining) and Appending Datasets</strong></h3>
<ul>
<li><code>left_join()</code>, <code>right_join()</code>, <code>inner_join()</code>, <code>full_join()</code></li>
<li><code>semi_join()</code> and <code>anti_join()</code></li>
<li><code>bind_rows()</code>, <code>rbind()</code> , <code>bind_cols()</code> and <code>cbind()</code></li>
</ul>
<p>When analyzing real-world datasets, it‚Äôs often necessary to <strong>merge</strong> or <strong>append</strong> multiple datasets.<br>
This could involve matching rows based on common identifiers, appending additional cases, or combining variables side-by-side.</p>
<p>We can <strong>join</strong>, <strong>bind</strong>, or <strong>filter</strong> datasets efficiently using <code>dplyr</code> and base R techniques.</p>
<p><strong>Brief Descriptions</strong></p>
<ul>
<li><strong>left_join()</strong>: Keep all records from the left (main) table; bring matching records from the right table.</li>
<li><strong>right_join()</strong>: Keep all records from the right table; bring matching records from the left.</li>
<li><strong>inner_join()</strong>: Keep only rows where keys match in both tables.</li>
<li><strong>full_join()</strong>: Keep all records from both tables; missing matches filled with <code>NA</code>.</li>
<li><strong>semi_join()</strong>: Keep rows from the left table where a match exists in the right.</li>
<li><strong>anti_join()</strong>: Keep only rows from the left table that <strong>don‚Äôt</strong> match the right.</li>
</ul>
<p>‚û°Ô∏è <code>bind_rows()</code> and <code>rbind()</code> are used for <strong>stacking</strong> datasets.<br>
‚û°Ô∏è <code>bind_cols()</code> and <code>cbind()</code> are used for <strong>attaching new columns</strong> horizontally.</p>
<p><strong>Summary Table: Key Functions for Joining and Appending</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 26%">
<col style="width: 25%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Task</strong></th>
<th style="text-align: left;"><strong>Function</strong></th>
<th style="text-align: left;"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Merge by common key</td>
<td style="text-align: left;"><code>left_join()</code>, <code>right_join()</code>, <code>inner_join()</code>, <code>full_join()</code></td>
<td style="text-align: left;">Merge datasets using common variables</td>
</tr>
<tr class="even">
<td style="text-align: left;">Filter matching rows</td>
<td style="text-align: left;"><code>semi_join()</code></td>
<td style="text-align: left;">Keep rows from left table that have matches in right table</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Filter non-matching rows</td>
<td style="text-align: left;"><code>anti_join()</code></td>
<td style="text-align: left;">Keep rows from left table with no match in right table</td>
</tr>
<tr class="even">
<td style="text-align: left;">Row-wise append</td>
<td style="text-align: left;"><code>bind_rows()</code></td>
<td style="text-align: left;">Stack two datasets vertically (must have same columns)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column-wise append</td>
<td style="text-align: left;"><code>bind_cols()</code></td>
<td style="text-align: left;">Add columns side-by-side (matching by row position)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Basic base R row bind</td>
<td style="text-align: left;"><code>rbind()</code></td>
<td style="text-align: left;">Append rows (base R equivalent to <code>bind_rows</code>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Basic base R column bind</td>
<td style="text-align: left;"><code>cbind()</code></td>
<td style="text-align: left;">Append columns (base R equivalent to <code>bind_cols</code>)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Join a table to itself</td>
<td style="text-align: left;">Self-join</td>
<td style="text-align: left;">Analyze relationships within a single dataset (e.g., hierarchy)</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>Important Reminders</strong> - Joins (<code>left_join</code>, etc.) match based on a <strong>key</strong> (column/s). - <code>bind_rows()</code> assumes <strong>same column names and types</strong>. - <code>bind_cols()</code> assumes <strong>same number of rows</strong>. - <code>rbind()</code> and <code>cbind()</code> are <strong>base R</strong> methods but <code>dplyr::bind_*()</code> are more flexible. ‚Äî</p>
<p><strong>Demonstrating Different Types of Joins with Brief Descriptions</strong></p>
<p><strong>Standardizing variable Names</strong></p>
<p>Before performing joins, it is essential to ensure column names match in both datasets.<br>
This avoids errors caused by case differences or inconsistent naming.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Full Join: Keep everything from both datasets</span></span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a>vacc_full_join <span class="ot">&lt;-</span> <span class="fu">full_join</span>(</span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a>  patients,</span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true" tabindex="-1"></a>  vaccination,</span>
<span id="cb196-7"><a href="#cb196-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>)</span>
<span id="cb196-8"><a href="#cb196-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb196-9"><a href="#cb196-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-10"><a href="#cb196-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vacc_full_join, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                    id  birthdate deathdate         ssn
1 30a6452c-4297-a1ac-977a-6a23237c7b46 1994-02-06           999-52-8591
2 30a6452c-4297-a1ac-977a-6a23237c7b46 1994-02-06           999-52-8591
3 30a6452c-4297-a1ac-977a-6a23237c7b46 1994-02-06           999-52-8591
    drivers   passport prefix     first  middle     last suffix maiden marital
1 S99996852 X47758697X    Mr. Joshua658 Alvin56 Kunde533     NA              M
2 S99996852 X47758697X    Mr. Joshua658 Alvin56 Kunde533     NA              M
3 S99996852 X47758697X    Mr. Joshua658 Alvin56 Kunde533     NA              M
   race   ethnicity gender                birthplace          address      city
1 white nonhispanic      M Boston  Massachusetts  US 811 Kihn Viaduct Braintree
2 white nonhispanic      M Boston  Massachusetts  US 811 Kihn Viaduct Braintree
3 white nonhispanic      M Boston  Massachusetts  US 811 Kihn Viaduct Braintree
          state         county  fips  zip      lat      lon healthcare_expenses
1 Massachusetts Norfolk County 25021 2184 42.21114 -71.0458            56904.96
2 Massachusetts Norfolk County 25021 2184 42.21114 -71.0458            56904.96
3 Massachusetts Norfolk County 25021 2184 42.21114 -71.0458            56904.96
  healthcare_coverage income                 date
1            18019.99 100511 2016-04-10T09:04:48Z
2            18019.99 100511 2016-04-10T09:04:48Z
3            18019.99 100511 2016-04-10T09:04:48Z
                             encounter code
1 0b03e41b-06a6-66fa-b972-acc5a83b134a  140
2 0b03e41b-06a6-66fa-b972-acc5a83b134a  113
3 0b03e41b-06a6-66fa-b972-acc5a83b134a   43
                                                   description base_cost
1           Influenza  seasonal  injectable  preservative free       136
2 Td (adult)  5 Lf tetanus toxoid  preservative free  adsorbed       136
3                                                 Hep B  adult       136</code></pre>
</div>
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Left Join: Keep all patients, add vaccination if available</span></span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a>vacc_left_join <span class="ot">&lt;-</span> <span class="fu">left_join</span>(</span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a>  patients,</span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a>  vaccination,</span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>)</span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb198-9"><a href="#cb198-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-10"><a href="#cb198-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vacc_left_join, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                    id  birthdate deathdate         ssn
1 30a6452c-4297-a1ac-977a-6a23237c7b46 1994-02-06           999-52-8591
2 30a6452c-4297-a1ac-977a-6a23237c7b46 1994-02-06           999-52-8591
3 30a6452c-4297-a1ac-977a-6a23237c7b46 1994-02-06           999-52-8591
    drivers   passport prefix     first  middle     last suffix maiden marital
1 S99996852 X47758697X    Mr. Joshua658 Alvin56 Kunde533     NA              M
2 S99996852 X47758697X    Mr. Joshua658 Alvin56 Kunde533     NA              M
3 S99996852 X47758697X    Mr. Joshua658 Alvin56 Kunde533     NA              M
   race   ethnicity gender                birthplace          address      city
1 white nonhispanic      M Boston  Massachusetts  US 811 Kihn Viaduct Braintree
2 white nonhispanic      M Boston  Massachusetts  US 811 Kihn Viaduct Braintree
3 white nonhispanic      M Boston  Massachusetts  US 811 Kihn Viaduct Braintree
          state         county  fips  zip      lat      lon healthcare_expenses
1 Massachusetts Norfolk County 25021 2184 42.21114 -71.0458            56904.96
2 Massachusetts Norfolk County 25021 2184 42.21114 -71.0458            56904.96
3 Massachusetts Norfolk County 25021 2184 42.21114 -71.0458            56904.96
  healthcare_coverage income                 date
1            18019.99 100511 2016-04-10T09:04:48Z
2            18019.99 100511 2016-04-10T09:04:48Z
3            18019.99 100511 2016-04-10T09:04:48Z
                             encounter code
1 0b03e41b-06a6-66fa-b972-acc5a83b134a  140
2 0b03e41b-06a6-66fa-b972-acc5a83b134a  113
3 0b03e41b-06a6-66fa-b972-acc5a83b134a   43
                                                   description base_cost
1           Influenza  seasonal  injectable  preservative free       136
2 Td (adult)  5 Lf tetanus toxoid  preservative free  adsorbed       136
3                                                 Hep B  adult       136</code></pre>
</div>
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Right Join: Keep all vaccinations, add patients if available</span></span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a>vacc_right_join <span class="ot">&lt;-</span> <span class="fu">right_join</span>(</span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a>  patients,</span>
<span id="cb200-6"><a href="#cb200-6" aria-hidden="true" tabindex="-1"></a>  vaccination,</span>
<span id="cb200-7"><a href="#cb200-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>)</span>
<span id="cb200-8"><a href="#cb200-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb200-9"><a href="#cb200-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-10"><a href="#cb200-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vacc_right_join, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                    id  birthdate deathdate         ssn
1 30a6452c-4297-a1ac-977a-6a23237c7b46 1994-02-06           999-52-8591
2 30a6452c-4297-a1ac-977a-6a23237c7b46 1994-02-06           999-52-8591
3 30a6452c-4297-a1ac-977a-6a23237c7b46 1994-02-06           999-52-8591
    drivers   passport prefix     first  middle     last suffix maiden marital
1 S99996852 X47758697X    Mr. Joshua658 Alvin56 Kunde533     NA              M
2 S99996852 X47758697X    Mr. Joshua658 Alvin56 Kunde533     NA              M
3 S99996852 X47758697X    Mr. Joshua658 Alvin56 Kunde533     NA              M
   race   ethnicity gender                birthplace          address      city
1 white nonhispanic      M Boston  Massachusetts  US 811 Kihn Viaduct Braintree
2 white nonhispanic      M Boston  Massachusetts  US 811 Kihn Viaduct Braintree
3 white nonhispanic      M Boston  Massachusetts  US 811 Kihn Viaduct Braintree
          state         county  fips  zip      lat      lon healthcare_expenses
1 Massachusetts Norfolk County 25021 2184 42.21114 -71.0458            56904.96
2 Massachusetts Norfolk County 25021 2184 42.21114 -71.0458            56904.96
3 Massachusetts Norfolk County 25021 2184 42.21114 -71.0458            56904.96
  healthcare_coverage income                 date
1            18019.99 100511 2016-04-10T09:04:48Z
2            18019.99 100511 2016-04-10T09:04:48Z
3            18019.99 100511 2016-04-10T09:04:48Z
                             encounter code
1 0b03e41b-06a6-66fa-b972-acc5a83b134a  140
2 0b03e41b-06a6-66fa-b972-acc5a83b134a  113
3 0b03e41b-06a6-66fa-b972-acc5a83b134a   43
                                                   description base_cost
1           Influenza  seasonal  injectable  preservative free       136
2 Td (adult)  5 Lf tetanus toxoid  preservative free  adsorbed       136
3                                                 Hep B  adult       136</code></pre>
</div>
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Inner Join: Keep only matched patients and vaccinations</span></span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a>vacc_inner_join <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(</span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a>  patients,</span>
<span id="cb202-6"><a href="#cb202-6" aria-hidden="true" tabindex="-1"></a>  vaccination,</span>
<span id="cb202-7"><a href="#cb202-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>))</span>
<span id="cb202-8"><a href="#cb202-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-9"><a href="#cb202-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vacc_inner_join, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                    id  birthdate deathdate         ssn
1 30a6452c-4297-a1ac-977a-6a23237c7b46 1994-02-06           999-52-8591
2 30a6452c-4297-a1ac-977a-6a23237c7b46 1994-02-06           999-52-8591
3 30a6452c-4297-a1ac-977a-6a23237c7b46 1994-02-06           999-52-8591
    drivers   passport prefix     first  middle     last suffix maiden marital
1 S99996852 X47758697X    Mr. Joshua658 Alvin56 Kunde533     NA              M
2 S99996852 X47758697X    Mr. Joshua658 Alvin56 Kunde533     NA              M
3 S99996852 X47758697X    Mr. Joshua658 Alvin56 Kunde533     NA              M
   race   ethnicity gender                birthplace          address      city
1 white nonhispanic      M Boston  Massachusetts  US 811 Kihn Viaduct Braintree
2 white nonhispanic      M Boston  Massachusetts  US 811 Kihn Viaduct Braintree
3 white nonhispanic      M Boston  Massachusetts  US 811 Kihn Viaduct Braintree
          state         county  fips  zip      lat      lon healthcare_expenses
1 Massachusetts Norfolk County 25021 2184 42.21114 -71.0458            56904.96
2 Massachusetts Norfolk County 25021 2184 42.21114 -71.0458            56904.96
3 Massachusetts Norfolk County 25021 2184 42.21114 -71.0458            56904.96
  healthcare_coverage income                 date
1            18019.99 100511 2016-04-10T09:04:48Z
2            18019.99 100511 2016-04-10T09:04:48Z
3            18019.99 100511 2016-04-10T09:04:48Z
                             encounter code
1 0b03e41b-06a6-66fa-b972-acc5a83b134a  140
2 0b03e41b-06a6-66fa-b972-acc5a83b134a  113
3 0b03e41b-06a6-66fa-b972-acc5a83b134a   43
                                                   description base_cost
1           Influenza  seasonal  injectable  preservative free       136
2 Td (adult)  5 Lf tetanus toxoid  preservative free  adsorbed       136
3                                                 Hep B  adult       136</code></pre>
</div>
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Semi Join: Keep only patients that have a vaccination match</span></span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a><span class="co"># (Only patient columns are kept)</span></span>
<span id="cb204-4"><a href="#cb204-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb204-5"><a href="#cb204-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-6"><a href="#cb204-6" aria-hidden="true" tabindex="-1"></a>vacc_semi_join <span class="ot">&lt;-</span> <span class="fu">semi_join</span>(</span>
<span id="cb204-7"><a href="#cb204-7" aria-hidden="true" tabindex="-1"></a>  patients,</span>
<span id="cb204-8"><a href="#cb204-8" aria-hidden="true" tabindex="-1"></a>  vaccination,</span>
<span id="cb204-9"><a href="#cb204-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>))</span>
<span id="cb204-10"><a href="#cb204-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-11"><a href="#cb204-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vacc_semi_join, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                    id  birthdate  deathdate         ssn
1 30a6452c-4297-a1ac-977a-6a23237c7b46 1994-02-06            999-52-8591
2 34a4dcc4-35fb-6ad5-ab98-be285c586a4f 1968-08-06 2009-12-11 999-75-3953
3 7179458e-d6e3-c723-2530-d4acfe1c2668 2008-12-21            999-70-1925
    drivers   passport prefix     first      middle       last suffix maiden
1 S99996852 X47758697X    Mr. Joshua658     Alvin56   Kunde533     NA       
2 S99993577 X28173268X    Mr. Bennie663               Ebert178     NA       
3                             Hunter736 Mckinley734 Gerlach374     NA       
  marital  race   ethnicity gender                  birthplace
1       M white nonhispanic      M   Boston  Massachusetts  US
2       D white nonhispanic      M Chicopee  Massachusetts  US
3         white nonhispanic      M  Spencer  Massachusetts  US
                      address         city         state          county  fips
1            811 Kihn Viaduct    Braintree Massachusetts  Norfolk County 25021
2 975 Pfannerstill Throughway    Braintree Massachusetts  Norfolk County 25021
3             548 Heller Lane Mattapoisett Massachusetts Plymouth County    NA
   zip      lat       lon healthcare_expenses healthcare_coverage income
1 2184 42.21114 -71.04580            56904.96            18019.99 100511
2 2184 42.25542 -70.97102           124024.12             1075.06  49737
3    0 41.64829 -70.85062            45645.06             6154.94 133816</code></pre>
</div>
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Anti Join: Keep only patients that do not have a vaccination match</span></span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a>vacc_anti_join <span class="ot">&lt;-</span> <span class="fu">anti_join</span>(</span>
<span id="cb206-5"><a href="#cb206-5" aria-hidden="true" tabindex="-1"></a>  patients,</span>
<span id="cb206-6"><a href="#cb206-6" aria-hidden="true" tabindex="-1"></a>  vaccination,</span>
<span id="cb206-7"><a href="#cb206-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>))</span>
<span id="cb206-8"><a href="#cb206-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-9"><a href="#cb206-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vacc_anti_join, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] id                  birthdate           deathdate          
 [4] ssn                 drivers             passport           
 [7] prefix              first               middle             
[10] last                suffix              maiden             
[13] marital             race                ethnicity          
[16] gender              birthplace          address            
[19] city                state               county             
[22] fips                zip                 lat                
[25] lon                 healthcare_expenses healthcare_coverage
[28] income             
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove temporary datasets</span></span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vacc_left_join, vacc_right_join, vacc_inner_join, vacc_full_join, vacc_semi_join, vacc_anti_join)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Appending (Binding) DataFrames: Rows and Columns</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Binding Rows Together (bind_rows): Combine NSW, WA, and Others into one dataset</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a>bc_combined_rows <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a>  breast_cancer_NSW,</span>
<span id="cb209-5"><a href="#cb209-5" aria-hidden="true" tabindex="-1"></a>  breast_cancer_WA,</span>
<span id="cb209-6"><a href="#cb209-6" aria-hidden="true" tabindex="-1"></a>  breast_cancer_others</span>
<span id="cb209-7"><a href="#cb209-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb209-8"><a href="#cb209-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-9"><a href="#cb209-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Check result</span></span>
<span id="cb209-10"><a href="#cb209-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_combined_rows, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sa3code sa3coden    sa3name state   year part50_74 pop50_74 rate50_74
1   10102    10102 Queanbeyan   NSW 201617      4875     8052  60.50000
2   10102    10102 Queanbeyan   NSW 201718      5048     8309  60.75961
3   10102    10102 Queanbeyan   NSW 201819      5276     8588  61.43839
  agen50_74 expct50_74 part50_69 pop50_69 rate50_69 agen50_69 expct50_69
1         3       4428      4309     7145  60.30000         2       3929
2         3       4553      4448     7338  60.62238         2       4013
3         3       4706      4629     7548  61.33203         2       4113
  part50_54 pop50_54 rate50_54 agen50_54 expct50_54 part55_59 pop55_59
1      1284     2251  57.00000         1       1118      1188     1970
2      1285     2306  55.72035         1       1143      1260     2030
3      1375     2342  58.70977         1       1166      1252     2093
  rate55_59 agen55_59 expct55_59 part60_64 pop60_64 rate60_64 agen60_64
1  60.30000         4       1046      1012     1625  62.30000         5
2  62.09035         4       1069      1048     1646  63.69947         5
3  59.81504         4       1098      1105     1689  65.43657         5
  expct60_64 part65_69 pop65_69 rate65_69 agen65_69 expct65_69 part70_74
1        950       826     1300  63.50000         6        781       566
2        953       855     1357  63.02558         6        812       600
3        967       898     1426  63.00429         6        849       647
  pop70_74 rate70_74 agen70_74 expct70_74
1      907  62.40000         7        498
2      971  61.79725         7        541
3     1040  62.21032         7        585</code></pre>
</div>
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Confirm number of rows</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(bc_combined_rows)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1364</code></pre>
</div>
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Binding Columns Together (bind_cols): Combine Participation Data with SA3 metadata</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (needs same number of rows)</span></span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-4"><a href="#cb213-4" aria-hidden="true" tabindex="-1"></a>bc_combined_cols <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(</span>
<span id="cb213-5"><a href="#cb213-5" aria-hidden="true" tabindex="-1"></a>  participation,</span>
<span id="cb213-6"><a href="#cb213-6" aria-hidden="true" tabindex="-1"></a>  breast_cancer_SA3_info )</span>
<span id="cb213-7"><a href="#cb213-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check result</span></span>
<span id="cb213-8"><a href="#cb213-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_combined_cols, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    year part50_74 pop50_74 rate50_74 agen50_74 expct50_74 part50_69 pop50_69
1 201617      4875     8052  60.50000         3       4428      4309     7145
2 201718      5048     8309  60.75961         3       4553      4448     7338
3 201819      5276     8588  61.43839         3       4706      4629     7548
  rate50_69 agen50_69 expct50_69 part50_54 pop50_54 rate50_54 agen50_54
1  60.30000         2       3929      1284     2251  57.00000         1
2  60.62238         2       4013      1285     2306  55.72035         1
3  61.33203         2       4113      1375     2342  58.70977         1
  expct50_54 part55_59 pop55_59 rate55_59 agen55_59 expct55_59 part60_64
1       1118      1188     1970  60.30000         4       1046      1012
2       1143      1260     2030  62.09035         4       1069      1048
3       1166      1252     2093  59.81504         4       1098      1105
  pop60_64 rate60_64 agen60_64 expct60_64 part65_69 pop65_69 rate65_69
1     1625  62.30000         5        950       826     1300  63.50000
2     1646  63.69947         5        953       855     1357  63.02558
3     1689  65.43657         5        967       898     1426  63.00429
  agen65_69 expct65_69 part70_74 pop70_74 rate70_74 agen70_74 expct70_74
1         6        781       566      907  62.40000         7        498
2         6        812       600      971  61.79725         7        541
3         6        849       647     1040  62.21032         7        585
  sa3code sa3coden    sa3name state
1   10102    10102 Queanbeyan   NSW
2   10102    10102 Queanbeyan   NSW
3   10102    10102 Queanbeyan   NSW</code></pre>
</div>
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Appending Rows Using Base R rbind()</span></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (Equivalent to bind_rows but simpler cases, needs identical columns)</span></span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true" tabindex="-1"></a>bc_combined_rbind <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb215-4"><a href="#cb215-4" aria-hidden="true" tabindex="-1"></a>  breast_cancer_NSW,</span>
<span id="cb215-5"><a href="#cb215-5" aria-hidden="true" tabindex="-1"></a>  breast_cancer_WA</span>
<span id="cb215-6"><a href="#cb215-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb215-7"><a href="#cb215-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-8"><a href="#cb215-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Check result</span></span>
<span id="cb215-9"><a href="#cb215-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_combined_rbind, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sa3code sa3coden    sa3name state   year part50_74 pop50_74 rate50_74
1   10102    10102 Queanbeyan   NSW 201617      4875     8052  60.50000
2   10102    10102 Queanbeyan   NSW 201718      5048     8309  60.75961
3   10102    10102 Queanbeyan   NSW 201819      5276     8588  61.43839
  agen50_74 expct50_74 part50_69 pop50_69 rate50_69 agen50_69 expct50_69
1         3       4428      4309     7145  60.30000         2       3929
2         3       4553      4448     7338  60.62238         2       4013
3         3       4706      4629     7548  61.33203         2       4113
  part50_54 pop50_54 rate50_54 agen50_54 expct50_54 part55_59 pop55_59
1      1284     2251  57.00000         1       1118      1188     1970
2      1285     2306  55.72035         1       1143      1260     2030
3      1375     2342  58.70977         1       1166      1252     2093
  rate55_59 agen55_59 expct55_59 part60_64 pop60_64 rate60_64 agen60_64
1  60.30000         4       1046      1012     1625  62.30000         5
2  62.09035         4       1069      1048     1646  63.69947         5
3  59.81504         4       1098      1105     1689  65.43657         5
  expct60_64 part65_69 pop65_69 rate65_69 agen65_69 expct65_69 part70_74
1        950       826     1300  63.50000         6        781       566
2        953       855     1357  63.02558         6        812       600
3        967       898     1426  63.00429         6        849       647
  pop70_74 rate70_74 agen70_74 expct70_74
1      907  62.40000         7        498
2      971  61.79725         7        541
3     1040  62.21032         7        585</code></pre>
</div>
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Appending Columns Using Base R cbind()</span></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (Simple column binding, assumes same number of rows)</span></span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true" tabindex="-1"></a>bc_combined_cbind <span class="ot">&lt;-</span> <span class="fu">cbind</span>(</span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true" tabindex="-1"></a>  participation,</span>
<span id="cb217-6"><a href="#cb217-6" aria-hidden="true" tabindex="-1"></a>  breast_cancer_SA3_info)</span>
<span id="cb217-7"><a href="#cb217-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-8"><a href="#cb217-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Check result</span></span>
<span id="cb217-9"><a href="#cb217-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_combined_cbind, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    year part50_74 pop50_74 rate50_74 agen50_74 expct50_74 part50_69 pop50_69
1 201617      4875     8052  60.50000         3       4428      4309     7145
2 201718      5048     8309  60.75961         3       4553      4448     7338
3 201819      5276     8588  61.43839         3       4706      4629     7548
  rate50_69 agen50_69 expct50_69 part50_54 pop50_54 rate50_54 agen50_54
1  60.30000         2       3929      1284     2251  57.00000         1
2  60.62238         2       4013      1285     2306  55.72035         1
3  61.33203         2       4113      1375     2342  58.70977         1
  expct50_54 part55_59 pop55_59 rate55_59 agen55_59 expct55_59 part60_64
1       1118      1188     1970  60.30000         4       1046      1012
2       1143      1260     2030  62.09035         4       1069      1048
3       1166      1252     2093  59.81504         4       1098      1105
  pop60_64 rate60_64 agen60_64 expct60_64 part65_69 pop65_69 rate65_69
1     1625  62.30000         5        950       826     1300  63.50000
2     1646  63.69947         5        953       855     1357  63.02558
3     1689  65.43657         5        967       898     1426  63.00429
  agen65_69 expct65_69 part70_74 pop70_74 rate70_74 agen70_74 expct70_74
1         6        781       566      907  62.40000         7        498
2         6        812       600      971  61.79725         7        541
3         6        849       647     1040  62.21032         7        585
  sa3code sa3coden    sa3name state
1   10102    10102 Queanbeyan   NSW
2   10102    10102 Queanbeyan   NSW
3   10102    10102 Queanbeyan   NSW</code></pre>
</div>
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Important Notes:</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="co"># - bind_rows() can handle different column orders safely</span></span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true" tabindex="-1"></a><span class="co"># - rbind() requires identical column names and order</span></span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true" tabindex="-1"></a><span class="co"># - bind_cols() simply pastes side-by-side, no matching by keys</span></span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - cbind() assumes same number of rows</span></span>
<span id="cb219-6"><a href="#cb219-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-7"><a href="#cb219-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb219-8"><a href="#cb219-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove all temporary objects created in this chunk</span></span>
<span id="cb219-9"><a href="#cb219-9" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb219-10"><a href="#cb219-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(</span>
<span id="cb219-11"><a href="#cb219-11" aria-hidden="true" tabindex="-1"></a>  breast_cancer_NSW, breast_cancer_WA, breast_cancer_others, participation, breast_cancer_SA3_info,</span>
<span id="cb219-12"><a href="#cb219-12" aria-hidden="true" tabindex="-1"></a>  bc_combined_rows, bc_combined_cols, bc_combined_rbind, bc_combined_cbind</span>
<span id="cb219-13"><a href="#cb219-13" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="missing-value-identification-and-imputations" class="level3" data-number="1.5.4">
<h3 data-number="1.5.4" class="anchored" data-anchor-id="missing-value-identification-and-imputations"><span class="header-section-number">1.5.4</span> <strong>4.4 Missing Value Identification and Imputations</strong></h3>
<p><strong>A. Identifying Missing Values</strong></p>
<ul>
<li><p>is.na(), anyNA(), sum(is.na(x)), colSums() ‚Äì detect/count missing values</p></li>
<li><p>complete.cases() ‚Äì filter complete rows</p></li>
<li><p>Convert blanks to NA: x[x == ‚Äú‚Äú] &lt;- NA</p></li>
</ul>
<p><strong>B. Handling Missing Values</strong></p>
<ul>
<li><p>Basic Removal/Replacement: na.omit(), replace_na() (tidyr), ifelse()</p></li>
<li><p>Forward/Backward Fill: fill() (tidyr) with .direction = ‚Äúdown‚Äù / ‚Äúup‚Äù</p></li>
<li><p>Statistical Imputation:</p></li>
</ul>
<p>-Simple: mean/median imputation</p>
<p>-Multiple: mice::mice()()</p>
<p>-<strong>Advanced</strong>: Hmisc::aregImpute, missForest, Amelia, zoo::na.fill</p>
<p>Missing data is a common issue in real-world datasets. In R, handling missing values properly is essential to ensure the integrity of analyses and avoid misleading results.</p>
<p>This section covers how to <strong>identify</strong>, <strong>clean</strong>, and <strong>impute</strong> missing values using base R and tidyverse tools. Techniques range from basic filtering to advanced imputation models.</p>
<p>‚û°Ô∏è Missing values are typically represented as <code>NA</code> in R. Empty strings (e.g., <code>""</code>) or special codes (e.g., <code>-99</code>, <code>"missing"</code>) may also indicate missingness and need conversion before analysis.</p>
<p>üîπ Summary of Functions for Handling Missing Values</p>
<table class="caption-top table">
<colgroup>
<col style="width: 26%">
<col style="width: 33%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Task</strong></th>
<th><strong>Function</strong> / <strong>Code</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Detect missing values</td>
<td><code>is.na(x)</code>, <code>anyNA(x)</code>, <code>sum(is.na(x))</code></td>
<td>Identify/count missing values</td>
</tr>
<tr class="even">
<td>Missing per column</td>
<td><code>colSums(is.na(df))</code></td>
<td>Count NAs per column</td>
</tr>
<tr class="odd">
<td>Filter complete rows</td>
<td><code>complete.cases(df)</code></td>
<td>Keep only rows without any missing values</td>
</tr>
<tr class="even">
<td>Convert blanks to <code>NA</code></td>
<td><code>x[x == ""] &lt;- NA</code></td>
<td>Convert empty strings to missing values</td>
</tr>
<tr class="odd">
<td>Remove missing rows</td>
<td><code>na.omit(df)</code></td>
<td>Remove rows with any missing value</td>
</tr>
<tr class="even">
<td>Replace missing values</td>
<td><code>replace_na(df, list(...))</code>, <code>ifelse(is.na(x), ...)</code></td>
<td>Impute or replace NA with custom logic</td>
</tr>
<tr class="odd">
<td>Forward/backward fill</td>
<td><code>fill(df, .direction = "down" / "up")</code></td>
<td>Fill NA using nearby values</td>
</tr>
<tr class="even">
<td>Mean/median imputation</td>
<td><code>x[is.na(x)] &lt;- mean(x, na.rm = TRUE)</code></td>
<td>Replace NA with summary statistic</td>
</tr>
<tr class="odd">
<td>Multiple imputation</td>
<td><code>mice::mice(df)</code></td>
<td>Create multiple imputed datasets using chained equations</td>
</tr>
<tr class="even">
<td>Advanced imputation</td>
<td><code>Hmisc::aregImpute</code>, <code>missForest</code>, <code>Amelia</code>, <code>zoo::na.fill()</code></td>
<td>Specialized techniques for complex imputations</td>
</tr>
</tbody>
</table>
<p>üìö <strong>Further Learning and Resources</strong></p>
<p>Additional tutorials, demonstrations, and datasets are available on:</p>
<ul>
<li><p><strong>YouTube Channel ‚Äì AnalyticsHub</strong><br>
<a href="https://studio.youtube.com/channel/UCLVKP0g8GvHhOh0kn20T8eg/videos/upload?filter=%5B%5D&amp;sort=%7B%22columnType%22%3A%22date%22%2C%22sortOrder%22%3A%22DESCENDING%22%7D" class="uri">https://studio.youtube.com/channel/UCLVKP0g8GvHhOh0kn20T8eg/videos/upload?filter=%5B%5D&amp;sort=%7B%22columnType%22%3A%22date%22%2C%22sortOrder%22%3A%22DESCENDING%22%7D</a></p></li>
<li><p><strong>GitHub Repository</strong><br>
<a href="https://github.com/HabtamuBizuayehu?tab=repositories" class="uri">https://github.com/HabtamuBizuayehu?tab=repositories</a></p></li>
</ul>
<hr>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                                    id  birthdate deathdate         ssn
1 898a6256-7ffb-dbe2-e24d-12fda2fedcfd 1966-06-23           999-98-5513
2 5e0a6984-38d7-c604-f55f-f1de5e933768 1986-07-04           999-58-5560
3 e335de09-0994-4111-3c15-6edcc17ae4bc 2005-04-25           999-48-3846
4 45b89342-dc05-8e57-8eee-9ed68ec42378 1984-08-24           999-40-3433
5 916b1ac8-56c8-ec1b-3b9a-721336a74912 1953-05-10           999-16-3735
6 dc323bce-e583-d903-303e-9c865bc87e67 2012-09-02           999-90-3605
    drivers   passport prefix     first     middle          last suffix
1 S99971131 X62454905X   Mrs.  Maris768              Lindgren255     NA
2 S99931679 X61479569X   Mrs. Hattie299  Reatha769      Nader710     NA
3 S99958413               Ms.  Jimmie93 Towanda270      Doyle959     NA
4 S99985178 X27670495X    Mr. Dwight645  Marlin805      Hilll811     NA
5 S99968840 X83646024X    Ms.  Tambra47 Brittni468 Balistreri607     NA
6                             Carson894 Raphael767     Littel644     NA
     maiden marital  race   ethnicity gender                       birthplace
1   Dach178       D white nonhispanic      F        Oxford  Massachusetts  US
2 Harber290       M white nonhispanic      F North Reading  Massachusetts  US
3                   white nonhispanic      F        Boston  Massachusetts  US
4                 M white nonhispanic      M    Framingham  Massachusetts  US
5                 S white nonhispanic      F     Lexington  Massachusetts  US
6                   white nonhispanic      M      Plymouth  Massachusetts  US
                        address        city         state           county
1          962 Stiedemann Vista    Aquinnah Massachusetts     Dukes County
2            720 O'Keefe Arcade      Newton Massachusetts Middlesex County
3       493 Cruickshank Mission   Holliston Massachusetts Middlesex County
4              810 Wolf Pathway      Malden Massachusetts Middlesex County
5      146 Rowe Village Suite 3 New Bedford Massachusetts   Bristol County
6 467 Collier Stravenue Unit 12   Attleboro Massachusetts   Bristol County
   fips  zip      lat       lon healthcare_expenses healthcare_coverage income
1    NA    0 41.29618 -70.77458           343608.18           884243.46 178323
2 25017 2468 42.29180 -71.14930           169293.06           801407.90  86384
3    NA    0 42.24196 -71.46440            64178.99             5906.14 198522
4 25017 2148 42.43610 -71.14328            36010.63           472861.90  25909
5 25005 2743 41.69576 -71.01391           281198.90           310261.21 140772
6 44007 2861 41.94870 -71.30420            45972.75                0.00  71169
  visit
1     1
2     1
3     1
4     1
5     1
6     1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarise missing values across all columns</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>missing_summary <span class="ot">&lt;-</span> <span class="fu">colSums</span>(<span class="fu">is.na</span>(visits_all))</span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(missing_summary[missing_summary <span class="sc">&gt;</span> <span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          deathdate             drivers            passport              prefix 
                 40                   4                  12                   8 
             middle              suffix              maiden             marital 
                  4                  40                  28                  16 
               race                fips                 zip healthcare_coverage 
                 20                  12                  12                   4 
             income 
                 20 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number of missing cells</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>total_missing <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(visits_all))</span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Total missing values in dataset:"</span>, total_missing, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Total missing values in dataset: 220 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count of individuals with at least one missing value</span></span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>n_missing_individuals <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">complete.cases</span>(visits_all))</span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Number of individuals with at least one missing value:"</span>, n_missing_individuals, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of individuals with at least one missing value: 40 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort records by patient ID and visit number</span></span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a>visits_all <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id_text, visit)</span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a><span class="co"># View rows with any missing values</span></span>
<span id="cb227-6"><a href="#cb227-6" aria-hidden="true" tabindex="-1"></a>missing_rows <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb227-7"><a href="#cb227-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">complete.cases</span>(.))</span>
<span id="cb227-8"><a href="#cb227-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(missing_rows, <span class="at">n =</span> <span class="dv">12</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(id_text, race, income, passport)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                id_text  race income   passport
1  Anit|S√°nc|1960-05-07 white  61016  X9157439X
2  Anit|S√°nc|1960-05-07  &lt;NA&gt;     NA  X9157439X
3  Anit|S√°nc|1960-05-07 white     NA  X9157439X
4  Anit|S√°nc|1960-05-07  &lt;NA&gt;  60016  X9157439X
5  Aure|Weis|2003-11-12 white   8752 X17586296X
6  Aure|Weis|2003-11-12  &lt;NA&gt;     NA X17586296X
7  Aure|Weis|2003-11-12 white     NA X17586296X
8  Aure|Weis|2003-11-12  &lt;NA&gt;   7752 X17586296X
9  Cars|Litt|2012-09-02 white  71169       &lt;NA&gt;
10 Cars|Litt|2012-09-02  &lt;NA&gt;     NA       &lt;NA&gt;
11 Cars|Litt|2012-09-02  &lt;NA&gt;  70169       &lt;NA&gt;
12 Cars|Litt|2012-09-02 white     NA       &lt;NA&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Impute passport with "UNKNOWN"</span></span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a>df_passport <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">passport_imputed =</span> <span class="fu">replace_na</span>(passport, <span class="st">"UNKNOWN"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(passport)) <span class="sc">%&gt;%</span></span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, id_text, visit, passport, passport_imputed)</span>
<span id="cb229-6"><a href="#cb229-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-7"><a href="#cb229-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_passport, <span class="at">n =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                     id              id_text visit passport
1  dc323bce-e583-d903-303e-9c865bc87e67 Cars|Litt|2012-09-02     1     &lt;NA&gt;
2  dc323bce-e583-d903-303e-9c865bc87e67 Cars|Litt|2012-09-02     2     &lt;NA&gt;
3  dc323bce-e583-d903-303e-9c865bc87e67 Cars|Litt|2012-09-02     3     &lt;NA&gt;
4  dc323bce-e583-d903-303e-9c865bc87e67 Cars|Litt|2012-09-02     4     &lt;NA&gt;
5  da7b1f55-c782-544f-ba8c-fe69d519dc85 Doll|Fran|2008-10-04     1     &lt;NA&gt;
6  da7b1f55-c782-544f-ba8c-fe69d519dc85 Doll|Fran|2008-10-04     2     &lt;NA&gt;
7  da7b1f55-c782-544f-ba8c-fe69d519dc85 Doll|Fran|2008-10-04     3     &lt;NA&gt;
8  da7b1f55-c782-544f-ba8c-fe69d519dc85 Doll|Fran|2008-10-04     4     &lt;NA&gt;
9  e335de09-0994-4111-3c15-6edcc17ae4bc Jimm|Doyl|2005-04-25     1     &lt;NA&gt;
10 e335de09-0994-4111-3c15-6edcc17ae4bc Jimm|Doyl|2005-04-25     2     &lt;NA&gt;
11 e335de09-0994-4111-3c15-6edcc17ae4bc Jimm|Doyl|2005-04-25     3     &lt;NA&gt;
12 e335de09-0994-4111-3c15-6edcc17ae4bc Jimm|Doyl|2005-04-25     4     &lt;NA&gt;
   passport_imputed
1           UNKNOWN
2           UNKNOWN
3           UNKNOWN
4           UNKNOWN
5           UNKNOWN
6           UNKNOWN
7           UNKNOWN
8           UNKNOWN
9           UNKNOWN
10          UNKNOWN
11          UNKNOWN
12          UNKNOWN</code></pre>
</div>
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort records by patient ID and visit number (to prepare for forward/backward fill)</span></span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a>visits_all <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb231-3"><a href="#cb231-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id_text, visit)</span>
<span id="cb231-4"><a href="#cb231-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-5"><a href="#cb231-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview sorted data (tail)</span></span>
<span id="cb231-6"><a href="#cb231-6" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(visits_all <span class="sc">%&gt;%</span> <span class="fu">select</span>(id_text, visit, race, income), <span class="at">n =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                id_text visit  race income
29 Jimm|Doyl|2005-04-25     1 white 198522
30 Jimm|Doyl|2005-04-25     2  &lt;NA&gt;     NA
31 Jimm|Doyl|2005-04-25     3  &lt;NA&gt; 197522
32 Jimm|Doyl|2005-04-25     4 white     NA
33 Mari|Lind|1966-06-23     1 white 178323
34 Mari|Lind|1966-06-23     2  &lt;NA&gt;     NA
35 Mari|Lind|1966-06-23     3 white     NA
36 Mari|Lind|1966-06-23     4  &lt;NA&gt; 177323
37 Tamb|Bali|1953-05-10     1 white 140772
38 Tamb|Bali|1953-05-10     2  &lt;NA&gt;     NA
39 Tamb|Bali|1953-05-10     3 white     NA
40 Tamb|Bali|1953-05-10     4  &lt;NA&gt; 139772</code></pre>
</div>
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward fill missing race values within each patient (downward)</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a>visits_all <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb233-3"><a href="#cb233-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_text) <span class="sc">%&gt;%</span></span>
<span id="cb233-4"><a href="#cb233-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race_forward =</span> race) <span class="sc">%&gt;%</span></span>
<span id="cb233-5"><a href="#cb233-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(race_forward, <span class="at">.direction =</span> <span class="st">"down"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb233-6"><a href="#cb233-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb233-7"><a href="#cb233-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-8"><a href="#cb233-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview forward-filled race values (head)</span></span>
<span id="cb233-9"><a href="#cb233-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(visits_all <span class="sc">%&gt;%</span> <span class="fu">select</span>(id_text, visit, race, race_forward), <span class="at">n =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 4
   id_text              visit race  race_forward
   &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;       
 1 Anit|S√°nc|1960-05-07     1 white white       
 2 Anit|S√°nc|1960-05-07     2 &lt;NA&gt;  white       
 3 Anit|S√°nc|1960-05-07     3 white white       
 4 Anit|S√°nc|1960-05-07     4 &lt;NA&gt;  white       
 5 Aure|Weis|2003-11-12     1 white white       
 6 Aure|Weis|2003-11-12     2 &lt;NA&gt;  white       
 7 Aure|Weis|2003-11-12     3 white white       
 8 Aure|Weis|2003-11-12     4 &lt;NA&gt;  white       
 9 Cars|Litt|2012-09-02     1 white white       
10 Cars|Litt|2012-09-02     2 &lt;NA&gt;  white       
11 Cars|Litt|2012-09-02     3 &lt;NA&gt;  white       
12 Cars|Litt|2012-09-02     4 white white       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Backward fill missing race values within each patient (upward)</span></span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a>visits_all <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_text) <span class="sc">%&gt;%</span></span>
<span id="cb235-4"><a href="#cb235-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race_backward =</span> race) <span class="sc">%&gt;%</span></span>
<span id="cb235-5"><a href="#cb235-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(race_backward, <span class="at">.direction =</span> <span class="st">"up"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb235-6"><a href="#cb235-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb235-7"><a href="#cb235-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-8"><a href="#cb235-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview backward-filled race values (tail)</span></span>
<span id="cb235-9"><a href="#cb235-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(visits_all <span class="sc">%&gt;%</span> <span class="fu">select</span>(id_text, visit, race, race_backward), <span class="at">n =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 4
   id_text              visit race  race_backward
   &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;        
 1 Jimm|Doyl|2005-04-25     1 white white        
 2 Jimm|Doyl|2005-04-25     2 &lt;NA&gt;  white        
 3 Jimm|Doyl|2005-04-25     3 &lt;NA&gt;  white        
 4 Jimm|Doyl|2005-04-25     4 white white        
 5 Mari|Lind|1966-06-23     1 white white        
 6 Mari|Lind|1966-06-23     2 &lt;NA&gt;  white        
 7 Mari|Lind|1966-06-23     3 white white        
 8 Mari|Lind|1966-06-23     4 &lt;NA&gt;  &lt;NA&gt;         
 9 Tamb|Bali|1953-05-10     1 white white        
10 Tamb|Bali|1953-05-10     2 &lt;NA&gt;  white        
11 Tamb|Bali|1953-05-10     3 white white        
12 Tamb|Bali|1953-05-10     4 &lt;NA&gt;  &lt;NA&gt;         </code></pre>
</div>
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the global (overall) mean income</span></span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a>global_mean_income <span class="ot">&lt;-</span> <span class="fu">mean</span>(visits_all<span class="sc">$</span>income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb237-3"><a href="#cb237-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-4"><a href="#cb237-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Use global mean to impute missing income values</span></span>
<span id="cb237-5"><a href="#cb237-5" aria-hidden="true" tabindex="-1"></a>visits_all <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb237-6"><a href="#cb237-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">income_global_mean =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(income), global_mean_income, income))</span>
<span id="cb237-7"><a href="#cb237-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-8"><a href="#cb237-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview global mean-imputed income (head)</span></span>
<span id="cb237-9"><a href="#cb237-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(visits_all <span class="sc">%&gt;%</span> <span class="fu">select</span>(id_text, visit, income, income_global_mean), <span class="at">n =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 4
   id_text              visit income income_global_mean
   &lt;chr&gt;                &lt;dbl&gt;  &lt;dbl&gt;              &lt;dbl&gt;
 1 Anit|S√°nc|1960-05-07     1  61016             61016 
 2 Anit|S√°nc|1960-05-07     2     NA             96123.
 3 Anit|S√°nc|1960-05-07     3     NA             96123.
 4 Anit|S√°nc|1960-05-07     4  60016             60016 
 5 Aure|Weis|2003-11-12     1   8752              8752 
 6 Aure|Weis|2003-11-12     2     NA             96123.
 7 Aure|Weis|2003-11-12     3     NA             96123.
 8 Aure|Weis|2003-11-12     4   7752              7752 
 9 Cars|Litt|2012-09-02     1  71169             71169 
10 Cars|Litt|2012-09-02     2     NA             96123.
11 Cars|Litt|2012-09-02     3  70169             70169 
12 Cars|Litt|2012-09-02     4     NA             96123.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate mean income per participant (id_text)</span></span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a>participant_mean_income <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_text) <span class="sc">%&gt;%</span></span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_income_id =</span> <span class="fu">mean</span>(income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-6"><a href="#cb239-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Use participant-level mean to impute missing income values</span></span>
<span id="cb239-7"><a href="#cb239-7" aria-hidden="true" tabindex="-1"></a>visits_all <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb239-8"><a href="#cb239-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(participant_mean_income, <span class="at">by =</span> <span class="st">"id_text"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb239-9"><a href="#cb239-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">income_participant_mean =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(income), mean_income_id, income))</span>
<span id="cb239-10"><a href="#cb239-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-11"><a href="#cb239-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview participant mean-imputed income (tail)</span></span>
<span id="cb239-12"><a href="#cb239-12" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(visits_all <span class="sc">%&gt;%</span> <span class="fu">select</span>(id_text, visit, income, income_participant_mean), <span class="at">n =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 4
   id_text              visit income income_participant_mean
   &lt;chr&gt;                &lt;dbl&gt;  &lt;dbl&gt;                   &lt;dbl&gt;
 1 Jimm|Doyl|2005-04-25     1 198522                  198522
 2 Jimm|Doyl|2005-04-25     2     NA                  198022
 3 Jimm|Doyl|2005-04-25     3 197522                  197522
 4 Jimm|Doyl|2005-04-25     4     NA                  198022
 5 Mari|Lind|1966-06-23     1 178323                  178323
 6 Mari|Lind|1966-06-23     2     NA                  177823
 7 Mari|Lind|1966-06-23     3     NA                  177823
 8 Mari|Lind|1966-06-23     4 177323                  177323
 9 Tamb|Bali|1953-05-10     1 140772                  140772
10 Tamb|Bali|1953-05-10     2     NA                  140272
11 Tamb|Bali|1953-05-10     3     NA                  140272
12 Tamb|Bali|1953-05-10     4 139772                  139772</code></pre>
</div>
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiple imputation for fips, zip, healthcare_coverage, and income</span></span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a>patients_mice <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_text, fips, zip, healthcare_coverage, income)</span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-5"><a href="#cb241-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply mice</span></span>
<span id="cb241-6"><a href="#cb241-6" aria-hidden="true" tabindex="-1"></a>imputed <span class="ot">&lt;-</span> <span class="fu">mice</span>(patients_mice <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>id_text), <span class="at">method =</span> <span class="st">"pmm"</span>, <span class="at">m =</span> <span class="dv">1</span>, <span class="at">printFlag =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Number of logged events: 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieve completed dataset</span></span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a>mice_result <span class="ot">&lt;-</span> <span class="fu">complete</span>(imputed)</span>
<span id="cb243-3"><a href="#cb243-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mice_result) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">colnames</span>(mice_result), <span class="st">"_imputed"</span>)</span>
<span id="cb243-4"><a href="#cb243-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-5"><a href="#cb243-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Join ID and filter rows with original missing values</span></span>
<span id="cb243-6"><a href="#cb243-6" aria-hidden="true" tabindex="-1"></a>df_mice <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(patients_mice, mice_result) <span class="sc">%&gt;%</span></span>
<span id="cb243-7"><a href="#cb243-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(fips) <span class="sc">|</span> <span class="fu">is.na</span>(zip) <span class="sc">|</span> <span class="fu">is.na</span>(healthcare_coverage) <span class="sc">|</span> <span class="fu">is.na</span>(income)) <span class="sc">%&gt;%</span></span>
<span id="cb243-8"><a href="#cb243-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_text,</span>
<span id="cb243-9"><a href="#cb243-9" aria-hidden="true" tabindex="-1"></a>         fips, fips_imputed,</span>
<span id="cb243-10"><a href="#cb243-10" aria-hidden="true" tabindex="-1"></a>         zip, zip_imputed,</span>
<span id="cb243-11"><a href="#cb243-11" aria-hidden="true" tabindex="-1"></a>         healthcare_coverage, healthcare_coverage_imputed,</span>
<span id="cb243-12"><a href="#cb243-12" aria-hidden="true" tabindex="-1"></a>         income, income_imputed)</span>
<span id="cb243-13"><a href="#cb243-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-14"><a href="#cb243-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_mice, <span class="at">n =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 9
   id_text               fips fips_imputed   zip zip_imputed healthcare_coverage
   &lt;chr&gt;                &lt;int&gt;        &lt;int&gt; &lt;int&gt;       &lt;int&gt;               &lt;dbl&gt;
 1 Anit|S√°nc|1960-05-07 25009        25009  1915        1915            1280070.
 2 Anit|S√°nc|1960-05-07 25009        25009  1915        1915            1280070.
 3 Aure|Weis|2003-11-12 25027        25027  1606        1606             253645.
 4 Aure|Weis|2003-11-12 25027        25027  1606        1606             253645.
 5 Cars|Litt|2012-09-02 44007        44007  2861        2861                 NA 
 6 Cars|Litt|2012-09-02 44007        44007  2861        2861                 NA 
 7 Cars|Litt|2012-09-02 44007        44007  2861        2861                 NA 
 8 Cars|Litt|2012-09-02 44007        44007  2861        2861                 NA 
 9 Doll|Fran|2008-10-04    NA        25013    NA        2468             422516.
10 Doll|Fran|2008-10-04    NA        25027    NA        1030             422516.
11 Doll|Fran|2008-10-04    NA        25017    NA        2861             422516.
12 Doll|Fran|2008-10-04    NA        25017    NA        1606             422516.
# ‚Ñπ 3 more variables: healthcare_coverage_imputed &lt;dbl&gt;, income &lt;dbl&gt;,
#   income_imputed &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional: Inspect logged events from mice</span></span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a>imputed<span class="sc">$</span>loggedEvents</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  it im                 dep meth
1  3  1 healthcare_coverage  pmm
                                                                                                                                                                                                                                                       out
1 mice detected that your data are (nearly) multi-collinear.\nIt applied a ridge penalty to continue calculations, but the results can be unstable.\nDoes your dataset contain duplicates, linear transformation, or factors with unique respondent names?</code></pre>
</div>
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Final summary: compare original and imputed values for rows with missingness</span></span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a>final_impute_check <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb247-4"><a href="#cb247-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(race) <span class="sc">|</span> <span class="fu">is.na</span>(income)) <span class="sc">%&gt;%</span></span>
<span id="cb247-5"><a href="#cb247-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_text, visit,</span>
<span id="cb247-6"><a href="#cb247-6" aria-hidden="true" tabindex="-1"></a>         race, race_forward, race_backward,</span>
<span id="cb247-7"><a href="#cb247-7" aria-hidden="true" tabindex="-1"></a>         income, income_global_mean, income_participant_mean)</span>
<span id="cb247-8"><a href="#cb247-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-9"><a href="#cb247-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview top 12</span></span>
<span id="cb247-10"><a href="#cb247-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(final_impute_check, <span class="at">n =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 8
   id_text      visit race  race_forward race_backward income income_global_mean
   &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;          &lt;dbl&gt;              &lt;dbl&gt;
 1 Anit|S√°nc|1‚Ä¶     2 &lt;NA&gt;  white        white             NA             96123.
 2 Anit|S√°nc|1‚Ä¶     3 white white        white             NA             96123.
 3 Anit|S√°nc|1‚Ä¶     4 &lt;NA&gt;  white        &lt;NA&gt;           60016             60016 
 4 Aure|Weis|2‚Ä¶     2 &lt;NA&gt;  white        white             NA             96123.
 5 Aure|Weis|2‚Ä¶     3 white white        white             NA             96123.
 6 Aure|Weis|2‚Ä¶     4 &lt;NA&gt;  white        &lt;NA&gt;            7752              7752 
 7 Cars|Litt|2‚Ä¶     2 &lt;NA&gt;  white        white             NA             96123.
 8 Cars|Litt|2‚Ä¶     3 &lt;NA&gt;  white        white          70169             70169 
 9 Cars|Litt|2‚Ä¶     4 white white        white             NA             96123.
10 Doll|Fran|2‚Ä¶     2 &lt;NA&gt;  white        white             NA             96123.
11 Doll|Fran|2‚Ä¶     3 &lt;NA&gt;  white        white         187023            187023 
12 Doll|Fran|2‚Ä¶     4 white white        white             NA             96123.
# ‚Ñπ 1 more variable: income_participant_mean &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview bottom 12</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(final_impute_check, <span class="at">n =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 8
   id_text      visit race  race_forward race_backward income income_global_mean
   &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;          &lt;dbl&gt;              &lt;dbl&gt;
 1 Home|Qui√±|1‚Ä¶     2 &lt;NA&gt;  white        white             NA             96123.
 2 Home|Qui√±|1‚Ä¶     3 &lt;NA&gt;  white        white           6361              6361 
 3 Home|Qui√±|1‚Ä¶     4 white white        white             NA             96123.
 4 Jimm|Doyl|2‚Ä¶     2 &lt;NA&gt;  white        white             NA             96123.
 5 Jimm|Doyl|2‚Ä¶     3 &lt;NA&gt;  white        white         197522            197522 
 6 Jimm|Doyl|2‚Ä¶     4 white white        white             NA             96123.
 7 Mari|Lind|1‚Ä¶     2 &lt;NA&gt;  white        white             NA             96123.
 8 Mari|Lind|1‚Ä¶     3 white white        white             NA             96123.
 9 Mari|Lind|1‚Ä¶     4 &lt;NA&gt;  white        &lt;NA&gt;          177323            177323 
10 Tamb|Bali|1‚Ä¶     2 &lt;NA&gt;  white        white             NA             96123.
11 Tamb|Bali|1‚Ä¶     3 white white        white             NA             96123.
12 Tamb|Bali|1‚Ä¶     4 &lt;NA&gt;  white        &lt;NA&gt;          139772            139772 
# ‚Ñπ 1 more variable: income_participant_mean &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up temporary objects </span></span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>( participant_mean_income, final_impute_check, global_mean_income, df_passport, df_mice,</span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true" tabindex="-1"></a>    patients_mice, imputed, mice_result, missing_summary, total_missing, n_missing_individuals, missing_rows</span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="part-vi-descriptive-statistics-and-tabulation" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="part-vi-descriptive-statistics-and-tabulation"><span class="header-section-number">1.6</span> <strong>üî¢ PART VI: Descriptive Statistics and Tabulation</strong></h2>
<p>In data analysis, summarising and tabulating variables is often the first step before conducting modelling or drawing conclusions. Descriptive statistics reveal the central tendency, variability, distribution shape, and frequency patterns in your dataset.</p>
<p>This section provides an overview of the most commonly used R functions for summarising both numeric and categorical variables. These tools help detect outliers, missing data, or skewed distributions and are essential for generating publication-ready summary tables.</p>
<p>üìö <em>Further are available via:</em></p>
<ul>
<li>YouTube: <a href="https://studio.youtube.com/video/5V7SPBH-8BE/edit">AnalyticsHub</a><br>
</li>
<li>Github: <a href="https://github.com/HabtamuBizuayehu">Summary Tools Repository</a></li>
</ul>
<hr>
<p>Some of the contents essential for this section are presented below.</p>
<p><strong>Basic Summary Statistics</strong><br>
summary(), mean(), median(), min(), max(), sd(), var(), range(), quantile(), IQR()</p>
<p><strong>Distribution Shape / Skewness</strong>: skewness(), kurtosis() <strong>Extended Descriptive Summaries</strong>: describe() ,stat.desc(), skim() <strong>Tabulation (Frequencies and Proportions)</strong><br>
table(), prop.table(), addmargins(), xtabs()</p>
<p><strong>Tidy Summary and Tabulations</strong><br>
tabyl(), adorn_percentages(), adorn_totals() ‚Äì From janitor<br>
count(), group_by() + summarise() ‚Äì From dplyr<br>
pivot_wider(), pivot_longer() ‚Äì From tidyr</p>
<p><strong>Cross Tabulations</strong>: CrossTable() ‚Äì From gmodels</p>
<section id="basic-summary-statistics" class="level3" data-number="1.6.1">
<h3 data-number="1.6.1" class="anchored" data-anchor-id="basic-summary-statistics"><span class="header-section-number">1.6.1</span> <strong>üîπ 1. Basic Summary Statistics</strong></h3>
<p>These functions are useful for summarising continuous variables such as age, vaccine cost, or time intervals:</p>
<ul>
<li><code>summary()</code> ‚Äì 5-number summary + mean<br>
</li>
<li><code>mean()</code>, <code>median()</code> ‚Äì Measures of central tendency<br>
</li>
<li><code>sd()</code>, <code>var()</code> ‚Äì Measures of spread<br>
</li>
<li><code>min()</code>, <code>max()</code> ‚Äì Extremes<br>
</li>
<li><code>range()</code> ‚Äì Min and max in one<br>
</li>
<li><code>quantile()</code> ‚Äì Percentiles (e.g., 25th, 75th)</li>
<li><code>IQR()</code> ‚Äì Interquartile range</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
  Childhood Respiratory       Other 
        472         955         126 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Female   Male 
   798    755 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb254-2"><a href="#cb254-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic Summary Statistics Using Base R</span></span>
<span id="cb254-3"><a href="#cb254-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb254-4"><a href="#cb254-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb254-5"><a href="#cb254-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Select key numeric variables</span></span>
<span id="cb254-6"><a href="#cb254-6" aria-hidden="true" tabindex="-1"></a>summary_vars <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span> </span>
<span id="cb254-7"><a href="#cb254-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, base_cost, healthcare_expenses)</span>
<span id="cb254-8"><a href="#cb254-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb254-9"><a href="#cb254-9" aria-hidden="true" tabindex="-1"></a><span class="co"># View summary() for a quick five-number summary + mean</span></span>
<span id="cb254-10"><a href="#cb254-10" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(summary_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      age          base_cost   healthcare_expenses
 Min.   : 1.00   Min.   :136   Min.   :    527.5  
 1st Qu.:12.00   1st Qu.:136   1st Qu.:  14478.2  
 Median :25.00   Median :136   Median :  56729.2  
 Mean   :32.42   Mean   :136   Mean   : 156656.2  
 3rd Qu.:52.00   3rd Qu.:136   3rd Qu.: 195830.8  
 Max.   :97.00   Max.   :136   Max.   :1157947.0  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Individual statistics for 'age'</span></span>
<span id="cb256-2"><a href="#cb256-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)             <span class="co"># Mean age</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32.41661</code></pre>
</div>
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)           <span class="co"># Median age</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)              <span class="co"># Minimum age</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)              <span class="co"># Maximum age</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 97</code></pre>
</div>
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)               <span class="co"># Standard deviation of age</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23.76926</code></pre>
</div>
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)              <span class="co"># Variance of age</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 564.9777</code></pre>
</div>
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)            <span class="co"># Range: min and max</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 97</code></pre>
</div>
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(vacc_1524<span class="sc">$</span>age, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  <span class="co"># Quartiles</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>25% 50% 75% 
 12  25  52 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="fu">IQR</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)              <span class="co"># Interquartile range</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 40</code></pre>
</div>
<div class="sourceCode cell-code" id="cb274"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up temporary object</span></span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb274-4"><a href="#cb274-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(summary_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="shape-of-distribution-skewness-and-kurtosis" class="level3" data-number="1.6.2">
<h3 data-number="1.6.2" class="anchored" data-anchor-id="shape-of-distribution-skewness-and-kurtosis"><span class="header-section-number">1.6.2</span> <strong>üîπ 2. Shape of Distribution (Skewness and Kurtosis)</strong></h3>
<p>These indicators describe the <strong>shape</strong> of a numeric variable‚Äôs distribution. They help identify when a variable is:</p>
<ul>
<li>Skewed (not symmetric)</li>
<li>Heavy-tailed (high kurtosis)</li>
</ul>
<p><strong>Distribution Shape: Skewness and Kurtosis</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 29%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th>Value Range</th>
<th><strong>Skewness</strong></th>
<th><strong>Kurtosis</strong> (Excess)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>‚âà 0</td>
<td>Symmetrical</td>
<td>Mesokurtic (normal-tailed)</td>
</tr>
<tr class="even">
<td>¬±0.5</td>
<td>Approximately symmetrical</td>
<td>Slight deviation</td>
</tr>
<tr class="odd">
<td>¬±0.5 ‚Äì ¬±1</td>
<td>Moderate skew</td>
<td>Moderate peakedness or flatness</td>
</tr>
<tr class="even">
<td>&gt; ¬±1</td>
<td>High skew (strong asymmetry)</td>
<td>Substantial deviation from normality</td>
</tr>
<tr class="odd">
<td>&gt; 0 (kurtosis - 3 &gt; 0)</td>
<td>‚Äì</td>
<td>Leptokurtic (peaked, heavy tails)</td>
</tr>
<tr class="even">
<td>&lt; 0 (kurtosis - 3 &lt; 0)</td>
<td>‚Äì</td>
<td>Platykurtic (flat, light tails)</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure the 'moments' package is installed</span></span>
<span id="cb275-2"><a href="#cb275-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"moments"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {<span class="fu">install.packages</span>(<span class="st">"moments"</span>)}</span>
<span id="cb275-3"><a href="#cb275-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(moments)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb276"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate distribution shape statistics</span></span>
<span id="cb276-2"><a href="#cb276-2" aria-hidden="true" tabindex="-1"></a><span class="fu">skewness</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)     <span class="co"># Skewness: +ve = right-skewed, -ve = left-skewed</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5301022</code></pre>
</div>
<div class="sourceCode cell-code" id="cb278"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kurtosis</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)     <span class="co"># Kurtosis: &gt;3 = heavy tails, &lt;3 = flat distribution</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.059686</code></pre>
</div>
<div class="sourceCode cell-code" id="cb280"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kurtosis</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="dv">3</span>  <span class="co"># Excess kurtosis</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.940314</code></pre>
</div>
<div class="sourceCode cell-code" id="cb282"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb282-2"><a href="#cb282-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram to Visualize Distribution Shape</span></span>
<span id="cb282-3"><a href="#cb282-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb282-4"><a href="#cb282-4" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(vacc_1524<span class="sc">$</span>age, </span>
<span id="cb282-5"><a href="#cb282-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Histogram of Age"</span>,</span>
<span id="cb282-6"><a href="#cb282-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Age (Years)"</span>, </span>
<span id="cb282-7"><a href="#cb282-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"#69b3a2"</span>, </span>
<span id="cb282-8"><a href="#cb282-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">border =</span> <span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="extended-descriptive-summaries" class="level3" data-number="1.6.3">
<h3 data-number="1.6.3" class="anchored" data-anchor-id="extended-descriptive-summaries"><span class="header-section-number">1.6.3</span> <strong>üîπ 3. Extended Descriptive Summaries</strong></h3>
<p>To produce a comprehensive summary of all variables (especially helpful in surveys or health system datasets), use:</p>
<ul>
<li><code>describe()</code> ‚Äì From <code>Hmisc</code>: includes labels, missing %, and stats<br>
</li>
<li><code>stat.desc()</code> ‚Äì From <code>pastecs</code>: full statistical description with skew/kurtosis<br>
</li>
<li><code>skim()</code> ‚Äì From <code>skimr</code>: summary with inline histograms and types</li>
</ul>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install required packages if missing</span></span>
<span id="cb283-2"><a href="#cb283-2" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Hmisc"</span>, <span class="st">"pastecs"</span>, <span class="st">"skimr"</span>)</span>
<span id="cb283-3"><a href="#cb283-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (p <span class="cf">in</span> packages) {<span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(p, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(p)}</span>
<span id="cb283-4"><a href="#cb283-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb283-5"><a href="#cb283-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Explicitly load the packages</span></span>
<span id="cb283-6"><a href="#cb283-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Hmisc)     <span class="co"># for describe()</span></span>
<span id="cb283-7"><a href="#cb283-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pastecs)   <span class="co"># for stat.desc()</span></span>
<span id="cb283-8"><a href="#cb283-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)     <span class="co"># for skim()</span></span>
<span id="cb283-9"><a href="#cb283-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb283-10"><a href="#cb283-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> (packages)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb284"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb284-2"><a href="#cb284-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Extended Descriptive Summaries</span></span>
<span id="cb284-3"><a href="#cb284-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb284-4"><a href="#cb284-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-5"><a href="#cb284-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Hmisc::describe() ‚Äì Detailed variable summary</span></span>
<span id="cb284-6"><a href="#cb284-6" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(vacc_1524[, <span class="fu">c</span>(<span class="st">"age"</span>, <span class="st">"gender"</span>, <span class="st">"race"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>vacc_1524[, c("age", "gender", "race")] 

 3  Variables      1553  Observations
--------------------------------------------------------------------------------
age 
       n  missing distinct     Info     Mean  pMedian      Gmd      .05 
    1553        0       62    0.999    32.42       32    26.76      5.0 
     .10      .25      .50      .75      .90      .95 
     6.0     12.0     25.0     52.0     68.8     73.0 

lowest :  1  2  5  6  7, highest: 76 78 80 85 97
--------------------------------------------------------------------------------
gender 
       n  missing distinct 
    1553        0        2 
                        
Value      Female   Male
Frequency     798    755
Proportion  0.514  0.486
--------------------------------------------------------------------------------
race 
       n  missing distinct 
    1553        0        5 
                                             
Value       asian  black native  other  white
Frequency     111     94     13     29   1306
Proportion  0.071  0.061  0.008  0.019  0.841
--------------------------------------------------------------------------------</code></pre>
</div>
<div class="sourceCode cell-code" id="cb286"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pastecs::stat.desc() ‚Äì Full statistics with skewness/kurtosis</span></span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stat.desc</span>(vacc_1524<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     nbr.val     nbr.null       nbr.na          min          max        range 
1.553000e+03 0.000000e+00 0.000000e+00 1.000000e+00 9.700000e+01 9.600000e+01 
         sum       median         mean      SE.mean CI.mean.0.95          var 
5.034300e+04 2.500000e+01 3.241661e+01 6.031564e-01 1.183087e+00 5.649777e+02 
     std.dev     coef.var 
2.376926e+01 7.332432e-01 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb288"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="co"># skimr::skim() ‚Äì Tidy summary with histograms and data types</span></span>
<span id="cb288-2"><a href="#cb288-2" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(vacc_1524[, <span class="fu">c</span>(<span class="st">"age"</span>, <span class="st">"gender"</span>, <span class="st">"income"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">vacc_1524[, c(‚Äúage‚Äù, ‚Äúgen‚Ä¶</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1553</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 18%">
<col style="width: 13%">
<col style="width: 18%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">gender</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Fem: 798, Mal: 755</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">age</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">32.42</td>
<td style="text-align: right;">23.77</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">97</td>
<td style="text-align: left;">‚ñá‚ñÉ‚ñÉ‚ñÉ‚ñÅ</td>
</tr>
<tr class="even">
<td style="text-align: left;">income</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">108887.58</td>
<td style="text-align: right;">139702.07</td>
<td style="text-align: right;">7361</td>
<td style="text-align: right;">35860</td>
<td style="text-align: right;">75767</td>
<td style="text-align: right;">124775</td>
<td style="text-align: right;">816851</td>
<td style="text-align: left;">‚ñá‚ñÅ‚ñÅ‚ñÅ‚ñÅ</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="tabulation-frequencies-and-proportions" class="level3" data-number="1.6.4">
<h3 data-number="1.6.4" class="anchored" data-anchor-id="tabulation-frequencies-and-proportions"><span class="header-section-number">1.6.4</span> <strong>üîπ 4. Tabulation (Frequencies and Proportions)</strong></h3>
<p>Used for categorical variables like gender, race, or vaccine group:</p>
<ul>
<li><code>table()</code> ‚Äì Basic frequency counts<br>
</li>
<li><code>prop.table()</code> ‚Äì Row/column proportions<br>
</li>
<li><code>addmargins()</code> ‚Äì Adds totals to tables<br>
</li>
<li><code>xtabs()</code> ‚Äì Cross-tabulation formula interface</li>
</ul>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------------------------------------</span></span>
<span id="cb289-2"><a href="#cb289-2" aria-hidden="true" tabindex="-1"></a><span class="co"># üîπ Categorical Variable Summary </span></span>
<span id="cb289-3"><a href="#cb289-3" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------------------------------------</span></span>
<span id="cb289-4"><a href="#cb289-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-5"><a href="#cb289-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic frequency counts for individual vaccine types</span></span>
<span id="cb289-6"><a href="#cb289-6" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(vacc_1524<span class="sc">$</span>vaccine_group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
          COVID-19          DTP group          Hepatitis                Hib 
               144                147                111                 32 
               HPV          Influenza                IPV      Meningococcal 
                59                811                 47                 50 
               MMR Pneumococcal PCV13 Pneumococcal PPV23          Rotavirus 
                26                 52                  8                 21 
         Varicella             Zoster 
                26                 19 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency counts for grouped vaccine categories</span></span>
<span id="cb291-2"><a href="#cb291-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(vacc_1524<span class="sc">$</span>vacc_group3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  Childhood Respiratory       Other 
        472         955         126 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportion of grouped vaccine categories</span></span>
<span id="cb293-2"><a href="#cb293-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(vacc_1524<span class="sc">$</span>vacc_group3))  <span class="co"># Overall proportions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  Childhood Respiratory       Other 
 0.30392788  0.61493883  0.08113329 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table with row/column totals added</span></span>
<span id="cb295-2"><a href="#cb295-2" aria-hidden="true" tabindex="-1"></a><span class="fu">addmargins</span>(<span class="fu">table</span>(vacc_1524<span class="sc">$</span>vacc_group3))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  Childhood Respiratory       Other         Sum 
        472         955         126        1553 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb297"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cross-tabulation between vaccine group and gender</span></span>
<span id="cb297-2"><a href="#cb297-2" aria-hidden="true" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> vacc_group3 <span class="sc">+</span> gender, <span class="at">data =</span> vacc_1524)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             gender
vacc_group3   Female Male
  Childhood      233  239
  Respiratory    511  444
  Other           54   72</code></pre>
</div>
</div>
</section>
<section id="tidy-summary-and-tabulations" class="level3" data-number="1.6.5">
<h3 data-number="1.6.5" class="anchored" data-anchor-id="tidy-summary-and-tabulations"><span class="header-section-number">1.6.5</span> <strong>üîπ 5. Tidy Summary and Tabulations</strong></h3>
<p>Modern workflows prefer tidy-format summaries using:</p>
<ul>
<li><code>tabyl()</code> ‚Äì From <code>janitor</code>: clean frequency tables<br>
</li>
<li><code>adorn_totals()</code>, <code>adorn_percentages()</code> ‚Äì Add percentages and totals<br>
</li>
<li><code>count()</code> ‚Äì From <code>dplyr</code>: group-level counts<br>
</li>
<li><code>group_by()</code> + <code>summarise()</code> ‚Äì Group-wise summary</li>
<li><code>pivot_wider()</code>, <code>pivot_longer()</code> ‚Äì Reshape tables</li>
</ul>
<p>The section below demonstrates tabulations using <code>janitor::tabyl()</code> and tidyverse functions for grouped summaries and table reshaping.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------------------------------------</span></span>
<span id="cb299-2"><a href="#cb299-2" aria-hidden="true" tabindex="-1"></a><span class="co"># üîπ Tabulation and Table Reshaping </span></span>
<span id="cb299-3"><a href="#cb299-3" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------------------------------------</span></span>
<span id="cb299-4"><a href="#cb299-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb299-5"><a href="#cb299-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Basic clean frequency table with janitor::tabyl()</span></span>
<span id="cb299-6"><a href="#cb299-6" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb299-7"><a href="#cb299-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(vacc_group3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> vacc_group3   n    percent
   Childhood 472 0.30392788
 Respiratory 955 0.61493883
       Other 126 0.08113329</code></pre>
</div>
<div class="sourceCode cell-code" id="cb301"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb301-1"><a href="#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Add column percentages and total row</span></span>
<span id="cb301-2"><a href="#cb301-2" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb301-3"><a href="#cb301-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(vacc_group3, gender) <span class="sc">%&gt;%</span></span>
<span id="cb301-4"><a href="#cb301-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"col"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb301-5"><a href="#cb301-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">"row"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb301-6"><a href="#cb301-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)  <span class="co"># Cleaner column names</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> vacc_group3/gender     Female       Male
          Childhood 0.29197995 0.31655629
        Respiratory 0.64035088 0.58807947
              Other 0.06766917 0.09536424
              Total 1.00000000 1.00000000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb303"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Group-level count using dplyr::count()</span></span>
<span id="cb303-2"><a href="#cb303-2" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb303-3"><a href="#cb303-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_group3, gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  vacc_group3 gender   n
1   Childhood Female 233
2   Childhood   Male 239
3 Respiratory Female 511
4 Respiratory   Male 444
5       Other Female  54
6       Other   Male  72</code></pre>
</div>
<div class="sourceCode cell-code" id="cb305"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Group-wise summary using group_by + summarise</span></span>
<span id="cb305-2"><a href="#cb305-2" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb305-3"><a href="#cb305-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb305-4"><a href="#cb305-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb305-5"><a href="#cb305-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  vacc_group3     n   prop
  &lt;fct&gt;       &lt;int&gt;  &lt;dbl&gt;
1 Childhood     472 0.304 
2 Respiratory   955 0.615 
3 Other         126 0.0811</code></pre>
</div>
<div class="sourceCode cell-code" id="cb307"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Pivot table to wide format (e.g., for display or reporting)</span></span>
<span id="cb307-2"><a href="#cb307-2" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb307-3"><a href="#cb307-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_group3, gender) <span class="sc">%&gt;%</span></span>
<span id="cb307-4"><a href="#cb307-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> gender, <span class="at">values_from =</span> n, <span class="at">values_fill =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  vacc_group3 Female  Male
  &lt;fct&gt;        &lt;int&gt; &lt;int&gt;
1 Childhood      233   239
2 Respiratory    511   444
3 Other           54    72</code></pre>
</div>
<div class="sourceCode cell-code" id="cb309"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Optional: Pivot longer to return to tidy format</span></span>
<span id="cb309-2"><a href="#cb309-2" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb309-3"><a href="#cb309-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_group3, gender) <span class="sc">%&gt;%</span></span>
<span id="cb309-4"><a href="#cb309-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> gender, <span class="at">values_from =</span> n, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb309-5"><a href="#cb309-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>vacc_group3, <span class="at">names_to =</span> <span class="st">"gender"</span>, <span class="at">values_to =</span> <span class="st">"count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  vacc_group3 gender count
  &lt;fct&gt;       &lt;chr&gt;  &lt;int&gt;
1 Childhood   Female   233
2 Childhood   Male     239
3 Respiratory Female   511
4 Respiratory Male     444
5 Other       Female    54
6 Other       Male      72</code></pre>
</div>
</div>
</section>
<section id="cross-tabulations" class="level3" data-number="1.6.6">
<h3 data-number="1.6.6" class="anchored" data-anchor-id="cross-tabulations"><span class="header-section-number">1.6.6</span> <strong>üîπ 6. Cross Tabulations</strong></h3>
<p>Used to explore the relationship between two or more categorical variables.</p>
<ul>
<li><code>CrossTable()</code> ‚Äì From <code>gmodels</code>: produces detailed cross-tabs with row %, column %, and counts</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb311"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install and load the gmodels package for cross-tabulation</span></span>
<span id="cb311-2"><a href="#cb311-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"gmodels"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb311-3"><a href="#cb311-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">"gmodels"</span>)</span>
<span id="cb311-4"><a href="#cb311-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb311-5"><a href="#cb311-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gmodels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb312"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb312-2"><a href="#cb312-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Cross Tabulation Example</span></span>
<span id="cb312-3"><a href="#cb312-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb312-4"><a href="#cb312-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb312-5"><a href="#cb312-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate a contingency table between gender and vaccine group</span></span>
<span id="cb312-6"><a href="#cb312-6" aria-hidden="true" tabindex="-1"></a><span class="fu">CrossTable</span>(vacc_1524<span class="sc">$</span>vacc_group3, vacc_1524<span class="sc">$</span>gender,</span>
<span id="cb312-7"><a href="#cb312-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">prop.r =</span> <span class="cn">FALSE</span>,     <span class="co"># Row proportions</span></span>
<span id="cb312-8"><a href="#cb312-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">prop.c =</span> <span class="cn">TRUE</span>,     <span class="co"># Column proportions</span></span>
<span id="cb312-9"><a href="#cb312-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">prop.t =</span> <span class="cn">FALSE</span>,    <span class="co"># Overall proportion (optional)</span></span>
<span id="cb312-10"><a href="#cb312-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">chisq =</span> <span class="cn">TRUE</span>)      <span class="co"># Include chi-square test for independence</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 
   Cell Contents
|-------------------------|
|                       N |
| Chi-square contribution |
|           N / Col Total |
|-------------------------|

 
Total Observations in Table:  1553 

 
                      | vacc_1524$gender 
vacc_1524$vacc_group3 |    Female |      Male | Row Total | 
----------------------|-----------|-----------|-----------|
            Childhood |       233 |       239 |       472 | 
                      |     0.375 |     0.396 |           | 
                      |     0.292 |     0.317 |           | 
----------------------|-----------|-----------|-----------|
          Respiratory |       511 |       444 |       955 | 
                      |     0.838 |     0.886 |           | 
                      |     0.640 |     0.588 |           | 
----------------------|-----------|-----------|-----------|
                Other |        54 |        72 |       126 | 
                      |     1.783 |     1.885 |           | 
                      |     0.068 |     0.095 |           | 
----------------------|-----------|-----------|-----------|
         Column Total |       798 |       755 |      1553 | 
                      |     0.514 |     0.486 |           | 
----------------------|-----------|-----------|-----------|

 
Statistics for All Table Factors


Pearson's Chi-squared test 
------------------------------------------------------------
Chi^2 =  6.162349     d.f. =  2     p =  0.04590531 


 </code></pre>
</div>
</div>
<hr>
<p><strong>üîπ Summary Table: Descriptive Statistics and Tabulation Functions</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Task</strong></th>
<th><strong>Function</strong></th>
<th><strong>Package</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Basic numeric summaries</td>
<td><code>summary()</code>, <code>mean()</code>, <code>sd()</code>, <code>IQR()</code></td>
<td>base</td>
</tr>
<tr class="even">
<td>Percentiles and range</td>
<td><code>quantile()</code>, <code>range()</code></td>
<td>base</td>
</tr>
<tr class="odd">
<td>Skewness / Kurtosis</td>
<td><code>skewness()</code>, <code>kurtosis()</code></td>
<td>e1071, moments</td>
</tr>
<tr class="even">
<td>Extended profiling</td>
<td><code>describe()</code>, <code>stat.desc()</code>, <code>skim()</code></td>
<td>Hmisc, pastecs, skimr</td>
</tr>
<tr class="odd">
<td>Frequency tables</td>
<td><code>table()</code>, <code>xtabs()</code>, <code>prop.table()</code></td>
<td>base</td>
</tr>
<tr class="even">
<td>Clean tables (tidy)</td>
<td><code>tabyl()</code>, <code>adorn_*()</code>, <code>count()</code></td>
<td>janitor, dplyr</td>
</tr>
<tr class="odd">
<td>Group summaries</td>
<td><code>group_by()</code> + <code>summarise()</code></td>
<td>dplyr</td>
</tr>
<tr class="even">
<td>Reshape for tables</td>
<td><code>pivot_wider()</code>, <code>pivot_longer()</code></td>
<td>tidyr</td>
</tr>
<tr class="odd">
<td>Rich cross-tabulation</td>
<td><code>CrossTable()</code></td>
<td>gmodels</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="saving-and-writing-data" class="level3" data-number="1.6.7">
<h3 data-number="1.6.7" class="anchored" data-anchor-id="saving-and-writing-data"><span class="header-section-number">1.6.7</span> <strong>7.2 Saving and Writing Data</strong></h3>
<ul>
<li><code>write.csv()</code>, <code>write_xlsx()</code>, <code>saveRDS()</code>, <code>write_tsv()</code></li>
<li>Exporting interactive tables with <code>DT::datatable()</code></li>
<li>Saving and loading the entire R workspace (save.image(), load())</li>
</ul>
<hr>
</section>
</section>
<section id="part-vii-data-visualization-with-ggplot2" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="part-vii-data-visualization-with-ggplot2"><span class="header-section-number">1.7</span> <strong>PART VII: DATA VISUALIZATION WITH <code>ggplot2</code></strong></h2>
<p><strong>Visualization Contents and Types Overview</strong></p>
<ul>
<li><strong>Layers</strong>: Theme, Coordinates, Facets, Statistics, Geometries, Aesthetics, Data</li>
<li><strong>Chart Types</strong>: line, histogram, boxplot, bar, area, density, violin, dotplot, ECDF, scatter, bubble, QQ plot</li>
<li><strong>Comparative &amp; Multivariate</strong>: faceted plot, pair plot, heatmap, treemap, radar chart, ridgeline plot, forest plot</li>
<li><strong>Geospatial Visualization</strong>: choropleth map, point map, heatmap overlay</li>
<li><strong>Statistical Overlays</strong>: error bars, confidence intervals, regression lines, smoothers</li>
<li><strong>Interactive Visualization</strong>: scatter/line/bar (Plotly), interactive tables (DT), interactive maps (Leaflet), dashboards (Shiny, flexdashboard)</li>
</ul>
<p>Effective visualizations help uncover patterns, trends, and insights in data. In R, we commonly use the <code>ggplot2</code> package for static plots and tools like <code>plotly</code>, <code>DT</code>, and <code>leaflet</code> for interactive dashboards and graphics.</p>
<p>The sections below summarize different types of visualizations and how they fit into analysis workflows.</p>
<hr>
<section id="visualization-layer-components" class="level3" data-number="1.7.1">
<h3 data-number="1.7.1" class="anchored" data-anchor-id="visualization-layer-components"><span class="header-section-number">1.7.1</span> <strong>üîπ Visualization Layer Components</strong></h3>
<p>Every ggplot chart is built using multiple composable layers: - <strong>Data</strong>: The dataset to visualize. - <strong>Aesthetics (<code>aes()</code>)</strong>: Mappings between variables and visual elements (e.g., x, y, color). - <strong>Geometries (<code>geom_*</code>)</strong>: Plot types (e.g., <code>geom_line()</code>, <code>geom_bar()</code>). - <strong>Statistics (<code>stat_*</code>)</strong>: Summaries or transformations (e.g., <code>stat_smooth()</code>). - <strong>Facets</strong>: Create multiple plots by group (<code>facet_wrap()</code>, <code>facet_grid()</code>). - <strong>Coordinates</strong>: Set axis and aspect ratio (<code>coord_cartesian()</code>, <code>coord_flip()</code>). - <strong>Themes</strong>: Control overall appearance (e.g., <code>theme_minimal()</code>, <code>theme_bw()</code>).</p>
</section>
<section id="common-chart-types" class="level3" data-number="1.7.2">
<h3 data-number="1.7.2" class="anchored" data-anchor-id="common-chart-types"><span class="header-section-number">1.7.2</span> <strong>üîπ Common Chart Types</strong></h3>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 33%">
<col style="width: 41%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Chart Type</strong></th>
<th><strong>Function</strong></th>
<th><strong>Used For</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Line Chart</td>
<td><code>geom_line()</code></td>
<td>Trends over time</td>
</tr>
<tr class="even">
<td>Histogram</td>
<td><code>geom_histogram()</code></td>
<td>Distribution of continuous variables</td>
</tr>
<tr class="odd">
<td>Boxplot</td>
<td><code>geom_boxplot()</code></td>
<td>Distribution &amp; outliers</td>
</tr>
<tr class="even">
<td>Bar Plot</td>
<td><code>geom_bar()</code></td>
<td>Counts or categorical comparison</td>
</tr>
<tr class="odd">
<td>Area Plot</td>
<td><code>geom_area()</code></td>
<td>Cumulative trends</td>
</tr>
<tr class="even">
<td>Density Plot</td>
<td><code>geom_density()</code></td>
<td>Smoothed distribution</td>
</tr>
<tr class="odd">
<td>Violin Plot</td>
<td><code>geom_violin()</code></td>
<td>Combination of boxplot + density</td>
</tr>
<tr class="even">
<td>Dot Plot</td>
<td><code>geom_dotplot()</code></td>
<td>Count-based plots</td>
</tr>
<tr class="odd">
<td>ECDF Plot</td>
<td><code>stat_ecdf()</code></td>
<td>Cumulative distribution</td>
</tr>
<tr class="even">
<td>Scatter Plot</td>
<td><code>geom_point()</code></td>
<td>Bivariate relationships</td>
</tr>
<tr class="odd">
<td>Bubble Plot</td>
<td><code>geom_point(aes(size = ...))</code></td>
<td>3-variable comparison using size</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="comparative-multivariate-visuals" class="level3" data-number="1.7.3">
<h3 data-number="1.7.3" class="anchored" data-anchor-id="comparative-multivariate-visuals"><span class="header-section-number">1.7.3</span> <strong>üîπ Comparative &amp; Multivariate Visuals</strong></h3>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Visual Type</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Faceted Plot</strong> (<code>facet_wrap</code>)</td>
<td>Compare subgroups in separate panels</td>
</tr>
<tr class="even">
<td><strong>Pair Plot</strong> (<code>GGally::ggpairs</code>)</td>
<td>Explore all pairwise relationships</td>
</tr>
<tr class="odd">
<td><strong>Heatmap</strong> (<code>geom_tile</code>, <code>heatmap()</code>)</td>
<td>Show intensity using color</td>
</tr>
<tr class="even">
<td><strong>Treemap</strong> (<code>treemapify</code>)</td>
<td>Hierarchical categories and values</td>
</tr>
<tr class="odd">
<td><strong>Radar Chart</strong> (<code>fmsb</code>)</td>
<td>Compare multivariate profiles</td>
</tr>
<tr class="even">
<td><strong>Ridgeline Plot</strong> (<code>ggridges</code>)</td>
<td>Distribution comparison across groups</td>
</tr>
<tr class="odd">
<td><strong>Forest Plot</strong> (<code>forestplot</code>, <code>ggforestplot</code>)</td>
<td>Confidence intervals and effect sizes</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="geospatial-visualizations" class="level3" data-number="1.7.4">
<h3 data-number="1.7.4" class="anchored" data-anchor-id="geospatial-visualizations"><span class="header-section-number">1.7.4</span> <strong>üîπ Geospatial Visualizations</strong></h3>
<table class="caption-top table">
<colgroup>
<col style="width: 31%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Map Type</strong></th>
<th><strong>Function/Use</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Choropleth Map</td>
<td>Show values by region (e.g., <code>geom_sf()</code>, <code>tmap</code>)</td>
</tr>
<tr class="even">
<td>Point Map</td>
<td>Locations with coordinates (e.g., <code>geom_point()</code>, <code>leaflet::addMarkers</code>)</td>
</tr>
<tr class="odd">
<td>Heatmap Overlay</td>
<td>Density of spatial events (e.g., <code>leaflet::addHeatmap()</code>)</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="statistical-enhancements-overlays" class="level3" data-number="1.7.5">
<h3 data-number="1.7.5" class="anchored" data-anchor-id="statistical-enhancements-overlays"><span class="header-section-number">1.7.5</span> <strong>üîπ Statistical Enhancements (Overlays)</strong></h3>
<ul>
<li><strong>Error bars</strong>: <code>geom_errorbar()</code> for confidence or SD intervals</li>
<li><strong>Regression lines</strong>: <code>geom_smooth(method = "lm")</code></li>
<li><strong>Trend smoothing</strong>: <code>geom_smooth()</code> with <code>method = "loess"</code></li>
<li><strong>Labeling</strong>: <code>geom_text()</code>, <code>geom_label()</code> to annotate plots</li>
</ul>
<hr>
<p>This section demonstrates how to visualize breast cancer screening and vaccination data. We‚Äôll walk through common chart types such as line plots, bar charts, boxplots, and faceted views. Each example is designed with annotations and descriptions to aid understanding.</p>
<hr>
</section>
<section id="visualization-layer-components-with-examples" class="level3" data-number="1.7.6">
<h3 data-number="1.7.6" class="anchored" data-anchor-id="visualization-layer-components-with-examples"><span class="header-section-number">1.7.6</span> <strong>üîπ Visualization Layer Components with Examples</strong></h3>
<p>Each chart demonstrates how different <code>ggplot2</code> components come together using real health datasets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install if not already installed</span></span>
<span id="cb314-2"><a href="#cb314-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"treemapify"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {<span class="fu">install.packages</span>(<span class="st">"treemapify"</span>)}</span>
<span id="cb314-3"><a href="#cb314-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"ggridges"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {<span class="fu">install.packages</span>(<span class="st">"ggridges"</span>)}</span>
<span id="cb314-4"><a href="#cb314-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"gganimate"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"gganimate"</span>)</span>
<span id="cb314-5"><a href="#cb314-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"gifski"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"gifski"</span>)</span>
<span id="cb314-6"><a href="#cb314-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-7"><a href="#cb314-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb314-8"><a href="#cb314-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gifski)</span>
<span id="cb314-9"><a href="#cb314-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb314-10"><a href="#cb314-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb314-11"><a href="#cb314-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb314-12"><a href="#cb314-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb314-13"><a href="#cb314-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb314-14"><a href="#cb314-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)  <span class="co"># for str_to_title()</span></span>
<span id="cb314-15"><a href="#cb314-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> Date[1:1553], format: "1994-02-06" "1994-02-06" "1994-02-06" "1994-02-06" "1994-02-06" ...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  1   2   5   6   7  10  11  12  13  14  15  16  17  18  19  20  21  23  24  25 
 46  24  64  66  34 100  38  59  21  21  34  81  18  36  18  34  40  13  12  47 
 27  28  29  30  33  34  36  37  38  40  41  42  43  44  45  46  47  48  49  50 
 17  30   9  35   4   7   6   8   6  20  37  16   9  17  15  13   9  21  30  15 
 51  52  53  55  56  58  60  61  62  63  64  65  68  69  71  73  74  76  78  80 
 13  30  16  30  26  14  12  24  36  13  25  14  14  47  14  19  15  14  12  13 
 85  97 
 12  10 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  0‚Äì9 10‚Äì19 20‚Äì29 30‚Äì49   50+ 
  234   426   202   253   438 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
2016 2017 2018 2019 
 341  341  341  341 </code></pre>
</div>
</div>
<p><strong>Line Chart ‚Äì Breast Cancer Screening Trends by Region in Australia</strong></p>
<p>The example below shows a <strong>line chart</strong> illustrating trends in <strong>breast cancer screening rates</strong> across Australian states from 2016 to 2019.</p>
<ul>
<li><p>Breast cancer screening rates across most Australian states appeared relatively consistent from 2016 to 2018, with minor year-to-year variations.</p></li>
<li><p>A notable decline in screening rates is evident after 2018 and particularly in 2019, coinciding with the early stages of the COVID-19 pandemic</p></li>
</ul>
<p><strong>State-specific Observations:</strong></p>
<ul>
<li><p><strong>Tasmania (Tas)</strong> consistently had the highest screening rate, around 60%, but showed a clear decline post-2018.</p></li>
<li><p>The <strong>Northern Territory (NT)</strong> had the lowest rates, around 40%, also experiencing a slight decline during this period.</p></li>
<li><p>Other states (<strong>ACT, NSW, Qld, SA, Vic, WA</strong>) maintained relatively stable rates (around 55%) until 2018, after which a distinct downturn is noticeable, particularly in Western Australia (WA) and Victoria (Vic).</p></li>
</ul>
<p><strong>Impact of COVID-19:</strong></p>
<ul>
<li>The observed decline in breast cancer screening from 2019 onwards aligns with the emergence of the COVID-19 pandemic, which disrupted routine healthcare services globally.</li>
</ul>
<p>This analysis underscores the importance of maintaining consistent access to healthcare services, particularly preventive screenings, even during periods of significant healthcare disruption.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb319"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizing changes in screening rates (50‚Äì74 years) over time by state</span></span>
<span id="cb319-2"><a href="#cb319-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb319-3"><a href="#cb319-3" aria-hidden="true" tabindex="-1"></a>breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb319-4"><a href="#cb319-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year_4digit) <span class="sc">%&gt;%</span>  <span class="co"># group by state and year</span></span>
<span id="cb319-5"><a href="#cb319-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_rate =</span> <span class="fu">mean</span>(rate50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb319-6"><a href="#cb319-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_4digit, <span class="at">y =</span> mean_rate, <span class="at">color =</span> state)) <span class="sc">+</span>  <span class="co"># map axes and color</span></span>
<span id="cb319-7"><a href="#cb319-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span>  <span class="co"># trend lines</span></span>
<span id="cb319-8"><a href="#cb319-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span>   <span class="co"># points for each year</span></span>
<span id="cb319-9"><a href="#cb319-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb319-10"><a href="#cb319-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Breast Cancer Screening Rates (50‚Äì74 yrs)"</span>,  </span>
<span id="cb319-11"><a href="#cb319-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Aggregated by State and Year"</span>,           </span>
<span id="cb319-12"><a href="#cb319-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Screening Rate (%)"</span>,  <span class="co"># Axis labels</span></span>
<span id="cb319-13"><a href="#cb319-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"State"</span>   <span class="co"># Legend title</span></span>
<span id="cb319-14"><a href="#cb319-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb319-15"><a href="#cb319-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb319-16"><a href="#cb319-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
‚Ñπ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4 rows containing missing values or values outside the scale range
(`geom_line()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Histogram ‚Äì Distribution of Age</strong><br>
Displays the frequency of vaccinated individuals by age, with a density line overlay to visualize the distribution shape.</p>
<p>The example below shows a histogram illustrating the <strong>age distribution</strong> within our studied population. The distribution highlights a clear <strong>bimodal pattern</strong>, indicating two main age groups. The largest group comprises younger adults, predominantly around 20‚Äì30 years old, suggesting a significant representation of young adults. A smaller secondary group emerges around 55‚Äì65 years old, reflecting a noticeable segment of older adults. This pattern may indicate specific target groups or demographic characteristics relevant to the population from which the data was collected. Understanding these age clusters can help tailor appropriate health strategies, services, or interventions accordingly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb323"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb323-2"><a href="#cb323-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb323-3"><a href="#cb323-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">fill =</span> <span class="st">"darkblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb323-4"><a href="#cb323-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb323-5"><a href="#cb323-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Age Distribution with Density Curve"</span>, <span class="at">x =</span> <span class="st">"Age"</span>, <span class="at">y =</span> <span class="st">"Density"</span>) <span class="sc">+</span></span>
<span id="cb323-6"><a href="#cb323-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The dot-dot notation (`..density..`) was deprecated in ggplot2 3.4.0.
‚Ñπ Please use `after_stat(density)` instead.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Pie Chart ‚Äì Proportion by Vaccine Group</strong><br>
Shows how vaccine groups are proportionally represented in the dataset. Useful for visualizing categorical outcomes.</p>
<p>In the example below, the pie chart represents the proportion of vaccinations grouped into three categories:</p>
<ul>
<li><p><strong>Respiratory vaccines</strong> account for the largest proportion, comprising <strong>61%</strong> of all vaccines administered.</p></li>
<li><p><strong>Childhood vaccines</strong> represent a significant portion as well, making up <strong>30%</strong>.</p></li>
<li><p>The category labeled <strong>Other</strong> includes <strong>8%</strong> of vaccines administered, indicating a smaller but notable group of vaccinations outside the respiratory and childhood classifications.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb325"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb325-1"><a href="#cb325-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb325-2"><a href="#cb325-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb325-3"><a href="#cb325-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n), <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(perc)) <span class="sc">%&gt;%</span></span>
<span id="cb325-4"><a href="#cb325-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> perc, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb325-5"><a href="#cb325-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb325-6"><a href="#cb325-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb325-7"><a href="#cb325-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb325-8"><a href="#cb325-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Vaccine Group Proportions"</span>, <span class="at">fill =</span> <span class="st">"Vaccine Group"</span>) <span class="sc">+</span></span>
<span id="cb325-9"><a href="#cb325-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Bar Plot ‚Äì Vaccination Count by Vaccine Group</strong><br>
This plot compares the absolute count of vaccinations across groups, with horizontal bars for better readability of long labels.</p>
<p>The example below shows a <strong>horizontal bar chart</strong> illustrating the total number of vaccinations administered, grouped into three distinct categories:</p>
<ul>
<li><p><strong>Respiratory vaccines</strong> clearly represent the largest group, indicating that these vaccines were administered most frequently within the population.</p></li>
<li><p>The <strong>Other</strong> category accounts for the smallest number of vaccinations, suggesting a relatively minor proportion of miscellaneous or specialized vaccines.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb326-2"><a href="#cb326-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb326-3"><a href="#cb326-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(vacc_group3, n), <span class="at">y =</span> n, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb326-4"><a href="#cb326-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb326-5"><a href="#cb326-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb326-6"><a href="#cb326-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Vaccination Count by Group"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Count"</span>) <span class="sc">+</span></span>
<span id="cb326-7"><a href="#cb326-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb326-8"><a href="#cb326-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Grouped Bar Plot ‚Äì Vaccination by Race and Vaccine Group</strong><br>
The example below shows a <strong>stacked bar chart</strong> presenting the distribution of vaccinations by race and vaccine category.</p>
<ul>
<li><p><strong>Respiratory vaccines</strong> (represented in blue) dominate across all racial groups, consistently making up the largest proportion of administered vaccines, especially noticeable among <strong>Black</strong> and <strong>White</strong> groups.</p></li>
<li><p><strong>Childhood vaccines</strong> (represented in red) form a significant proportion of vaccinations among the <strong>Asian</strong> and <strong>Native</strong> groups, highlighting targeted or population-specific vaccination programs for younger age groups within these communities.</p></li>
<li><p>The <strong>Other vaccines</strong> category (represented in green) comprises a relatively minor proportion and appears more prominent among the <strong>Asian</strong> and <strong>White</strong> populations.</p></li>
</ul>
<pre><code>**Implications:**

These patterns may suggest varying public health strategies, demographic factors, or differing healthcare access across racial groups. Understanding these variations can guide targeted healthcare interventions and improve vaccine coverage equity.</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb328"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data: count vaccinations by race and vaccine group</span></span>
<span id="cb328-2"><a href="#cb328-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb328-3"><a href="#cb328-3" aria-hidden="true" tabindex="-1"></a>vacc_1524<span class="sc">$</span>race <span class="ot">&lt;-</span> tools<span class="sc">::</span><span class="fu">toTitleCase</span>(vacc_1524<span class="sc">$</span>race)</span>
<span id="cb328-4"><a href="#cb328-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb328-5"><a href="#cb328-5" aria-hidden="true" tabindex="-1"></a>vacc_summary <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb328-6"><a href="#cb328-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(race, vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb328-7"><a href="#cb328-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(race) <span class="sc">%&gt;%</span></span>
<span id="cb328-8"><a href="#cb328-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb328-9"><a href="#cb328-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb328-10"><a href="#cb328-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb328-11"><a href="#cb328-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(vacc_summary, <span class="fu">aes</span>(<span class="at">x =</span> race, <span class="at">y =</span> prop, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb328-12"><a href="#cb328-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb328-13"><a href="#cb328-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb328-14"><a href="#cb328-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Vaccination Distribution by Race and Vaccine Group"</span>,</span>
<span id="cb328-15"><a href="#cb328-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Race"</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>,</span>
<span id="cb328-16"><a href="#cb328-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Vaccine Group"</span></span>
<span id="cb328-17"><a href="#cb328-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb328-18"><a href="#cb328-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb328-19"><a href="#cb328-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb328-20"><a href="#cb328-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-67-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb329"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vacc_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Stacked Bar Chart ‚Äì Race by Vaccine Group</strong></p>
<p>The example below shows a <strong>stacked bar chart</strong> illustrating the number of vaccinations administered, grouped by vaccine type and categorized by racial groups.</p>
<ul>
<li><p>The <strong>White</strong> population received the highest number of vaccinations across all vaccine categories (<strong>Childhood, Other, and Respiratory vaccines</strong>).</p></li>
<li><p>Other racial groups (<strong>Asian, Black, Native, and Other</strong>) also received vaccinations, though in smaller numbers across each vaccine type, indicating ongoing efforts to reach diverse communities.</p></li>
<li><p><strong>Respiratory vaccines</strong> had the highest total number of vaccinations administered, suggesting these vaccines were a primary focus within the vaccination program.</p></li>
</ul>
<pre><code>This data helps to illustrate which groups have higher vaccine coverage and highlights the importance of ensuring equitable access and distribution across all communities.</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb331"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb331-2"><a href="#cb331-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> stringr<span class="sc">::</span><span class="fu">str_to_title</span>(race)) <span class="sc">%&gt;%</span></span>
<span id="cb331-3"><a href="#cb331-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_group3, race) <span class="sc">%&gt;%</span></span>
<span id="cb331-4"><a href="#cb331-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> n, <span class="at">fill =</span> race)) <span class="sc">+</span></span>
<span id="cb331-5"><a href="#cb331-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb331-6"><a href="#cb331-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Stacked Bar Chart: Race by Vaccine Group"</span>, <span class="at">x =</span> <span class="st">"Vaccine Group"</span>, <span class="at">y =</span> <span class="st">"Count"</span>) <span class="sc">+</span></span>
<span id="cb331-7"><a href="#cb331-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Boxplot ‚Äì Age Distribution by Vaccine Group</strong><br>
Visualizes how age varies across vaccine groups using standard boxplots.</p>
<p>The example below shows a <strong>box plot</strong> depicting age distribution for three vaccine categories (<strong>Childhood vaccines, Other vaccines, and Respiratory vaccines</strong>):</p>
<p><strong>Key Observations:</strong></p>
<ul>
<li><p><strong>Childhood vaccines</strong> primarily cover younger ages, with most recipients under 25 years old. Some individuals beyond this age range appear as outliers, suggesting occasional vaccinations in older groups.</p></li>
<li><p><strong>Respiratory vaccines</strong> generally target an older age group, with the median age around 50 years, and a broad range from younger adults to elderly populations.</p></li>
<li><p>The <strong>Other vaccines</strong> category has a wider age distribution overall, suggesting these vaccines serve diverse age groups, though with fewer individuals compared to the other two groups.</p></li>
</ul>
<p><strong>Implications:</strong></p>
<p>This visualization highlights clear age-based targeting for different vaccine categories. Childhood vaccines are expectedly administered primarily to younger populations, while respiratory vaccines predominantly reach older adults. Understanding these age patterns helps to plan targeted public health campaigns and resource allocation effectively.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb332"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb332-2"><a href="#cb332-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> age, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb332-3"><a href="#cb332-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb332-4"><a href="#cb332-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Age Distribution by Vaccine Group"</span>,</span>
<span id="cb332-5"><a href="#cb332-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Vaccine Group"</span>, <span class="at">y =</span> <span class="st">"Age (Years)"</span>) <span class="sc">+</span></span>
<span id="cb332-6"><a href="#cb332-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb332-7"><a href="#cb332-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Boxplot with Jittered (Individual Data) Points</strong><br>
Combines summary and raw data by overlaying individual age points on the boxplot.</p>
<p>The example below shows a <strong>boxplot with individual data points (jittered)</strong>, displaying the <strong>age distribution</strong> of individuals across three vaccine groups: <strong>Childhood vaccines, Other vaccines, and Respiratory vaccines</strong>.</p>
<ul>
<li><p><strong>Childhood vaccines</strong>:</p></li>
<li><p>Most individuals who received childhood vaccines are young, with a median age around 10 years.</p></li>
<li><p>The distribution is tightly concentrated, though some older individuals (outliers) also received these vaccines.</p></li>
<li><p>The data points clearly cluster in younger age ranges, which is expected for this vaccine group.</p>
<ul>
<li><p><strong>Respiratory vaccines</strong>:</p>
<ul>
<li><p>This group has the highest median age, around 40‚Äì50 years.</p></li>
<li><p>The data points are more evenly spread out across a wide age range, with many individuals above 60 years, indicating respiratory vaccines are frequently administered to older populations.</p></li>
</ul></li>
</ul>
<p><strong>Other vaccines</strong>:</p>
<ul>
<li><p>This group shows a wide range of ages, from infants to older adults.</p></li>
<li><p>While the median age is still relatively low, the spread is broader compared to childhood vaccines, suggesting this category includes various vaccines administered across different age groups.</p></li>
</ul>
<p><strong>Implications:</strong></p>
<p>By combining summary statistics (boxplot) with individual-level data (dots), this chart offers a clear view of both overall trends and variation in vaccination by age. It confirms that vaccine distribution aligns with age-specific health needs‚Äîyoung children for childhood vaccines, and older adults for respiratory vaccines‚Äîwhile also showing the diversity within each group.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb333-2"><a href="#cb333-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> age, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb333-3"><a href="#cb333-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.shape =</span> <span class="cn">NA</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb333-4"><a href="#cb333-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>),</span>
<span id="cb333-5"><a href="#cb333-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb333-6"><a href="#cb333-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot with Individual Data Points"</span>,</span>
<span id="cb333-7"><a href="#cb333-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Vaccine Group"</span>, <span class="at">y =</span> <span class="st">"Age"</span>) <span class="sc">+</span></span>
<span id="cb333-8"><a href="#cb333-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb333-9"><a href="#cb333-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Boxplot with Violin Overlay</strong><br>
Adds a violin plot to visualize the full distribution of ages while preserving boxplot summary stats.</p>
<p>The plot below combines a <strong>boxplot</strong> and <strong>violin plot</strong> to display the age distribution across different vaccine groups: <strong>Childhood vaccines</strong>, <strong>Other vaccines</strong>, and <strong>Respiratory vaccines</strong>.</p>
<ul>
<li><p><strong>Childhood vaccines</strong>:<br>
The age distribution is heavily concentrated among younger individuals, with most recipients under 25 years. The violin shape is widest near the lower ages, tapering quickly, which indicates that childhood vaccines are rarely given to older individuals.</p></li>
<li><p><strong>Respiratory vaccines</strong>:<br>
The distribution leans toward older age groups, with the median age higher than in other categories. The violin is widest in the 40‚Äì70 age range, suggesting respiratory vaccines are more commonly administered to older adults.</p></li>
</ul>
<!-- -->
<ul>
<li><p><strong>Other vaccines</strong>:<br>
This group shows a broader age range. The shape suggests two areas of concentration: one among younger children and another around age 60‚Äì70, indicating this group includes vaccine types used across diverse age groups.</p>
<p><strong>Overall</strong>, this combined plot provides both statistical summaries (via boxplot) and full distribution shapes (via violin plot), helping to clearly distinguish the age-related usage patterns across vaccine types.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb334"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb334-1"><a href="#cb334-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb334-2"><a href="#cb334-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> age, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb334-3"><a href="#cb334-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb334-4"><a href="#cb334-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">outlier.shape =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb334-5"><a href="#cb334-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot with Violin Overlay"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Age"</span>) <span class="sc">+</span></span>
<span id="cb334-6"><a href="#cb334-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb334-7"><a href="#cb334-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-71-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Notched Boxplot ‚Äì Median Comparison</strong><br>
Notches allow a rough comparison of medians across groups. Non-overlapping notches suggest a significant difference.</p>
<p>The plot below presents a <strong>notched boxplot</strong> showing the age distribution for each vaccine group‚Äî<strong>Childhood vaccines</strong>, <strong>Other vaccines</strong>, and <strong>Respiratory vaccines</strong>.</p>
<ul>
<li>The <strong>notches</strong> around the medians provide a visual guide for comparing the central values (medians) across groups. If the notches do not overlap, it suggests that the medians are likely different in a statistically meaningful way.</li>
</ul>
<p><strong>Key insights:</strong></p>
<ul>
<li><p><strong>Childhood vaccines</strong> show a younger age distribution, with a median age around 10 years and a narrow spread. Outliers indicate a few older individuals also received these vaccines.</p></li>
<li><p><strong>Respiratory vaccines</strong> are mainly administered to older age groups, with the highest median age among the three categories.</p></li>
<li><p><strong>Other vaccines</strong> span a wider range of ages, but the median remains lower than that of respiratory vaccines.</p></li>
</ul>
<p><strong>Median Comparison:</strong></p>
<ul>
<li><p>The <strong>non-overlapping notches</strong> between childhood and respiratory vaccines suggest a clear difference in median ages.</p></li>
<li><p>The <strong>other vaccines</strong> group overlaps slightly with both, indicating a more mixed age distribution and less pronounced difference.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb335"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb335-2"><a href="#cb335-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> age, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb335-3"><a href="#cb335-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">notch =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb335-4"><a href="#cb335-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Notched Boxplot: Vaccine Group vs Age"</span>, <span class="at">x =</span> <span class="st">"Group"</span>, <span class="at">y =</span> <span class="st">"Age"</span>) <span class="sc">+</span></span>
<span id="cb335-5"><a href="#cb335-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb335-6"><a href="#cb335-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Notch went outside hinges
‚Ñπ Do you want `notch = FALSE`?</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Faceted Boxplot by Gender</strong><br>
Breaks down the age distribution by vaccine group and gender to compare across subgroups.</p>
<p>The plot below shows <strong>boxplots of age distribution</strong> by <strong>vaccine group</strong> (<strong>Childhood</strong>, <strong>Respiratory</strong>, and <strong>Other vaccines</strong>), separated into two panels by <strong>gender</strong> (<strong>Female</strong> and <strong>Male</strong>).</p>
<p><strong>Key Observations:</strong></p>
<ul>
<li><strong>Childhood vaccines</strong>:</li>
</ul>
<pre><code>-    Age distributions are similar for both females and males, with most recipients being under 25 years.

-    A few older outliers are present, especially among females, but the bulk of vaccine recipients are children and adolescents.</code></pre>
<ul>
<li><strong>Respiratory vaccines</strong>:</li>
</ul>
<pre><code>-    This group shows a wide age range in both genders, with median ages around 40‚Äì45 years.

-    The distribution is slightly more spread out among males, but the overall trend remains consistent across genders.</code></pre>
<ul>
<li><strong>Other vaccines</strong>:</li>
</ul>
<pre><code>-    A notable gender difference is visible here:

    -   Among **females**, recipients span a broad age range, including many older adults.

    -    Among **males**, the age distribution is narrower and skewed toward younger adults.</code></pre>
<p><strong>Summary:</strong></p>
<p>This faceted view helps highlight how <strong>age patterns differ by both vaccine group and gender</strong>. While childhood and respiratory vaccine distributions are generally similar across genders, the <strong>‚ÄúOther‚Äù vaccine group shows more variation</strong>, possibly reflecting differences in vaccine eligibility, access, or health needs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb340"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb340-2"><a href="#cb340-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> age, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb340-3"><a href="#cb340-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb340-4"><a href="#cb340-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> gender) <span class="sc">+</span></span>
<span id="cb340-5"><a href="#cb340-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Age by Vaccine Group, Faceted by Gender"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Age"</span>) <span class="sc">+</span></span>
<span id="cb340-6"><a href="#cb340-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb340-7"><a href="#cb340-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-73-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Ordered Boxplot ‚Äì by Median Age</strong><br>
Reorders vaccine groups by median age to emphasize differences in distribution centrality.</p>
<p>The plot below shows <strong>age distributions by vaccine group</strong>, with the groups reordered by <strong>median age</strong> to highlight differences in central tendency.</p>
<p><strong>Key Observations:</strong></p>
<ul>
<li><p><strong>Childhood vaccines</strong> have the <strong>lowest median age</strong>, with most recipients being under 20 years. A small number of older individuals appear as outliers.</p></li>
<li><p><strong>Other vaccines</strong> show a <strong>moderate median age</strong>, but with a wide spread across age groups‚Äîranging from infants to older adults. This suggests these vaccines are used in more varied contexts.</p></li>
<li><p><strong>Respiratory vaccines</strong> have the <strong>highest median age</strong>, with recipients typically ranging from their 30s to older adulthood, reflecting their common use among older populations.</p></li>
</ul>
<p><strong>Conclusion:</strong></p>
<p>By ordering the boxplots by median age, this visual emphasizes the different age profiles targeted by each vaccine group. This approach helps communicate age-related trends in vaccine administration more clearly .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb341"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb341-2"><a href="#cb341-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vacc_group3 =</span> <span class="fu">fct_reorder</span>(vacc_group3, age, median, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb341-3"><a href="#cb341-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> age, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb341-4"><a href="#cb341-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb341-5"><a href="#cb341-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot Ordered by Median Age"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Age"</span>) <span class="sc">+</span></span>
<span id="cb341-6"><a href="#cb341-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb341-7"><a href="#cb341-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-74-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Area Plot ‚Äì Monthly Vaccination Trends Over Years</strong><br>
Uses an area chart to show monthly vaccination volumes over multiple years, stacked by year.</p>
<p>The area chart below displays <strong>monthly vaccination counts</strong> over multiple years (2015‚Äì2024), helping visualize seasonal and annual trends in vaccine uptake.</p>
<p><strong>Key Observations:</strong></p>
<ul>
<li><p><strong>2020</strong> stands out with the highest overall vaccination counts, especially between <strong>April and June</strong>, likely reflecting a surge due to public health responses such as the COVID-19 pandemic.</p></li>
<li><p>In other years, vaccination numbers are more evenly distributed, with moderate peaks around <strong>March‚ÄìApril</strong> or <strong>August‚ÄìSeptember</strong>, possibly aligning with seasonal vaccination programs (e.g., flu campaigns).</p></li>
<li><p><strong>2023 and 2024</strong> show a relatively steady pattern throughout the year, with less fluctuation month-to-month.</p></li>
<li><p><strong>Earlier years</strong> (2015‚Äì2017) have lower and more variable volumes compared to recent years.</p></li>
</ul>
<p><strong>Conclusion:</strong></p>
<p>This chart highlights both <strong>seasonal vaccination patterns</strong> and the <strong>impact of specific public health events</strong>, such as the elevated activity in 2020. Monitoring these trends over time supports planning for future vaccination campaigns and resource allocation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb342"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb342-2"><a href="#cb342-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_year, vacc_month_name) <span class="sc">%&gt;%</span></span>
<span id="cb342-3"><a href="#cb342-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_month_name, <span class="at">y =</span> n, <span class="at">group =</span> vacc_year, <span class="at">fill =</span> <span class="fu">factor</span>(vacc_year))) <span class="sc">+</span></span>
<span id="cb342-4"><a href="#cb342-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">position =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb342-5"><a href="#cb342-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Monthly Vaccination Trends by Year"</span>,</span>
<span id="cb342-6"><a href="#cb342-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Month"</span>, <span class="at">y =</span> <span class="st">"Number of Vaccinations"</span>, <span class="at">fill =</span> <span class="st">"Year"</span>) <span class="sc">+</span></span>
<span id="cb342-7"><a href="#cb342-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-75-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Faceted Plot ‚Äì Proportional Vaccination Trends by Group and Race</strong><br>
Displays how the proportion of vaccinations among different races changed across years, separately for each vaccine group.</p>
<p>The faceted line plot below shows how the <strong>proportion of vaccinations</strong> among different <strong>racial groups</strong> has changed over time (<strong>2015‚Äì2024</strong>), presented separately for each <strong>vaccine group</strong>: <strong>Childhood</strong>, <strong>Respiratory</strong>, and <strong>Other</strong>.</p>
<p><strong>Key Observations:</strong></p>
<ul>
<li><strong>Childhood vaccines</strong>:</li>
</ul>
<pre><code>-   Proportions vary notably year to year, especially for **Asian**, **Black**, and **Native** groups.

-   The **"Other"** and **White** groups show a more consistent presence but with modest fluctuations.

-    Some groups (e.g., Native) show a steady rise in recent years.

**Respiratory vaccines**:

-    Several racial groups (notably **Native**, **Black**, and **Other**) show periods of very high proportions, including years where proportions reached **100%**, likely due to small subgroup sample sizes or data dominance.

-    The **White** and **Asian** groups tend to remain stable, though proportions fluctuate in certain years (e.g., 2020‚Äì2022).</code></pre>
<ul>
<li><strong>Other vaccines</strong>:</li>
</ul>
<pre><code>-   Representation is generally lower and more variable across all racial groups.

-    The **White** group maintains a small but steady share throughout most years.

**Interpretation:**</code></pre>
<p>This faceted view enables comparisons within and between vaccine types, highlighting potential shifts in <strong>vaccine access</strong>, <strong>uptake</strong>, or <strong>data coverage</strong> by racial group over time. It also suggests where disparities or changes in focus may have occurred, helping to inform more equitable vaccination strategies.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb345"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data: floor year, count by group, compute proportions within each group</span></span>
<span id="cb345-2"><a href="#cb345-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb345-3"><a href="#cb345-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean and count total per race/year (for denominator)</span></span>
<span id="cb345-4"><a href="#cb345-4" aria-hidden="true" tabindex="-1"></a>total_by_race_year <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb345-5"><a href="#cb345-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb345-6"><a href="#cb345-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">as.integer</span>(<span class="fu">round</span>(age)),</span>
<span id="cb345-7"><a href="#cb345-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_year =</span> <span class="fu">as.integer</span>(<span class="fu">floor</span>(vacc_year)),</span>
<span id="cb345-8"><a href="#cb345-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">race =</span> <span class="fu">str_to_title</span>(<span class="fu">as.character</span>(race))</span>
<span id="cb345-9"><a href="#cb345-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb345-10"><a href="#cb345-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_year, race, <span class="at">name =</span> <span class="st">"total_race_year"</span>)</span>
<span id="cb345-11"><a href="#cb345-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb345-12"><a href="#cb345-12" aria-hidden="true" tabindex="-1"></a><span class="co">#  Count per vaccine group (for numerator), then join</span></span>
<span id="cb345-13"><a href="#cb345-13" aria-hidden="true" tabindex="-1"></a>vacc_plot_data <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb345-14"><a href="#cb345-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb345-15"><a href="#cb345-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">as.integer</span>(<span class="fu">round</span>(age)),</span>
<span id="cb345-16"><a href="#cb345-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_year =</span> <span class="fu">as.integer</span>(<span class="fu">floor</span>(vacc_year)),</span>
<span id="cb345-17"><a href="#cb345-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">race =</span> <span class="fu">str_to_title</span>(<span class="fu">as.character</span>(race))</span>
<span id="cb345-18"><a href="#cb345-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb345-19"><a href="#cb345-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_year, race, vacc_group3, <span class="at">name =</span> <span class="st">"n"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb345-20"><a href="#cb345-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(total_by_race_year, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"vacc_year"</span>, <span class="st">"race"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb345-21"><a href="#cb345-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> total_race_year)</span>
<span id="cb345-22"><a href="#cb345-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb345-23"><a href="#cb345-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot proportion by race within group</span></span>
<span id="cb345-24"><a href="#cb345-24" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(vacc_plot_data, <span class="fu">aes</span>(<span class="at">x =</span> vacc_year, <span class="at">y =</span> prop, <span class="at">color =</span> race)) <span class="sc">+</span></span>
<span id="cb345-25"><a href="#cb345-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb345-26"><a href="#cb345-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> vacc_group3) <span class="sc">+</span></span>
<span id="cb345-27"><a href="#cb345-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb345-28"><a href="#cb345-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">pretty</span>(<span class="fu">unique</span>(vacc_plot_data<span class="sc">$</span>vacc_year))) <span class="sc">+</span></span>
<span id="cb345-29"><a href="#cb345-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb345-30"><a href="#cb345-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Proportion of Race Within Vaccine Groups by Year"</span>,</span>
<span id="cb345-31"><a href="#cb345-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>, <span class="at">color =</span> <span class="st">"Race"</span></span>
<span id="cb345-32"><a href="#cb345-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb345-33"><a href="#cb345-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb345-34"><a href="#cb345-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-76-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vacc_plot_data, total_by_race_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Statistical Overlay ‚Äì Regression Line on Vaccination Age</strong><br>
Adds a linear regression to examine the relationship between income and age at vaccination.</p>
<p>The scatterplot below visualizes the relationship between <strong>income</strong> (horizontal axis) and <strong>age at vaccination</strong> (vertical axis), with a <strong>linear regression line</strong> and confidence band overlaid to summarize the trend.</p>
<p><strong>Key Observations:</strong></p>
<ul>
<li><p>The fitted <strong>regression line</strong> shows a <strong>slight negative slope</strong>, suggesting that as income increases, the age at which individuals receive vaccination tends to <strong>decrease modestly</strong>.</p></li>
<li><p>The <strong>confidence band</strong> (shaded region) around the line is relatively narrow, indicating a fair level of certainty in the trend across the central range of income.</p></li>
<li><p>The majority of data points are concentrated in the lower income ranges, while higher income values are more sparsely populated and show greater variability.</p></li>
</ul>
<pre><code>**Interpretation:**</code></pre>
<p>This trend suggests a <strong>possible inverse relationship</strong> between income and vaccination age‚Äîindividuals with higher income may be more likely to receive vaccines at younger ages. This could reflect differences in healthcare access, awareness, or proactive health behaviors associated with income level.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb348"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb348-2"><a href="#cb348-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> income, <span class="at">y =</span> age)) <span class="sc">+</span></span>
<span id="cb348-3"><a href="#cb348-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">"gray50"</span>) <span class="sc">+</span></span>
<span id="cb348-4"><a href="#cb348-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb348-5"><a href="#cb348-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb348-6"><a href="#cb348-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Association Between Income and Age at Vaccination"</span>,</span>
<span id="cb348-7"><a href="#cb348-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Income"</span>, <span class="at">y =</span> <span class="st">"Age"</span></span>
<span id="cb348-8"><a href="#cb348-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb348-9"><a href="#cb348-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-77-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Regression Plot ‚Äì Age vs Income by Vaccine Group (Log Scale)</strong><br>
Adds linear regression and facets by vaccine group. The x-axis is log-scaled to handle skewed income data.</p>
<p>The plot below shows <strong>scatterplots with linear regression lines</strong>, examining the relationship between <strong>income</strong> and <strong>age at vaccination</strong>. The plots are faceted by <strong>vaccine group</strong>: <strong>Childhood</strong>, <strong>Other</strong>, and <strong>Respiratory</strong>. The x-axis uses a <strong>logarithmic scale</strong> to better handle the skewed distribution of income.</p>
<p><strong>Key Observations:</strong></p>
<ul>
<li><strong>Childhood vaccines</strong>:</li>
</ul>
<pre><code>-    A **slight negative trend** is observed, indicating that as income increases, age at vaccination tends to decrease slightly.

-    This may reflect earlier or more timely vaccinations among higher-income individuals for childhood vaccines.</code></pre>
<ul>
<li><strong>Other vaccines</strong>:</li>
</ul>
<pre><code>-   The regression line is nearly flat with a wide confidence interval, suggesting **no strong or consistent relationship** between income and age at vaccination in this group.

-    This likely reflects diverse vaccine purposes and use across a broad age and income range.</code></pre>
<ul>
<li><strong>Respiratory vaccines</strong>:</li>
</ul>
<pre><code>-   A **mild negative trend** is also seen here, where higher-income individuals may receive respiratory vaccines at slightly younger ages.

-    However, the relationship is subtle and the confidence interval overlaps considerably with the regression line.

**Interpretation:**</code></pre>
<p>While the strength of association varies across groups, both the childhood and respiratory vaccine panels suggest a small trend where <strong>higher income is associated with younger age at vaccination</strong>. This may be related to differences in <strong>access</strong>, <strong>preventive health behaviors</strong>, or <strong>healthcare utilization</strong> by income level.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb353"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb353-1"><a href="#cb353-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb353-2"><a href="#cb353-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vacc_group3 =</span> <span class="fu">str_to_title</span>(vacc_group3)) <span class="sc">%&gt;%</span></span>
<span id="cb353-3"><a href="#cb353-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> income, <span class="at">y =</span> age)) <span class="sc">+</span></span>
<span id="cb353-4"><a href="#cb353-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">"gray50"</span>) <span class="sc">+</span></span>
<span id="cb353-5"><a href="#cb353-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb353-6"><a href="#cb353-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb353-7"><a href="#cb353-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> vacc_group3) <span class="sc">+</span></span>
<span id="cb353-8"><a href="#cb353-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb353-9"><a href="#cb353-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Association Between Income and Age at Vaccination"</span>,</span>
<span id="cb353-10"><a href="#cb353-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Income (log scale)"</span>, <span class="at">y =</span> <span class="st">"Age"</span></span>
<span id="cb353-11"><a href="#cb353-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb353-12"><a href="#cb353-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-78-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>ECDF ‚Äì Age at Vaccination</strong></p>
<p>The empirical cumulative distribution function (ECDF) shows the proportion of individuals vaccinated at or below each age. This helps visualize the age distribution in a cumulative way.</p>
<p>The plot below presents shows the <strong>cumulative proportion</strong> of individuals who received a vaccination at or below each age.</p>
<p><strong>Key Observations:</strong></p>
<ul>
<li><p>The curve rises steeply in the early age range, indicating that a large proportion of individuals were vaccinated at younger ages (e.g., before 30).</p></li>
<li><p>By around <strong>age 50</strong>, approximately <strong>80%</strong> of individuals had been vaccinated.</p></li>
<li><p>The curve flattens out after age 75, suggesting fewer vaccinations occur at older ages.</p></li>
</ul>
<p><strong>Interpretation:</strong></p>
<p>The ECDF provides an intuitive way to understand the <strong>distribution of vaccination ages</strong>. It highlights that most vaccinations occur in <strong>childhood and early adulthood</strong>, with fewer individuals vaccinated later in life. This cumulative view complements histograms and boxplots by showing the proportion of individuals affected up to each age.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb355"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb355-1"><a href="#cb355-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(income <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="sc">!</span><span class="fu">is.na</span>(age))</span>
<span id="cb355-2"><a href="#cb355-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb355-3"><a href="#cb355-3" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb355-4"><a href="#cb355-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb355-5"><a href="#cb355-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_ecdf</span>(<span class="at">geom =</span> <span class="st">"step"</span>, <span class="at">color =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb355-6"><a href="#cb355-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ECDF of Age at Vaccination"</span>, <span class="at">x =</span> <span class="st">"Age"</span>, <span class="at">y =</span> <span class="st">"Cumulative Proportion"</span>) <span class="sc">+</span></span>
<span id="cb355-7"><a href="#cb355-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-79-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Treemap ‚Äì Vaccination by Race and Vaccine Group</strong></p>
<p>This treemap visualizes the distribution of vaccinations by race and vaccine group. Larger areas indicate more individuals within each combination.</p>
<p>The treemap below displays the <strong>distribution of vaccinations</strong> across <strong>racial groups</strong>, further categorized by <strong>vaccine group</strong> (Childhood, Respiratory, and Other). Each rectangle represents a combination of race and vaccine type, with <strong>area size corresponding to the number of individuals</strong> vaccinated.</p>
<p><strong>Key Observations:</strong></p>
<ul>
<li>The <strong>White</strong> population accounts for the <strong>largest share overall</strong>, with:</li>
</ul>
<pre><code>-    **788 individuals (50.7%)** in the **Respiratory** vaccine group.

-    **404 individuals (26.0%)** in the **Childhood** vaccine group.

-    **114 individuals (7.3%)** in the **Other** vaccine group.</code></pre>
<ul>
<li>Other racial groups have smaller shares:</li>
</ul>
<pre><code>-    **Black** individuals make up a modest proportion across groups, particularly **4.5%** in the Respiratory group and **1.4%** in Childhood vaccines.

-    **Asian** individuals represent **4.4%** of Respiratory vaccines and **2.1%** of Childhood vaccines.

-    **Native** and **Other** groups have minimal representation overall.

**Interpretation:**</code></pre>
<p>This treemap visually emphasizes the dominant contribution of the White population across all vaccine types, especially for respiratory vaccines. It also illustrates disparities in representation among racial groups, which can be important for assessing <strong>equity in vaccine access</strong>, <strong>uptake</strong>, and <strong>program targeting</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb358"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb358-1"><a href="#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cross-platform ‚Äúnew device‚Äù:</span></span>
<span id="cb358-2"><a href="#cb358-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.new</span>(<span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">6</span>)  </span>
<span id="cb358-3"><a href="#cb358-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb358-4"><a href="#cb358-4" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb358-5"><a href="#cb358-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(race, vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb358-6"><a href="#cb358-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">str_to_title</span>(race)) <span class="sc">%&gt;%</span></span>
<span id="cb358-7"><a href="#cb358-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">area =</span> n, <span class="at">fill =</span> vacc_group3, <span class="at">label =</span> race)) <span class="sc">+</span></span>
<span id="cb358-8"><a href="#cb358-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_treemap</span>() <span class="sc">+</span></span>
<span id="cb358-9"><a href="#cb358-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_treemap_text</span>(<span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">place =</span> <span class="st">"centre"</span>, <span class="at">grow =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb358-10"><a href="#cb358-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb358-11"><a href="#cb358-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Treemap: Vaccination by Race and Vaccine Group"</span>,</span>
<span id="cb358-12"><a href="#cb358-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill  =</span> <span class="st">"Vaccine Group"</span></span>
<span id="cb358-13"><a href="#cb358-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb358-14"><a href="#cb358-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb358-15"><a href="#cb358-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb358-16"><a href="#cb358-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p)</span>
<span id="cb358-17"><a href="#cb358-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb358-18"><a href="#cb358-18" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> (p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb359"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb359-1"><a href="#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  Treemap - with Labels Showing Counts and Proportions by Race and vaccine Group</span></span>
<span id="cb359-2"><a href="#cb359-2" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb359-3"><a href="#cb359-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(race, vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb359-4"><a href="#cb359-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb359-5"><a href="#cb359-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">race =</span> <span class="fu">str_to_title</span>(race),</span>
<span id="cb359-6"><a href="#cb359-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">sum</span>(n),</span>
<span id="cb359-7"><a href="#cb359-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">proportion =</span> n <span class="sc">/</span> total,</span>
<span id="cb359-8"><a href="#cb359-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">label_text =</span> <span class="fu">paste0</span>(race, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, n, <span class="st">" ("</span>, <span class="fu">percent</span>(proportion, <span class="at">accuracy =</span> <span class="fl">0.1</span>), <span class="st">")"</span>)</span>
<span id="cb359-9"><a href="#cb359-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb359-10"><a href="#cb359-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">area =</span> n, <span class="at">fill =</span> vacc_group3, <span class="at">label =</span> label_text)) <span class="sc">+</span></span>
<span id="cb359-11"><a href="#cb359-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_treemap</span>() <span class="sc">+</span></span>
<span id="cb359-12"><a href="#cb359-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_treemap_text</span>(<span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">place =</span> <span class="st">"centre"</span>, <span class="at">grow =</span> <span class="cn">TRUE</span>, <span class="at">reflow =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb359-13"><a href="#cb359-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb359-14"><a href="#cb359-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Treemap: Vaccination by Race and Vaccine Group"</span>,</span>
<span id="cb359-15"><a href="#cb359-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Vaccine Group"</span></span>
<span id="cb359-16"><a href="#cb359-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb359-17"><a href="#cb359-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-81-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Correlation Heatmap ‚Äì Numeric Variables</strong></p>
<p>This heatmap displays Pearson correlation coefficients between selected numeric variables. Strong positive or negative values help identify relationships worth further analysis.</p>
<p>The heatmap below displays <strong>Pearson correlation coefficients</strong> between selected numeric variables: <strong>age</strong>, <strong>income</strong>, <strong>healthcare expenses</strong>, and <strong>healthcare coverage</strong>. Correlation values range from <strong>-1 to 1</strong>, where values closer to ¬±1 indicate stronger relationships.</p>
<p><strong>Key Observations:</strong></p>
<ul>
<li><p><strong>Age and healthcare coverage</strong> show a <strong>strong positive correlation</strong> (<strong>0.65</strong>), suggesting that as individuals age, they are more likely to have greater healthcare coverage.</p></li>
<li><p><strong>Age and healthcare expenses</strong> are also <strong>positively correlated</strong> (<strong>0.66</strong>), indicating that older individuals tend to incur higher healthcare costs.</p></li>
<li><p><strong>Healthcare coverage and healthcare expenses</strong> show a <strong>moderate positive correlation</strong> (<strong>0.44</strong>), which may reflect that those with more coverage also utilize healthcare services more frequently or thoroughly.</p></li>
<li><p><strong>Income</strong> is <strong>not strongly correlated</strong> with any other variable in this set, with the highest being a negligible <strong>0.02</strong> with healthcare coverage and a slightly negative value with age (<strong>-0.04</strong>) and expenses (<strong>-0.05</strong>).</p></li>
</ul>
<pre><code>**Interpretation:**</code></pre>
<p>This heatmap highlights potential relationships that may inform further analysis‚Äîespecially the connections between <strong>age, coverage, and expenses</strong>. In contrast, <strong>income appears relatively independent</strong> of the other variables in this dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb361"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb361-1"><a href="#cb361-1" aria-hidden="true" tabindex="-1"></a>numeric_vars <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb361-2"><a href="#cb361-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, income, healthcare_expenses, healthcare_coverage) <span class="sc">%&gt;%</span></span>
<span id="cb361-3"><a href="#cb361-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()</span>
<span id="cb361-4"><a href="#cb361-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-5"><a href="#cb361-5" aria-hidden="true" tabindex="-1"></a>cor_matrix <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">cor</span>(numeric_vars), <span class="dv">2</span>)</span>
<span id="cb361-6"><a href="#cb361-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-7"><a href="#cb361-7" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(<span class="fu">as.table</span>(cor_matrix)) <span class="sc">%&gt;%</span></span>
<span id="cb361-8"><a href="#cb361-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Var1 =</span> Var1, <span class="at">Var2 =</span> Var2, <span class="at">Correlation =</span> Freq) <span class="sc">%&gt;%</span></span>
<span id="cb361-9"><a href="#cb361-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Var1, <span class="at">y =</span> Var2, <span class="at">fill =</span> Correlation)) <span class="sc">+</span></span>
<span id="cb361-10"><a href="#cb361-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb361-11"><a href="#cb361-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Correlation), <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb361-12"><a href="#cb361-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">"red"</span>, <span class="at">high =</span> <span class="st">"blue"</span>, <span class="at">mid =</span> <span class="st">"white"</span>, <span class="at">midpoint =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb361-13"><a href="#cb361-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Correlation Heatmap of Numeric Variables"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb361-14"><a href="#cb361-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-82-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Ridgeline Plot ‚Äì Age by Vaccine Group</strong></p>
<p>This ridgeline plot shows the age distribution for each vaccine group. It highlights where age densities differ across categories.</p>
<p>The ridgeline plot below shows <strong>age distributions</strong> for three vaccine groups: <strong>Childhood</strong>, <strong>Other</strong>, and <strong>Respiratory</strong>. Each layer represents the <strong>density of ages</strong> within a vaccine category, allowing for visual comparison of where individuals are most commonly vaccinated within each group.</p>
<p><strong>Key Observations:</strong></p>
<ul>
<li><p><strong>Childhood vaccines</strong> show a clear peak at very young ages, as expected. The density drops rapidly as age increases, with a small secondary bump around middle age, possibly reflecting catch-up vaccinations or data irregularities.</p></li>
<li><p><strong>Other vaccines</strong> have a <strong>bimodal distribution</strong> with one peak in younger adults and another in older adults (around 70+ years), suggesting they are used across multiple life stages.</p></li>
<li><p><strong>Respiratory vaccines</strong> have a <strong>broad distribution</strong>, with a peak density around <strong>60‚Äì70 years</strong>, consistent with routine respiratory vaccinations for older adults (e.g., influenza or pneumococcal vaccines).</p></li>
</ul>
<pre><code>**Interpretation:**</code></pre>
<p>This visualization effectively highlights <strong>differences in age targeting</strong> across vaccine groups. It shows that:</p>
<ul>
<li><p>Childhood vaccines are concentrated in early life,</p></li>
<li><p>Other vaccines are used more broadly across age ranges, and</p></li>
<li><p>Respiratory vaccines are predominantly administered to older populations.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb363-2"><a href="#cb363-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vacc_group3 =</span> stringr<span class="sc">::</span><span class="fu">str_to_title</span>(vacc_group3)) <span class="sc">%&gt;%</span></span>
<span id="cb363-3"><a href="#cb363-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> vacc_group3, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb363-4"><a href="#cb363-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>(<span class="at">scale =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb363-5"><a href="#cb363-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Ridgeline Plot: Age Distribution by Vaccine Group"</span>, <span class="at">x =</span> <span class="st">"Age"</span>, <span class="at">y =</span> <span class="st">"Vaccine Group"</span>) <span class="sc">+</span></span>
<span id="cb363-6"><a href="#cb363-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb363-7"><a href="#cb363-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Picking joint bandwidth of 5.93</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-83-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Interactive Plot ‚Äì Income vs Age by Race</strong></p>
<p>This interactive scatter plot shows the relationship between income and age, colored by race. Hovering reveals more details including group and income.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb365"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb365-1"><a href="#cb365-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb365-2"><a href="#cb365-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> stringr<span class="sc">::</span><span class="fu">str_to_title</span>(race)) <span class="sc">%&gt;%</span></span>
<span id="cb365-3"><a href="#cb365-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> income, <span class="at">y =</span> age, <span class="at">color =</span> race,</span>
<span id="cb365-4"><a href="#cb365-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">text =</span> <span class="fu">paste</span>(<span class="st">"Race:"</span>, race,</span>
<span id="cb365-5"><a href="#cb365-5" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"&lt;br&gt;Group:"</span>, vacc_group3,</span>
<span id="cb365-6"><a href="#cb365-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"&lt;br&gt;Income:"</span>, income,</span>
<span id="cb365-7"><a href="#cb365-7" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"&lt;br&gt;Age:"</span>, age))) <span class="sc">+</span></span>
<span id="cb365-8"><a href="#cb365-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb365-9"><a href="#cb365-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"gray30"</span>) <span class="sc">+</span></span>
<span id="cb365-10"><a href="#cb365-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Interactive: Income vs Age by Race"</span>,</span>
<span id="cb365-11"><a href="#cb365-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Income"</span>, <span class="at">y =</span> <span class="st">"Age"</span>, <span class="at">color =</span> <span class="st">"Race"</span>) <span class="sc">+</span></span>
<span id="cb365-12"><a href="#cb365-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb365-13"><a href="#cb365-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb365-14"><a href="#cb365-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb365-15"><a href="#cb365-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-e05b37273efa6b47cf09" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e05b37273efa6b47cf09">{"x":{"data":[{"x":[17382,17382,17382,17382,17382,17382,17382,17382,7873,7873,7873,7873,7873,7873,7873,7873,7873,7873,7873,7873,7873,7873,7873,7873,7873,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,127881,92007,92007,92007,92007,92007,92007,92007,92007,92007,33949,33949,33949,33949,33949,33949,33949,33949,33949,33949,33949,33949,33949,72413,72413,72413,72413,72413,72413,72413,72413,72413,72413,72413,72413,72413,72413,72413,92537,92537,92537,92537,92537,92537,92537,92537,92537,92537,92537,92537,92537,92537,92537,92537,92537,92537,92537],"y":[30,30,30,30,30,30,30,30,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,43,43,43,43,43,43,43,43,43,28,28,28,28,28,28,28,28,28,28,28,28,28,41,41,41,41,41,41,41,41,41,41,41,41,41,41,41,73,73,73,73,73,73,73,73,73,73,73,73,73,73,73,73,73,73,73],"text":["Race: Asian <br>Group: Respiratory <br>Income: 17382 <br>Age: 30","Race: Asian <br>Group: Childhood <br>Income: 17382 <br>Age: 30","Race: Asian <br>Group: Childhood <br>Income: 17382 <br>Age: 30","Race: Asian <br>Group: Childhood <br>Income: 17382 <br>Age: 30","Race: Asian <br>Group: Respiratory <br>Income: 17382 <br>Age: 30","Race: Asian <br>Group: Respiratory <br>Income: 17382 <br>Age: 30","Race: Asian <br>Group: Respiratory <br>Income: 17382 <br>Age: 30","Race: Asian <br>Group: Respiratory <br>Income: 17382 <br>Age: 30","Race: Asian <br>Group: Respiratory <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Respiratory <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Respiratory <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Respiratory <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Respiratory <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Childhood <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Respiratory <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Childhood <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Childhood <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Respiratory <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Childhood <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Respiratory <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Respiratory <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Respiratory <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Childhood <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Respiratory <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Respiratory <br>Income: 7873 <br>Age: 15","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Other <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Other <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Respiratory <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Other <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Other <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Other <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Respiratory <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Respiratory <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Respiratory <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Other <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Respiratory <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Childhood <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Respiratory <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Respiratory <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Respiratory <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Respiratory <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Respiratory <br>Income: 127881 <br>Age: 10","Race: Asian <br>Group: Respiratory <br>Income: 92007 <br>Age: 43","Race: Asian <br>Group: Respiratory <br>Income: 92007 <br>Age: 43","Race: Asian <br>Group: Respiratory <br>Income: 92007 <br>Age: 43","Race: Asian <br>Group: Respiratory <br>Income: 92007 <br>Age: 43","Race: Asian <br>Group: Respiratory <br>Income: 92007 <br>Age: 43","Race: Asian <br>Group: Childhood <br>Income: 92007 <br>Age: 43","Race: Asian <br>Group: Respiratory <br>Income: 92007 <br>Age: 43","Race: Asian <br>Group: Childhood <br>Income: 92007 <br>Age: 43","Race: Asian <br>Group: Childhood <br>Income: 92007 <br>Age: 43","Race: Asian <br>Group: Respiratory <br>Income: 33949 <br>Age: 28","Race: Asian <br>Group: Respiratory <br>Income: 33949 <br>Age: 28","Race: Asian <br>Group: Childhood <br>Income: 33949 <br>Age: 28","Race: Asian <br>Group: Childhood <br>Income: 33949 <br>Age: 28","Race: Asian <br>Group: Childhood <br>Income: 33949 <br>Age: 28","Race: Asian <br>Group: Respiratory <br>Income: 33949 <br>Age: 28","Race: Asian <br>Group: Childhood <br>Income: 33949 <br>Age: 28","Race: Asian <br>Group: Respiratory <br>Income: 33949 <br>Age: 28","Race: Asian <br>Group: Respiratory <br>Income: 33949 <br>Age: 28","Race: Asian <br>Group: Respiratory <br>Income: 33949 <br>Age: 28","Race: Asian <br>Group: Respiratory <br>Income: 33949 <br>Age: 28","Race: Asian <br>Group: Respiratory <br>Income: 33949 <br>Age: 28","Race: Asian <br>Group: Respiratory <br>Income: 33949 <br>Age: 28","Race: Asian <br>Group: Childhood <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Respiratory <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Respiratory <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Respiratory <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Respiratory <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Respiratory <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Respiratory <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Respiratory <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Respiratory <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Respiratory <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Respiratory <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Respiratory <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Childhood <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Respiratory <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Childhood <br>Income: 72413 <br>Age: 41","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Other <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Other <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Other <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Childhood <br>Income: 92537 <br>Age: 73","Race: Asian <br>Group: Respiratory <br>Income: 92537 <br>Age: 73"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":0.59999999999999998,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Asian","legendgroup":"Asian","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[28551,28551,28551,28551,28551,28551,28551,28551,28551,28551,28551,28551,28551,28551,28551,816851,816851,816851,816851,816851,816851,816851,816851,816851,816851,816851,816851,816851,816851,816851,198442,198442,198442,198442,198442,198442,198442,198442,198442,198442,198442,198442,198442,20158,20158,20158,20158,20158,20158,20158,20158,20158,20158,20158,20158,20158,20158,20158,20158,20158,163299,163299,163299,163299,163299,163299,163299,163299,163299,163299,163299,163299,163299,163299,163299,163299,163299,163299,119795,119795,119795,119795,119795,119795,119795,119795,119795,119795,119795,119795,119795,119795,119795,119795],"y":[41,41,41,41,41,41,41,41,41,41,41,41,41,41,41,69,69,69,69,69,69,69,69,69,69,69,69,69,69,69,61,61,61,61,61,61,61,61,61,61,61,61,61,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],"text":["Race: Black <br>Group: Respiratory <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Respiratory <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Respiratory <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Respiratory <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Respiratory <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Respiratory <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Respiratory <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Respiratory <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Respiratory <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Respiratory <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Respiratory <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Childhood <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Respiratory <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Childhood <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Childhood <br>Income: 28551 <br>Age: 41","Race: Black <br>Group: Respiratory <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Respiratory <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Respiratory <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Childhood <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Respiratory <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Respiratory <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Respiratory <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Respiratory <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Other <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Respiratory <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Respiratory <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Respiratory <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Other <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Respiratory <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Respiratory <br>Income: 816851 <br>Age: 69","Race: Black <br>Group: Respiratory <br>Income: 198442 <br>Age: 61","Race: Black <br>Group: Respiratory <br>Income: 198442 <br>Age: 61","Race: Black <br>Group: Respiratory <br>Income: 198442 <br>Age: 61","Race: Black <br>Group: Respiratory <br>Income: 198442 <br>Age: 61","Race: Black <br>Group: Respiratory <br>Income: 198442 <br>Age: 61","Race: Black <br>Group: Respiratory <br>Income: 198442 <br>Age: 61","Race: Black <br>Group: Respiratory <br>Income: 198442 <br>Age: 61","Race: Black <br>Group: Respiratory <br>Income: 198442 <br>Age: 61","Race: Black <br>Group: Respiratory <br>Income: 198442 <br>Age: 61","Race: Black <br>Group: Respiratory <br>Income: 198442 <br>Age: 61","Race: Black <br>Group: Respiratory <br>Income: 198442 <br>Age: 61","Race: Black <br>Group: Respiratory <br>Income: 198442 <br>Age: 61","Race: Black <br>Group: Childhood <br>Income: 198442 <br>Age: 61","Race: Black <br>Group: Respiratory <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Respiratory <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Respiratory <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Childhood <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Respiratory <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Childhood <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Childhood <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Childhood <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Respiratory <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Childhood <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Respiratory <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Respiratory <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Respiratory <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Respiratory <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Respiratory <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Respiratory <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Respiratory <br>Income: 20158 <br>Age: 27","Race: Black <br>Group: Respiratory <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Respiratory <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Respiratory <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Respiratory <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Childhood <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Respiratory <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Childhood <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Childhood <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Respiratory <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Childhood <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Respiratory <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Childhood <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Respiratory <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Respiratory <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Respiratory <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Respiratory <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Respiratory <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Childhood <br>Income: 163299 <br>Age: 16","Race: Black <br>Group: Respiratory <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Childhood <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Respiratory <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Respiratory <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Respiratory <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Respiratory <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Childhood <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Childhood <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Childhood <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Respiratory <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Respiratory <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Childhood <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Respiratory <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Childhood <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Respiratory <br>Income: 119795 <br>Age: 25","Race: Black <br>Group: Respiratory <br>Income: 119795 <br>Age: 25"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":0.59999999999999998,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Black","legendgroup":"Black","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[36480,36480,36480,36480,36480,36480,36480,36480,36480,36480,36480,36480,36480],"y":[23,23,23,23,23,23,23,23,23,23,23,23,23],"text":["Race: Native <br>Group: Respiratory <br>Income: 36480 <br>Age: 23","Race: Native <br>Group: Respiratory <br>Income: 36480 <br>Age: 23","Race: Native <br>Group: Respiratory <br>Income: 36480 <br>Age: 23","Race: Native <br>Group: Childhood <br>Income: 36480 <br>Age: 23","Race: Native <br>Group: Respiratory <br>Income: 36480 <br>Age: 23","Race: Native <br>Group: Respiratory <br>Income: 36480 <br>Age: 23","Race: Native <br>Group: Respiratory <br>Income: 36480 <br>Age: 23","Race: Native <br>Group: Respiratory <br>Income: 36480 <br>Age: 23","Race: Native <br>Group: Respiratory <br>Income: 36480 <br>Age: 23","Race: Native <br>Group: Respiratory <br>Income: 36480 <br>Age: 23","Race: Native <br>Group: Childhood <br>Income: 36480 <br>Age: 23","Race: Native <br>Group: Childhood <br>Income: 36480 <br>Age: 23","Race: Native <br>Group: Childhood <br>Income: 36480 <br>Age: 23"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":0.59999999999999998,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Native","legendgroup":"Native","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[61926,61926,61926,61926,61926,61926,61926,61926,61926,61926,61926,61926,61926,61926,61926,61926,61926,61926,61926,90297,90297,90297,90297,90297,90297,90297,90297,90297,90297],"y":[12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,97,97,97,97,97,97,97,97,97,97],"text":["Race: Other <br>Group: Childhood <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Respiratory <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Respiratory <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Other <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Childhood <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Respiratory <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Childhood <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Childhood <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Respiratory <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Respiratory <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Respiratory <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Respiratory <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Respiratory <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Childhood <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Respiratory <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Childhood <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Childhood <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Respiratory <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Childhood <br>Income: 61926 <br>Age: 12","Race: Other <br>Group: Respiratory <br>Income: 90297 <br>Age: 97","Race: Other <br>Group: Respiratory <br>Income: 90297 <br>Age: 97","Race: Other <br>Group: Respiratory <br>Income: 90297 <br>Age: 97","Race: Other <br>Group: Respiratory <br>Income: 90297 <br>Age: 97","Race: Other <br>Group: Childhood <br>Income: 90297 <br>Age: 97","Race: Other <br>Group: Respiratory <br>Income: 90297 <br>Age: 97","Race: Other <br>Group: Respiratory <br>Income: 90297 <br>Age: 97","Race: Other <br>Group: Respiratory <br>Income: 90297 <br>Age: 97","Race: Other <br>Group: Respiratory <br>Income: 90297 <br>Age: 97","Race: Other <br>Group: Respiratory <br>Income: 90297 <br>Age: 97"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":0.59999999999999998,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Other","legendgroup":"Other","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[100511,100511,100511,100511,100511,100511,133816,133816,133816,133816,133816,133816,133816,133816,133816,133816,133816,133816,133816,133816,133816,133816,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,52159,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,75767,58294,58294,58294,58294,58294,58294,58294,58294,58294,58294,58294,58294,58294,58294,58294,58294,58294,58294,58294,49737,49737,49737,49737,49737,49737,49737,49737,49737,49737,49737,49737,49737,49737,77756,77756,77756,77756,77756,77756,77756,77756,77756,77756,77756,77756,77756,77756,77756,77756,77756,77756,35255,35255,35255,35255,35255,35255,35255,35255,35255,35255,35255,35255,35255,35255,24026,24026,24026,24026,24026,24026,24026,24026,127119,127119,127119,127119,127119,127119,127119,127119,127119,127119,127119,127119,127119,127119,127119,30550,30550,30550,30550,30550,30550,30550,30550,30550,30550,30550,30550,30550,30550,30550,25909,25909,25909,25909,25909,25909,25909,25909,25887,25887,25887,25887,25887,25887,25887,25887,25887,25887,25887,25887,29192,29192,29192,29192,75521,75521,75521,75521,75521,75521,75521,75521,75521,75521,75521,75521,75521,75521,75521,80475,80475,80475,80475,80475,80475,80475,80475,80475,80475,80475,80475,80475,80475,80475,80475,80475,80475,80475,135334,135334,135334,135334,135334,135334,135334,135334,82840,82840,82840,82840,82840,82840,82840,82840,82840,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,68873,83045,83045,83045,83045,83045,83045,83045,83045,83045,83045,83045,83045,83045,83045,83045,188023,188023,188023,188023,188023,188023,188023,188023,188023,188023,188023,188023,188023,188023,26516,26516,26516,26516,26516,26516,26516,26516,26516,26516,26516,26516,26516,86024,86024,86024,86024,86024,86024,86024,86024,86024,86024,86024,86024,86024,86024,86024,86024,10682,10682,10682,10682,10682,10682,10682,10682,10682,10682,10682,10682,56444,56444,56444,56444,56444,56444,56444,56444,56444,56444,56444,56444,12128,12128,12128,12128,12128,12128,12128,12128,12128,12128,12128,12128,12128,12128,12128,12128,12128,12128,178323,178323,178323,178323,178323,178323,178323,178323,178323,178323,178323,178323,178323,178323,118047,118047,118047,118047,118047,118047,118047,118047,118047,118047,118047,118047,118047,136997,136997,136997,136997,136997,136997,136997,136997,136997,136997,136997,136997,136997,136997,136997,136997,136997,136997,136997,136997,136997,35860,35860,35860,35860,35860,35860,35860,35860,35860,35860,35860,35860,35860,7361,7361,7361,742063,742063,742063,742063,742063,742063,742063,18374,18374,18374,18374,18374,18374,18374,18374,18374,18374,18374,18374,71169,71169,71169,71169,71169,71169,71169,71169,71169,71169,71169,71169,71169,71169,71169,71169,71169,71169,71169,7361,7361,7361,7361,7361,7361,7361,7361,7361,7361,7361,7361,7361,7361,38286,38286,38286,38286,38286,38286,38286,38286,38286,38286,38286,38286,38286,38286,38286,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,110733,95075,95075,95075,95075,95075,95075,95075,95075,95075,95075,95075,95075,95075,95075,95075,95075,95075,95075,95075,95075,95075,92411,92411,92411,92411,92411,92411,37098,37098,37098,37098,37098,37098,37098,37098,37098,37098,37098,37098,37098,37098,124361,124361,124361,124361,124361,124361,124361,124361,124361,8752,8752,8752,8752,8752,8752,8752,8752,8752,8752,8752,8752,8752,198522,198522,198522,198522,198522,198522,198522,198522,198522,198522,198522,198522,198522,198522,198522,198522,198522,198522,179090,179090,179090,179090,179090,179090,179090,179090,179090,179090,179090,179090,179090,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,10135,44636,44636,44636,44636,44636,44636,44636,44636,44636,44636,44636,44636,44636,44636,44636,67906,67906,67906,67906,67906,67906,67906,67906,67906,67906,67906,67906,67906,67906,116503,116503,116503,116503,116503,116503,116503,116503,116503,116503,116503,116503,116503,116503,116503,116503,69926,69926,69926,69926,69926,69926,69926,69926,69926,69926,69926,69926,69926,69926,82922,82922,82922,82922,82922,82922,82922,82922,82922,82922,82922,82922,16969,16969,16969,16969,16969,16969,16969,16969,16969,16969,16969,16969,16969,16969,16969,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,138174,58212,58212,58212,58212,58212,58212,58212,58212,58212,58212,140772,140772,140772,140772,140772,140772,140772,140772,140772,140772,140772,140772,140772,140772,71078,71078,71078,71078,71078,71078,71078,71078,71078,71078,71078,71078,71078,71078,71078,71078,71078,124698,124698,124698,124698,124698,124698,124698,124698,124698,124698,124698,124698,124698,124698,124698,124698,124698,39370,39370,39370,39370,39370,39370,39370,39370,39370,39370,39370,39370,39370,39370,39370,18258,18258,18258,18258,18258,18258,18258,18258,18258,18258,18258,83325,83325,83325,83325,83325,83325,83325,83325,83325,83325,83325,83325,83325,83325,83325,550030,550030,550030,550030,550030,550030,550030,550030,550030,550030,550030,550030,550030,550030,550030,550030,550030,64743,64743,64743,64743,64743,64743,64743,64743,64743,64743,64743,64743,64743,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,33617,62332,62332,62332,62332,62332,62332,62332,62332,62332,62332,62332,62332,62332,110873,110873,110873,110873,110873,110873,110873,110873,110873,110873,110873,110873,86384,86384,86384,86384,86384,86384,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,170535,36061,36061,36061,36061,36061,36061,36061,36061,36061,36061,36061,36061,36061,762068,762068,762068,762068,762068,762068,762068,762068,762068,762068,762068,762068,762068,762068,762068,762068,762068,95344,95344,95344,95344,95344,95344,95344,95344,95344,95344,95344,95344,148206,148206,148206,148206,148206,148206,148206,148206,148206,148206,148206,148206,148206,148206,148206,148206,148206,148206,95344,95344,95344,95344,95344,95344,95344,95344,95344,148000,148000,148000,148000,148000,148000,148000,148000,148000,148000,148000,148000,148000,112954,112954,112954,112954,112954,112954,112954,112954,112954,189277,189277,189277,189277,189277,189277,189277,189277,189277,189277,189277,189277,189277,189277,189277,92885,92885,92885,92885,92885,92885,92885,96411,96411,96411,96411,96411,96411,96411,96411,96411,29352,29352,29352,29352,29352,29352,29352,29352,29352,29352,29352,29352,8615,8615,8615,8615,8615,8615,8615,8615,8615,8615,8615,8615,8615,8615,8615,8615,8615,8615,8615,8615,8615,94205,94205,94205,94205,94205,94205,94205,94205,94205,94205,94205,94205,94205,94205,94205,94205,24218,24218,24218,24218,24218,24218,24218,24218,24218,24218,24218,24218,24218,24218,24218,24218,24218,124775,124775,124775,124775,124775,124775,124775,124775,124775,124775,124775,124775,124775,124775,124775,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,545255,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,35486,61016,61016,61016,61016,61016,61016,61016,61016,61016,61016,61016,61016,63727,63727,63727,63727,63727,63727,63727,63727,63727,63727,63727,63727,63727,63727,63727,63727],"y":[30,30,30,30,30,30,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,56,56,56,56,56,56,56,56,56,56,56,56,56,56,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,76,76,76,76,76,76,76,76,76,76,76,76,76,76,44,44,44,44,44,44,44,44,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,40,40,40,40,40,40,40,40,60,60,60,60,60,60,60,60,60,60,60,60,33,33,33,33,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,37,37,37,37,37,37,37,37,29,29,29,29,29,29,29,29,29,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,69,69,69,69,69,69,69,69,69,69,69,69,69,69,69,16,16,16,16,16,16,16,16,16,16,16,16,16,16,64,64,64,64,64,64,64,64,64,64,64,64,64,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,85,85,85,85,85,85,85,85,85,85,85,85,24,24,24,24,24,24,24,24,24,24,24,24,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,58,58,58,58,58,58,58,58,58,58,58,58,58,58,63,63,63,63,63,63,63,63,63,63,63,63,63,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,46,46,46,46,46,46,46,46,46,46,46,46,46,69,69,69,41,41,41,41,41,41,41,40,40,40,40,40,40,40,40,40,40,40,40,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,69,69,69,69,69,69,69,69,69,69,69,69,69,69,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,36,36,36,36,36,36,65,65,65,65,65,65,65,65,65,65,65,65,65,65,44,44,44,44,44,44,44,44,44,21,21,21,21,21,21,21,21,21,21,21,21,21,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,80,80,80,80,80,80,80,80,80,80,80,80,80,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,21,21,21,21,21,21,21,21,21,21,21,21,21,21,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,68,68,68,68,68,68,68,68,68,68,68,68,68,68,78,78,78,78,78,78,78,78,78,78,78,78,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,62,62,62,62,62,62,62,62,62,62,71,71,71,71,71,71,71,71,71,71,71,71,71,71,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,61,61,61,61,61,61,61,61,61,61,61,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,62,62,62,62,62,62,62,62,62,62,62,62,62,56,56,56,56,56,56,56,56,56,56,56,56,38,38,38,38,38,38,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,62,62,62,62,62,62,62,62,62,62,62,62,62,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,30,30,30,30,30,30,30,30,30,30,30,30,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,30,30,30,30,30,30,30,30,30,51,51,51,51,51,51,51,51,51,51,51,51,51,48,48,48,48,48,48,48,48,48,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,34,34,34,34,34,34,34,47,47,47,47,47,47,47,47,47,48,48,48,48,48,48,48,48,48,48,48,48,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,64,64,64,64,64,64,64,64,64,64,64,64,42,42,42,42,42,42,42,42,42,42,42,42,42,42,42,42],"text":["Race: White <br>Group: Respiratory <br>Income: 100511 <br>Age: 30","Race: White <br>Group: Childhood <br>Income: 100511 <br>Age: 30","Race: White <br>Group: Childhood <br>Income: 100511 <br>Age: 30","Race: White <br>Group: Childhood <br>Income: 100511 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 100511 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 100511 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 133816 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Other <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Other <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Other <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Other <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Respiratory <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Other <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Other <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Other <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Respiratory <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Respiratory <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Respiratory <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Other <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Respiratory <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 52159 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Other <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Other <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Other <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Other <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Respiratory <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Other <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Other <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Other <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Respiratory <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Respiratory <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Respiratory <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Other <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Respiratory <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 75767 <br>Age: 5","Race: White <br>Group: Childhood <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Other <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 58294 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Other <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Other <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Childhood <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 49737 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Childhood <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Childhood <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Childhood <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Childhood <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Childhood <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Childhood <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 77756 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Other <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Respiratory <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Respiratory <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Respiratory <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Respiratory <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Respiratory <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Childhood <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Respiratory <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Respiratory <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Respiratory <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Respiratory <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Respiratory <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Respiratory <br>Income: 35255 <br>Age: 76","Race: White <br>Group: Respiratory <br>Income: 24026 <br>Age: 44","Race: White <br>Group: Respiratory <br>Income: 24026 <br>Age: 44","Race: White <br>Group: Childhood <br>Income: 24026 <br>Age: 44","Race: White <br>Group: Respiratory <br>Income: 24026 <br>Age: 44","Race: White <br>Group: Childhood <br>Income: 24026 <br>Age: 44","Race: White <br>Group: Childhood <br>Income: 24026 <br>Age: 44","Race: White <br>Group: Respiratory <br>Income: 24026 <br>Age: 44","Race: White <br>Group: Respiratory <br>Income: 24026 <br>Age: 44","Race: White <br>Group: Respiratory <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Childhood <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Respiratory <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Childhood <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Childhood <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Respiratory <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Respiratory <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Respiratory <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Respiratory <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Respiratory <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Respiratory <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Respiratory <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Respiratory <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Respiratory <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Respiratory <br>Income: 127119 <br>Age: 50","Race: White <br>Group: Respiratory <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Childhood <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Childhood <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Childhood <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 30550 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 25909 <br>Age: 40","Race: White <br>Group: Childhood <br>Income: 25909 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 25909 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 25909 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 25909 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 25909 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 25909 <br>Age: 40","Race: White <br>Group: Childhood <br>Income: 25909 <br>Age: 40","Race: White <br>Group: Other <br>Income: 25887 <br>Age: 60","Race: White <br>Group: Respiratory <br>Income: 25887 <br>Age: 60","Race: White <br>Group: Childhood <br>Income: 25887 <br>Age: 60","Race: White <br>Group: Respiratory <br>Income: 25887 <br>Age: 60","Race: White <br>Group: Respiratory <br>Income: 25887 <br>Age: 60","Race: White <br>Group: Respiratory <br>Income: 25887 <br>Age: 60","Race: White <br>Group: Respiratory <br>Income: 25887 <br>Age: 60","Race: White <br>Group: Respiratory <br>Income: 25887 <br>Age: 60","Race: White <br>Group: Respiratory <br>Income: 25887 <br>Age: 60","Race: White <br>Group: Respiratory <br>Income: 25887 <br>Age: 60","Race: White <br>Group: Respiratory <br>Income: 25887 <br>Age: 60","Race: White <br>Group: Respiratory <br>Income: 25887 <br>Age: 60","Race: White <br>Group: Respiratory <br>Income: 29192 <br>Age: 33","Race: White <br>Group: Respiratory <br>Income: 29192 <br>Age: 33","Race: White <br>Group: Respiratory <br>Income: 29192 <br>Age: 33","Race: White <br>Group: Childhood <br>Income: 29192 <br>Age: 33","Race: White <br>Group: Respiratory <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Respiratory <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Respiratory <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Respiratory <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Respiratory <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Respiratory <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Childhood <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Respiratory <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Childhood <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Childhood <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Respiratory <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Respiratory <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Respiratory <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Respiratory <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Respiratory <br>Income: 75521 <br>Age: 45","Race: White <br>Group: Childhood <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Other <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Childhood <br>Income: 80475 <br>Age: 11","Race: White <br>Group: Respiratory <br>Income: 135334 <br>Age: 37","Race: White <br>Group: Respiratory <br>Income: 135334 <br>Age: 37","Race: White <br>Group: Childhood <br>Income: 135334 <br>Age: 37","Race: White <br>Group: Respiratory <br>Income: 135334 <br>Age: 37","Race: White <br>Group: Respiratory <br>Income: 135334 <br>Age: 37","Race: White <br>Group: Respiratory <br>Income: 135334 <br>Age: 37","Race: White <br>Group: Respiratory <br>Income: 135334 <br>Age: 37","Race: White <br>Group: Respiratory <br>Income: 135334 <br>Age: 37","Race: White <br>Group: Respiratory <br>Income: 82840 <br>Age: 29","Race: White <br>Group: Childhood <br>Income: 82840 <br>Age: 29","Race: White <br>Group: Childhood <br>Income: 82840 <br>Age: 29","Race: White <br>Group: Childhood <br>Income: 82840 <br>Age: 29","Race: White <br>Group: Respiratory <br>Income: 82840 <br>Age: 29","Race: White <br>Group: Respiratory <br>Income: 82840 <br>Age: 29","Race: White <br>Group: Respiratory <br>Income: 82840 <br>Age: 29","Race: White <br>Group: Respiratory <br>Income: 82840 <br>Age: 29","Race: White <br>Group: Respiratory <br>Income: 82840 <br>Age: 29","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Other <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Other <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Other <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Other <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Other <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Other <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Other <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Other <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 68873 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Childhood <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Other <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Other <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 83045 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 188023 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 26516 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 26516 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 26516 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 26516 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 26516 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 26516 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 26516 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 26516 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 26516 <br>Age: 64","Race: White <br>Group: Childhood <br>Income: 26516 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 26516 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 26516 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 26516 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Respiratory <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Respiratory <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Respiratory <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Respiratory <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Respiratory <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Other <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Respiratory <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Respiratory <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Respiratory <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Other <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Respiratory <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Childhood <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Respiratory <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Respiratory <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Respiratory <br>Income: 86024 <br>Age: 53","Race: White <br>Group: Respiratory <br>Income: 10682 <br>Age: 85","Race: White <br>Group: Respiratory <br>Income: 10682 <br>Age: 85","Race: White <br>Group: Respiratory <br>Income: 10682 <br>Age: 85","Race: White <br>Group: Respiratory <br>Income: 10682 <br>Age: 85","Race: White <br>Group: Respiratory <br>Income: 10682 <br>Age: 85","Race: White <br>Group: Respiratory <br>Income: 10682 <br>Age: 85","Race: White <br>Group: Childhood <br>Income: 10682 <br>Age: 85","Race: White <br>Group: Respiratory <br>Income: 10682 <br>Age: 85","Race: White <br>Group: Respiratory <br>Income: 10682 <br>Age: 85","Race: White <br>Group: Respiratory <br>Income: 10682 <br>Age: 85","Race: White <br>Group: Respiratory <br>Income: 10682 <br>Age: 85","Race: White <br>Group: Respiratory <br>Income: 10682 <br>Age: 85","Race: White <br>Group: Respiratory <br>Income: 56444 <br>Age: 24","Race: White <br>Group: Respiratory <br>Income: 56444 <br>Age: 24","Race: White <br>Group: Childhood <br>Income: 56444 <br>Age: 24","Race: White <br>Group: Respiratory <br>Income: 56444 <br>Age: 24","Race: White <br>Group: Respiratory <br>Income: 56444 <br>Age: 24","Race: White <br>Group: Respiratory <br>Income: 56444 <br>Age: 24","Race: White <br>Group: Respiratory <br>Income: 56444 <br>Age: 24","Race: White <br>Group: Respiratory <br>Income: 56444 <br>Age: 24","Race: White <br>Group: Respiratory <br>Income: 56444 <br>Age: 24","Race: White <br>Group: Childhood <br>Income: 56444 <br>Age: 24","Race: White <br>Group: Childhood <br>Income: 56444 <br>Age: 24","Race: White <br>Group: Childhood <br>Income: 56444 <br>Age: 24","Race: White <br>Group: Respiratory <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Childhood <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Childhood <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Childhood <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Childhood <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Childhood <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Childhood <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Respiratory <br>Income: 12128 <br>Age: 18","Race: White <br>Group: Other <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Respiratory <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Other <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Respiratory <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Childhood <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Respiratory <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Respiratory <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Respiratory <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Respiratory <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Respiratory <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Respiratory <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Respiratory <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Respiratory <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Respiratory <br>Income: 178323 <br>Age: 58","Race: White <br>Group: Respiratory <br>Income: 118047 <br>Age: 63","Race: White <br>Group: Respiratory <br>Income: 118047 <br>Age: 63","Race: White <br>Group: Respiratory <br>Income: 118047 <br>Age: 63","Race: White <br>Group: Respiratory <br>Income: 118047 <br>Age: 63","Race: White <br>Group: Respiratory <br>Income: 118047 <br>Age: 63","Race: White <br>Group: Respiratory <br>Income: 118047 <br>Age: 63","Race: White <br>Group: Respiratory <br>Income: 118047 <br>Age: 63","Race: White <br>Group: Respiratory <br>Income: 118047 <br>Age: 63","Race: White <br>Group: Respiratory <br>Income: 118047 <br>Age: 63","Race: White <br>Group: Respiratory <br>Income: 118047 <br>Age: 63","Race: White <br>Group: Childhood <br>Income: 118047 <br>Age: 63","Race: White <br>Group: Respiratory <br>Income: 118047 <br>Age: 63","Race: White <br>Group: Respiratory <br>Income: 118047 <br>Age: 63","Race: White <br>Group: Other <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Childhood <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Respiratory <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Childhood <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Childhood <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Respiratory <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Respiratory <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Respiratory <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Respiratory <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Respiratory <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Respiratory <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Childhood <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Childhood <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Childhood <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Respiratory <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Respiratory <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Childhood <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Respiratory <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Respiratory <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Childhood <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Respiratory <br>Income: 136997 <br>Age: 14","Race: White <br>Group: Respiratory <br>Income: 35860 <br>Age: 46","Race: White <br>Group: Respiratory <br>Income: 35860 <br>Age: 46","Race: White <br>Group: Respiratory <br>Income: 35860 <br>Age: 46","Race: White <br>Group: Respiratory <br>Income: 35860 <br>Age: 46","Race: White <br>Group: Childhood <br>Income: 35860 <br>Age: 46","Race: White <br>Group: Respiratory <br>Income: 35860 <br>Age: 46","Race: White <br>Group: Childhood <br>Income: 35860 <br>Age: 46","Race: White <br>Group: Childhood <br>Income: 35860 <br>Age: 46","Race: White <br>Group: Respiratory <br>Income: 35860 <br>Age: 46","Race: White <br>Group: Respiratory <br>Income: 35860 <br>Age: 46","Race: White <br>Group: Respiratory <br>Income: 35860 <br>Age: 46","Race: White <br>Group: Respiratory <br>Income: 35860 <br>Age: 46","Race: White <br>Group: Respiratory <br>Income: 35860 <br>Age: 46","Race: White <br>Group: Respiratory <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Childhood <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 742063 <br>Age: 41","Race: White <br>Group: Childhood <br>Income: 742063 <br>Age: 41","Race: White <br>Group: Respiratory <br>Income: 742063 <br>Age: 41","Race: White <br>Group: Respiratory <br>Income: 742063 <br>Age: 41","Race: White <br>Group: Respiratory <br>Income: 742063 <br>Age: 41","Race: White <br>Group: Respiratory <br>Income: 742063 <br>Age: 41","Race: White <br>Group: Childhood <br>Income: 742063 <br>Age: 41","Race: White <br>Group: Respiratory <br>Income: 18374 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 18374 <br>Age: 40","Race: White <br>Group: Childhood <br>Income: 18374 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 18374 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 18374 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 18374 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 18374 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 18374 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 18374 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 18374 <br>Age: 40","Race: White <br>Group: Respiratory <br>Income: 18374 <br>Age: 40","Race: White <br>Group: Childhood <br>Income: 18374 <br>Age: 40","Race: White <br>Group: Childhood <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Other <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 71169 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Childhood <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Other <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Other <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 7361 <br>Age: 69","Race: White <br>Group: Respiratory <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Other <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Other <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Childhood <br>Income: 38286 <br>Age: 52","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Other <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Other <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Other <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Other <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Other <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Other <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Other <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Other <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Respiratory <br>Income: 110733 <br>Age: 10","Race: White <br>Group: Childhood <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Other <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Childhood <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 95075 <br>Age: 12","Race: White <br>Group: Respiratory <br>Income: 92411 <br>Age: 36","Race: White <br>Group: Respiratory <br>Income: 92411 <br>Age: 36","Race: White <br>Group: Childhood <br>Income: 92411 <br>Age: 36","Race: White <br>Group: Respiratory <br>Income: 92411 <br>Age: 36","Race: White <br>Group: Respiratory <br>Income: 92411 <br>Age: 36","Race: White <br>Group: Respiratory <br>Income: 92411 <br>Age: 36","Race: White <br>Group: Respiratory <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Respiratory <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Respiratory <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Respiratory <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Respiratory <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Respiratory <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Childhood <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Respiratory <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Respiratory <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Respiratory <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Respiratory <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Respiratory <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Respiratory <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Other <br>Income: 37098 <br>Age: 65","Race: White <br>Group: Respiratory <br>Income: 124361 <br>Age: 44","Race: White <br>Group: Respiratory <br>Income: 124361 <br>Age: 44","Race: White <br>Group: Childhood <br>Income: 124361 <br>Age: 44","Race: White <br>Group: Respiratory <br>Income: 124361 <br>Age: 44","Race: White <br>Group: Respiratory <br>Income: 124361 <br>Age: 44","Race: White <br>Group: Respiratory <br>Income: 124361 <br>Age: 44","Race: White <br>Group: Childhood <br>Income: 124361 <br>Age: 44","Race: White <br>Group: Childhood <br>Income: 124361 <br>Age: 44","Race: White <br>Group: Respiratory <br>Income: 124361 <br>Age: 44","Race: White <br>Group: Respiratory <br>Income: 8752 <br>Age: 21","Race: White <br>Group: Childhood <br>Income: 8752 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 8752 <br>Age: 21","Race: White <br>Group: Childhood <br>Income: 8752 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 8752 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 8752 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 8752 <br>Age: 21","Race: White <br>Group: Childhood <br>Income: 8752 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 8752 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 8752 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 8752 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 8752 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 8752 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Childhood <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Respiratory <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Childhood <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Childhood <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Respiratory <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Childhood <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Respiratory <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Childhood <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Respiratory <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Respiratory <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Respiratory <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Childhood <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Respiratory <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Respiratory <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Respiratory <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Respiratory <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Respiratory <br>Income: 198522 <br>Age: 19","Race: White <br>Group: Respiratory <br>Income: 179090 <br>Age: 80","Race: White <br>Group: Respiratory <br>Income: 179090 <br>Age: 80","Race: White <br>Group: Childhood <br>Income: 179090 <br>Age: 80","Race: White <br>Group: Respiratory <br>Income: 179090 <br>Age: 80","Race: White <br>Group: Respiratory <br>Income: 179090 <br>Age: 80","Race: White <br>Group: Respiratory <br>Income: 179090 <br>Age: 80","Race: White <br>Group: Respiratory <br>Income: 179090 <br>Age: 80","Race: White <br>Group: Respiratory <br>Income: 179090 <br>Age: 80","Race: White <br>Group: Respiratory <br>Income: 179090 <br>Age: 80","Race: White <br>Group: Respiratory <br>Income: 179090 <br>Age: 80","Race: White <br>Group: Respiratory <br>Income: 179090 <br>Age: 80","Race: White <br>Group: Respiratory <br>Income: 179090 <br>Age: 80","Race: White <br>Group: Respiratory <br>Income: 179090 <br>Age: 80","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Other <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Other <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Other <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Other <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Respiratory <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Other <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Other <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Other <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 10135 <br>Age: 1","Race: White <br>Group: Respiratory <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Other <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Other <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Childhood <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 44636 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Childhood <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Childhood <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Childhood <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 67906 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Childhood <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Childhood <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Childhood <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Childhood <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Childhood <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Childhood <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 116503 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Respiratory <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Respiratory <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Childhood <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Respiratory <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Respiratory <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Respiratory <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Respiratory <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Respiratory <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Respiratory <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Other <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Respiratory <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Other <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Respiratory <br>Income: 69926 <br>Age: 68","Race: White <br>Group: Respiratory <br>Income: 82922 <br>Age: 78","Race: White <br>Group: Respiratory <br>Income: 82922 <br>Age: 78","Race: White <br>Group: Childhood <br>Income: 82922 <br>Age: 78","Race: White <br>Group: Respiratory <br>Income: 82922 <br>Age: 78","Race: White <br>Group: Respiratory <br>Income: 82922 <br>Age: 78","Race: White <br>Group: Respiratory <br>Income: 82922 <br>Age: 78","Race: White <br>Group: Respiratory <br>Income: 82922 <br>Age: 78","Race: White <br>Group: Respiratory <br>Income: 82922 <br>Age: 78","Race: White <br>Group: Respiratory <br>Income: 82922 <br>Age: 78","Race: White <br>Group: Respiratory <br>Income: 82922 <br>Age: 78","Race: White <br>Group: Respiratory <br>Income: 82922 <br>Age: 78","Race: White <br>Group: Respiratory <br>Income: 82922 <br>Age: 78","Race: White <br>Group: Respiratory <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Childhood <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Childhood <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Childhood <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Respiratory <br>Income: 16969 <br>Age: 49","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Other <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Other <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Other <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Other <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Other <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Other <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Other <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Other <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 138174 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 58212 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 58212 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 58212 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 58212 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 58212 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 58212 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 58212 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 58212 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 58212 <br>Age: 62","Race: White <br>Group: Childhood <br>Income: 58212 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Respiratory <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Respiratory <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Other <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Respiratory <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Other <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Respiratory <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Respiratory <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Respiratory <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Respiratory <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Respiratory <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Respiratory <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Respiratory <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Childhood <br>Income: 140772 <br>Age: 71","Race: White <br>Group: Childhood <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Childhood <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Childhood <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Childhood <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Childhood <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Childhood <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 71078 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Respiratory <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Childhood <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Respiratory <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Childhood <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Childhood <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Childhood <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Respiratory <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Childhood <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Respiratory <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Respiratory <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Respiratory <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Respiratory <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Respiratory <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Respiratory <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Respiratory <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Respiratory <br>Income: 124698 <br>Age: 28","Race: White <br>Group: Respiratory <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Other <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Other <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Childhood <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 39370 <br>Age: 55","Race: White <br>Group: Respiratory <br>Income: 18258 <br>Age: 61","Race: White <br>Group: Respiratory <br>Income: 18258 <br>Age: 61","Race: White <br>Group: Respiratory <br>Income: 18258 <br>Age: 61","Race: White <br>Group: Respiratory <br>Income: 18258 <br>Age: 61","Race: White <br>Group: Respiratory <br>Income: 18258 <br>Age: 61","Race: White <br>Group: Respiratory <br>Income: 18258 <br>Age: 61","Race: White <br>Group: Respiratory <br>Income: 18258 <br>Age: 61","Race: White <br>Group: Respiratory <br>Income: 18258 <br>Age: 61","Race: White <br>Group: Respiratory <br>Income: 18258 <br>Age: 61","Race: White <br>Group: Respiratory <br>Income: 18258 <br>Age: 61","Race: White <br>Group: Respiratory <br>Income: 18258 <br>Age: 61","Race: White <br>Group: Respiratory <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Childhood <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Childhood <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Childhood <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Childhood <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Childhood <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Childhood <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Respiratory <br>Income: 83325 <br>Age: 25","Race: White <br>Group: Childhood <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Childhood <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Childhood <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Childhood <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Childhood <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Childhood <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 550030 <br>Age: 20","Race: White <br>Group: Respiratory <br>Income: 64743 <br>Age: 21","Race: White <br>Group: Childhood <br>Income: 64743 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 64743 <br>Age: 21","Race: White <br>Group: Childhood <br>Income: 64743 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 64743 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 64743 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 64743 <br>Age: 21","Race: White <br>Group: Childhood <br>Income: 64743 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 64743 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 64743 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 64743 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 64743 <br>Age: 21","Race: White <br>Group: Respiratory <br>Income: 64743 <br>Age: 21","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Other <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Other <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Other <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Other <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Respiratory <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Other <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Other <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Other <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Respiratory <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Respiratory <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Respiratory <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Other <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Respiratory <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Childhood <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Respiratory <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Respiratory <br>Income: 33617 <br>Age: 7","Race: White <br>Group: Respiratory <br>Income: 62332 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 62332 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 62332 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 62332 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 62332 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 62332 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 62332 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 62332 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 62332 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 62332 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 62332 <br>Age: 62","Race: White <br>Group: Childhood <br>Income: 62332 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 62332 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 110873 <br>Age: 56","Race: White <br>Group: Other <br>Income: 110873 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 110873 <br>Age: 56","Race: White <br>Group: Other <br>Income: 110873 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 110873 <br>Age: 56","Race: White <br>Group: Childhood <br>Income: 110873 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 110873 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 110873 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 110873 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 110873 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 110873 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 110873 <br>Age: 56","Race: White <br>Group: Respiratory <br>Income: 86384 <br>Age: 38","Race: White <br>Group: Childhood <br>Income: 86384 <br>Age: 38","Race: White <br>Group: Respiratory <br>Income: 86384 <br>Age: 38","Race: White <br>Group: Respiratory <br>Income: 86384 <br>Age: 38","Race: White <br>Group: Respiratory <br>Income: 86384 <br>Age: 38","Race: White <br>Group: Respiratory <br>Income: 86384 <br>Age: 38","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Other <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Other <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Other <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Other <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Respiratory <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Other <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Other <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Other <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Childhood <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Respiratory <br>Income: 170535 <br>Age: 2","Race: White <br>Group: Respiratory <br>Income: 36061 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 36061 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 36061 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 36061 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 36061 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 36061 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 36061 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 36061 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 36061 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 36061 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 36061 <br>Age: 62","Race: White <br>Group: Childhood <br>Income: 36061 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 36061 <br>Age: 62","Race: White <br>Group: Respiratory <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 762068 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Childhood <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Childhood <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Childhood <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Childhood <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Childhood <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Respiratory <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Respiratory <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Childhood <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Respiratory <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Childhood <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Childhood <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Respiratory <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Childhood <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Respiratory <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Childhood <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Respiratory <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Respiratory <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Respiratory <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Respiratory <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Respiratory <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Childhood <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Respiratory <br>Income: 148206 <br>Age: 17","Race: White <br>Group: Respiratory <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Childhood <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Childhood <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Childhood <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 95344 <br>Age: 30","Race: White <br>Group: Respiratory <br>Income: 148000 <br>Age: 51","Race: White <br>Group: Childhood <br>Income: 148000 <br>Age: 51","Race: White <br>Group: Childhood <br>Income: 148000 <br>Age: 51","Race: White <br>Group: Respiratory <br>Income: 148000 <br>Age: 51","Race: White <br>Group: Respiratory <br>Income: 148000 <br>Age: 51","Race: White <br>Group: Respiratory <br>Income: 148000 <br>Age: 51","Race: White <br>Group: Respiratory <br>Income: 148000 <br>Age: 51","Race: White <br>Group: Respiratory <br>Income: 148000 <br>Age: 51","Race: White <br>Group: Other <br>Income: 148000 <br>Age: 51","Race: White <br>Group: Respiratory <br>Income: 148000 <br>Age: 51","Race: White <br>Group: Other <br>Income: 148000 <br>Age: 51","Race: White <br>Group: Respiratory <br>Income: 148000 <br>Age: 51","Race: White <br>Group: Childhood <br>Income: 148000 <br>Age: 51","Race: White <br>Group: Respiratory <br>Income: 112954 <br>Age: 48","Race: White <br>Group: Childhood <br>Income: 112954 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 112954 <br>Age: 48","Race: White <br>Group: Childhood <br>Income: 112954 <br>Age: 48","Race: White <br>Group: Childhood <br>Income: 112954 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 112954 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 112954 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 112954 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 112954 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Other <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Respiratory <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Other <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Respiratory <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Respiratory <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Respiratory <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Respiratory <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Respiratory <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Respiratory <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Respiratory <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Childhood <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Respiratory <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Respiratory <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Respiratory <br>Income: 189277 <br>Age: 74","Race: White <br>Group: Respiratory <br>Income: 92885 <br>Age: 34","Race: White <br>Group: Respiratory <br>Income: 92885 <br>Age: 34","Race: White <br>Group: Respiratory <br>Income: 92885 <br>Age: 34","Race: White <br>Group: Respiratory <br>Income: 92885 <br>Age: 34","Race: White <br>Group: Respiratory <br>Income: 92885 <br>Age: 34","Race: White <br>Group: Respiratory <br>Income: 92885 <br>Age: 34","Race: White <br>Group: Childhood <br>Income: 92885 <br>Age: 34","Race: White <br>Group: Respiratory <br>Income: 96411 <br>Age: 47","Race: White <br>Group: Childhood <br>Income: 96411 <br>Age: 47","Race: White <br>Group: Respiratory <br>Income: 96411 <br>Age: 47","Race: White <br>Group: Childhood <br>Income: 96411 <br>Age: 47","Race: White <br>Group: Childhood <br>Income: 96411 <br>Age: 47","Race: White <br>Group: Respiratory <br>Income: 96411 <br>Age: 47","Race: White <br>Group: Respiratory <br>Income: 96411 <br>Age: 47","Race: White <br>Group: Respiratory <br>Income: 96411 <br>Age: 47","Race: White <br>Group: Respiratory <br>Income: 96411 <br>Age: 47","Race: White <br>Group: Respiratory <br>Income: 29352 <br>Age: 48","Race: White <br>Group: Childhood <br>Income: 29352 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 29352 <br>Age: 48","Race: White <br>Group: Childhood <br>Income: 29352 <br>Age: 48","Race: White <br>Group: Childhood <br>Income: 29352 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 29352 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 29352 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 29352 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 29352 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 29352 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 29352 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 29352 <br>Age: 48","Race: White <br>Group: Respiratory <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Other <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Childhood <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Respiratory <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Childhood <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Childhood <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Respiratory <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Respiratory <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Respiratory <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Respiratory <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Respiratory <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Childhood <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Respiratory <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Childhood <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Childhood <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Childhood <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Respiratory <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Childhood <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Respiratory <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Respiratory <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Respiratory <br>Income: 8615 <br>Age: 13","Race: White <br>Group: Respiratory <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Childhood <br>Income: 94205 <br>Age: 16","Race: White <br>Group: Respiratory <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Respiratory <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Respiratory <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Respiratory <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Respiratory <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Respiratory <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Childhood <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Childhood <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Childhood <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Respiratory <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Childhood <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Respiratory <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Childhood <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Respiratory <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Respiratory <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Respiratory <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Respiratory <br>Income: 24218 <br>Age: 15","Race: White <br>Group: Respiratory <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Other <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Other <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Childhood <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Respiratory <br>Income: 124775 <br>Age: 52","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Other <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Other <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Other <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Other <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Respiratory <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Other <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Other <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Other <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 545255 <br>Age: 1","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Other <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Other <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Other <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Other <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Other <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Other <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Other <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Other <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Childhood <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 35486 <br>Age: 6","Race: White <br>Group: Respiratory <br>Income: 61016 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 61016 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 61016 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 61016 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 61016 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 61016 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 61016 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 61016 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 61016 <br>Age: 64","Race: White <br>Group: Childhood <br>Income: 61016 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 61016 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 61016 <br>Age: 64","Race: White <br>Group: Respiratory <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Respiratory <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Respiratory <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Respiratory <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Respiratory <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Respiratory <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Respiratory <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Respiratory <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Respiratory <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Respiratory <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Respiratory <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Childhood <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Respiratory <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Childhood <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Childhood <br>Income: 63727 <br>Age: 42","Race: White <br>Group: Respiratory <br>Income: 63727 <br>Age: 42"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(231,107,243,1)","opacity":0.59999999999999998,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(231,107,243,1)"}},"hoveron":"points","name":"White","legendgroup":"White","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"visible":false,"showlegend":false,"xaxis":null,"yaxis":null,"hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":43.105022831050235},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Interactive: Income vs Age by Race","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-33113.5,857325.5],"tickmode":"array","ticktext":["0e+00","2e+05","4e+05","6e+05","8e+05"],"tickvals":[0,200000,400000,600000,800000],"categoryorder":"array","categoryarray":["0e+00","2e+05","4e+05","6e+05","8e+05"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Income","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3.8000000000000007,101.8],"tickmode":"array","ticktext":["0","25","50","75","100"],"tickvals":[0,25,50,75,100],"categoryorder":"array","categoryarray":["0","25","50","75","100"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Age","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Race","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"2d5017fe645a":{"x":{},"y":{},"colour":{},"text":{},"type":"scatter"},"2d50613b5deb":{"x":{},"y":{},"colour":{},"text":{}}},"cur_data":"2d5017fe645a","visdat":{"2d5017fe645a":["function (y) ","x"],"2d50613b5deb":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb367"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb367-1"><a href="#cb367-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Animation ‚Äì Vaccination Trends Over Years</strong></p>
<p>This animation shows how vaccination counts across vaccine groups change over time. It helps spot temporal trends and emerging patterns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb368"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true" tabindex="-1"></a>anim_plot <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb368-2"><a href="#cb368-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vacc_year =</span> <span class="fu">as.integer</span>(<span class="fu">floor</span>(vacc_year))) <span class="sc">%&gt;%</span></span>
<span id="cb368-3"><a href="#cb368-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_year, vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb368-4"><a href="#cb368-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> n, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb368-5"><a href="#cb368-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb368-6"><a href="#cb368-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">'Year: {frame_time}'</span>, <span class="at">x =</span> <span class="st">'Vaccine Group'</span>, <span class="at">y =</span> <span class="st">'Count'</span>) <span class="sc">+</span></span>
<span id="cb368-7"><a href="#cb368-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb368-8"><a href="#cb368-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_time</span>(vacc_year) <span class="sc">+</span></span>
<span id="cb368-9"><a href="#cb368-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ease_aes</span>(<span class="st">'linear'</span>)</span>
<span id="cb368-10"><a href="#cb368-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb368-11"><a href="#cb368-11" aria-hidden="true" tabindex="-1"></a>anim_file <span class="ot">&lt;-</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">".gif"</span>)</span>
<span id="cb368-12"><a href="#cb368-12" aria-hidden="true" tabindex="-1"></a>anim <span class="ot">&lt;-</span> <span class="fu">animate</span>(anim_plot, <span class="at">nframes =</span> <span class="dv">100</span>, <span class="at">fps =</span> <span class="dv">10</span>, <span class="at">renderer =</span> <span class="fu">gifski_renderer</span>(anim_file))</span>
<span id="cb368-13"><a href="#cb368-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(anim)</span>
<span id="cb368-14"><a href="#cb368-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb368-15"><a href="#cb368-15" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(anim_plot, anim_file, anim)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Animation ‚Äì Breast Cancer Screening Uptake by State</strong></p>
<p>This animated bar chart shows breast cancer screening uptake over time for each Australian state. It uses faceting to compare regional trends.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb369"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb369-1"><a href="#cb369-1" aria-hidden="true" tabindex="-1"></a>breast_anim <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb369-2"><a href="#cb369-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Other"</span>, <span class="st">"Unknown"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb369-3"><a href="#cb369-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_4digit =</span> <span class="fu">as.integer</span>(year_4digit)) <span class="sc">%&gt;%</span></span>
<span id="cb369-4"><a href="#cb369-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year_4digit) <span class="sc">%&gt;%</span></span>
<span id="cb369-5"><a href="#cb369-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_screened =</span> <span class="fu">sum</span>(part50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb369-6"><a href="#cb369-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_4digit, <span class="at">y =</span> total_screened, <span class="at">fill =</span> state)) <span class="sc">+</span></span>
<span id="cb369-7"><a href="#cb369-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb369-8"><a href="#cb369-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> state) <span class="sc">+</span></span>
<span id="cb369-9"><a href="#cb369-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">'Year: {frame_time}'</span>, <span class="at">x =</span> <span class="st">'Year'</span>, <span class="at">y =</span> <span class="st">'Women Screened (50‚Äì74 yrs)'</span>) <span class="sc">+</span></span>
<span id="cb369-10"><a href="#cb369-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb369-11"><a href="#cb369-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_time</span>(year_4digit) <span class="sc">+</span></span>
<span id="cb369-12"><a href="#cb369-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ease_aes</span>(<span class="st">'linear'</span>)</span>
<span id="cb369-13"><a href="#cb369-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb369-14"><a href="#cb369-14" aria-hidden="true" tabindex="-1"></a>screening_gif <span class="ot">&lt;-</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">".gif"</span>)</span>
<span id="cb369-15"><a href="#cb369-15" aria-hidden="true" tabindex="-1"></a>anim_screen <span class="ot">&lt;-</span> <span class="fu">animate</span>(breast_anim, <span class="at">nframes =</span> <span class="dv">100</span>, <span class="at">fps =</span> <span class="dv">10</span>, <span class="at">renderer =</span> <span class="fu">gifski_renderer</span>(screening_gif))</span>
<span id="cb369-16"><a href="#cb369-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(anim_screen)</span>
<span id="cb369-17"><a href="#cb369-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb369-18"><a href="#cb369-18" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(breast_anim, screening_gif, anim_screen)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="formatting-themes-and-fonts-of-figures" class="level3" data-number="1.7.7">
<h3 data-number="1.7.7" class="anchored" data-anchor-id="formatting-themes-and-fonts-of-figures"><span class="header-section-number">1.7.7</span> <strong>üîπ Formatting, themes and fonts of figures</strong></h3>
<p><strong>Heatmap ‚Äì Number of Vaccinations by Month and Weekday</strong> Highlights vaccination activity patterns by day of week and month. Darker tiles represent higher counts.</p>
<p>The heatmap below demonstrates the <strong>number of vaccinations administered</strong> across <strong>each day of the week</strong> and <strong>each calendar month</strong>. Color intensity indicates the relative number of vaccinations, with darker red representing higher uptake and pale yellow representing lower activity.</p>
<p><strong>Key Observations:</strong></p>
<ul>
<li><p><strong>Saturday consistently shows high uptake</strong>, particularly in <strong>October, September, and July</strong>, suggesting that weekends may be more accessible or preferred for vaccination appointments.</p></li>
<li><p><strong>Tuesday in May</strong> and <strong>Wednesday in August</strong> also show pronounced peaks, likely linked to specific campaign efforts or seasonal programs.</p></li>
<li><p><strong>Thursday and Friday</strong> generally have moderate activity, while <strong>Sunday and Monday</strong> tend to have lower vaccination counts across most months.</p></li>
<li><p>Overall, the <strong>summer and early fall months (July to October)</strong> show increased uptake across several weekdays, possibly aligning with back-to-school vaccination drives or respiratory vaccine rollouts.</p></li>
</ul>
<pre><code>**Interpretation:**</code></pre>
<p>The plot reveals both <strong>seasonal</strong> and <strong>weekly rhythms</strong> in vaccination behavior. Recognizing these patterns can guide better <strong>scheduling of clinics</strong>, <strong>resource planning</strong>, and <strong>public messaging</strong> to align with high-demand periods and improve overall vaccine accessibility.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb371"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb371-1"><a href="#cb371-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ................Without  Adding the long Title ........................................................</span></span>
<span id="cb371-2"><a href="#cb371-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ..............................................................................................</span></span>
<span id="cb371-3"><a href="#cb371-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb371-4"><a href="#cb371-4" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Order weekday and month factors for proper axis display ---</span></span>
<span id="cb371-5"><a href="#cb371-5" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Convert original vaccination date to Eastern Time (Massachusetts local time) ---</span></span>
<span id="cb371-6"><a href="#cb371-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Assumes vacc_date is POSIXct or character in UTC or local system time</span></span>
<span id="cb371-7"><a href="#cb371-7" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb371-8"><a href="#cb371-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb371-9"><a href="#cb371-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_datetime_et =</span> <span class="fu">with_tz</span>(<span class="fu">as.POSIXct</span>(vacc_date, <span class="at">tz =</span> <span class="st">"UTC"</span>), <span class="at">tzone =</span> <span class="st">"America/New_York"</span>),  <span class="co"># Adjust timezone to Eastern Time</span></span>
<span id="cb371-10"><a href="#cb371-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_weekday =</span> <span class="fu">wday</span>(vacc_datetime_et, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>),                          <span class="co"># Extract weekday (e.g., Monday)</span></span>
<span id="cb371-11"><a href="#cb371-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_month_name =</span> <span class="fu">month</span>(vacc_datetime_et, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>)                       <span class="co"># Extract month (e.g., January)</span></span>
<span id="cb371-12"><a href="#cb371-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb371-13"><a href="#cb371-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb371-14"><a href="#cb371-14" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Order weekday and month factors for proper axis display ---</span></span>
<span id="cb371-15"><a href="#cb371-15" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb371-16"><a href="#cb371-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb371-17"><a href="#cb371-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_month_name =</span> <span class="fu">factor</span>(vacc_month_name, <span class="at">levels =</span> month.name),  <span class="co"># Ensure months are in calendar order</span></span>
<span id="cb371-18"><a href="#cb371-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_weekday =</span> <span class="fu">factor</span>(vacc_weekday, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Monday"</span>, <span class="st">"Tuesday"</span>, <span class="st">"Wednesday"</span>, <span class="st">"Thursday"</span>, <span class="st">"Friday"</span>, <span class="st">"Saturday"</span>, <span class="st">"Sunday"</span>))  <span class="co"># Ensure weekdays are in logical order</span></span>
<span id="cb371-19"><a href="#cb371-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb371-20"><a href="#cb371-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb371-21"><a href="#cb371-21" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Create heatmap of vaccination counts by weekday and month ---</span></span>
<span id="cb371-22"><a href="#cb371-22" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb371-23"><a href="#cb371-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_weekday, vacc_month_name) <span class="sc">%&gt;%</span>  <span class="co"># Count number of vaccinations by weekday and month</span></span>
<span id="cb371-24"><a href="#cb371-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_weekday, <span class="at">y =</span> vacc_month_name, <span class="at">fill =</span> n)) <span class="sc">+</span>     <span class="co"># Map weekday to x-axis, month to y-axis, and fill by count</span></span>
<span id="cb371-25"><a href="#cb371-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span>                                       <span class="co"># Draw heatmap tiles with white border for readability</span></span>
<span id="cb371-26"><a href="#cb371-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(                                              <span class="co"># Use custom yellow-to-red color scale</span></span>
<span id="cb371-27"><a href="#cb371-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">colors =</span> <span class="fu">c</span>(<span class="st">"#ffffcc"</span>, <span class="st">"#ffeda0"</span>, <span class="st">"#feb24c"</span>, <span class="st">"#f03b20"</span>, <span class="st">"#bd0026"</span>),</span>
<span id="cb371-28"><a href="#cb371-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">5</span>),                           <span class="co"># Auto-select 5 good breakpoints for legend</span></span>
<span id="cb371-29"><a href="#cb371-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Vaccinated Number"</span>                                       <span class="co"># Legend title</span></span>
<span id="cb371-30"><a href="#cb371-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb371-31"><a href="#cb371-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb371-32"><a href="#cb371-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Vaccination Uptake by Weekday and Month"</span>,               <span class="co"># Plot title</span></span>
<span id="cb371-33"><a href="#cb371-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Timestamps interpreted as US Eastern Time (Massachusetts)"</span>,  <span class="co"># Timezone context</span></span>
<span id="cb371-34"><a href="#cb371-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Weekday"</span>, <span class="at">y =</span> <span class="st">"Month"</span>, <span class="at">fill =</span> <span class="st">"Vaccinated Number"</span>,          <span class="co"># Axis and legend labels</span></span>
<span id="cb371-35"><a href="#cb371-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Note: Original timestamps converted from UTC to America/New_York"</span></span>
<span id="cb371-36"><a href="#cb371-36" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb371-37"><a href="#cb371-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb371-38"><a href="#cb371-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb371-39"><a href="#cb371-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"Times New Roman"</span>),                 <span class="co"># Font style</span></span>
<span id="cb371-40"><a href="#cb371-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,                                      <span class="co"># Move legend below the plot</span></span>
<span id="cb371-41"><a href="#cb371-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">"bold"</span>),  <span class="co"># X-axis label formatting</span></span>
<span id="cb371-42"><a href="#cb371-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">"bold"</span>),            <span class="co"># Y-axis label formatting</span></span>
<span id="cb371-43"><a href="#cb371-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb371-44"><a href="#cb371-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb371-45"><a href="#cb371-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb371-46"><a href="#cb371-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb371-47"><a href="#cb371-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb371-48"><a href="#cb371-48" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-87-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb372"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use figure title below to render in Quarto or Rmarkdown </span></span>
<span id="cb372-2"><a href="#cb372-2" aria-hidden="true" tabindex="-1"></a><span class="co">#"Figure XX: Vaccination uptake by weekday and month among individuals aged 15‚Äì24, 2016‚Äì2024."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb373"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb373-1"><a href="#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ................Adding the long Title ........................................................</span></span>
<span id="cb373-2"><a href="#cb373-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ..............................................................................................</span></span>
<span id="cb373-3"><a href="#cb373-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-4"><a href="#cb373-4" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Convert original vaccination date to Eastern Time (Massachusetts local time) ---</span></span>
<span id="cb373-5"><a href="#cb373-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Assumes vacc_date is POSIXct or character in UTC or local system time</span></span>
<span id="cb373-6"><a href="#cb373-6" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb373-7"><a href="#cb373-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb373-8"><a href="#cb373-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_datetime_et =</span> <span class="fu">with_tz</span>(<span class="fu">as.POSIXct</span>(vacc_date, <span class="at">tz =</span> <span class="st">"UTC"</span>), <span class="at">tzone =</span> <span class="st">"America/New_York"</span>),  <span class="co"># Adjust timezone to Eastern Time</span></span>
<span id="cb373-9"><a href="#cb373-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_weekday =</span> <span class="fu">wday</span>(vacc_datetime_et, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>),                          <span class="co"># Extract weekday (e.g., Monday)</span></span>
<span id="cb373-10"><a href="#cb373-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_month_name =</span> <span class="fu">month</span>(vacc_datetime_et, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>)                       <span class="co"># Extract month (e.g., January)</span></span>
<span id="cb373-11"><a href="#cb373-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb373-12"><a href="#cb373-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-13"><a href="#cb373-13" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Order weekday and month factors for proper axis display ---</span></span>
<span id="cb373-14"><a href="#cb373-14" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb373-15"><a href="#cb373-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb373-16"><a href="#cb373-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_month_name =</span> <span class="fu">factor</span>(vacc_month_name, <span class="at">levels =</span> month.name),  <span class="co"># Ensure months are in calendar order</span></span>
<span id="cb373-17"><a href="#cb373-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_weekday =</span> <span class="fu">factor</span>(vacc_weekday, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Monday"</span>, <span class="st">"Tuesday"</span>, <span class="st">"Wednesday"</span>, <span class="st">"Thursday"</span>, <span class="st">"Friday"</span>, <span class="st">"Saturday"</span>, <span class="st">"Sunday"</span>))  <span class="co"># Ensure weekdays are in logical order</span></span>
<span id="cb373-18"><a href="#cb373-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb373-19"><a href="#cb373-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-20"><a href="#cb373-20" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Create heatmap of vaccination counts by weekday and month ---</span></span>
<span id="cb373-21"><a href="#cb373-21" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb373-22"><a href="#cb373-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_weekday, vacc_month_name) <span class="sc">%&gt;%</span>  <span class="co"># Count number of vaccinations by weekday and month</span></span>
<span id="cb373-23"><a href="#cb373-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_weekday, <span class="at">y =</span> vacc_month_name, <span class="at">fill =</span> n)) <span class="sc">+</span>     <span class="co"># Map weekday to x-axis, month to y-axis, and fill by count</span></span>
<span id="cb373-24"><a href="#cb373-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span>                                       <span class="co"># Draw heatmap tiles with white border for readability</span></span>
<span id="cb373-25"><a href="#cb373-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(                                              <span class="co"># Use custom yellow-to-red color scale</span></span>
<span id="cb373-26"><a href="#cb373-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">colors =</span> <span class="fu">c</span>(<span class="st">"#ffffcc"</span>, <span class="st">"#ffeda0"</span>, <span class="st">"#feb24c"</span>, <span class="st">"#f03b20"</span>, <span class="st">"#bd0026"</span>),</span>
<span id="cb373-27"><a href="#cb373-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">5</span>),                           <span class="co"># Auto-select 5 good breakpoints for legend</span></span>
<span id="cb373-28"><a href="#cb373-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Vaccinated Number"</span>                                       <span class="co"># Legend title</span></span>
<span id="cb373-29"><a href="#cb373-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb373-30"><a href="#cb373-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb373-31"><a href="#cb373-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Vaccination Uptake by Weekday and Month"</span>,               <span class="co"># Plot title</span></span>
<span id="cb373-32"><a href="#cb373-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Weekday"</span>, <span class="at">y =</span> <span class="st">"Month"</span>, <span class="at">fill =</span> <span class="st">"Vaccinated Number"</span>           <span class="co"># Axis and legend labels</span></span>
<span id="cb373-33"><a href="#cb373-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb373-34"><a href="#cb373-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb373-35"><a href="#cb373-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb373-36"><a href="#cb373-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"Times New Roman"</span>),                 <span class="co"># Font style</span></span>
<span id="cb373-37"><a href="#cb373-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,                                      <span class="co"># Move legend below the plot</span></span>
<span id="cb373-38"><a href="#cb373-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">"bold"</span>),  <span class="co"># X-axis label formatting</span></span>
<span id="cb373-39"><a href="#cb373-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">"bold"</span>),            <span class="co"># Y-axis label formatting</span></span>
<span id="cb373-40"><a href="#cb373-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb373-41"><a href="#cb373-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb373-42"><a href="#cb373-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb373-43"><a href="#cb373-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb373-44"><a href="#cb373-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb373-45"><a href="#cb373-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb373-46"><a href="#cb373-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-47"><a href="#cb373-47" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Add descriptive figure caption using patchwork's plot_annotation() ---</span></span>
<span id="cb373-48"><a href="#cb373-48" aria-hidden="true" tabindex="-1"></a>final_plot <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">plot_annotation</span>(</span>
<span id="cb373-49"><a href="#cb373-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">"Figure XX: Vaccination uptake by weekday and month among individuals aged 15‚Äì24, 2016‚Äì2024."</span>,</span>
<span id="cb373-50"><a href="#cb373-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb373-51"><a href="#cb373-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(</span>
<span id="cb373-52"><a href="#cb373-52" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">10</span>, <span class="at">family =</span> <span class="st">"Times New Roman"</span>, <span class="at">hjust =</span> <span class="dv">0</span></span>
<span id="cb373-53"><a href="#cb373-53" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb373-54"><a href="#cb373-54" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb373-55"><a href="#cb373-55" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb373-56"><a href="#cb373-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-57"><a href="#cb373-57" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Display the final plot with caption ---</span></span>
<span id="cb373-58"><a href="#cb373-58" aria-hidden="true" tabindex="-1"></a>final_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Manipulation-and-Wrangling_files/figure-html/unnamed-chunk-89-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb374"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="co"># setwd ("C:/Users/User/Desktop/Materials_ Course and proposals/VIP collection for Syntax code or project titles/R codes/Data Manipulation and Wrangling")</span></span>
<span id="cb374-2"><a href="#cb374-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb374-3"><a href="#cb374-3" aria-hidden="true" tabindex="-1"></a><span class="co"># # Save plots</span></span>
<span id="cb374-4"><a href="#cb374-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ggsave("Heatmap_vaccination_pattern by day and month.TIFF", plot = last_plot(), device = "tiff", width = 10, height = 6, units = "in")</span></span>
<span id="cb374-5"><a href="#cb374-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ggsave("Heatmap_vaccination_pattern by day and month.svg", plot = last_plot(), device = "svg", width = 10, height = 6, units = "in")</span></span>
<span id="cb374-6"><a href="#cb374-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb374-7"><a href="#cb374-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> (p, final_plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="part-viii-shiny-app-building-web-apps" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="part-viii-shiny-app-building-web-apps"><span class="header-section-number">1.8</span> <strong>PART VIII: SHINY App: BUILDING WEB APPS</strong></h2>
<p>8.1 <strong>UI</strong> <code>fluidPage()</code>, <code>sidebarLayout()</code>, <code>sidebarPanel()</code>, <code>mainPanel()</code>, <code>tabsetPanel()</code>, <code>tags$style()</code></p>
<p>8.2 <strong>Server</strong> <code>reactive()</code>, <code>observeEvent()</code>, <code>req()</code>, <code>renderPlotly()</code>, <code>renderDT()</code>, <code>modalDialog()</code>, <code>showModal()</code></p>
<p>8.3 <strong>App Launch</strong> <code>shinyApp(ui, server)</code></p>
<p>8.4 <strong>Inputs</strong> <code>sliderInput()</code>, <code>selectInput()</code>, <code>colourInput()</code>, <code>actionButton()</code>, <code>downloadButton()</code></p>
<p>8.5 <strong>Outputs</strong> <code>plotlyOutput()</code>, <code>DTOutput()</code>, <code>datatable()</code>, <code>formatStyle()</code></p>
<p>8.6 <strong>DT Features</strong> <code>extensions = 'Buttons'</code>, export options: <code>copy</code>, <code>csv</code>, <code>excel</code>, <code>pdf</code>, <code>print</code></p>
<p>8.7 <strong>Styling and Themes</strong> <code>tags$style()</code>, (<code>shinythemes::shinytheme()</code> ‚Äì loaded but not applied)</p>
<p>Shiny is a web application framework for R that allows analysts to build interactive dashboards and tools using familiar syntax. It provides a structured approach to turning R scripts into accessible apps for broader audiences.</p>
<p>A typical Shiny app includes two core components:</p>
<ul>
<li><strong>UI (User Interface)</strong>: Defines layout, inputs, and outputs shown on the screen interface.</li>
<li><strong>Server</strong>: Contains the logic that processes data and responds to user interactions.</li>
</ul>
<p>Shiny apps can include multiple views (tabs), export buttons, dynamic filtering, charts, and customized design themes.</p>
<hr>
<section id="ui-layout-and-page-structure" class="level3" data-number="1.8.1">
<h3 data-number="1.8.1" class="anchored" data-anchor-id="ui-layout-and-page-structure"><span class="header-section-number">1.8.1</span> <strong>üîπ UI Layout and Page Structure</strong></h3>
<ul>
<li><code>fluidPage()</code>: Defines the page layout.</li>
<li><code>sidebarLayout()</code>, <code>sidebarPanel()</code>, <code>mainPanel()</code>: Organize inputs and outputs side-by-side.</li>
<li><code>tabsetPanel()</code>: Allows tab navigation for multi-page apps.</li>
<li><code>tags$style()</code>, <code>shinythemes::shinytheme()</code>: Add or apply custom styles/themes.</li>
</ul>
<hr>
</section>
<section id="server-logic-and-reactivity" class="level3" data-number="1.8.2">
<h3 data-number="1.8.2" class="anchored" data-anchor-id="server-logic-and-reactivity"><span class="header-section-number">1.8.2</span> <strong>üîπ Server Logic and Reactivity</strong></h3>
<ul>
<li><code>reactive()</code>: Creates reactive data or expressions.</li>
<li><code>observeEvent()</code>: Executes code when a trigger changes.</li>
<li><code>req()</code>: Validates necessary input before proceeding.</li>
<li>Output functions: <code>renderPlotly()</code>, <code>renderDT()</code>, <code>renderText()</code>, <code>renderTable()</code>.</li>
</ul>
<hr>
</section>
<section id="inputs-and-outputs" class="level3" data-number="1.8.3">
<h3 data-number="1.8.3" class="anchored" data-anchor-id="inputs-and-outputs"><span class="header-section-number">1.8.3</span> <strong>üîπ Inputs and Outputs</strong></h3>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 30%">
<col style="width: 45%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Type</strong></th>
<th><strong>Function</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input</td>
<td><code>sliderInput()</code></td>
<td>Select a numeric value or range</td>
</tr>
<tr class="even">
<td>Input</td>
<td><code>selectInput()</code></td>
<td>Dropdown menu to choose a category</td>
</tr>
<tr class="odd">
<td>Input</td>
<td><code>colourInput()</code></td>
<td>Select a color</td>
</tr>
<tr class="even">
<td>Input</td>
<td><code>actionButton()</code></td>
<td>Trigger processing on click</td>
</tr>
<tr class="odd">
<td>Input</td>
<td><code>downloadButton()</code></td>
<td>Download output tables or data</td>
</tr>
<tr class="even">
<td>Output</td>
<td><code>plotlyOutput()</code></td>
<td>Render interactive plots using Plotly</td>
</tr>
<tr class="odd">
<td>Output</td>
<td><code>DTOutput()</code>, <code>datatable()</code></td>
<td>Render interactive tables</td>
</tr>
<tr class="even">
<td>Output</td>
<td><code>formatStyle()</code></td>
<td>Apply styling (e.g., color, font) to tables</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="table-export-options-dt-extension" class="level3" data-number="1.8.4">
<h3 data-number="1.8.4" class="anchored" data-anchor-id="table-export-options-dt-extension"><span class="header-section-number">1.8.4</span> <strong>üîπ Table Export Options (DT Extension)</strong></h3>
<ul>
<li>Add <code>extensions = 'Buttons'</code> to enable table exports.</li>
<li>Export types: <code>"copy"</code>, <code>"csv"</code>, <code>"excel"</code>, <code>"pdf"</code>, <code>"print"</code>.</li>
</ul>
<hr>
</section>
<section id="launching-the-app" class="level3" data-number="1.8.5">
<h3 data-number="1.8.5" class="anchored" data-anchor-id="launching-the-app"><span class="header-section-number">1.8.5</span> <strong>üîπ Launching the App</strong></h3>
<ul>
<li><code>shinyApp(ui, server)</code>: Runs the Shiny app combining both UI and server logic.</li>
<li>Apps can be hosted on ShinyApps.io, internal servers, or embedded in R Markdown dashboards.</li>
</ul>
<hr>
<p>The Shiny app code below demonstrates how interactive visualizations can be built using R to present health data in an accessible and user-friendly format. Specifically, it explores breast cancer screening uptake across states, years, and age groups in Australia. The app enhances user engagement through customizable features and immediate feedback mechanisms.</p>
<p>Key capabilities demonstrated include: - Dynamic UI generation using <code>fluidPage()</code>, <code>sidebarLayout()</code>, and interactive widgets - State selection using a dropdown (<code>selectInput()</code>), which scales better than radio buttons - Age group filtering with a multiple selection input - Quantile-based filtering with <code>sliderInput()</code> for rate grouping - Color customization of output using <code>colourInput()</code> for personalizing table aesthetics - A modal popup (<code>modalDialog()</code>) triggered by a help button to explain data sources - Export options via <code>downloadButton()</code> and <code>DT</code> export buttons for multiple file formats - Real-time data filtering using <code>reactive()</code> expressions to tailor output to user input - An interactive line plot rendered via <code>plotly</code> and <code>ggplot2</code> for visualization - Fully styled, downloadable data table with <code>DT::renderDT()</code> and export capabilities</p>
<p>See the live app at the following platforms</p>
<ul>
<li><strong>AnalyticsHub YouTube</strong>: <a href="https://studio.youtube.com/video/5V7SPBH-8BE/edit" class="uri">https://studio.youtube.com/video/5V7SPBH-8BE/edit</a></li>
<li><strong>Live App</strong>: <a href="https://j9eu4e-habtamu-mellie0bizuayehu.shinyapps.io/Breast_Cancer_Screening_Shiny_App/" class="uri">https://j9eu4e-habtamu-mellie0bizuayehu.shinyapps.io/Breast_Cancer_Screening_Shiny_App/</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb375"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb375-1"><a href="#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install required packages if not already installed</span></span>
<span id="cb375-2"><a href="#cb375-2" aria-hidden="true" tabindex="-1"></a>required_packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"shiny"</span>, <span class="st">"ggplot2"</span>, <span class="st">"plotly"</span>, <span class="st">"DT"</span>, <span class="st">"dplyr"</span>, <span class="st">"shinyjs"</span>, <span class="st">"shinyWidgets"</span>, <span class="st">"scales"</span>, <span class="st">"colourpicker"</span>)</span>
<span id="cb375-3"><a href="#cb375-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb375-4"><a href="#cb375-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Install missing ones</span></span>
<span id="cb375-5"><a href="#cb375-5" aria-hidden="true" tabindex="-1"></a>new_packages <span class="ot">&lt;-</span> required_packages[<span class="sc">!</span>(required_packages <span class="sc">%in%</span> <span class="fu">installed.packages</span>()[,<span class="st">"Package"</span>])]</span>
<span id="cb375-6"><a href="#cb375-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">length</span>(new_packages)) <span class="fu">install.packages</span>(new_packages)</span>
<span id="cb375-7"><a href="#cb375-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb375-8"><a href="#cb375-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb375-9"><a href="#cb375-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb375-10"><a href="#cb375-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb375-11"><a href="#cb375-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb375-12"><a href="#cb375-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb375-13"><a href="#cb375-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb375-14"><a href="#cb375-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinyjs)</span>
<span id="cb375-15"><a href="#cb375-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinyWidgets)</span>
<span id="cb375-16"><a href="#cb375-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb375-17"><a href="#cb375-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(colourpicker)</span>
<span id="cb375-18"><a href="#cb375-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb375-19"><a href="#cb375-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb375-20"><a href="#cb375-20" aria-hidden="true" tabindex="-1"></a><span class="co"># load the data</span></span>
<span id="cb375-21"><a href="#cb375-21" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"C:/Users/User/Desktop/Materials_ Course and proposals/VIP collection for Syntax code or project titles/R codes/Shiny App BC Screening/Breast Cancer Screening.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb376"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------Shiny Application for Breast Cancer Screening---------------------</span></span>
<span id="cb376-2"><a href="#cb376-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-3"><a href="#cb376-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-4"><a href="#cb376-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------- UI and Server Definition ---------------------</span></span>
<span id="cb376-5"><a href="#cb376-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-6"><a href="#cb376-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Define custom CSS for styling buttons and other UI elements</span></span>
<span id="cb376-7"><a href="#cb376-7" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb376-8"><a href="#cb376-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb376-9"><a href="#cb376-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Application title displayed at the top of the app</span></span>
<span id="cb376-10"><a href="#cb376-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h1</span>(<span class="st">"Breast Cancer Screening Uptake"</span>),</span>
<span id="cb376-11"><a href="#cb376-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-12"><a href="#cb376-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Apply custom styling to the download button</span></span>
<span id="cb376-13"><a href="#cb376-13" aria-hidden="true" tabindex="-1"></a>  tags<span class="sc">$</span><span class="fu">style</span>(<span class="fu">HTML</span>(<span class="st">"</span></span>
<span id="cb376-14"><a href="#cb376-14" aria-hidden="true" tabindex="-1"></a><span class="st">    #download_data {</span></span>
<span id="cb376-15"><a href="#cb376-15" aria-hidden="true" tabindex="-1"></a><span class="st">      background: orange;</span></span>
<span id="cb376-16"><a href="#cb376-16" aria-hidden="true" tabindex="-1"></a><span class="st">      font-size: 20px;</span></span>
<span id="cb376-17"><a href="#cb376-17" aria-hidden="true" tabindex="-1"></a><span class="st">    }</span></span>
<span id="cb376-18"><a href="#cb376-18" aria-hidden="true" tabindex="-1"></a><span class="st">  "</span>)),  </span>
<span id="cb376-19"><a href="#cb376-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-20"><a href="#cb376-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Layout structure: sidebar for inputs and main panel for outputs</span></span>
<span id="cb376-21"><a href="#cb376-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb376-22"><a href="#cb376-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb376-23"><a href="#cb376-23" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb376-24"><a href="#cb376-24" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Quantile-based slider to filter screening rate</span></span>
<span id="cb376-25"><a href="#cb376-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sliderInput</span>(<span class="st">"rate_10_group"</span>, <span class="st">"Rate Group"</span>, </span>
<span id="cb376-26"><a href="#cb376-26" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min =</span> <span class="fu">min</span>(breast_cancer_long<span class="sc">$</span>rate_10_group, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb376-27"><a href="#cb376-27" aria-hidden="true" tabindex="-1"></a>                  <span class="at">max =</span> <span class="fu">max</span>(breast_cancer_long<span class="sc">$</span>rate_10_group, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb376-28"><a href="#cb376-28" aria-hidden="true" tabindex="-1"></a>                  <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">7</span>)),</span>
<span id="cb376-29"><a href="#cb376-29" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb376-30"><a href="#cb376-30" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Dropdown menu for state selection (simplifies and scales better than radio buttons)</span></span>
<span id="cb376-31"><a href="#cb376-31" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(<span class="st">"state"</span>, <span class="st">"Select State"</span>,  </span>
<span id="cb376-32"><a href="#cb376-32" aria-hidden="true" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">unique</span>(breast_cancer_long<span class="sc">$</span>state), </span>
<span id="cb376-33"><a href="#cb376-33" aria-hidden="true" tabindex="-1"></a>                  <span class="at">selected =</span> <span class="st">"WA"</span>),</span>
<span id="cb376-34"><a href="#cb376-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-35"><a href="#cb376-35" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Multi-select dropdown for age groups (allows viewing multiple demographics)</span></span>
<span id="cb376-36"><a href="#cb376-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(<span class="st">"age_group"</span>, <span class="st">"Women's Age Group"</span>, </span>
<span id="cb376-37"><a href="#cb376-37" aria-hidden="true" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">unique</span>(breast_cancer_long<span class="sc">$</span>age_group), </span>
<span id="cb376-38"><a href="#cb376-38" aria-hidden="true" tabindex="-1"></a>                  <span class="at">multiple =</span> <span class="cn">TRUE</span>,</span>
<span id="cb376-39"><a href="#cb376-39" aria-hidden="true" tabindex="-1"></a>                  <span class="at">selected =</span> <span class="fu">unique</span>(breast_cancer_long<span class="sc">$</span>age_group)[<span class="dv">1</span>]),</span>
<span id="cb376-40"><a href="#cb376-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-41"><a href="#cb376-41" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Add colour input to allow users to control table font colour</span></span>
<span id="cb376-42"><a href="#cb376-42" aria-hidden="true" tabindex="-1"></a>      <span class="fu">colourInput</span>(<span class="st">"color"</span>, <span class="st">"Point color"</span>, <span class="at">value =</span> <span class="st">"blue"</span>),</span>
<span id="cb376-43"><a href="#cb376-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-44"><a href="#cb376-44" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Add a help button that triggers a modal popup for guidance</span></span>
<span id="cb376-45"><a href="#cb376-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">actionButton</span>(<span class="st">"show_help"</span>, <span class="st">"Help"</span>),</span>
<span id="cb376-46"><a href="#cb376-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-47"><a href="#cb376-47" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Add a download button for exporting filtered dataset</span></span>
<span id="cb376-48"><a href="#cb376-48" aria-hidden="true" tabindex="-1"></a>      <span class="fu">downloadButton</span>(<span class="st">"download_data"</span>, <span class="st">"Download Data"</span>)</span>
<span id="cb376-49"><a href="#cb376-49" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb376-50"><a href="#cb376-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-51"><a href="#cb376-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb376-52"><a href="#cb376-52" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Render the interactive line chart</span></span>
<span id="cb376-53"><a href="#cb376-53" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotlyOutput</span>(<span class="st">"plot"</span>),</span>
<span id="cb376-54"><a href="#cb376-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-55"><a href="#cb376-55" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Render the data table output</span></span>
<span id="cb376-56"><a href="#cb376-56" aria-hidden="true" tabindex="-1"></a>      <span class="fu">DTOutput</span>(<span class="st">"table"</span>)</span>
<span id="cb376-57"><a href="#cb376-57" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb376-58"><a href="#cb376-58" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb376-59"><a href="#cb376-59" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb376-60"><a href="#cb376-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-61"><a href="#cb376-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Define server-side logic for rendering outputs and interactivity</span></span>
<span id="cb376-62"><a href="#cb376-62" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb376-63"><a href="#cb376-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-64"><a href="#cb376-64" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Show Help Modal: explains data source when help button is clicked</span></span>
<span id="cb376-65"><a href="#cb376-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>show_help, {</span>
<span id="cb376-66"><a href="#cb376-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">showModal</span>(<span class="fu">modalDialog</span>(</span>
<span id="cb376-67"><a href="#cb376-67" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">"Help"</span>,</span>
<span id="cb376-68"><a href="#cb376-68" aria-hidden="true" tabindex="-1"></a>      <span class="st">"This data was compiled from the Australian Institute of Health and Welfare."</span></span>
<span id="cb376-69"><a href="#cb376-69" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb376-70"><a href="#cb376-70" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb376-71"><a href="#cb376-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-72"><a href="#cb376-72" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Reactive expression to filter and summarize the dataset based on inputs</span></span>
<span id="cb376-73"><a href="#cb376-73" aria-hidden="true" tabindex="-1"></a>  filtered_data <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb376-74"><a href="#cb376-74" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req</span>(input<span class="sc">$</span>rate_10_group, input<span class="sc">$</span>state, input<span class="sc">$</span>age_group)  <span class="co"># Ensure all inputs are available</span></span>
<span id="cb376-75"><a href="#cb376-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-76"><a href="#cb376-76" aria-hidden="true" tabindex="-1"></a>    breast_cancer_long <span class="sc">%&gt;%</span></span>
<span id="cb376-77"><a href="#cb376-77" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(rate_10_group <span class="sc">&gt;=</span> input<span class="sc">$</span>rate_10_group[<span class="dv">1</span>] <span class="sc">&amp;</span> </span>
<span id="cb376-78"><a href="#cb376-78" aria-hidden="true" tabindex="-1"></a>               rate_10_group <span class="sc">&lt;=</span> input<span class="sc">$</span>rate_10_group[<span class="dv">2</span>],</span>
<span id="cb376-79"><a href="#cb376-79" aria-hidden="true" tabindex="-1"></a>             state <span class="sc">==</span> input<span class="sc">$</span>state,</span>
<span id="cb376-80"><a href="#cb376-80" aria-hidden="true" tabindex="-1"></a>             age_group <span class="sc">%in%</span> input<span class="sc">$</span>age_group) <span class="sc">%&gt;%</span></span>
<span id="cb376-81"><a href="#cb376-81" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(year, state, age_group) <span class="sc">%&gt;%</span></span>
<span id="cb376-82"><a href="#cb376-82" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">year =</span> <span class="fu">as.integer</span>(year),  <span class="co"># Convert year to integer for plotting</span></span>
<span id="cb376-83"><a href="#cb376-83" aria-hidden="true" tabindex="-1"></a>                <span class="at">rate =</span> <span class="fu">round</span>(<span class="fu">mean</span>(rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">1</span>),  <span class="co"># Average screening rate</span></span>
<span id="cb376-84"><a href="#cb376-84" aria-hidden="true" tabindex="-1"></a>                <span class="at">.groups =</span> <span class="st">"drop"</span>) </span>
<span id="cb376-85"><a href="#cb376-85" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb376-86"><a href="#cb376-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-87"><a href="#cb376-87" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Render Table: displays filtered data in an interactive table with export options</span></span>
<span id="cb376-88"><a href="#cb376-88" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>table <span class="ot">&lt;-</span> <span class="fu">renderDT</span>({</span>
<span id="cb376-89"><a href="#cb376-89" aria-hidden="true" tabindex="-1"></a>    <span class="fu">datatable</span>(<span class="fu">filtered_data</span>(), </span>
<span id="cb376-90"><a href="#cb376-90" aria-hidden="true" tabindex="-1"></a>              <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb376-91"><a href="#cb376-91" aria-hidden="true" tabindex="-1"></a>                <span class="at">pageLength =</span> <span class="dv">10</span>,  <span class="co"># Show 10 rows per page</span></span>
<span id="cb376-92"><a href="#cb376-92" aria-hidden="true" tabindex="-1"></a>                <span class="at">dom =</span> <span class="st">'Bfrtip'</span>,  <span class="co"># Include Buttons (copy, csv, pdf, etc.)</span></span>
<span id="cb376-93"><a href="#cb376-93" aria-hidden="true" tabindex="-1"></a>                <span class="at">buttons =</span> <span class="fu">c</span>(<span class="st">'copy'</span>, <span class="st">'csv'</span>, <span class="st">'excel'</span>, <span class="st">'pdf'</span>, <span class="st">'print'</span>),</span>
<span id="cb376-94"><a href="#cb376-94" aria-hidden="true" tabindex="-1"></a>                <span class="at">class =</span> <span class="st">"display nowrap compact"</span>  <span class="co"># Responsive and compact table design</span></span>
<span id="cb376-95"><a href="#cb376-95" aria-hidden="true" tabindex="-1"></a>              ),</span>
<span id="cb376-96"><a href="#cb376-96" aria-hidden="true" tabindex="-1"></a>              <span class="at">extensions =</span> <span class="st">'Buttons'</span>,</span>
<span id="cb376-97"><a href="#cb376-97" aria-hidden="true" tabindex="-1"></a>              <span class="at">style =</span> <span class="st">"bootstrap"</span>, </span>
<span id="cb376-98"><a href="#cb376-98" aria-hidden="true" tabindex="-1"></a>              <span class="at">class =</span> <span class="st">"table table-striped table-bordered"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb376-99"><a href="#cb376-99" aria-hidden="true" tabindex="-1"></a>      <span class="fu">formatStyle</span>(<span class="at">columns =</span> <span class="fu">names</span>(<span class="fu">filtered_data</span>()), <span class="at">color =</span> input<span class="sc">$</span>color)  <span class="co"># Use selected color</span></span>
<span id="cb376-100"><a href="#cb376-100" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb376-101"><a href="#cb376-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-102"><a href="#cb376-102" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Download Handler: enables users to download filtered data</span></span>
<span id="cb376-103"><a href="#cb376-103" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>download_data <span class="ot">&lt;-</span> <span class="fu">downloadHandler</span>(</span>
<span id="cb376-104"><a href="#cb376-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">filename =</span> <span class="st">"Breast_cancer_screening_data.csv"</span>,</span>
<span id="cb376-105"><a href="#cb376-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">content =</span> <span class="cf">function</span>(file) {</span>
<span id="cb376-106"><a href="#cb376-106" aria-hidden="true" tabindex="-1"></a>      <span class="fu">write.csv</span>(<span class="fu">filtered_data</span>(), file, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb376-107"><a href="#cb376-107" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb376-108"><a href="#cb376-108" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb376-109"><a href="#cb376-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-110"><a href="#cb376-110" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Render Plot: displays line plot of screening rates over time by age group</span></span>
<span id="cb376-111"><a href="#cb376-111" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>plot <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb376-112"><a href="#cb376-112" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">filtered_data</span>()</span>
<span id="cb376-113"><a href="#cb376-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-114"><a href="#cb376-114" aria-hidden="true" tabindex="-1"></a>    p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> rate, <span class="at">color =</span> age_group, <span class="at">group =</span> <span class="fu">interaction</span>(state, age_group))) <span class="sc">+</span></span>
<span id="cb376-115"><a href="#cb376-115" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span>  <span class="co"># Draw lines to show trend</span></span>
<span id="cb376-116"><a href="#cb376-116" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span>  <span class="co"># Add points to emphasize data values</span></span>
<span id="cb376-117"><a href="#cb376-117" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Breast Cancer Screening Uptake"</span>, </span>
<span id="cb376-118"><a href="#cb376-118" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="st">"Year"</span>, </span>
<span id="cb376-119"><a href="#cb376-119" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="st">"Screening Rate"</span>,</span>
<span id="cb376-120"><a href="#cb376-120" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">"Age Group"</span>) <span class="sc">+</span></span>
<span id="cb376-121"><a href="#cb376-121" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_minimal</span>()</span>
<span id="cb376-122"><a href="#cb376-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-123"><a href="#cb376-123" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplotly</span>(p)  <span class="co"># Convert ggplot to interactive plotly chart</span></span>
<span id="cb376-124"><a href="#cb376-124" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb376-125"><a href="#cb376-125" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb376-126"><a href="#cb376-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-127"><a href="#cb376-127" aria-hidden="true" tabindex="-1"></a><span class="co"># Launch the app</span></span>
<span id="cb376-128"><a href="#cb376-128" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


<!-- -->

</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb377" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb377-1"><a href="#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb377-2"><a href="#cb377-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Date Manipulation and Wrangling using R"</span></span>
<span id="cb377-3"><a href="#cb377-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Habtamu Bizuayehu"</span></span>
<span id="cb377-4"><a href="#cb377-4" aria-hidden="true" tabindex="-1"></a><span class="an">website:</span><span class="co"> "https://habtamubizuayehu.com/"</span></span>
<span id="cb377-5"><a href="#cb377-5" aria-hidden="true" tabindex="-1"></a><span class="an">github:</span><span class="co"> "https://github.com/HabtamuBizuayehu"</span></span>
<span id="cb377-6"><a href="#cb377-6" aria-hidden="true" tabindex="-1"></a><span class="an">orcid:</span><span class="co"> "https://orcid.org/0000-0002-1360-4909"</span></span>
<span id="cb377-7"><a href="#cb377-7" aria-hidden="true" tabindex="-1"></a><span class="an">highlight-style:</span><span class="co"> github</span></span>
<span id="cb377-8"><a href="#cb377-8" aria-hidden="true" tabindex="-1"></a><span class="an">output-dir:</span><span class="co"> "docs"</span></span>
<span id="cb377-9"><a href="#cb377-9" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> html</span></span>
<span id="cb377-10"><a href="#cb377-10" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb377-11"><a href="#cb377-11" aria-hidden="true" tabindex="-1"></a><span class="an">toc-depth:</span><span class="co"> 2</span></span>
<span id="cb377-12"><a href="#cb377-12" aria-hidden="true" tabindex="-1"></a><span class="an">number-sections:</span><span class="co"> true</span></span>
<span id="cb377-13"><a href="#cb377-13" aria-hidden="true" tabindex="-1"></a><span class="an">code-fold:</span><span class="co"> false</span></span>
<span id="cb377-14"><a href="#cb377-14" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb377-15"><a href="#cb377-15" aria-hidden="true" tabindex="-1"></a><span class="an">code-summary:</span><span class="co"> "Show the code"</span></span>
<span id="cb377-16"><a href="#cb377-16" aria-hidden="true" tabindex="-1"></a><span class="an">theme:</span><span class="co"> united</span></span>
<span id="cb377-17"><a href="#cb377-17" aria-hidden="true" tabindex="-1"></a><span class="an">knitr:</span><span class="co"> </span></span>
<span id="cb377-18"><a href="#cb377-18" aria-hidden="true" tabindex="-1"></a><span class="co"> opts_knit: </span></span>
<span id="cb377-19"><a href="#cb377-19" aria-hidden="true" tabindex="-1"></a><span class="co">   warning: false</span></span>
<span id="cb377-20"><a href="#cb377-20" aria-hidden="true" tabindex="-1"></a><span class="co">   message: false</span></span>
<span id="cb377-21"><a href="#cb377-21" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb377-22"><a href="#cb377-22" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb377-23"><a href="#cb377-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-24"><a href="#cb377-24" aria-hidden="true" tabindex="-1"></a><span class="fu"># **Comprehensive Data Manipulation and Wrangling via R**</span></span>
<span id="cb377-25"><a href="#cb377-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-26"><a href="#cb377-26" aria-hidden="true" tabindex="-1"></a>This presentation provides a comprehensive walkthrough of data manipulation and wrangling in R, covering foundational setup, core syntax, data importing, exploration, and transformation techniques. It systematically introduces essential R packages and functions for cleaning, summarizing, and visualizing data, followed by advanced topics such as working with dates and handling missing values. Practical sections on looping, writing functions, and building interactive Shiny applications are also included to enhance automation and interactivity. The presentation concludes with real-world case studies, demonstrating how to apply these techniques to healthcare and public health datasets. This guide is designed to build technical proficiency and practical confidence for effective data analysis using R.</span>
<span id="cb377-27"><a href="#cb377-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-28"><a href="#cb377-28" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-29"><a href="#cb377-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-30"><a href="#cb377-30" aria-hidden="true" tabindex="-1"></a><span class="fu">## **PART I: FOUNDATIONS AND INTRODUCTION**</span></span>
<span id="cb377-31"><a href="#cb377-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-32"><a href="#cb377-32" aria-hidden="true" tabindex="-1"></a><span class="fu">### **1.1 Getting Started with R**</span></span>
<span id="cb377-33"><a href="#cb377-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-34"><a href="#cb377-34" aria-hidden="true" tabindex="-1"></a>This section will cover the following contents</span>
<span id="cb377-35"><a href="#cb377-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-36"><a href="#cb377-36" aria-hidden="true" tabindex="-1"></a><span class="sc">\-</span> Installing R and RStudio</span>
<span id="cb377-37"><a href="#cb377-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-38"><a href="#cb377-38" aria-hidden="true" tabindex="-1"></a><span class="sc">\-</span> Setting working directories</span>
<span id="cb377-39"><a href="#cb377-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-40"><a href="#cb377-40" aria-hidden="true" tabindex="-1"></a><span class="sc">\-</span> Clearing environment and console</span>
<span id="cb377-41"><a href="#cb377-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-42"><a href="#cb377-42" aria-hidden="true" tabindex="-1"></a><span class="sc">\-</span> Installing and loading packages (eg <span class="in">`tidyverse`</span>, <span class="in">`janitor`</span>, etc.)</span>
<span id="cb377-43"><a href="#cb377-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-44"><a href="#cb377-44" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Installing R and RStudio**</span>
<span id="cb377-45"><a href="#cb377-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-46"><a href="#cb377-46" aria-hidden="true" tabindex="-1"></a>When we begin working with R, the very first step we take is installing two important tools: R itself (the engine) and RStudio (the friendly interface we use every day). I recommend that we install R first and then RStudio immediately after.</span>
<span id="cb377-47"><a href="#cb377-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-48"><a href="#cb377-48" aria-hidden="true" tabindex="-1"></a>To make this clear, I have prepared a complete video tutorial that you can watch step-by-step:</span>
<span id="cb377-49"><a href="#cb377-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-50"><a href="#cb377-50" aria-hidden="true" tabindex="-1"></a>Wathc at <span class="co">[</span><span class="ot">AnalyticsHub YouTube</span><span class="co">](https://www.youtube.com/watch?v=wFaBBRfaABw)</span>{target="_blank"}</span>
<span id="cb377-51"><a href="#cb377-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-52"><a href="#cb377-52" aria-hidden="true" tabindex="-1"></a>The video, shows:</span>
<span id="cb377-53"><a href="#cb377-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-54"><a href="#cb377-54" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>How to Download R from the CRAN website.</span>
<span id="cb377-55"><a href="#cb377-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-56"><a href="#cb377-56" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Install RStudio, which gives us a powerful yet simple environment to work in.</span>
<span id="cb377-57"><a href="#cb377-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-58"><a href="#cb377-58" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Briefly explore basic options like font size, theme (dark/light mode), and code editor settings to make RStudio comfortable for coding.</span>
<span id="cb377-59"><a href="#cb377-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-60"><a href="#cb377-60" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Setting working directories\</span>
<span id="cb377-61"><a href="#cb377-61" aria-hidden="true" tabindex="-1"></a>    **When we work in R, it's very important that we know *where* R is reading from and saving to.\</span>
<span id="cb377-62"><a href="#cb377-62" aria-hidden="true" tabindex="-1"></a>    I often think of the **working directory** as the "home folder" where all my files live during an R session.</span>
<span id="cb377-63"><a href="#cb377-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-64"><a href="#cb377-64" aria-hidden="true" tabindex="-1"></a>    We can easily **check** our current working directory by typing:</span>
<span id="cb377-65"><a href="#cb377-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-66"><a href="#cb377-66" aria-hidden="true" tabindex="-1"></a>    <span class="in">```{r}</span></span>
<span id="cb377-67"><a href="#cb377-67" aria-hidden="true" tabindex="-1"></a><span class="in">    getwd() </span></span>
<span id="cb377-68"><a href="#cb377-68" aria-hidden="true" tabindex="-1"></a><span class="in">    ```</span></span>
<span id="cb377-69"><a href="#cb377-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-70"><a href="#cb377-70" aria-hidden="true" tabindex="-1"></a>This command tells us exactly where R is currently looking for files.</span>
<span id="cb377-71"><a href="#cb377-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-72"><a href="#cb377-72" aria-hidden="true" tabindex="-1"></a>If we want to **change** the working directory to a folder we are working on (for example, a project folder or a course material folder), we can use:</span>
<span id="cb377-73"><a href="#cb377-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-74"><a href="#cb377-74" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=FALSE, echo=FALSE}</span></span>
<span id="cb377-75"><a href="#cb377-75" aria-hidden="true" tabindex="-1"></a><span class="in">setwd ("C:/Users/User/Desktop/Materials_ Course and proposals/VIP collection for Syntax code or project titles/R codes/Data Manipulation and Wrangling/")</span></span>
<span id="cb377-76"><a href="#cb377-76" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-77"><a href="#cb377-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-78"><a href="#cb377-78" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=FALSE}</span></span>
<span id="cb377-79"><a href="#cb377-79" aria-hidden="true" tabindex="-1"></a><span class="in">setwd("C:/Users/User/Desktop/Materials_ Course and proposals/")</span></span>
<span id="cb377-80"><a href="#cb377-80" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-81"><a href="#cb377-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-82"><a href="#cb377-82" aria-hidden="true" tabindex="-1"></a>Always make sure the folder path is in **quotation marks** and I use **forward slashes `/`** or double backslashes <span class="in">`\\`</span> when typing the path.</span>
<span id="cb377-83"><a href="#cb377-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-84"><a href="#cb377-84" aria-hidden="true" tabindex="-1"></a>üìå We can also set the working directory easily by clicking:</span>
<span id="cb377-85"><a href="#cb377-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-86"><a href="#cb377-86" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **Session ‚ûî Set Working Directory ‚ûî Choose Directory...**</span></span>
<span id="cb377-87"><a href="#cb377-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-88"><a href="#cb377-88" aria-hidden="true" tabindex="-1"></a>**üìö Note about API tokens and special folders:**</span>
<span id="cb377-89"><a href="#cb377-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-90"><a href="#cb377-90" aria-hidden="true" tabindex="-1"></a>If you are using R for connecting to APIs, cloud storage, or services like GitHub, Dropbox, or Google Drive,\</span>
<span id="cb377-91"><a href="#cb377-91" aria-hidden="true" tabindex="-1"></a>sometimes you will need to **set a working directory** where your **API token file** is stored (for authentication).</span>
<span id="cb377-92"><a href="#cb377-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-93"><a href="#cb377-93" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=FALSE}</span></span>
<span id="cb377-94"><a href="#cb377-94" aria-hidden="true" tabindex="-1"></a><span class="in">setwd("C:/Users/YourName/.credentials/") </span></span>
<span id="cb377-95"><a href="#cb377-95" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-96"><a href="#cb377-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-97"><a href="#cb377-97" aria-hidden="true" tabindex="-1"></a>‚ö†Ô∏è **Important**: Always make sure API tokens and confidential files are in a secure private directory.</span>
<span id="cb377-98"><a href="#cb377-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-99"><a href="#cb377-99" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Clearing environment and console**</span>
<span id="cb377-100"><a href="#cb377-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-101"><a href="#cb377-101" aria-hidden="true" tabindex="-1"></a>    <span class="in">```{r}</span></span>
<span id="cb377-102"><a href="#cb377-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-103"><a href="#cb377-103" aria-hidden="true" tabindex="-1"></a><span class="in">    # Clear environment and console</span></span>
<span id="cb377-104"><a href="#cb377-104" aria-hidden="true" tabindex="-1"></a><span class="in">    rm(list = ls()) # To clear the environment (remove all objects in memory)</span></span>
<span id="cb377-105"><a href="#cb377-105" aria-hidden="true" tabindex="-1"></a><span class="in">    cat("\014") # To clear the console (like wiping a whiteboard)</span></span>
<span id="cb377-106"><a href="#cb377-106" aria-hidden="true" tabindex="-1"></a><span class="in">    ```</span></span>
<span id="cb377-107"><a href="#cb377-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-108"><a href="#cb377-108" aria-hidden="true" tabindex="-1"></a>    Before starting fresh in any R session, I like to **clear out everything**‚Äîall variables, data, and even the clutter in the console.</span>
<span id="cb377-109"><a href="#cb377-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-110"><a href="#cb377-110" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Installing and loading packages**</span>
<span id="cb377-111"><a href="#cb377-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-112"><a href="#cb377-112" aria-hidden="true" tabindex="-1"></a>    We rely on a range of **packages** in R for data wrangling, visualization, dashboards, and reporting.\</span>
<span id="cb377-113"><a href="#cb377-113" aria-hidden="true" tabindex="-1"></a>    I typically create a vector of required packages and write a small loop to install any missing ones.</span>
<span id="cb377-114"><a href="#cb377-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-115"><a href="#cb377-115" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, message=FALSE, warning=FALSE, results='hide'}</span></span>
<span id="cb377-116"><a href="#cb377-116" aria-hidden="true" tabindex="-1"></a><span class="in"># ------------------ Set CRAN Repository ------------------</span></span>
<span id="cb377-117"><a href="#cb377-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-118"><a href="#cb377-118" aria-hidden="true" tabindex="-1"></a><span class="in">options(repos = c(CRAN = "https://cran.rstudio.com"))</span></span>
<span id="cb377-119"><a href="#cb377-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-120"><a href="#cb377-120" aria-hidden="true" tabindex="-1"></a><span class="in"># ------------------ List of required packages for Data Wrangling and Analysis ------------------</span></span>
<span id="cb377-121"><a href="#cb377-121" aria-hidden="true" tabindex="-1"></a><span class="in">packages &lt;- c(</span></span>
<span id="cb377-122"><a href="#cb377-122" aria-hidden="true" tabindex="-1"></a><span class="in">  "lubridate", "dplyr", "stringr", "zoo", "tsibble", "ggplot2", "plotly", </span></span>
<span id="cb377-123"><a href="#cb377-123" aria-hidden="true" tabindex="-1"></a><span class="in">  "readr", "readxl", "haven", "openxlsx", "labelled", "forecast",</span></span>
<span id="cb377-124"><a href="#cb377-124" aria-hidden="true" tabindex="-1"></a><span class="in">  "prettydoc", "janitor", "knitr", "rmarkdown", "yaml", </span></span>
<span id="cb377-125"><a href="#cb377-125" aria-hidden="true" tabindex="-1"></a><span class="in">  "flextable", "scales", "gt", "reactable", "DT", "gmodels", "Hmisc",</span></span>
<span id="cb377-126"><a href="#cb377-126" aria-hidden="true" tabindex="-1"></a><span class="in">  "tidyverse", "tidyr", "officer",</span></span>
<span id="cb377-127"><a href="#cb377-127" aria-hidden="true" tabindex="-1"></a><span class="in">  "shiny", "shinydashboard", "shinythemes", "mice", "shinyWidgets", "bslib", "quarto"</span></span>
<span id="cb377-128"><a href="#cb377-128" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb377-129"><a href="#cb377-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-130"><a href="#cb377-130" aria-hidden="true" tabindex="-1"></a><span class="in"># ------------------ Install and load packages ------------------</span></span>
<span id="cb377-131"><a href="#cb377-131" aria-hidden="true" tabindex="-1"></a><span class="in">for (pkg in packages) {</span></span>
<span id="cb377-132"><a href="#cb377-132" aria-hidden="true" tabindex="-1"></a><span class="in">  if (!require(pkg, character.only = TRUE)) {</span></span>
<span id="cb377-133"><a href="#cb377-133" aria-hidden="true" tabindex="-1"></a><span class="in">    install.packages(pkg)</span></span>
<span id="cb377-134"><a href="#cb377-134" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb377-135"><a href="#cb377-135" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb377-136"><a href="#cb377-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-137"><a href="#cb377-137" aria-hidden="true" tabindex="-1"></a><span class="in"># ------------------ Load required libraries with descriptions ------------------</span></span>
<span id="cb377-138"><a href="#cb377-138" aria-hidden="true" tabindex="-1"></a><span class="in">library(lubridate)     # Simplifies the manipulation of dates and times in R (e.g., formatting, extracting components)</span></span>
<span id="cb377-139"><a href="#cb377-139" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)         # Data manipulation: filtering, summarizing, and transforming data</span></span>
<span id="cb377-140"><a href="#cb377-140" aria-hidden="true" tabindex="-1"></a><span class="in">library(stringr)       # Simplifies string manipulation</span></span>
<span id="cb377-141"><a href="#cb377-141" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyr)         # Data tidying: reshaping with pivot_longer, pivot_wider, etc.</span></span>
<span id="cb377-142"><a href="#cb377-142" aria-hidden="true" tabindex="-1"></a><span class="in">library(purrr)         # Functional programming: map functions over lists/vectors</span></span>
<span id="cb377-143"><a href="#cb377-143" aria-hidden="true" tabindex="-1"></a><span class="in">library(forcats)       # Categorical data: reordering and labeling factor levels</span></span>
<span id="cb377-144"><a href="#cb377-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-145"><a href="#cb377-145" aria-hidden="true" tabindex="-1"></a><span class="in">library(zoo)           # Infrastructure for time series objects</span></span>
<span id="cb377-146"><a href="#cb377-146" aria-hidden="true" tabindex="-1"></a><span class="in">library(tsibble)       # Tidy temporal data frames and time series modeling</span></span>
<span id="cb377-147"><a href="#cb377-147" aria-hidden="true" tabindex="-1"></a><span class="in">library(forecast)      # Forecasting functions for time series models</span></span>
<span id="cb377-148"><a href="#cb377-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-149"><a href="#cb377-149" aria-hidden="true" tabindex="-1"></a><span class="in">library(readr)         # Read rectangular data like CSVs</span></span>
<span id="cb377-150"><a href="#cb377-150" aria-hidden="true" tabindex="-1"></a><span class="in">library(readxl)        # Read Excel files (.xls and .xlsx)</span></span>
<span id="cb377-151"><a href="#cb377-151" aria-hidden="true" tabindex="-1"></a><span class="in">library(haven)         # Import data from SAS, SPSS, and Stata</span></span>
<span id="cb377-152"><a href="#cb377-152" aria-hidden="true" tabindex="-1"></a><span class="in">library(openxlsx)      # Write to Excel with more control</span></span>
<span id="cb377-153"><a href="#cb377-153" aria-hidden="true" tabindex="-1"></a><span class="in">library(labelled)      # Attach and work with variable labels</span></span>
<span id="cb377-154"><a href="#cb377-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-155"><a href="#cb377-155" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggplot2)       # Create elegant data visualizations using the grammar of graphics</span></span>
<span id="cb377-156"><a href="#cb377-156" aria-hidden="true" tabindex="-1"></a><span class="in">library(plotly)        # Interactive visualizations using ggplot2 or standalone plotly</span></span>
<span id="cb377-157"><a href="#cb377-157" aria-hidden="true" tabindex="-1"></a><span class="in">library(scales)        # Provides scale functions for ggplot2 (e.g., log, percent)</span></span>
<span id="cb377-158"><a href="#cb377-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-159"><a href="#cb377-159" aria-hidden="true" tabindex="-1"></a><span class="in">library(janitor)       # Clean data: make column names nice, tabulate, etc.</span></span>
<span id="cb377-160"><a href="#cb377-160" aria-hidden="true" tabindex="-1"></a><span class="in">library(gmodels)       # CrossTables and other classic stats tools</span></span>
<span id="cb377-161"><a href="#cb377-161" aria-hidden="true" tabindex="-1"></a><span class="in">library(Hmisc)         # Summarization and advanced table/label handling</span></span>
<span id="cb377-162"><a href="#cb377-162" aria-hidden="true" tabindex="-1"></a><span class="in">library(mice)           # missing data imputation</span></span>
<span id="cb377-163"><a href="#cb377-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-164"><a href="#cb377-164" aria-hidden="true" tabindex="-1"></a><span class="in">library(knitr)         # Dynamic report generation in R</span></span>
<span id="cb377-165"><a href="#cb377-165" aria-hidden="true" tabindex="-1"></a><span class="in">library(rmarkdown)     # Convert R scripts to reports in various formats</span></span>
<span id="cb377-166"><a href="#cb377-166" aria-hidden="true" tabindex="-1"></a><span class="in">library(prettydoc)     # Beautiful HTML document templates</span></span>
<span id="cb377-167"><a href="#cb377-167" aria-hidden="true" tabindex="-1"></a><span class="in">library(yaml)          # Read and write YAML files (used in R Markdown, Quarto)</span></span>
<span id="cb377-168"><a href="#cb377-168" aria-hidden="true" tabindex="-1"></a><span class="in">library(officer)       # Export tables and reports to Word/PowerPoint</span></span>
<span id="cb377-169"><a href="#cb377-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-170"><a href="#cb377-170" aria-hidden="true" tabindex="-1"></a><span class="in">library(flextable)     # Create nicely formatted tables</span></span>
<span id="cb377-171"><a href="#cb377-171" aria-hidden="true" tabindex="-1"></a><span class="in">library(gt)            # Grammar of tables for HTML and PDF output</span></span>
<span id="cb377-172"><a href="#cb377-172" aria-hidden="true" tabindex="-1"></a><span class="in">library(reactable)     # Interactive data tables</span></span>
<span id="cb377-173"><a href="#cb377-173" aria-hidden="true" tabindex="-1"></a><span class="in">library(DT)            # Wrapper of JavaScript DataTables for R</span></span>
<span id="cb377-174"><a href="#cb377-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-175"><a href="#cb377-175" aria-hidden="true" tabindex="-1"></a><span class="in">library(shiny)         # Build interactive web applications directly from R</span></span>
<span id="cb377-176"><a href="#cb377-176" aria-hidden="true" tabindex="-1"></a><span class="in">library(shinydashboard)# Create dashboard layouts for Shiny apps</span></span>
<span id="cb377-177"><a href="#cb377-177" aria-hidden="true" tabindex="-1"></a><span class="in">library(shinythemes)   # Prebuilt UI themes for Shiny apps</span></span>
<span id="cb377-178"><a href="#cb377-178" aria-hidden="true" tabindex="-1"></a><span class="in">library(shinyWidgets)  # Enhanced UI widgets for Shiny</span></span>
<span id="cb377-179"><a href="#cb377-179" aria-hidden="true" tabindex="-1"></a><span class="in">library(bslib)         # Bootstrap themes for Shiny and rmarkdown</span></span>
<span id="cb377-180"><a href="#cb377-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-181"><a href="#cb377-181" aria-hidden="true" tabindex="-1"></a><span class="in">library(quarto)        # Rendering Quarto documents</span></span>
<span id="cb377-182"><a href="#cb377-182" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-183"><a href="#cb377-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-184"><a href="#cb377-184" aria-hidden="true" tabindex="-1"></a><span class="fu">### **1.2 R Syntax Symbols and Essentials**</span></span>
<span id="cb377-185"><a href="#cb377-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-186"><a href="#cb377-186" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Operators: <span class="in">`&lt;-`</span>, <span class="in">`%&gt;%`</span>, <span class="in">`==`</span>, <span class="in">`&amp;`</span>, <span class="in">`|`</span>, <span class="in">`~`</span></span>
<span id="cb377-187"><a href="#cb377-187" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Additional Operators: <span class="in">`%in%`</span>, <span class="in">`::`</span>, <span class="in">`%&lt;&gt;%`</span>, <span class="in">`|&gt;`</span></span>
<span id="cb377-188"><a href="#cb377-188" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Symbols: <span class="in">`()`</span>, <span class="in">`[]`</span>, <span class="in">`{}`</span>, <span class="in">`""`</span>, <span class="in">`#`</span></span>
<span id="cb377-189"><a href="#cb377-189" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Commenting, structure, and help functions (<span class="in">`?function`</span>, <span class="in">`args()`</span>)</span>
<span id="cb377-190"><a href="#cb377-190" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Using R scripts vs. R Markdown vs. Quarto</span>
<span id="cb377-191"><a href="#cb377-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-192"><a href="#cb377-192" aria-hidden="true" tabindex="-1"></a>In this section, we walk through the fundamental syntax building blocks of R.\</span>
<span id="cb377-193"><a href="#cb377-193" aria-hidden="true" tabindex="-1"></a>Mastering these basics helps write cleaner, more efficient, and more readable code.</span>
<span id="cb377-194"><a href="#cb377-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-195"><a href="#cb377-195" aria-hidden="true" tabindex="-1"></a>üîπ **Operators**</span>
<span id="cb377-196"><a href="#cb377-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-197"><a href="#cb377-197" aria-hidden="true" tabindex="-1"></a>In R, operators are used to perform operations on objects and values:</span>
<span id="cb377-198"><a href="#cb377-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-199"><a href="#cb377-199" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Assignment operators** (<span class="in">`&lt;-`</span>, <span class="in">`=`</span>) store values into objects.</span>
<span id="cb377-200"><a href="#cb377-200" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Pipe operators** (<span class="in">`%&gt;%`</span>, <span class="in">`%&lt;&gt;%`</span>, <span class="in">`|&gt;`</span>) allow chaining multiple commands together.</span>
<span id="cb377-201"><a href="#cb377-201" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Comparison operators** (<span class="in">`==`</span>, <span class="in">`!=`</span>, <span class="in">`&lt;`</span>, <span class="in">`&gt;`</span>) compare values for equality or relational logic.</span>
<span id="cb377-202"><a href="#cb377-202" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Logical operators** (<span class="in">`&amp;`</span>, <span class="in">`|`</span>, <span class="in">`!`</span>) build logical expressions (AND, OR, NOT).</span>
<span id="cb377-203"><a href="#cb377-203" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Formula operator** (<span class="in">`~`</span>) defines models and formulas, e.g., <span class="in">`y ~ x1 + x2`</span>.</span>
<span id="cb377-204"><a href="#cb377-204" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Membership operator** (<span class="in">`%in%`</span>) checks whether an element belongs to a set.</span>
<span id="cb377-205"><a href="#cb377-205" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Package access operator** (<span class="in">`::`</span>) calls a function from a package without loading the full package.</span>
<span id="cb377-206"><a href="#cb377-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-207"><a href="#cb377-207" aria-hidden="true" tabindex="-1"></a>üîπ **Symbols**</span>
<span id="cb377-208"><a href="#cb377-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-209"><a href="#cb377-209" aria-hidden="true" tabindex="-1"></a>Symbols are special characters used in structuring R code:</span>
<span id="cb377-210"><a href="#cb377-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-211"><a href="#cb377-211" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`()`</span> : Used for function calls and setting arguments.</span>
<span id="cb377-212"><a href="#cb377-212" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`[]`</span> : Indexing vectors, matrices, or data frames.</span>
<span id="cb377-213"><a href="#cb377-213" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`{}`</span> : Grouping multiple expressions into a code block.</span>
<span id="cb377-214"><a href="#cb377-214" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`""`</span> or <span class="in">`''`</span> : Define character strings.</span>
<span id="cb377-215"><a href="#cb377-215" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`#`</span> : Create comments that are ignored during code execution.</span>
<span id="cb377-216"><a href="#cb377-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-217"><a href="#cb377-217" aria-hidden="true" tabindex="-1"></a>üîπ **Help Functions**</span>
<span id="cb377-218"><a href="#cb377-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-219"><a href="#cb377-219" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`?function_name`</span> : Access the help documentation for any function.</span>
<span id="cb377-220"><a href="#cb377-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-221"><a href="#cb377-221" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`args(function_name)`</span> : Display the arguments a function accepts.</span>
<span id="cb377-222"><a href="#cb377-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-223"><a href="#cb377-223" aria-hidden="true" tabindex="-1"></a>    üîπ Scripting in .R, .Rmd, .qmd</span>
<span id="cb377-224"><a href="#cb377-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-225"><a href="#cb377-225" aria-hidden="true" tabindex="-1"></a>    | Format | Description | Best Use Case |</span>
<span id="cb377-226"><a href="#cb377-226" aria-hidden="true" tabindex="-1"></a>    |------------------|--------------------------|-----------------------------|</span>
<span id="cb377-227"><a href="#cb377-227" aria-hidden="true" tabindex="-1"></a>    | <span class="in">`.R`</span> | Basic R script. Contains code only, no formatting or output. | Exploratory coding, testing snippets |</span>
<span id="cb377-228"><a href="#cb377-228" aria-hidden="true" tabindex="-1"></a>    | <span class="in">`.Rmd`</span> | R Markdown file. Supports code + text + output in one file. | Reproducible reports, presentations, notebooks |</span>
<span id="cb377-229"><a href="#cb377-229" aria-hidden="true" tabindex="-1"></a>    | <span class="in">`.qmd`</span> | Quarto document. Successor to R Markdown with more flexible publishing. | Polished reports, web publishing, multi-language |</span>
<span id="cb377-230"><a href="#cb377-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-231"><a href="#cb377-231" aria-hidden="true" tabindex="-1"></a>üìä R Syntax Essentials Summary</span>
<span id="cb377-232"><a href="#cb377-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-233"><a href="#cb377-233" aria-hidden="true" tabindex="-1"></a>| **Element** | **Symbol / Syntax** | **What It Does** |</span>
<span id="cb377-234"><a href="#cb377-234" aria-hidden="true" tabindex="-1"></a>|:-----------------|:-----------------|:------------------------------------|</span>
<span id="cb377-235"><a href="#cb377-235" aria-hidden="true" tabindex="-1"></a>| Assignment | <span class="in">`&lt;-`</span>, <span class="in">`=`</span> | Assign a value to a variable (e.g., <span class="in">`x &lt;- 5`</span>) |</span>
<span id="cb377-236"><a href="#cb377-236" aria-hidden="true" tabindex="-1"></a>| Pipe | <span class="in">`%&gt;%`</span>, <span class="in">`%&lt;&gt;%`</span>, <span class="in">`|&gt;`</span> | Pass or transform results between functions |</span>
<span id="cb377-237"><a href="#cb377-237" aria-hidden="true" tabindex="-1"></a>| Comparison | <span class="in">`==`</span>, <span class="in">`!=`</span>, <span class="in">`&lt;`</span>, <span class="in">`&gt;`</span> | Compare values (equal, not equal, less than, etc.) |</span>
<span id="cb377-238"><a href="#cb377-238" aria-hidden="true" tabindex="-1"></a>| Logical | <span class="in">`&amp;`</span>, <span class="in">`|`</span>, <span class="in">`!`</span> | Logical conditions: AND, OR, NOT |</span>
<span id="cb377-239"><a href="#cb377-239" aria-hidden="true" tabindex="-1"></a>| Formula | <span class="in">`~`</span> | Define model formulas (e.g., <span class="in">`y ~ x1 + x2`</span>) |</span>
<span id="cb377-240"><a href="#cb377-240" aria-hidden="true" tabindex="-1"></a>| Membership Test | <span class="in">`%in%`</span> | Check if an element exists within a vector |</span>
<span id="cb377-241"><a href="#cb377-241" aria-hidden="true" tabindex="-1"></a>| Package Function Access | <span class="in">`::`</span> | Call a function from a specific package without loading it |</span>
<span id="cb377-242"><a href="#cb377-242" aria-hidden="true" tabindex="-1"></a>| Function Call | <span class="in">`()`</span> | Call a function with arguments (e.g., <span class="in">`mean(x)`</span>) |</span>
<span id="cb377-243"><a href="#cb377-243" aria-hidden="true" tabindex="-1"></a>| Indexing | <span class="in">`[]`</span> | Access parts of data structures (e.g., <span class="in">`x[1]`</span>, <span class="in">`df[2,3]`</span>) |</span>
<span id="cb377-244"><a href="#cb377-244" aria-hidden="true" tabindex="-1"></a>| Code Block | <span class="in">`{}`</span> | Group multiple lines (loops, conditionals) |</span>
<span id="cb377-245"><a href="#cb377-245" aria-hidden="true" tabindex="-1"></a>| Strings | <span class="in">`"text"`</span>, <span class="in">`'text'`</span> | Define character strings |</span>
<span id="cb377-246"><a href="#cb377-246" aria-hidden="true" tabindex="-1"></a>| Commenting | <span class="in">`#`</span> | Insert a comment ignored by R |</span>
<span id="cb377-247"><a href="#cb377-247" aria-hidden="true" tabindex="-1"></a>| Help Functions | <span class="in">`?function`</span>, <span class="in">`args(function)`</span> | Access help or check function arguments |</span>
<span id="cb377-248"><a href="#cb377-248" aria-hidden="true" tabindex="-1"></a>| Output Format | <span class="in">`.R`</span>, <span class="in">`.Rmd`</span>, <span class="in">`.qmd`</span> | File formats for scripting or reporting |</span>
<span id="cb377-249"><a href="#cb377-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-250"><a href="#cb377-250" aria-hidden="true" tabindex="-1"></a>?mean <span class="sc">\#</span> Opens the help page for the 'mean' function</span>
<span id="cb377-251"><a href="#cb377-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-252"><a href="#cb377-252" aria-hidden="true" tabindex="-1"></a>args(mean) <span class="sc">\#</span> Lists input arguments for 'mean'</span>
<span id="cb377-253"><a href="#cb377-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-254"><a href="#cb377-254" aria-hidden="true" tabindex="-1"></a><span class="fu">### **1.3 Keyboard Shortcut and Functions**</span></span>
<span id="cb377-255"><a href="#cb377-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-256"><a href="#cb377-256" aria-hidden="true" tabindex="-1"></a>In this section, I highlight essential RStudio shortcut keys that improve coding efficiency and simplify the workflow for scripting and reporting.</span>
<span id="cb377-257"><a href="#cb377-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-258"><a href="#cb377-258" aria-hidden="true" tabindex="-1"></a>| **Shortcut**       | **Action**                                   |</span>
<span id="cb377-259"><a href="#cb377-259" aria-hidden="true" tabindex="-1"></a>|:-------------------|:---------------------------------------------|</span>
<span id="cb377-260"><a href="#cb377-260" aria-hidden="true" tabindex="-1"></a>| <span class="in">`Ctrl + Z`</span>         | Undo the last action                         |</span>
<span id="cb377-261"><a href="#cb377-261" aria-hidden="true" tabindex="-1"></a>| <span class="in">`Ctrl + Shift + Z`</span> | Redo the undone action                       |</span>
<span id="cb377-262"><a href="#cb377-262" aria-hidden="true" tabindex="-1"></a>| <span class="in">`Ctrl + Enter`</span>     | Execute the current line or selected block   |</span>
<span id="cb377-263"><a href="#cb377-263" aria-hidden="true" tabindex="-1"></a>| <span class="in">`Alt + -`</span>          | Insert assignment operator <span class="in">`&lt;-`</span>              |</span>
<span id="cb377-264"><a href="#cb377-264" aria-hidden="true" tabindex="-1"></a>| <span class="in">`Ctrl + Shift + M`</span> | Insert pipe operator <span class="in">`%&gt;%`</span>                   |</span>
<span id="cb377-265"><a href="#cb377-265" aria-hidden="true" tabindex="-1"></a>| <span class="in">`Ctrl + L`</span>         | Clear the console output                     |</span>
<span id="cb377-266"><a href="#cb377-266" aria-hidden="true" tabindex="-1"></a>| <span class="in">`Ctrl + Shift + C`</span> | Comment or uncomment selected lines          |</span>
<span id="cb377-267"><a href="#cb377-267" aria-hidden="true" tabindex="-1"></a>| <span class="in">`Ctrl + Shift + S`</span> | Source and run the entire script             |</span>
<span id="cb377-268"><a href="#cb377-268" aria-hidden="true" tabindex="-1"></a>| <span class="in">`Ctrl + Alt + I`</span>   | Insert a new R Markdown or Quarto code chunk |</span>
<span id="cb377-269"><a href="#cb377-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-270"><a href="#cb377-270" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-271"><a href="#cb377-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-272"><a href="#cb377-272" aria-hidden="true" tabindex="-1"></a><span class="fu">### **1.4. Terms and Definitions: R Objects**</span></span>
<span id="cb377-273"><a href="#cb377-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-274"><a href="#cb377-274" aria-hidden="true" tabindex="-1"></a>Element \| Vector \| Matrix \| \|Data Frame \| Data Table \| List \| Factor \| Variable \| Object</span>
<span id="cb377-275"><a href="#cb377-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-276"><a href="#cb377-276" aria-hidden="true" tabindex="-1"></a>This section provides a brief overview of foundational R data structures.\</span>
<span id="cb377-277"><a href="#cb377-277" aria-hidden="true" tabindex="-1"></a>For more detailed explanations and demonstrations, refer to:</span>
<span id="cb377-278"><a href="#cb377-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-279"><a href="#cb377-279" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">YouTube: AnalyticsHub</span><span class="co">](https://studio.youtube.com/channel/UCLVKP0g8GvHhOh0kn20T8eg/videos/upload?filter=%5B%5D&amp;sort=%7B%22columnType%22%3A%22date%22%2C%22sortOrder%22%3A%22DESCENDING%22%7D)</span></span>
<span id="cb377-280"><a href="#cb377-280" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">GitHub: HabtamuBizuayehu Repositories</span><span class="co">](https://github.com/HabtamuBizuayehu?tab=repositories)</span></span>
<span id="cb377-281"><a href="#cb377-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-282"><a href="#cb377-282" aria-hidden="true" tabindex="-1"></a>Understanding these fundamental terms is essential for working effectively with R data analysis and wrangling.</span>
<span id="cb377-283"><a href="#cb377-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-284"><a href="#cb377-284" aria-hidden="true" tabindex="-1"></a>üîπ **Brief Narration of Key Terms**</span>
<span id="cb377-285"><a href="#cb377-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-286"><a href="#cb377-286" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Element**: A single piece of data, such as a number or a character.</span>
<span id="cb377-287"><a href="#cb377-287" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Vector**: An ordered collection of elements of the same type (numeric, character, logical).</span>
<span id="cb377-288"><a href="#cb377-288" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Matrix**: A two-dimensional collection of elements arranged by rows and columns, all of the same type.</span>
<span id="cb377-289"><a href="#cb377-289" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Data Frame**: A two-dimensional table where each column can contain different types of data (numeric, character, factor).</span>
<span id="cb377-290"><a href="#cb377-290" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Data Table**: A high-performance extension from the **`data.table`** package ‚Äî for very large datasets and faster manipulation.</span>
<span id="cb377-291"><a href="#cb377-291" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**List**: A flexible container that can hold elements of different types and structures (vectors, data frames, even other lists).</span>
<span id="cb377-292"><a href="#cb377-292" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Factor**: A special type of vector used for categorical data, storing levels internally.</span>
<span id="cb377-293"><a href="#cb377-293" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Variable**: A named object that holds data (vectors, lists, data frames, etc.).</span>
<span id="cb377-294"><a href="#cb377-294" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Object**: A general term for any data structure stored in R.</span>
<span id="cb377-295"><a href="#cb377-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-296"><a href="#cb377-296" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-297"><a href="#cb377-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-298"><a href="#cb377-298" aria-hidden="true" tabindex="-1"></a>**üîç Summary Table: R Objects**</span>
<span id="cb377-299"><a href="#cb377-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-300"><a href="#cb377-300" aria-hidden="true" tabindex="-1"></a>| **Term** | **Definition** |</span>
<span id="cb377-301"><a href="#cb377-301" aria-hidden="true" tabindex="-1"></a>|:-----------------|:-----------------------------------------------------|</span>
<span id="cb377-302"><a href="#cb377-302" aria-hidden="true" tabindex="-1"></a>| Element | A single unit of data (e.g., <span class="in">`5`</span>, <span class="in">`"apple"`</span>) |</span>
<span id="cb377-303"><a href="#cb377-303" aria-hidden="true" tabindex="-1"></a>| Vector | A sequence of elements of the same type |</span>
<span id="cb377-304"><a href="#cb377-304" aria-hidden="true" tabindex="-1"></a>| Matrix | A two-dimensional collection of homogeneous elements |</span>
<span id="cb377-305"><a href="#cb377-305" aria-hidden="true" tabindex="-1"></a>| Data Frame | A two-dimensional table with heterogeneous column types |</span>
<span id="cb377-306"><a href="#cb377-306" aria-hidden="true" tabindex="-1"></a>| Data Table | A fast and memory-efficient data frame extension (<span class="in">`data.table`</span> package) |</span>
<span id="cb377-307"><a href="#cb377-307" aria-hidden="true" tabindex="-1"></a>| List | A flexible container for different types of elements |</span>
<span id="cb377-308"><a href="#cb377-308" aria-hidden="true" tabindex="-1"></a>| Factor | A categorical variable with predefined levels |</span>
<span id="cb377-309"><a href="#cb377-309" aria-hidden="true" tabindex="-1"></a>| Variable | A named object that stores data |</span>
<span id="cb377-310"><a href="#cb377-310" aria-hidden="true" tabindex="-1"></a>| Object | Any entity stored in R (data, functions, models, etc.) |</span>
<span id="cb377-311"><a href="#cb377-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-312"><a href="#cb377-312" aria-hidden="true" tabindex="-1"></a><span class="fu">### 1.5. Quarto and R Markdown Options</span></span>
<span id="cb377-313"><a href="#cb377-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-314"><a href="#cb377-314" aria-hidden="true" tabindex="-1"></a>This section summarizes key chunk options and syntax used in Quarto and R Markdown.\</span>
<span id="cb377-315"><a href="#cb377-315" aria-hidden="true" tabindex="-1"></a>These settings allow flexible control over code execution, output display, figure formatting, and reporting behavior.</span>
<span id="cb377-316"><a href="#cb377-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-317"><a href="#cb377-317" aria-hidden="true" tabindex="-1"></a><span class="fu">## üîç Summary: Quarto and R Markdown Chunk Options</span></span>
<span id="cb377-318"><a href="#cb377-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-319"><a href="#cb377-319" aria-hidden="true" tabindex="-1"></a>| **Feature** | **Quarto Syntax** | **Description** |</span>
<span id="cb377-320"><a href="#cb377-320" aria-hidden="true" tabindex="-1"></a>|:-----------------|:-----------------|:----------------------------------|</span>
<span id="cb377-321"><a href="#cb377-321" aria-hidden="true" tabindex="-1"></a>| Code Chunks | <span class="in">`{r}`</span> | Used to write and execute R code. You can specify options like echo, results. |</span>
<span id="cb377-322"><a href="#cb377-322" aria-hidden="true" tabindex="-1"></a>| Echoing Code | <span class="in">`echo: true`</span> | Displays the code in the output (default is true). Set to <span class="in">`false`</span> to hide the code. |</span>
<span id="cb377-323"><a href="#cb377-323" aria-hidden="true" tabindex="-1"></a>| Include Code | <span class="in">`include: false`</span> | Executes code but does not show the code in the final output. |</span>
<span id="cb377-324"><a href="#cb377-324" aria-hidden="true" tabindex="-1"></a>| Evaluating Code | <span class="in">`eval: false`</span> | Prevents the code from running but still displays the code in the output. |</span>
<span id="cb377-325"><a href="#cb377-325" aria-hidden="true" tabindex="-1"></a>| Results Control | <span class="in">`results: 'markup'`</span> or <span class="in">`results: 'asis'`</span> | Controls how output results are displayed (formatted or raw). |</span>
<span id="cb377-326"><a href="#cb377-326" aria-hidden="true" tabindex="-1"></a>| Message and Warnings | <span class="in">`message: false`</span>, <span class="in">`warning: false`</span> | Controls whether messages and warnings appear in the output. |</span>
<span id="cb377-327"><a href="#cb377-327" aria-hidden="true" tabindex="-1"></a>| Output File Format | <span class="in">`output: html`</span> | Specifies output format (html, pdf, word). Default is html. |</span>
<span id="cb377-328"><a href="#cb377-328" aria-hidden="true" tabindex="-1"></a>| Table Output | <span class="in">`results: 'asis'`</span> or <span class="in">`results: 'markup'`</span> | Ensures clean table rendering for formatted output. |</span>
<span id="cb377-329"><a href="#cb377-329" aria-hidden="true" tabindex="-1"></a>| Chunk Labeling | <span class="in">`# Label`</span> | Labels help organize and reference code chunks easily. |</span>
<span id="cb377-330"><a href="#cb377-330" aria-hidden="true" tabindex="-1"></a>| Inline Code | <span class="in">`r paste('Your value is', 2, 'times.')`</span> | Embeds live code inside text for dynamic reporting. |</span>
<span id="cb377-331"><a href="#cb377-331" aria-hidden="true" tabindex="-1"></a>| Caching Results | <span class="in">`cache: true`</span> | Saves chunk results to avoid rerunning unchanged code. It stores the output (like objects, plots, and printed results) in a cache directory |</span>
<span id="cb377-332"><a href="#cb377-332" aria-hidden="true" tabindex="-1"></a>| Figure Options | <span class="in">`fig.width: 7`</span>, <span class="in">`fig.height: 5`</span>, <span class="in">`fig.align: 'center'`</span> | Adjusts figure size and alignment in output documents. |</span>
<span id="cb377-333"><a href="#cb377-333" aria-hidden="true" tabindex="-1"></a>| Output as LaTeX | <span class="in">`latex: true`</span> | Allows LaTeX formatting (mainly for PDFs and math expressions). |</span>
<span id="cb377-334"><a href="#cb377-334" aria-hidden="true" tabindex="-1"></a>| Commenting Code | <span class="in">`# (within chunks)`</span> | Standard way to comment within R code chunks. |</span>
<span id="cb377-335"><a href="#cb377-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-336"><a href="#cb377-336" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è Mastering these options ensures smoother report generation, cleaner outputs, and faster rendering when building professional documents in Quarto or R Markdown.</span>
<span id="cb377-337"><a href="#cb377-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-338"><a href="#cb377-338" aria-hidden="true" tabindex="-1"></a><span class="fu">## **PART II: DATA LOADING AND EXPLORATION**</span></span>
<span id="cb377-339"><a href="#cb377-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-340"><a href="#cb377-340" aria-hidden="true" tabindex="-1"></a><span class="fu">### **2.1 Reading and Importing Data**</span></span>
<span id="cb377-341"><a href="#cb377-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-342"><a href="#cb377-342" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>File path setup and working with <span class="in">`getwd()`</span>, <span class="in">`paste()`</span></span>
<span id="cb377-343"><a href="#cb377-343" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`read_csv()`</span>, <span class="in">`read_excel()`</span>, <span class="in">`read.delim()`</span>, <span class="in">`readRDS()`</span></span>
<span id="cb377-344"><a href="#cb377-344" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Reading <span class="in">`.tsv`</span>, <span class="in">`.dta`</span>, and <span class="in">`.sav`</span> files (foreign and haven packages)</span>
<span id="cb377-345"><a href="#cb377-345" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Reading from ZIP Files</span>
<span id="cb377-346"><a href="#cb377-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-347"><a href="#cb377-347" aria-hidden="true" tabindex="-1"></a>Before we begin analyzing data in R, we need to **bring it in** from where it's stored‚Äîyour computer, the cloud, or an online source.</span>
<span id="cb377-348"><a href="#cb377-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-349"><a href="#cb377-349" aria-hidden="true" tabindex="-1"></a>There are many formats we commonly work with in public health and analytics: CSV, Excel, text files, RDS, SPSS, and others.\</span>
<span id="cb377-350"><a href="#cb377-350" aria-hidden="true" tabindex="-1"></a>Below is a **summary table** of functions used to read each data type.</span>
<span id="cb377-351"><a href="#cb377-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-352"><a href="#cb377-352" aria-hidden="true" tabindex="-1"></a>üìä **Reading Common Data Types in R**</span>
<span id="cb377-353"><a href="#cb377-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-354"><a href="#cb377-354" aria-hidden="true" tabindex="-1"></a>| **Data Type** | **Function** | **Package** | **Example** |</span>
<span id="cb377-355"><a href="#cb377-355" aria-hidden="true" tabindex="-1"></a>|-----------------|-----------------|-----------------|-----------------------|</span>
<span id="cb377-356"><a href="#cb377-356" aria-hidden="true" tabindex="-1"></a>| CSV | <span class="in">`read_csv()`</span>, <span class="in">`read.csv()`</span> | readr / base | <span class="in">`read_csv("file.csv")`</span> |</span>
<span id="cb377-357"><a href="#cb377-357" aria-hidden="true" tabindex="-1"></a>| Excel (.xls/.xlsx) | <span class="in">`read_excel()`</span> | readxl | <span class="in">`read_excel("file.xlsx")`</span> |</span>
<span id="cb377-358"><a href="#cb377-358" aria-hidden="true" tabindex="-1"></a>| Tab-separated (.tsv) | <span class="in">`read_tsv()`</span> | readr | <span class="in">`read_tsv("file.tsv")`</span> |</span>
<span id="cb377-359"><a href="#cb377-359" aria-hidden="true" tabindex="-1"></a>| Text (.txt) | <span class="in">`read.delim()`</span> | base | <span class="in">`read.delim("file.txt")`</span> |</span>
<span id="cb377-360"><a href="#cb377-360" aria-hidden="true" tabindex="-1"></a>| Stata (.dta) | <span class="in">`read_dta()`</span> | haven | <span class="in">`read_dta("file.dta")`</span> |</span>
<span id="cb377-361"><a href="#cb377-361" aria-hidden="true" tabindex="-1"></a>| SPSS (.sav) | <span class="in">`read_sav()`</span> | haven | <span class="in">`read_sav("file.sav")`</span> |</span>
<span id="cb377-362"><a href="#cb377-362" aria-hidden="true" tabindex="-1"></a>| RDS (R object) | <span class="in">`readRDS()`</span> | base | <span class="in">`readRDS("object.rds")`</span> |</span>
<span id="cb377-363"><a href="#cb377-363" aria-hidden="true" tabindex="-1"></a>| ZIP archives | <span class="in">`unzip()`</span> | utils (base) | <span class="in">`unzip("data.zip", exdir = "folder")`</span> |</span>
<span id="cb377-364"><a href="#cb377-364" aria-hidden="true" tabindex="-1"></a>| Online Excel/CSV | <span class="in">`download.file()`</span> + reader | base + readxl | Download file, then <span class="in">`read_excel(temp_file)`</span> |</span>
<span id="cb377-365"><a href="#cb377-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-366"><a href="#cb377-366" aria-hidden="true" tabindex="-1"></a>Before reading files, I usually set the working directory to the folder where my files are saved. This avoids typing full file paths every time.</span>
<span id="cb377-367"><a href="#cb377-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-368"><a href="#cb377-368" aria-hidden="true" tabindex="-1"></a>To combine folder names and filenames dynamically: paste(getwd(), "my_data.csv", sep = "/")</span>
<span id="cb377-369"><a href="#cb377-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-370"><a href="#cb377-370" aria-hidden="true" tabindex="-1"></a>**Reading Local Files**</span>
<span id="cb377-371"><a href="#cb377-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-372"><a href="#cb377-372" aria-hidden="true" tabindex="-1"></a>Once you're in the right working directory, you can read in your files like below:</span>
<span id="cb377-373"><a href="#cb377-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-376"><a href="#cb377-376" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-377"><a href="#cb377-377" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/User/Desktop/Materials_ Course and proposals/Course Related/DataCamp/Data/Synthetic_data"</span>)</span>
<span id="cb377-378"><a href="#cb377-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-379"><a href="#cb377-379" aria-hidden="true" tabindex="-1"></a>patients <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"patients.csv"</span>)</span>
<span id="cb377-380"><a href="#cb377-380" aria-hidden="true" tabindex="-1"></a>vaccination <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"immunizations.csv"</span>)</span>
<span id="cb377-381"><a href="#cb377-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-382"><a href="#cb377-382" aria-hidden="true" tabindex="-1"></a>medications <span class="ot">&lt;-</span> <span class="fu">read.csv</span> (<span class="fu">paste</span>(<span class="fu">getwd</span>(), <span class="st">"medications.csv"</span>, <span class="at">sep =</span> <span class="st">"/"</span>))</span>
<span id="cb377-383"><a href="#cb377-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-384"><a href="#cb377-384" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-385"><a href="#cb377-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-386"><a href="#cb377-386" aria-hidden="true" tabindex="-1"></a>These are **standard CSVs** and can be read using <span class="in">`read.csv()`</span> from base R, or <span class="in">`read_csv()`</span> from the <span class="in">`readr`</span> package for cleaner output.</span>
<span id="cb377-387"><a href="#cb377-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-388"><a href="#cb377-388" aria-hidden="true" tabindex="-1"></a>**Reading from ZIP Files**</span>
<span id="cb377-389"><a href="#cb377-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-390"><a href="#cb377-390" aria-hidden="true" tabindex="-1"></a>Sometimes, especially when downloading from government databases or health systems, data is compressed into <span class="in">`.zip`</span> files. In R, we can easily unzip these files and extract their contents.</span>
<span id="cb377-391"><a href="#cb377-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-392"><a href="#cb377-392" aria-hidden="true" tabindex="-1"></a>**Set working directory to the folder where the zip file is located**</span>
<span id="cb377-393"><a href="#cb377-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-396"><a href="#cb377-396" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-397"><a href="#cb377-397" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Define base folder manually (safe way without setwd)</span></span>
<span id="cb377-398"><a href="#cb377-398" aria-hidden="true" tabindex="-1"></a>base_folder <span class="ot">&lt;-</span> <span class="st">"C:/Users/User/Desktop/Materials_ Course and proposals/Course Related/DataCamp/Data/Synthetic_data"</span></span>
<span id="cb377-399"><a href="#cb377-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-400"><a href="#cb377-400" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Extract ZIP file into 'procedures' folder inside base</span></span>
<span id="cb377-401"><a href="#cb377-401" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span>(<span class="fu">file.path</span>(base_folder, <span class="st">"procedures.zip"</span>), <span class="at">exdir =</span> <span class="fu">file.path</span>(base_folder, <span class="st">"procedures"</span>))</span>
<span id="cb377-402"><a href="#cb377-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-403"><a href="#cb377-403" aria-hidden="true" tabindex="-1"></a><span class="co"># --- List extracted files</span></span>
<span id="cb377-404"><a href="#cb377-404" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>(<span class="fu">file.path</span>(base_folder, <span class="st">"procedures"</span>))</span>
<span id="cb377-405"><a href="#cb377-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-406"><a href="#cb377-406" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Read extracted CSV</span></span>
<span id="cb377-407"><a href="#cb377-407" aria-hidden="true" tabindex="-1"></a>procedures <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">file.path</span>(base_folder, <span class="st">"procedures"</span>, <span class="st">"procedures.csv"</span>))</span>
<span id="cb377-408"><a href="#cb377-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-409"><a href="#cb377-409" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-410"><a href="#cb377-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-411"><a href="#cb377-411" aria-hidden="true" tabindex="-1"></a>**Reading Online Files**</span>
<span id="cb377-412"><a href="#cb377-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-413"><a href="#cb377-413" aria-hidden="true" tabindex="-1"></a>If the file is online, we first **download it**, save it to a **temporary file**, and then read it:</span>
<span id="cb377-414"><a href="#cb377-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-415"><a href="#cb377-415" aria-hidden="true" tabindex="-1"></a>It is useful when working with **shared datasets, APIs, or GitHub repos**.</span>
<span id="cb377-416"><a href="#cb377-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-419"><a href="#cb377-419" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-420"><a href="#cb377-420" aria-hidden="true" tabindex="-1"></a><span class="co"># Upload Online data</span></span>
<span id="cb377-421"><a href="#cb377-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-422"><a href="#cb377-422" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/HabtamuBizuayehu/Data-sources/main/Breast_cancer_screening.xls"</span></span>
<span id="cb377-423"><a href="#cb377-423" aria-hidden="true" tabindex="-1"></a>temp_file <span class="ot">&lt;-</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">".xls"</span>)</span>
<span id="cb377-424"><a href="#cb377-424" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(url, temp_file, <span class="at">mode =</span> <span class="st">"wb"</span>)</span>
<span id="cb377-425"><a href="#cb377-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-426"><a href="#cb377-426" aria-hidden="true" tabindex="-1"></a>breast_cancer_data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(temp_file)</span>
<span id="cb377-427"><a href="#cb377-427" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-428"><a href="#cb377-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-429"><a href="#cb377-429" aria-hidden="true" tabindex="-1"></a>**2.2 Exploring Data**</span>
<span id="cb377-430"><a href="#cb377-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-431"><a href="#cb377-431" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`str()`</span>, <span class="in">`summary()`</span>, <span class="in">`glimpse()`</span>, <span class="in">`head()`</span>, <span class="in">`tail()`</span>, <span class="in">`count()`</span></span>
<span id="cb377-432"><a href="#cb377-432" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Viewing data: <span class="in">`view()`</span>, <span class="in">`nrow()`</span>, <span class="in">`ncol()`</span></span>
<span id="cb377-433"><a href="#cb377-433" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Cleaning variable names: <span class="in">`janitor::clean_names()`</span></span>
<span id="cb377-434"><a href="#cb377-434" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Creating a data dictionary</span>
<span id="cb377-435"><a href="#cb377-435" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Working with column names and types</span>
<span id="cb377-436"><a href="#cb377-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-437"><a href="#cb377-437" aria-hidden="true" tabindex="-1"></a>Once we load data into R, it‚Äôs important to **explore it properly** before doing any analysis.\</span>
<span id="cb377-438"><a href="#cb377-438" aria-hidden="true" tabindex="-1"></a>This step helps us **understand**:</span>
<span id="cb377-439"><a href="#cb377-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-440"><a href="#cb377-440" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>What variables we have</span>
<span id="cb377-441"><a href="#cb377-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-442"><a href="#cb377-442" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>How the data is structured</span>
<span id="cb377-443"><a href="#cb377-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-444"><a href="#cb377-444" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>If there are any issues (like missing values, wrong data types, weird names)</span>
<span id="cb377-445"><a href="#cb377-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-446"><a href="#cb377-446" aria-hidden="true" tabindex="-1"></a>In this part, we'll look at some essential functions we often use at the very beginning of a project.</span>
<span id="cb377-447"><a href="#cb377-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-448"><a href="#cb377-448" aria-hidden="true" tabindex="-1"></a>üîç **Key Tools for Exploring Data (with Important Details and Tips)**</span>
<span id="cb377-449"><a href="#cb377-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-450"><a href="#cb377-450" aria-hidden="true" tabindex="-1"></a>**1. `str()`, `summary()`, `glimpse()`, `head()`, `tail()`, `count()`**</span>
<span id="cb377-451"><a href="#cb377-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-452"><a href="#cb377-452" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`str(df)`</span> shows the **structure of the entire dataset**: number of observations (rows), number of variables (columns), and data types.</span>
<span id="cb377-453"><a href="#cb377-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-454"><a href="#cb377-454" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`str(df$var)`</span> shows the **structure of a specific variable** (single column), useful to quickly check type and contents.</span>
<span id="cb377-455"><a href="#cb377-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-456"><a href="#cb377-456" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`summary(df)`</span> gives **basic descriptive statistics** for **all variables** at once.</span>
<span id="cb377-457"><a href="#cb377-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-458"><a href="#cb377-458" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`summary(df$var)`</span> gives a **summary for one specific variable**.</span>
<span id="cb377-459"><a href="#cb377-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-460"><a href="#cb377-460" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`glimpse(df)`</span> (from <span class="in">`dplyr`</span>) provides a **compact sideways overview** showing each variable name, type, and preview of values.</span>
<span id="cb377-461"><a href="#cb377-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-462"><a href="#cb377-462" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`head(df)`</span> shows the **first 6 rows** of the dataset by default.</span>
<span id="cb377-463"><a href="#cb377-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-464"><a href="#cb377-464" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`head(df, n = 10)`</span> shows the **first 10 rows** (you can customize the number with <span class="in">`n =`</span>).</span>
<span id="cb377-465"><a href="#cb377-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-466"><a href="#cb377-466" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`tail(df)`</span> shows the **last 6 rows** of the dataset.</span>
<span id="cb377-467"><a href="#cb377-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-468"><a href="#cb377-468" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`tail(df, n = 8)`</span> shows the **last 8 rows**.</span>
<span id="cb377-469"><a href="#cb377-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-470"><a href="#cb377-470" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`count(df, var)`</span> (from <span class="in">`dplyr`</span>) **counts occurrences** of each unique value in a variable.</span>
<span id="cb377-471"><a href="#cb377-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-472"><a href="#cb377-472" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è Using <span class="in">`str(df$var)`</span> and <span class="in">`summary(df$var)`</span> is a fast way to inspect just **one column** without needing the whole dataset.</span>
<span id="cb377-473"><a href="#cb377-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-474"><a href="#cb377-474" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-475"><a href="#cb377-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-476"><a href="#cb377-476" aria-hidden="true" tabindex="-1"></a>**2. Viewing Data**</span>
<span id="cb377-477"><a href="#cb377-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-478"><a href="#cb377-478" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`view(df)`</span> opens an **Excel-like data viewer window** inside RStudio for easy manual exploration.</span>
<span id="cb377-479"><a href="#cb377-479" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`nrow(df)`</span> returns the **number of rows**.</span>
<span id="cb377-480"><a href="#cb377-480" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`ncol(df)`</span> returns the **number of columns**.</span>
<span id="cb377-481"><a href="#cb377-481" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`dim(df)`</span> returns a **two-number vector**: (rows, columns).</span>
<span id="cb377-482"><a href="#cb377-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-483"><a href="#cb377-483" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è Use <span class="in">`view(df)`</span> when you want to **sort/filter manually** without coding.</span>
<span id="cb377-484"><a href="#cb377-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-485"><a href="#cb377-485" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-486"><a href="#cb377-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-487"><a href="#cb377-487" aria-hidden="true" tabindex="-1"></a>**3. Cleaning Variable Names**</span>
<span id="cb377-488"><a href="#cb377-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-489"><a href="#cb377-489" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`janitor::clean_names(df)`</span> standardizes messy variable names:</span>
<span id="cb377-490"><a href="#cb377-490" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Makes all names **lowercase**</span>
<span id="cb377-491"><a href="#cb377-491" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>**Replaces spaces and special characters** with underscores</span>
<span id="cb377-492"><a href="#cb377-492" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Removes parentheses, punctuation, etc.</span>
<span id="cb377-493"><a href="#cb377-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-494"><a href="#cb377-494" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è Run <span class="in">`clean_names()`</span> immediately after loading raw survey, registry, or administrative datasets.</span>
<span id="cb377-495"><a href="#cb377-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-496"><a href="#cb377-496" aria-hidden="true" tabindex="-1"></a>Example:</span>
<span id="cb377-497"><a href="#cb377-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-500"><a href="#cb377-500" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-501"><a href="#cb377-501" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(patients)</span>
<span id="cb377-502"><a href="#cb377-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-503"><a href="#cb377-503" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(patients)</span>
<span id="cb377-504"><a href="#cb377-504" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(temp)</span>
<span id="cb377-505"><a href="#cb377-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-506"><a href="#cb377-506" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(temp)</span>
<span id="cb377-507"><a href="#cb377-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-508"><a href="#cb377-508" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-509"><a href="#cb377-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-510"><a href="#cb377-510" aria-hidden="true" tabindex="-1"></a>üîç **Listing All Data Frames and Variables**</span>
<span id="cb377-511"><a href="#cb377-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-512"><a href="#cb377-512" aria-hidden="true" tabindex="-1"></a>To organize and review datasets loaded in the environment, the following workflow lists all data frames and their variables:</span>
<span id="cb377-513"><a href="#cb377-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-516"><a href="#cb377-516" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-517"><a href="#cb377-517" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> (breast_cancer_data, patients)</span>
<span id="cb377-518"><a href="#cb377-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-519"><a href="#cb377-519" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. List all data frames in the environment</span></span>
<span id="cb377-520"><a href="#cb377-520" aria-hidden="true" tabindex="-1"></a>dfs <span class="ot">&lt;-</span> <span class="fu">ls</span>(<span class="at">envir =</span> .GlobalEnv)[<span class="fu">sapply</span>(<span class="fu">ls</span>(<span class="at">envir =</span> .GlobalEnv), <span class="cf">function</span>(x) <span class="fu">is.data.frame</span>(<span class="fu">get</span>(x)))]</span>
<span id="cb377-521"><a href="#cb377-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-522"><a href="#cb377-522" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. For each data frame, list its variable (column) names</span></span>
<span id="cb377-523"><a href="#cb377-523" aria-hidden="true" tabindex="-1"></a>df_variables <span class="ot">&lt;-</span> <span class="fu">lapply</span>(dfs, <span class="cf">function</span>(df_name) {</span>
<span id="cb377-524"><a href="#cb377-524" aria-hidden="true" tabindex="-1"></a>  vars <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">get</span>(df_name))</span>
<span id="cb377-525"><a href="#cb377-525" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb377-526"><a href="#cb377-526" aria-hidden="true" tabindex="-1"></a>    <span class="at">DataFrame =</span> df_name,</span>
<span id="cb377-527"><a href="#cb377-527" aria-hidden="true" tabindex="-1"></a>    <span class="at">Variable =</span> vars,</span>
<span id="cb377-528"><a href="#cb377-528" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb377-529"><a href="#cb377-529" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-530"><a href="#cb377-530" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb377-531"><a href="#cb377-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-532"><a href="#cb377-532" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Combine into one clean table</span></span>
<span id="cb377-533"><a href="#cb377-533" aria-hidden="true" tabindex="-1"></a>df_variables_all <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, df_variables)</span>
<span id="cb377-534"><a href="#cb377-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-535"><a href="#cb377-535" aria-hidden="true" tabindex="-1"></a><span class="co"># View the result</span></span>
<span id="cb377-536"><a href="#cb377-536" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(df_variables_all)</span>
<span id="cb377-537"><a href="#cb377-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-538"><a href="#cb377-538" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> (df_variables_all, df_variables) <span class="co"># clean working enviroment </span></span>
<span id="cb377-539"><a href="#cb377-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-540"><a href="#cb377-540" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-541"><a href="#cb377-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-542"><a href="#cb377-542" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE, results='hide', warning=FALSE, message=FALSE}</span></span>
<span id="cb377-543"><a href="#cb377-543" aria-hidden="true" tabindex="-1"></a><span class="in">setwd("C:/Users/User/Desktop/Materials_ Course and proposals/Course Related/DataCamp/Data/Synthetic_data")</span></span>
<span id="cb377-544"><a href="#cb377-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-545"><a href="#cb377-545" aria-hidden="true" tabindex="-1"></a><span class="in">patients &lt;- read.csv("patients.csv")</span></span>
<span id="cb377-546"><a href="#cb377-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-547"><a href="#cb377-547" aria-hidden="true" tabindex="-1"></a><span class="in">breast_cancer_data &lt;- read.csv("Breast_cancer_screening.csv") </span></span>
<span id="cb377-548"><a href="#cb377-548" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-549"><a href="#cb377-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-550"><a href="#cb377-550" aria-hidden="true" tabindex="-1"></a>**4. Creating a Data Dictionary**</span>
<span id="cb377-551"><a href="#cb377-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-552"><a href="#cb377-552" aria-hidden="true" tabindex="-1"></a>A **data dictionary** is a simple but critical table that documents:</span>
<span id="cb377-553"><a href="#cb377-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-554"><a href="#cb377-554" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Variable names** (column names)</span>
<span id="cb377-555"><a href="#cb377-555" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Descriptions** (what each variable represents)</span>
<span id="cb377-556"><a href="#cb377-556" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Types** (numeric, character, factor)</span>
<span id="cb377-557"><a href="#cb377-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-558"><a href="#cb377-558" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è We can automate building a basic data dictionary by combining <span class="in">`names()`</span>, <span class="in">`sapply()`</span>, and <span class="in">`class()`</span> functions.</span>
<span id="cb377-559"><a href="#cb377-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-562"><a href="#cb377-562" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-563"><a href="#cb377-563" aria-hidden="true" tabindex="-1"></a>data_dictionary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb377-564"><a href="#cb377-564" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">names</span>(patients),</span>
<span id="cb377-565"><a href="#cb377-565" aria-hidden="true" tabindex="-1"></a>  <span class="at">Type =</span> <span class="fu">sapply</span>(patients, class)</span>
<span id="cb377-566"><a href="#cb377-566" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb377-567"><a href="#cb377-567" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-568"><a href="#cb377-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-569"><a href="#cb377-569" aria-hidden="true" tabindex="-1"></a>The dictionary can be expanded by manually adding descriptions, coding instructions, or value mappings where necessary.</span>
<span id="cb377-570"><a href="#cb377-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-571"><a href="#cb377-571" aria-hidden="true" tabindex="-1"></a>**5. Working with Column Names and Types**</span>
<span id="cb377-572"><a href="#cb377-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-573"><a href="#cb377-573" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`names(df)`</span> or <span class="in">`colnames(df)`</span> retrieves a list of all column names.</span>
<span id="cb377-574"><a href="#cb377-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-575"><a href="#cb377-575" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`class(df$var)`</span> reveals the **data type of a specific variable**.</span>
<span id="cb377-576"><a href="#cb377-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-577"><a href="#cb377-577" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`sapply(df, class)`</span> applies <span class="in">`class()`</span> across all variables and summarizes their types.</span>
<span id="cb377-578"><a href="#cb377-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-579"><a href="#cb377-579" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>If needed, variables can be recast to appropriate types.</span>
<span id="cb377-580"><a href="#cb377-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-581"><a href="#cb377-581" aria-hidden="true" tabindex="-1"></a>üìä **Summary Table: Key Functions for Exploring Data**</span>
<span id="cb377-582"><a href="#cb377-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-583"><a href="#cb377-583" aria-hidden="true" tabindex="-1"></a>| **Task** | **Function** | **Purpose / What It Does** |</span>
<span id="cb377-584"><a href="#cb377-584" aria-hidden="true" tabindex="-1"></a>|:-------------------|:--------------------|:------------------------------|</span>
<span id="cb377-585"><a href="#cb377-585" aria-hidden="true" tabindex="-1"></a>| View structure of dataset | <span class="in">`str(df)`</span> | Shows structure: number of rows, columns, and variable types |</span>
<span id="cb377-586"><a href="#cb377-586" aria-hidden="true" tabindex="-1"></a>| View structure of variable | <span class="in">`str(df$var)`</span> | Shows structure/type of a specific variable |</span>
<span id="cb377-587"><a href="#cb377-587" aria-hidden="true" tabindex="-1"></a>| Summarize statistics (dataset) | <span class="in">`summary(df)`</span> | Provides summary stats (min, max, mean, NA count) for all variables |</span>
<span id="cb377-588"><a href="#cb377-588" aria-hidden="true" tabindex="-1"></a>| Summarize statistics (variable) | <span class="in">`summary(df$var)`</span> | Summary stats for a specific variable |</span>
<span id="cb377-589"><a href="#cb377-589" aria-hidden="true" tabindex="-1"></a>| Compact structure overview | <span class="in">`glimpse(df)`</span> | Quick, sideways compact view of dataset (from <span class="in">`dplyr`</span>) |</span>
<span id="cb377-590"><a href="#cb377-590" aria-hidden="true" tabindex="-1"></a>| Preview first rows | <span class="in">`head(df)`</span>, <span class="in">`head(df, n = 10)`</span> | Displays first 6 or specified number of rows |</span>
<span id="cb377-591"><a href="#cb377-591" aria-hidden="true" tabindex="-1"></a>| Preview last rows | <span class="in">`tail(df)`</span>, <span class="in">`tail(df, n = 8)`</span> | Displays last 6 or specified number of rows |</span>
<span id="cb377-592"><a href="#cb377-592" aria-hidden="true" tabindex="-1"></a>| Count frequencies | <span class="in">`count(df, var)`</span> | Counts unique values and frequency of a specified variable |</span>
<span id="cb377-593"><a href="#cb377-593" aria-hidden="true" tabindex="-1"></a>| Open full viewer | <span class="in">`view(df)`</span> | Opens Excel-style data viewer window (RStudio) |</span>
<span id="cb377-594"><a href="#cb377-594" aria-hidden="true" tabindex="-1"></a>| Check number of rows | <span class="in">`nrow(df)`</span> | Returns number of rows (observations) |</span>
<span id="cb377-595"><a href="#cb377-595" aria-hidden="true" tabindex="-1"></a>| Check number of columns | <span class="in">`ncol(df)`</span> | Returns number of columns (variables) |</span>
<span id="cb377-596"><a href="#cb377-596" aria-hidden="true" tabindex="-1"></a>| Check both dimensions | <span class="in">`dim(df)`</span> | Returns (rows, columns) as a two-number vector |</span>
<span id="cb377-597"><a href="#cb377-597" aria-hidden="true" tabindex="-1"></a>| Clean column names | <span class="in">`janitor::clean_names(df)`</span> | Converts messy names into lowercase, underscore-separated names |</span>
<span id="cb377-598"><a href="#cb377-598" aria-hidden="true" tabindex="-1"></a>| List variable names | <span class="in">`names(df)`</span>, <span class="in">`colnames(df)`</span> | Lists all column names in a data frame |</span>
<span id="cb377-599"><a href="#cb377-599" aria-hidden="true" tabindex="-1"></a>| Check variable type | <span class="in">`class(df$var)`</span> | Returns data type of a specific variable |</span>
<span id="cb377-600"><a href="#cb377-600" aria-hidden="true" tabindex="-1"></a>| Check types for all variables | <span class="in">`sapply(df, class)`</span> | Returns data types for every column in the dataset |</span>
<span id="cb377-601"><a href="#cb377-601" aria-hidden="true" tabindex="-1"></a>| Create basic data dictionary | <span class="in">`data.frame(Variable = names(df), Type = sapply(df, class))`</span> | Table summarizing variable names and types |</span>
<span id="cb377-602"><a href="#cb377-602" aria-hidden="true" tabindex="-1"></a>| List all data frames in environment | <span class="in">`dfs &lt;- ls(...)[sapply(...)]`</span> | Identifies and lists all data frames currently loaded |</span>
<span id="cb377-603"><a href="#cb377-603" aria-hidden="true" tabindex="-1"></a>| List all variables from all data frames | <span class="in">`lapply(dfs, function(x) names(get(x)))`</span> | Creates table listing data frames and their variables |</span>
<span id="cb377-604"><a href="#cb377-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-605"><a href="#cb377-605" aria-hidden="true" tabindex="-1"></a>Now I can apply some of the above to my datasets (df): such as breast_cancer_data, vaccination, patients</span>
<span id="cb377-606"><a href="#cb377-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-609"><a href="#cb377-609" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-610"><a href="#cb377-610" aria-hidden="true" tabindex="-1"></a>breast_cancer_data_demo <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-611"><a href="#cb377-611" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sa3name, state, year, part50_74, rate50_74)</span>
<span id="cb377-612"><a href="#cb377-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-613"><a href="#cb377-613" aria-hidden="true" tabindex="-1"></a><span class="co"># Structure of the demo dataset</span></span>
<span id="cb377-614"><a href="#cb377-614" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(breast_cancer_data_demo)</span>
<span id="cb377-615"><a href="#cb377-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-616"><a href="#cb377-616" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics for rate50_74</span></span>
<span id="cb377-617"><a href="#cb377-617" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(breast_cancer_data_demo<span class="sc">$</span>rate50_74)</span>
<span id="cb377-618"><a href="#cb377-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-619"><a href="#cb377-619" aria-hidden="true" tabindex="-1"></a><span class="co"># Display first 10 rows</span></span>
<span id="cb377-620"><a href="#cb377-620" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_cancer_data_demo, <span class="dv">10</span>)</span>
<span id="cb377-621"><a href="#cb377-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-622"><a href="#cb377-622" aria-hidden="true" tabindex="-1"></a><span class="co"># Count number of records</span></span>
<span id="cb377-623"><a href="#cb377-623" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(breast_cancer_data_demo)</span>
<span id="cb377-624"><a href="#cb377-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-625"><a href="#cb377-625" aria-hidden="true" tabindex="-1"></a><span class="co"># Show variable names</span></span>
<span id="cb377-626"><a href="#cb377-626" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(breast_cancer_data_demo)</span>
<span id="cb377-627"><a href="#cb377-627" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-628"><a href="#cb377-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-629"><a href="#cb377-629" aria-hidden="true" tabindex="-1"></a><span class="fu">## **PART III: WRANGLING WITH `dplyr`**</span></span>
<span id="cb377-630"><a href="#cb377-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-631"><a href="#cb377-631" aria-hidden="true" tabindex="-1"></a>In this part, we focus on mastering core data wrangling skills using the <span class="in">`dplyr`</span> package, one of the most powerful tools in R for data manipulation.\</span>
<span id="cb377-632"><a href="#cb377-632" aria-hidden="true" tabindex="-1"></a>We will learn how to select, rename, create, modify, group, sort, slice, and reshape datasets.\</span>
<span id="cb377-633"><a href="#cb377-633" aria-hidden="true" tabindex="-1"></a>These operations form the foundation for preparing clean, organized, and analysis-ready data.</span>
<span id="cb377-634"><a href="#cb377-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-635"><a href="#cb377-635" aria-hidden="true" tabindex="-1"></a>Each subsection introduces a set of essential verbs (<span class="in">`select()`</span>, <span class="in">`mutate()`</span>, <span class="in">`group_by()`</span>, etc.) that allow for data transformation pipelines. Examples and practical applications will be provided throughout to demonstrate how to use <span class="in">`dplyr`</span>.</span>
<span id="cb377-636"><a href="#cb377-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-637"><a href="#cb377-637" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-638"><a href="#cb377-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-639"><a href="#cb377-639" aria-hidden="true" tabindex="-1"></a><span class="fu">### **3.1 Selecting, Dropping, Reordering, and Renaming Variables (Columns)**</span></span>
<span id="cb377-640"><a href="#cb377-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-641"><a href="#cb377-641" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`select()`</span>, <span class="in">`rename()`</span>, relocate()<span class="sc">\`</span></span>
<span id="cb377-642"><a href="#cb377-642" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Column helpers: <span class="in">`starts_with()`</span>, <span class="in">`ends_with()`</span>, <span class="in">`contains()`</span>, <span class="in">`last_clos`</span>, <span class="in">`matches`</span></span>
<span id="cb377-643"><a href="#cb377-643" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Allow modifying entire groups of column names by adding prefixes or suffixes</span>
<span id="cb377-644"><a href="#cb377-644" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Handling null/missing column names</span>
<span id="cb377-645"><a href="#cb377-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-646"><a href="#cb377-646" aria-hidden="true" tabindex="-1"></a>Selecting, reordering, and renaming variables is often the first step when preparing a dataset for analysis.\</span>
<span id="cb377-647"><a href="#cb377-647" aria-hidden="true" tabindex="-1"></a>In <span class="in">`dplyr`</span>, we use functions such as <span class="in">`select()`</span>, <span class="in">`rename()`</span>, and <span class="in">`relocate()`</span> to organize variables, clean up data, and prepare for transformations.\</span>
<span id="cb377-648"><a href="#cb377-648" aria-hidden="true" tabindex="-1"></a>Dropping unnecessary columns or reordering variables can make the data cleaner, faster to work with, and easier to understand.</span>
<span id="cb377-649"><a href="#cb377-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-650"><a href="#cb377-650" aria-hidden="true" tabindex="-1"></a>Additional tools allow modifying groups of column names by adding prefixes or suffixes, and safely handling missing columns during selection.</span>
<span id="cb377-651"><a href="#cb377-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-652"><a href="#cb377-652" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-653"><a href="#cb377-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-654"><a href="#cb377-654" aria-hidden="true" tabindex="-1"></a>**üîπ Summary of Functions for Selecting, Reordering, Dropping, and Renaming**</span>
<span id="cb377-655"><a href="#cb377-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-656"><a href="#cb377-656" aria-hidden="true" tabindex="-1"></a>| **Task** | **Function** | **Purpose** |</span>
<span id="cb377-657"><a href="#cb377-657" aria-hidden="true" tabindex="-1"></a>|:-----------------|:------------------------|:----------------------------|</span>
<span id="cb377-658"><a href="#cb377-658" aria-hidden="true" tabindex="-1"></a>| Select specific columns | <span class="in">`select()`</span> | Choose a subset of columns based on name or condition |</span>
<span id="cb377-659"><a href="#cb377-659" aria-hidden="true" tabindex="-1"></a>| Rename columns | <span class="in">`rename()`</span> | Rename one or multiple columns |</span>
<span id="cb377-660"><a href="#cb377-660" aria-hidden="true" tabindex="-1"></a>| Relocate columns | <span class="in">`relocate()`</span> | Move selected columns to a new position |</span>
<span id="cb377-661"><a href="#cb377-661" aria-hidden="true" tabindex="-1"></a>| Reorder manually | <span class="in">`select(a, b, c, everything())`</span> | Explicitly define column order |</span>
<span id="cb377-662"><a href="#cb377-662" aria-hidden="true" tabindex="-1"></a>| Find columns by pattern | <span class="in">`starts_with()`</span>, <span class="in">`ends_with()`</span>, <span class="in">`contains()`</span>, <span class="in">`matches()`</span> | Select columns matching a pattern |</span>
<span id="cb377-663"><a href="#cb377-663" aria-hidden="true" tabindex="-1"></a>| Drop single column | <span class="in">`select(-col1)`</span> | Remove one variable |</span>
<span id="cb377-664"><a href="#cb377-664" aria-hidden="true" tabindex="-1"></a>| Drop multiple columns | <span class="in">`select(-col1, -col2)`</span> | Remove several variables |</span>
<span id="cb377-665"><a href="#cb377-665" aria-hidden="true" tabindex="-1"></a>| Drop by pattern | <span class="in">`select(-starts_with("temp"))`</span>, <span class="in">`select(-contains("score"))`</span> | Remove variables based on naming patterns |</span>
<span id="cb377-666"><a href="#cb377-666" aria-hidden="true" tabindex="-1"></a>| Add prefix to column names | <span class="in">`rename_with(~ paste0("prefix_", .x))`</span> | Add a prefix to selected columns |</span>
<span id="cb377-667"><a href="#cb377-667" aria-hidden="true" tabindex="-1"></a>| Add suffix to column names | <span class="in">`rename_with(~ paste0(.x, "_suffix"))`</span> | Add a suffix to selected columns |</span>
<span id="cb377-668"><a href="#cb377-668" aria-hidden="true" tabindex="-1"></a>| Handle missing columns safely | <span class="in">`if("var" %in% names(df)) {}`</span> | Avoid errors when column does not exist |</span>
<span id="cb377-669"><a href="#cb377-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-670"><a href="#cb377-670" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-671"><a href="#cb377-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-672"><a href="#cb377-672" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è These techniques allow quick restructuring of datasets, improving workflow efficiency and clarity.</span>
<span id="cb377-673"><a href="#cb377-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-674"><a href="#cb377-674" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-675"><a href="#cb377-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-676"><a href="#cb377-676" aria-hidden="true" tabindex="-1"></a>üîπ Examples Using the <span class="in">`vaccination`</span> Dataset</span>
<span id="cb377-677"><a href="#cb377-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-680"><a href="#cb377-680" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-681"><a href="#cb377-681" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting specific columns manually</span></span>
<span id="cb377-682"><a href="#cb377-682" aria-hidden="true" tabindex="-1"></a>breast_selected <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-683"><a href="#cb377-683" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sa3code, sa3name, year, part50_74, pop50_74)</span>
<span id="cb377-684"><a href="#cb377-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-685"><a href="#cb377-685" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_selected, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-686"><a href="#cb377-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-687"><a href="#cb377-687" aria-hidden="true" tabindex="-1"></a><span class="co"># Reordering columns manually (bring year, sa3name, state first)</span></span>
<span id="cb377-688"><a href="#cb377-688" aria-hidden="true" tabindex="-1"></a>bc_reorder_manual <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-689"><a href="#cb377-689" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, sa3name, state, <span class="fu">everything</span>())</span>
<span id="cb377-690"><a href="#cb377-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-691"><a href="#cb377-691" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_reorder_manual, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-692"><a href="#cb377-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-693"><a href="#cb377-693" aria-hidden="true" tabindex="-1"></a><span class="co"># Relocating specific columns before another variable</span></span>
<span id="cb377-694"><a href="#cb377-694" aria-hidden="true" tabindex="-1"></a>bc_relocate_before <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-695"><a href="#cb377-695" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(part50_74, pop50_74, <span class="at">.before =</span> rate50_74)</span>
<span id="cb377-696"><a href="#cb377-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-697"><a href="#cb377-697" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_relocate_before, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-698"><a href="#cb377-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-699"><a href="#cb377-699" aria-hidden="true" tabindex="-1"></a><span class="co"># Relocating specific columns after another variable</span></span>
<span id="cb377-700"><a href="#cb377-700" aria-hidden="true" tabindex="-1"></a>bc_relocate_after <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-701"><a href="#cb377-701" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(sa3name, state, <span class="at">.after =</span> year)</span>
<span id="cb377-702"><a href="#cb377-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-703"><a href="#cb377-703" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_relocate_after, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-704"><a href="#cb377-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-705"><a href="#cb377-705" aria-hidden="true" tabindex="-1"></a><span class="co"># Dropping one variable</span></span>
<span id="cb377-706"><a href="#cb377-706" aria-hidden="true" tabindex="-1"></a>bc_drop_one <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-707"><a href="#cb377-707" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>expct50_74)</span>
<span id="cb377-708"><a href="#cb377-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-709"><a href="#cb377-709" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_drop_one, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-710"><a href="#cb377-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-711"><a href="#cb377-711" aria-hidden="true" tabindex="-1"></a><span class="co"># Dropping multiple variables</span></span>
<span id="cb377-712"><a href="#cb377-712" aria-hidden="true" tabindex="-1"></a>bc_drop_multiple <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-713"><a href="#cb377-713" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>expct50_74, <span class="sc">-</span>expct50_69)</span>
<span id="cb377-714"><a href="#cb377-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-715"><a href="#cb377-715" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_drop_multiple, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-716"><a href="#cb377-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-717"><a href="#cb377-717" aria-hidden="true" tabindex="-1"></a><span class="co"># Dropping variables by pattern (e.g., columns ending with "_69")</span></span>
<span id="cb377-718"><a href="#cb377-718" aria-hidden="true" tabindex="-1"></a>bc_drop_by_pattern <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-719"><a href="#cb377-719" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">ends_with</span>(<span class="st">"_69"</span>))</span>
<span id="cb377-720"><a href="#cb377-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-721"><a href="#cb377-721" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_drop_by_pattern, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-722"><a href="#cb377-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-723"><a href="#cb377-723" aria-hidden="true" tabindex="-1"></a><span class="co"># Renaming a column for clarity</span></span>
<span id="cb377-724"><a href="#cb377-724" aria-hidden="true" tabindex="-1"></a>breast_renamed <span class="ot">&lt;-</span> breast_selected <span class="sc">%&gt;%</span></span>
<span id="cb377-725"><a href="#cb377-725" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">SA3_Code =</span> sa3code, <span class="at">SA3_Name =</span> sa3name, <span class="at">Year =</span> year)</span>
<span id="cb377-726"><a href="#cb377-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-727"><a href="#cb377-727" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_renamed, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-728"><a href="#cb377-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-729"><a href="#cb377-729" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding a prefix to all column names</span></span>
<span id="cb377-730"><a href="#cb377-730" aria-hidden="true" tabindex="-1"></a>bc_prefixed <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-731"><a href="#cb377-731" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">paste0</span>(<span class="st">"bc_"</span>, .x))</span>
<span id="cb377-732"><a href="#cb377-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-733"><a href="#cb377-733" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_prefixed, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-734"><a href="#cb377-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-735"><a href="#cb377-735" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding a suffix to all column names</span></span>
<span id="cb377-736"><a href="#cb377-736" aria-hidden="true" tabindex="-1"></a>bc_suffixed <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-737"><a href="#cb377-737" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">paste0</span>(.x, <span class="st">"_info"</span>))</span>
<span id="cb377-738"><a href="#cb377-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-739"><a href="#cb377-739" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_suffixed, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-740"><a href="#cb377-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-741"><a href="#cb377-741" aria-hidden="true" tabindex="-1"></a><span class="co"># Handling missing columns safely during selection</span></span>
<span id="cb377-742"><a href="#cb377-742" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="st">"non_existing_column"</span> <span class="sc">%in%</span> <span class="fu">names</span>(breast_cancer_data)) {</span>
<span id="cb377-743"><a href="#cb377-743" aria-hidden="true" tabindex="-1"></a>  bc_safe_select <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-744"><a href="#cb377-744" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(non_existing_column)</span>
<span id="cb377-745"><a href="#cb377-745" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(bc_safe_select, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-746"><a href="#cb377-746" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb377-747"><a href="#cb377-747" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">"Column 'non_existing_column' not found in breast_cancer_data."</span>)</span>
<span id="cb377-748"><a href="#cb377-748" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb377-749"><a href="#cb377-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-750"><a href="#cb377-750" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-751"><a href="#cb377-751" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove all temporary objects created in this chunk</span></span>
<span id="cb377-752"><a href="#cb377-752" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-753"><a href="#cb377-753" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(breast_selected, breast_renamed, bc_drop_one, bc_drop_multiple, bc_drop_by_pattern,</span>
<span id="cb377-754"><a href="#cb377-754" aria-hidden="true" tabindex="-1"></a>   bc_reorder_manual, bc_relocate_before, bc_relocate_after,</span>
<span id="cb377-755"><a href="#cb377-755" aria-hidden="true" tabindex="-1"></a>   bc_prefixed, bc_suffixed)</span>
<span id="cb377-756"><a href="#cb377-756" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-757"><a href="#cb377-757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-758"><a href="#cb377-758" aria-hidden="true" tabindex="-1"></a><span class="fu">### **3.2 Creating and Modifying Variables (Columns)**</span></span>
<span id="cb377-759"><a href="#cb377-759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-760"><a href="#cb377-760" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`mutate()`</span>, <span class="in">`transmute()`</span>, recoding, <span class="in">`case_when()`</span>, <span class="in">`if_else()`</span></span>
<span id="cb377-761"><a href="#cb377-761" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`str_detect(), regex(), %in%`</span></span>
<span id="cb377-762"><a href="#cb377-762" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Creating dummy/flag variables</span>
<span id="cb377-763"><a href="#cb377-763" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>String manipulation: <span class="in">`strsplit()`</span>, <span class="in">`sub()`</span>, <span class="in">`gsub()`</span>, `<span class="in">` tolower(), `</span>janitor::clean_names()` ``</span>
<span id="cb377-764"><a href="#cb377-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-765"><a href="#cb377-765" aria-hidden="true" tabindex="-1"></a>Creating new variables or modifying existing ones is a key part of preparing data for analysis.\</span>
<span id="cb377-766"><a href="#cb377-766" aria-hidden="true" tabindex="-1"></a>In <span class="in">`dplyr`</span>, we use functions like <span class="in">`mutate()`</span> and <span class="in">`transmute()`</span> to add, transform, or recode variables.\</span>
<span id="cb377-767"><a href="#cb377-767" aria-hidden="true" tabindex="-1"></a>We can also create conditional variables with <span class="in">`case_when()`</span> or <span class="in">`if_else()`</span>, and apply string operations such as splitting, replacing, or converting text.</span>
<span id="cb377-768"><a href="#cb377-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-769"><a href="#cb377-769" aria-hidden="true" tabindex="-1"></a>These steps help structure the data more logically, highlight important features, or derive new indicators for analysis.</span>
<span id="cb377-770"><a href="#cb377-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-771"><a href="#cb377-771" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-772"><a href="#cb377-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-773"><a href="#cb377-773" aria-hidden="true" tabindex="-1"></a>üîπ **Summary of Functions for Creating and Modifying Variables**</span>
<span id="cb377-774"><a href="#cb377-774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-775"><a href="#cb377-775" aria-hidden="true" tabindex="-1"></a>| **Task** | **Function** | **Purpose** |</span>
<span id="cb377-776"><a href="#cb377-776" aria-hidden="true" tabindex="-1"></a>|:-------------------|:-----------------|:---------------------------------|</span>
<span id="cb377-777"><a href="#cb377-777" aria-hidden="true" tabindex="-1"></a>| Create or modify variables | <span class="in">`mutate()`</span> | Add or transform variables, keeping all columns |</span>
<span id="cb377-778"><a href="#cb377-778" aria-hidden="true" tabindex="-1"></a>| Create new variables only | <span class="in">`transmute()`</span> | Keep only new variables created |</span>
<span id="cb377-779"><a href="#cb377-779" aria-hidden="true" tabindex="-1"></a>| Conditional variable creation | <span class="in">`case_when()`</span> | Create new variables based on multiple conditions |</span>
<span id="cb377-780"><a href="#cb377-780" aria-hidden="true" tabindex="-1"></a>| Simple conditional assignment | <span class="in">`if_else()`</span> | Assign based on TRUE/FALSE logic |</span>
<span id="cb377-781"><a href="#cb377-781" aria-hidden="true" tabindex="-1"></a>| Split strings into parts | <span class="in">`strsplit()`</span> | Split a string into components |</span>
<span id="cb377-782"><a href="#cb377-782" aria-hidden="true" tabindex="-1"></a>| Replace text (first occurrence) | <span class="in">`sub()`</span> | Replace first match of a pattern |</span>
<span id="cb377-783"><a href="#cb377-783" aria-hidden="true" tabindex="-1"></a>| Replace text (all occurrences) | <span class="in">`gsub()`</span> | Replace all matches of a pattern |</span>
<span id="cb377-784"><a href="#cb377-784" aria-hidden="true" tabindex="-1"></a>| Convert text to lowercase | <span class="in">`tolower()`</span> | Standardize text to lowercase |</span>
<span id="cb377-785"><a href="#cb377-785" aria-hidden="true" tabindex="-1"></a>| Detect text patterns | <span class="in">`str_detect()`</span> | Check if a pattern exists in text |</span>
<span id="cb377-786"><a href="#cb377-786" aria-hidden="true" tabindex="-1"></a>| Flexible pattern matching | <span class="in">`regex()`</span> | Use regular expressions for complex patterns |</span>
<span id="cb377-787"><a href="#cb377-787" aria-hidden="true" tabindex="-1"></a>| Membership check | <span class="in">`%in%`</span> | Test if a value is part of a group |</span>
<span id="cb377-788"><a href="#cb377-788" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-789"><a href="#cb377-789" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-790"><a href="#cb377-790" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-791"><a href="#cb377-791" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è These functions allow transforming the dataset systematically to extract new features, categorize information, or clean fields.</span>
<span id="cb377-792"><a href="#cb377-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-795"><a href="#cb377-795" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-796"><a href="#cb377-796" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating and Modifying Variables (patients dataset)</span></span>
<span id="cb377-797"><a href="#cb377-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-798"><a href="#cb377-798" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a new age group variable</span></span>
<span id="cb377-799"><a href="#cb377-799" aria-hidden="true" tabindex="-1"></a>patients_mutated <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb377-800"><a href="#cb377-800" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_group =</span> <span class="fu">if_else</span>(BIRTHDATE <span class="sc">&lt;=</span> <span class="fu">as.Date</span>(<span class="st">"1970-01-01"</span>), <span class="st">"Below 70"</span>, <span class="st">"70+"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb377-801"><a href="#cb377-801" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(age_group, <span class="at">.after =</span> BIRTHDATE) <span class="sc">%&gt;%</span></span>
<span id="cb377-802"><a href="#cb377-802" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Id, <span class="sc">-</span>DEATHDATE, <span class="sc">-</span>SSN, <span class="sc">-</span>LAT, <span class="sc">-</span>LON, <span class="sc">-</span>SUFFIX, <span class="sc">-</span>ZIP)</span>
<span id="cb377-803"><a href="#cb377-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-804"><a href="#cb377-804" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_mutated, <span class="dv">10</span>)</span>
<span id="cb377-805"><a href="#cb377-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-806"><a href="#cb377-806" aria-hidden="true" tabindex="-1"></a><span class="co"># extract month and year from date in form of date is YYYY-MM-DD HH:MM:SS</span></span>
<span id="cb377-807"><a href="#cb377-807" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span> (vaccination<span class="sc">$</span>DATE) <span class="co"># date is YYYY-MM-DD HH:MM:SS format.</span></span>
<span id="cb377-808"><a href="#cb377-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-809"><a href="#cb377-809" aria-hidden="true" tabindex="-1"></a>vaccination <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb377-810"><a href="#cb377-810" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-811"><a href="#cb377-811" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_date =</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(DATE, <span class="at">format =</span> <span class="st">"%Y-%m-%dT%H:%M:%SZ"</span>)),  <span class="co"># First create vacc_date</span></span>
<span id="cb377-812"><a href="#cb377-812" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">format</span>(vacc_date, <span class="st">"%Y"</span>),         <span class="co"># Extract year</span></span>
<span id="cb377-813"><a href="#cb377-813" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">format</span>(vacc_date, <span class="st">"%B"</span>)          <span class="co"># Extract full month name (January, February, etc.)</span></span>
<span id="cb377-814"><a href="#cb377-814" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-815"><a href="#cb377-815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-816"><a href="#cb377-816" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(vaccination)</span>
<span id="cb377-817"><a href="#cb377-817" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vaccination)</span>
<span id="cb377-818"><a href="#cb377-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-819"><a href="#cb377-819" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a dataset keeping only new variables (transmute)</span></span>
<span id="cb377-820"><a href="#cb377-820" aria-hidden="true" tabindex="-1"></a>patients_transmuted <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb377-821"><a href="#cb377-821" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb377-822"><a href="#cb377-822" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_name =</span> <span class="fu">paste</span>(FIRST, LAST, <span class="at">sep =</span> <span class="st">" "</span>), </span>
<span id="cb377-823"><a href="#cb377-823" aria-hidden="true" tabindex="-1"></a>    <span class="at">birth_year =</span> <span class="fu">format</span>(<span class="fu">as.Date</span>(BIRTHDATE), <span class="st">"%Y"</span>)</span>
<span id="cb377-824"><a href="#cb377-824" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-825"><a href="#cb377-825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-826"><a href="#cb377-826" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> (patients_transmuted)</span>
<span id="cb377-827"><a href="#cb377-827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-828"><a href="#cb377-828" aria-hidden="true" tabindex="-1"></a><span class="co"># generate a birth_year_group variable based on birth_year values</span></span>
<span id="cb377-829"><a href="#cb377-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-830"><a href="#cb377-830" aria-hidden="true" tabindex="-1"></a>patients_transmuted <span class="ot">&lt;-</span> patients_transmuted <span class="sc">%&gt;%</span></span>
<span id="cb377-831"><a href="#cb377-831" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">birth_year_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb377-832"><a href="#cb377-832" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&lt;</span> <span class="dv">1940</span> <span class="sc">~</span> <span class="st">"Before 1940"</span>,</span>
<span id="cb377-833"><a href="#cb377-833" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&gt;=</span> <span class="dv">1940</span> <span class="sc">&amp;</span> birth_year <span class="sc">&lt;=</span> <span class="dv">1959</span> <span class="sc">~</span> <span class="st">"1940‚Äì1959"</span>,</span>
<span id="cb377-834"><a href="#cb377-834" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&gt;=</span> <span class="dv">1960</span> <span class="sc">&amp;</span> birth_year <span class="sc">&lt;=</span> <span class="dv">1979</span> <span class="sc">~</span> <span class="st">"1960‚Äì1979"</span>,</span>
<span id="cb377-835"><a href="#cb377-835" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&gt;=</span> <span class="dv">1980</span> <span class="sc">&amp;</span> birth_year <span class="sc">&lt;=</span> <span class="dv">1999</span> <span class="sc">~</span> <span class="st">"1980‚Äì1999"</span>,</span>
<span id="cb377-836"><a href="#cb377-836" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&gt;=</span> <span class="dv">2000</span> <span class="sc">~</span> <span class="st">"2000 and later"</span>,</span>
<span id="cb377-837"><a href="#cb377-837" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb377-838"><a href="#cb377-838" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb377-839"><a href="#cb377-839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-840"><a href="#cb377-840" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_transmuted)</span>
<span id="cb377-841"><a href="#cb377-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-842"><a href="#cb377-842" aria-hidden="true" tabindex="-1"></a><span class="co"># other option to achieve similar result for the above </span></span>
<span id="cb377-843"><a href="#cb377-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-844"><a href="#cb377-844" aria-hidden="true" tabindex="-1"></a>patients_transmuted <span class="ot">&lt;-</span> patients_transmuted <span class="sc">%&gt;%</span></span>
<span id="cb377-845"><a href="#cb377-845" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">birth_year =</span> <span class="fu">as.numeric</span>(birth_year),   <span class="co"># Convert to numeric</span></span>
<span id="cb377-846"><a href="#cb377-846" aria-hidden="true" tabindex="-1"></a>         <span class="at">birth_year_group =</span> <span class="fu">cut</span>(birth_year,     <span class="co"># Apply cut()</span></span>
<span id="cb377-847"><a href="#cb377-847" aria-hidden="true" tabindex="-1"></a>                                <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1939</span>, <span class="dv">1959</span>, <span class="dv">1979</span>, <span class="dv">1999</span>, <span class="cn">Inf</span>),</span>
<span id="cb377-848"><a href="#cb377-848" aria-hidden="true" tabindex="-1"></a>                                <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Before 1940"</span>, <span class="st">"1940‚Äì1959"</span>, <span class="st">"1960‚Äì1979"</span>, <span class="st">"1980‚Äì1999"</span>, <span class="st">"2000 and later"</span>),</span>
<span id="cb377-849"><a href="#cb377-849" aria-hidden="true" tabindex="-1"></a>                                <span class="at">right =</span> <span class="cn">TRUE</span></span>
<span id="cb377-850"><a href="#cb377-850" aria-hidden="true" tabindex="-1"></a>         ))</span>
<span id="cb377-851"><a href="#cb377-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-852"><a href="#cb377-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-853"><a href="#cb377-853" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_transmuted)</span>
<span id="cb377-854"><a href="#cb377-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-855"><a href="#cb377-855" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-856"><a href="#cb377-856" aria-hidden="true" tabindex="-1"></a><span class="co"># Using case_when to assign marital status values</span></span>
<span id="cb377-857"><a href="#cb377-857" aria-hidden="true" tabindex="-1"></a>patients_case_when <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb377-858"><a href="#cb377-858" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">marital_status_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb377-859"><a href="#cb377-859" aria-hidden="true" tabindex="-1"></a>    MARITAL <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">~</span> <span class="st">"Married"</span>,</span>
<span id="cb377-860"><a href="#cb377-860" aria-hidden="true" tabindex="-1"></a>    MARITAL <span class="sc">==</span> <span class="st">"S"</span> <span class="sc">~</span> <span class="st">"Single"</span>,</span>
<span id="cb377-861"><a href="#cb377-861" aria-hidden="true" tabindex="-1"></a>    MARITAL <span class="sc">==</span> <span class="st">"D"</span> <span class="sc">~</span> <span class="st">"Divorced"</span>,</span>
<span id="cb377-862"><a href="#cb377-862" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Unknown"</span></span>
<span id="cb377-863"><a href="#cb377-863" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb377-864"><a href="#cb377-864" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(MARITAL, marital_status_group, RACE)</span>
<span id="cb377-865"><a href="#cb377-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-866"><a href="#cb377-866" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_case_when, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb377-867"><a href="#cb377-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-868"><a href="#cb377-868" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(patients_case_when<span class="sc">$</span>marital_status, <span class="at">useNA =</span> <span class="st">"ifany"</span>)  <span class="co"># Show missing values in the table</span></span>
<span id="cb377-869"><a href="#cb377-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-870"><a href="#cb377-870" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode marital status while leaving unknown values as missing</span></span>
<span id="cb377-871"><a href="#cb377-871" aria-hidden="true" tabindex="-1"></a>patients_case_when <span class="ot">&lt;-</span> patients_case_when <span class="sc">%&gt;%</span></span>
<span id="cb377-872"><a href="#cb377-872" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">marital_2group =</span> <span class="fu">case_when</span>(</span>
<span id="cb377-873"><a href="#cb377-873" aria-hidden="true" tabindex="-1"></a>    MARITAL <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">~</span> <span class="st">"Partnered"</span>,</span>
<span id="cb377-874"><a href="#cb377-874" aria-hidden="true" tabindex="-1"></a>    MARITAL <span class="sc">==</span> <span class="st">"D"</span> <span class="sc">|</span> MARITAL <span class="sc">==</span> <span class="st">"S"</span> <span class="sc">|</span> MARITAL <span class="sc">==</span> <span class="st">"W"</span> <span class="sc">~</span> <span class="st">"Not partnered"</span>,</span>
<span id="cb377-875"><a href="#cb377-875" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span>  <span class="co"># Replaces unknown values with missing (NA)</span></span>
<span id="cb377-876"><a href="#cb377-876" aria-hidden="true" tabindex="-1"></a>  )) </span>
<span id="cb377-877"><a href="#cb377-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-878"><a href="#cb377-878" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_case_when)</span>
<span id="cb377-879"><a href="#cb377-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-880"><a href="#cb377-880" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode race status while leaving unknown values as missing</span></span>
<span id="cb377-881"><a href="#cb377-881" aria-hidden="true" tabindex="-1"></a>patients_case_when <span class="ot">&lt;-</span> patients_case_when <span class="sc">%&gt;%</span></span>
<span id="cb377-882"><a href="#cb377-882" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race_grouped =</span> <span class="fu">case_when</span>(</span>
<span id="cb377-883"><a href="#cb377-883" aria-hidden="true" tabindex="-1"></a>    RACE <span class="sc">==</span> <span class="st">'white'</span> <span class="sc">~</span> <span class="st">"White"</span>,</span>
<span id="cb377-884"><a href="#cb377-884" aria-hidden="true" tabindex="-1"></a>    RACE <span class="sc">==</span> <span class="st">"asian"</span> <span class="sc">~</span> <span class="st">"Asian"</span>,</span>
<span id="cb377-885"><a href="#cb377-885" aria-hidden="true" tabindex="-1"></a>    RACE <span class="sc">==</span> <span class="st">"native"</span> <span class="sc">|</span> RACE <span class="sc">==</span> <span class="st">"other"</span> <span class="sc">~</span> <span class="st">"Other"</span>,</span>
<span id="cb377-886"><a href="#cb377-886" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb377-887"><a href="#cb377-887" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb377-888"><a href="#cb377-888" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(RACE, race_grouped)</span>
<span id="cb377-889"><a href="#cb377-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-890"><a href="#cb377-890" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_case_when, <span class="at">n=</span><span class="dv">10</span>)</span>
<span id="cb377-891"><a href="#cb377-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-892"><a href="#cb377-892" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple conditional assignment with if_else</span></span>
<span id="cb377-893"><a href="#cb377-893" aria-hidden="true" tabindex="-1"></a>patients<span class="sc">$</span>PASSPORT[patients<span class="sc">$</span>PASSPORT <span class="sc">==</span> <span class="st">""</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span> <span class="co"># formatting the variable to know missing values</span></span>
<span id="cb377-894"><a href="#cb377-894" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sum</span>(<span class="fu">is.na</span>(patients<span class="sc">$</span>PASSPORT))) <span class="co">#  31 missing value</span></span>
<span id="cb377-895"><a href="#cb377-895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-896"><a href="#cb377-896" aria-hidden="true" tabindex="-1"></a>patients_if_else <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb377-897"><a href="#cb377-897" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">has_passport =</span> <span class="fu">if_else</span>(<span class="sc">!</span><span class="fu">is.na</span>(PASSPORT), <span class="st">"Yes"</span>, <span class="st">"No"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb377-898"><a href="#cb377-898" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PASSPORT, has_passport)</span>
<span id="cb377-899"><a href="#cb377-899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-900"><a href="#cb377-900" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_if_else, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb377-901"><a href="#cb377-901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-902"><a href="#cb377-902" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-903"><a href="#cb377-903" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace the first occurrence (e.g., fix misspelled city name)</span></span>
<span id="cb377-904"><a href="#cb377-904" aria-hidden="true" tabindex="-1"></a>patients_sub <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb377-905"><a href="#cb377-905" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">city_fixed =</span> <span class="fu">sub</span>(<span class="st">"Nwe York"</span>, <span class="st">"New York"</span>, CITY)) <span class="sc">%&gt;%</span> </span>
<span id="cb377-906"><a href="#cb377-906" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Id, <span class="sc">-</span>DEATHDATE, <span class="sc">-</span>SSN, <span class="sc">-</span>LAT, <span class="sc">-</span>LON, <span class="sc">-</span>SUFFIX, <span class="sc">-</span>ZIP)</span>
<span id="cb377-907"><a href="#cb377-907" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-908"><a href="#cb377-908" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_sub, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-909"><a href="#cb377-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-910"><a href="#cb377-910" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace all occurrences (e.g., replace spaces with underscores)</span></span>
<span id="cb377-911"><a href="#cb377-911" aria-hidden="true" tabindex="-1"></a>patients_gsub <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb377-912"><a href="#cb377-912" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">birthplace_clean =</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, BIRTHPLACE)) <span class="sc">%&gt;%</span> </span>
<span id="cb377-913"><a href="#cb377-913" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(BIRTHPLACE, birthplace_clean)</span>
<span id="cb377-914"><a href="#cb377-914" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-915"><a href="#cb377-915" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_gsub, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-916"><a href="#cb377-916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-917"><a href="#cb377-917" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-918"><a href="#cb377-918" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert last names to lowercase</span></span>
<span id="cb377-919"><a href="#cb377-919" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span> </span>
<span id="cb377-920"><a href="#cb377-920" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Id, <span class="sc">-</span>DEATHDATE, <span class="sc">-</span>SSN, <span class="sc">-</span>LAT, <span class="sc">-</span>LON, <span class="sc">-</span>SUFFIX, <span class="sc">-</span>ZIP)</span>
<span id="cb377-921"><a href="#cb377-921" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-922"><a href="#cb377-922" aria-hidden="true" tabindex="-1"></a>patients_tolower <span class="ot">&lt;-</span> temp </span>
<span id="cb377-923"><a href="#cb377-923" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(patients_tolower) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">colnames</span>(patients_tolower)) </span>
<span id="cb377-924"><a href="#cb377-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-925"><a href="#cb377-925" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_tolower, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-926"><a href="#cb377-926" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(temp)</span>
<span id="cb377-927"><a href="#cb377-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-928"><a href="#cb377-928" aria-hidden="true" tabindex="-1"></a><span class="co">#`janitor::clean_names(df)` standardizes variable names:</span></span>
<span id="cb377-929"><a href="#cb377-929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-930"><a href="#cb377-930" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(patients)</span>
<span id="cb377-931"><a href="#cb377-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-932"><a href="#cb377-932" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(patients)</span>
<span id="cb377-933"><a href="#cb377-933" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(temp)</span>
<span id="cb377-934"><a href="#cb377-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-935"><a href="#cb377-935" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove all temporary objects created in this chunk</span></span>
<span id="cb377-936"><a href="#cb377-936" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(patients_mutated, patients_transmuted, patients_case_when, patients_if_else,</span>
<span id="cb377-937"><a href="#cb377-937" aria-hidden="true" tabindex="-1"></a>   patients_split, patients_sub, patients_gsub, patients_tolower, temp)</span>
<span id="cb377-938"><a href="#cb377-938" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-939"><a href="#cb377-939" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-940"><a href="#cb377-940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-941"><a href="#cb377-941" aria-hidden="true" tabindex="-1"></a><span class="fu">#### **3.2.1 Creating variable from long text: Splitting text: Extracting words in to different variables**</span></span>
<span id="cb377-942"><a href="#cb377-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-943"><a href="#cb377-943" aria-hidden="true" tabindex="-1"></a>**Parsing Text Fields in R: Handling Multi-Word Names**</span>
<span id="cb377-944"><a href="#cb377-944" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-945"><a href="#cb377-945" aria-hidden="true" tabindex="-1"></a>In real-world datasets, it's common to encounter text fields where multiple data elements‚Äîsuch as city, state, and country‚Äîare embedded within a single string. These entries often include inconsistent spacing, making them challenging to analyze directly.</span>
<span id="cb377-946"><a href="#cb377-946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-947"><a href="#cb377-947" aria-hidden="true" tabindex="-1"></a>**Parsing** refers to the process of systematically breaking down these complex text fields into structured, usable components.</span>
<span id="cb377-948"><a href="#cb377-948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-949"><a href="#cb377-949" aria-hidden="true" tabindex="-1"></a>**parsing involves**</span>
<span id="cb377-950"><a href="#cb377-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-951"><a href="#cb377-951" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Detecting patterns** in spacing‚Äîfor instance, identifying how many spaces exist between different parts of a string.</span>
<span id="cb377-952"><a href="#cb377-952" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Deciding where to split** the string. For example, a single space might separate words within a single name such as city name (e.g., <span class="in">`"East Falmouth"`</span>), while two or more spaces might indicate the boundary between city, state, and country (e.g., <span class="in">`"East Falmouth  Massachusetts  US"`</span>).</span>
<span id="cb377-953"><a href="#cb377-953" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Creating new variables or columns** such as <span class="in">`city`</span>, <span class="in">`state`</span>, and <span class="in">`country`</span> for cleaner and more structured data representation.</span>
<span id="cb377-954"><a href="#cb377-954" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-955"><a href="#cb377-955" aria-hidden="true" tabindex="-1"></a>**parsing is important**</span>
<span id="cb377-956"><a href="#cb377-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-957"><a href="#cb377-957" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Many administrative or imported datasets contain **combined or messy fields** that hinder direct analysis.</span>
<span id="cb377-958"><a href="#cb377-958" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Proper parsing helps to **standardize** and **clean** these fields, which is a critical step for effective **data management, visualization, and analysis**.</span>
<span id="cb377-959"><a href="#cb377-959" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>It enables downstream tasks such as **geographic grouping**, **mapping**, and **report generation**.</span>
<span id="cb377-960"><a href="#cb377-960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-961"><a href="#cb377-961" aria-hidden="true" tabindex="-1"></a>**Summary Table**</span>
<span id="cb377-962"><a href="#cb377-962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-963"><a href="#cb377-963" aria-hidden="true" tabindex="-1"></a>| Step | Purpose |</span>
<span id="cb377-964"><a href="#cb377-964" aria-hidden="true" tabindex="-1"></a>|-----------------------------|-------------------------------------------|</span>
<span id="cb377-965"><a href="#cb377-965" aria-hidden="true" tabindex="-1"></a>| <span class="in">`str_view()`</span> | Visually inspect spacing patterns between components |</span>
<span id="cb377-966"><a href="#cb377-966" aria-hidden="true" tabindex="-1"></a>| <span class="in">`str_extract_all(" +")`</span> | Extract all space sequences |</span>
<span id="cb377-967"><a href="#cb377-967" aria-hidden="true" tabindex="-1"></a>| <span class="in">`map_int(..., length)`</span> | Count the number of space groups per entry |</span>
<span id="cb377-968"><a href="#cb377-968" aria-hidden="true" tabindex="-1"></a>| <span class="in">`str_count("\\S+")`</span> | Count the number of words |</span>
<span id="cb377-969"><a href="#cb377-969" aria-hidden="true" tabindex="-1"></a>| <span class="in">`nchar()`</span> with <span class="in">`map_chr()`</span> | Show the length of each space between words |</span>
<span id="cb377-970"><a href="#cb377-970" aria-hidden="true" tabindex="-1"></a>| <span class="in">`arrange(desc(word_count))`</span> | Identify rows with the most words (potential outliers) |</span>
<span id="cb377-971"><a href="#cb377-971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-972"><a href="#cb377-972" aria-hidden="true" tabindex="-1"></a>**Detecting and Understanding Space Patterns**</span>
<span id="cb377-973"><a href="#cb377-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-974"><a href="#cb377-974" aria-hidden="true" tabindex="-1"></a>To begin, I used example data from the <span class="in">`patients$BIRTHPLACE`</span> column to identify how different rows are structured and where inconsistencies might exist.</span>
<span id="cb377-975"><a href="#cb377-975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-976"><a href="#cb377-976" aria-hidden="true" tabindex="-1"></a>**1. Visual Inspection of Spacing** We can use str_view() from the stringr package to highlight space sequences:</span>
<span id="cb377-977"><a href="#cb377-977" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-980"><a href="#cb377-980" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-981"><a href="#cb377-981" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(patients<span class="sc">$</span>BIRTHPLACE[<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>], <span class="at">pattern =</span> <span class="st">" +"</span>, <span class="at">match =</span> <span class="cn">TRUE</span>)</span>
<span id="cb377-982"><a href="#cb377-982" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-983"><a href="#cb377-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-984"><a href="#cb377-984" aria-hidden="true" tabindex="-1"></a>This shows, for example: East<span class="sc">\&lt;</span> <span class="sc">\&gt;</span>Falmouth<span class="sc">\&lt;</span> <span class="sc">\&gt;</span>Massachusetts<span class="sc">\&lt;</span> <span class="sc">\&gt;</span>US Where: - One space connects city words ("East Falmouth") - Two spaces separate city, state, and country</span>
<span id="cb377-985"><a href="#cb377-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-986"><a href="#cb377-986" aria-hidden="true" tabindex="-1"></a>**2. Extract and Inspect Space Sequences** Each row shows the space segments between words. This helps us detect whether extra or inconsistent spacing is present.</span>
<span id="cb377-987"><a href="#cb377-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-990"><a href="#cb377-990" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-991"><a href="#cb377-991" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb377-992"><a href="#cb377-992" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">space_groups =</span> <span class="fu">str_extract_all</span>(BIRTHPLACE, <span class="st">" +"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb377-993"><a href="#cb377-993" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(BIRTHPLACE, space_groups) <span class="sc">%&gt;%</span></span>
<span id="cb377-994"><a href="#cb377-994" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb377-995"><a href="#cb377-995" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-996"><a href="#cb377-996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-997"><a href="#cb377-997" aria-hidden="true" tabindex="-1"></a>**3. Count Number of Space Groups** This gives a frequency table showing how many rows have 2, 3, 4, or more space groups. A row with more than 2 groups may have extra words or inconsistent formatting.</span>
<span id="cb377-998"><a href="#cb377-998" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1001"><a href="#cb377-1001" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1002"><a href="#cb377-1002" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb377-1003"><a href="#cb377-1003" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1004"><a href="#cb377-1004" aria-hidden="true" tabindex="-1"></a>    <span class="at">space_groups =</span> <span class="fu">str_extract_all</span>(BIRTHPLACE, <span class="st">" +"</span>),</span>
<span id="cb377-1005"><a href="#cb377-1005" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_spaces =</span> <span class="fu">map_int</span>(space_groups, length)</span>
<span id="cb377-1006"><a href="#cb377-1006" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1007"><a href="#cb377-1007" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(n_spaces)</span>
<span id="cb377-1008"><a href="#cb377-1008" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1009"><a href="#cb377-1009" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1010"><a href="#cb377-1010" aria-hidden="true" tabindex="-1"></a>**4. Count the Number of Words** This confirms how many "word segments" are in each row and helps identify malformed entries.</span>
<span id="cb377-1011"><a href="#cb377-1011" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1014"><a href="#cb377-1014" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1015"><a href="#cb377-1015" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb377-1016"><a href="#cb377-1016" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">space_count =</span> <span class="fu">str_count</span>(BIRTHPLACE, <span class="st">" +"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb377-1017"><a href="#cb377-1017" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(space_count)</span>
<span id="cb377-1018"><a href="#cb377-1018" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1019"><a href="#cb377-1019" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1020"><a href="#cb377-1020" aria-hidden="true" tabindex="-1"></a>**5. Combine Word Count and Space Width** To fully understand the complexity of each row, I extracted the number of words and the exact space widths between them:</span>
<span id="cb377-1021"><a href="#cb377-1021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1022"><a href="#cb377-1022" aria-hidden="true" tabindex="-1"></a>This helps in identifying patterns like:</span>
<span id="cb377-1023"><a href="#cb377-1023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1024"><a href="#cb377-1024" aria-hidden="true" tabindex="-1"></a>"East Falmouth Massachusetts US" ‚Üí 4 words, with spacing like 1 \| 2 \| 1</span>
<span id="cb377-1025"><a href="#cb377-1025" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1026"><a href="#cb377-1026" aria-hidden="true" tabindex="-1"></a>"Boston Massachusetts US" ‚Üí 3 words, spacing 2 \| 2</span>
<span id="cb377-1027"><a href="#cb377-1027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1030"><a href="#cb377-1030" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1031"><a href="#cb377-1031" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb377-1032"><a href="#cb377-1032" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1033"><a href="#cb377-1033" aria-hidden="true" tabindex="-1"></a>    <span class="at">word_count =</span> <span class="fu">str_count</span>(BIRTHPLACE, <span class="st">"</span><span class="sc">\\</span><span class="st">S+"</span>),  <span class="co"># count non-space words</span></span>
<span id="cb377-1034"><a href="#cb377-1034" aria-hidden="true" tabindex="-1"></a>    <span class="at">space_groups =</span> <span class="fu">str_extract_all</span>(BIRTHPLACE, <span class="st">" +"</span>),</span>
<span id="cb377-1035"><a href="#cb377-1035" aria-hidden="true" tabindex="-1"></a>    <span class="at">space_lengths =</span> <span class="fu">map_chr</span>(space_groups, <span class="sc">~</span> <span class="fu">paste</span>(<span class="fu">nchar</span>(.x), <span class="at">collapse =</span> <span class="st">" | "</span>))  <span class="co"># lengths of spaces</span></span>
<span id="cb377-1036"><a href="#cb377-1036" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1037"><a href="#cb377-1037" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(word_count)) <span class="sc">%&gt;%</span></span>
<span id="cb377-1038"><a href="#cb377-1038" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(BIRTHPLACE, word_count, space_lengths) <span class="sc">%&gt;%</span></span>
<span id="cb377-1039"><a href="#cb377-1039" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb377-1040"><a href="#cb377-1040" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1041"><a href="#cb377-1041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1042"><a href="#cb377-1042" aria-hidden="true" tabindex="-1"></a>From observations in the data, split BIRTHPLACE by 2+ spaces would be more appropriate. Those two words having one space are the names for a city, state or country</span>
<span id="cb377-1043"><a href="#cb377-1043" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1046"><a href="#cb377-1046" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1047"><a href="#cb377-1047" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean and split birthplace into city, state/region, and country</span></span>
<span id="cb377-1048"><a href="#cb377-1048" aria-hidden="true" tabindex="-1"></a>patients_clean <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb377-1049"><a href="#cb377-1049" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1050"><a href="#cb377-1050" aria-hidden="true" tabindex="-1"></a>    <span class="at">parts =</span> <span class="fu">str_split</span>(BIRTHPLACE, <span class="st">" {2,}"</span>),             <span class="co"># split BIRTHPLACE by 2+ spaces</span></span>
<span id="cb377-1051"><a href="#cb377-1051" aria-hidden="true" tabindex="-1"></a>    <span class="co"># %||% is a shorthand from the rlang package (used implicitly here via purrr) that returns the left-hand side if it exists, otherwise returns the right-hand side.</span></span>
<span id="cb377-1052"><a href="#cb377-1052" aria-hidden="true" tabindex="-1"></a>    <span class="co"># eg If .x[2] exists, use it; otherwise, use NA (missing character).</span></span>
<span id="cb377-1053"><a href="#cb377-1053" aria-hidden="true" tabindex="-1"></a>    <span class="at">city =</span> <span class="fu">map_chr</span>(parts, <span class="sc">~</span> .x[<span class="dv">1</span>] <span class="sc">%||%</span> <span class="cn">NA_character_</span>),  <span class="co"># city name (first part)</span></span>
<span id="cb377-1054"><a href="#cb377-1054" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> <span class="fu">map_chr</span>(parts, <span class="sc">~</span> .x[<span class="dv">2</span>] <span class="sc">%||%</span> <span class="cn">NA_character_</span>), <span class="co"># state or region (second part)</span></span>
<span id="cb377-1055"><a href="#cb377-1055" aria-hidden="true" tabindex="-1"></a>    <span class="at">country =</span> <span class="fu">map_chr</span>(parts, <span class="sc">~</span> .x[<span class="dv">3</span>] <span class="sc">%||%</span> <span class="cn">NA_character_</span>)<span class="co"># country code (third part)</span></span>
<span id="cb377-1056"><a href="#cb377-1056" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1057"><a href="#cb377-1057" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(BIRTHPLACE, city, state, country)</span>
<span id="cb377-1058"><a href="#cb377-1058" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients_clean, <span class="dv">10</span>)</span>
<span id="cb377-1059"><a href="#cb377-1059" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(patients_clean, <span class="dv">10</span>)</span>
<span id="cb377-1060"><a href="#cb377-1060" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1061"><a href="#cb377-1061" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1062"><a href="#cb377-1062" aria-hidden="true" tabindex="-1"></a>**Conclusion** From this exploration, we observe that:</span>
<span id="cb377-1063"><a href="#cb377-1063" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1064"><a href="#cb377-1064" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Most entries use single spaces within city names (e.g., "East Falmouth")</span>
<span id="cb377-1065"><a href="#cb377-1065" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1066"><a href="#cb377-1066" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Two or more spaces are commonly used to separate city, state, and country names</span>
<span id="cb377-1067"><a href="#cb377-1067" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1068"><a href="#cb377-1068" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Parsing using a split on "{2,}" (two or more spaces) is a reliable strategy</span>
<span id="cb377-1069"><a href="#cb377-1069" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1070"><a href="#cb377-1070" aria-hidden="true" tabindex="-1"></a><span class="fu">#### **3.2.2 Text Pattern Analysis and Variable Extraction from Free/unstructured Text**</span></span>
<span id="cb377-1071"><a href="#cb377-1071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1072"><a href="#cb377-1072" aria-hidden="true" tabindex="-1"></a>Free-text fields are common in public-health, administrative, and clinical datasets. While they are rich in information, the lack of structure and consistent vocabulary can limit their usefulness. In real-world datasets, especially in health, administration, and survey data, free-text fields often contain rich information hidden in inconsistent or varied language. A single concept (e.g., "COVID-19 vaccine") might appear in many forms such as "covid jab", "covid-19 injection", or "SARS-CoV-2 shot". This presentation demonstrates how to transform unstructured text into structured, analyzable data using R. The workflow covers</span>
<span id="cb377-1073"><a href="#cb377-1073" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1074"><a href="#cb377-1074" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>tokenization,</span>
<span id="cb377-1075"><a href="#cb377-1075" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>word-frequency analysis,</span>
<span id="cb377-1076"><a href="#cb377-1076" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>stop-word removal,</span>
<span id="cb377-1077"><a href="#cb377-1077" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>TF‚ÄìIDF to highlight context-specific terms,</span>
<span id="cb377-1078"><a href="#cb377-1078" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>word-cloud visualisation,</span>
<span id="cb377-1079"><a href="#cb377-1079" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>bigram and trigram extraction, and</span>
<span id="cb377-1080"><a href="#cb377-1080" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>pattern detection with regular expressions to create categorical variables.</span>
<span id="cb377-1081"><a href="#cb377-1081" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1082"><a href="#cb377-1082" aria-hidden="true" tabindex="-1"></a>**Basic Tokenisation and Word-Frequency Table**</span>
<span id="cb377-1083"><a href="#cb377-1083" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1084"><a href="#cb377-1084" aria-hidden="true" tabindex="-1"></a>Tokenisation splits long strings of text into individual words or terms ("tokens"). This enables us to calculate how often each word appears, which is essential for understanding vocabulary patterns.</span>
<span id="cb377-1085"><a href="#cb377-1085" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1086"><a href="#cb377-1086" aria-hidden="true" tabindex="-1"></a>We begin by loading the necessary R packages. If a package is not already installed.</span>
<span id="cb377-1087"><a href="#cb377-1087" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1088"><a href="#cb377-1088" aria-hidden="true" tabindex="-1"></a><span class="in">```{r message=FALSE, warning=FALSE}</span></span>
<span id="cb377-1089"><a href="#cb377-1089" aria-hidden="true" tabindex="-1"></a><span class="in"># Install packages when they are not already available</span></span>
<span id="cb377-1090"><a href="#cb377-1090" aria-hidden="true" tabindex="-1"></a><span class="in">if (!require("tidytext")) install.packages("tidytext", dependencies = TRUE)</span></span>
<span id="cb377-1091"><a href="#cb377-1091" aria-hidden="true" tabindex="-1"></a><span class="in">if (!require("wordcloud")) install.packages("wordcloud", dependencies = TRUE)</span></span>
<span id="cb377-1092"><a href="#cb377-1092" aria-hidden="true" tabindex="-1"></a><span class="in">if (!require("tm"))        install.packages("tm",        dependencies = TRUE)</span></span>
<span id="cb377-1093"><a href="#cb377-1093" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1094"><a href="#cb377-1094" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidytext)   # text mining utilities</span></span>
<span id="cb377-1095"><a href="#cb377-1095" aria-hidden="true" tabindex="-1"></a><span class="in">library(wordcloud)  # word-cloud plots</span></span>
<span id="cb377-1096"><a href="#cb377-1096" aria-hidden="true" tabindex="-1"></a><span class="in">library(tm)         # text-mining helpers used by wordcloud</span></span>
<span id="cb377-1097"><a href="#cb377-1097" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1098"><a href="#cb377-1098" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1099"><a href="#cb377-1099" aria-hidden="true" tabindex="-1"></a><span class="in">```{r message=FALSE, warning=FALSE}</span></span>
<span id="cb377-1100"><a href="#cb377-1100" aria-hidden="true" tabindex="-1"></a><span class="in">word_freq &lt;- vaccination %&gt;%</span></span>
<span id="cb377-1101"><a href="#cb377-1101" aria-hidden="true" tabindex="-1"></a><span class="in">  unnest_tokens(word, DESCRIPTION) %&gt;%</span></span>
<span id="cb377-1102"><a href="#cb377-1102" aria-hidden="true" tabindex="-1"></a><span class="in">  count(word, sort = TRUE) %&gt;%</span></span>
<span id="cb377-1103"><a href="#cb377-1103" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(!is.na(word) &amp; word != "")</span></span>
<span id="cb377-1104"><a href="#cb377-1104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1105"><a href="#cb377-1105" aria-hidden="true" tabindex="-1"></a><span class="in">head(word_freq)</span></span>
<span id="cb377-1106"><a href="#cb377-1106" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1107"><a href="#cb377-1107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1108"><a href="#cb377-1108" aria-hidden="true" tabindex="-1"></a>**Remove Stop Words**</span>
<span id="cb377-1109"><a href="#cb377-1109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1110"><a href="#cb377-1110" aria-hidden="true" tabindex="-1"></a>Stop words are common terms like "and", "the", or "in" that typically do not contribute meaningful information in analysis. Removing these helps us focus on content-rich terms.</span>
<span id="cb377-1111"><a href="#cb377-1111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1114"><a href="#cb377-1114" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1115"><a href="#cb377-1115" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"stop_words"</span>)          <span class="co"># built-in tidytext stop-word list</span></span>
<span id="cb377-1116"><a href="#cb377-1116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1117"><a href="#cb377-1117" aria-hidden="true" tabindex="-1"></a>word_freq_clean <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb377-1118"><a href="#cb377-1118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, DESCRIPTION) <span class="sc">%&gt;%</span></span>
<span id="cb377-1119"><a href="#cb377-1119" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words, <span class="at">by =</span> <span class="st">"word"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-1120"><a href="#cb377-1120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb377-1121"><a href="#cb377-1121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1122"><a href="#cb377-1122" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(word_freq_clean)</span>
<span id="cb377-1123"><a href="#cb377-1123" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1124"><a href="#cb377-1124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1125"><a href="#cb377-1125" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1126"><a href="#cb377-1126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1127"><a href="#cb377-1127" aria-hidden="true" tabindex="-1"></a>**Visualise Word Frequencies**</span>
<span id="cb377-1128"><a href="#cb377-1128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1129"><a href="#cb377-1129" aria-hidden="true" tabindex="-1"></a>This bar chart provides a visual overview of the most common meaningful words in the dataset after stop-word removal.</span>
<span id="cb377-1130"><a href="#cb377-1130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1133"><a href="#cb377-1133" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1134"><a href="#cb377-1134" aria-hidden="true" tabindex="-1"></a>word_freq_clean <span class="sc">%&gt;%</span></span>
<span id="cb377-1135"><a href="#cb377-1135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-1136"><a href="#cb377-1136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(word, n), <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb377-1137"><a href="#cb377-1137" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb377-1138"><a href="#cb377-1138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb377-1139"><a href="#cb377-1139" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Most Frequent Words After Stop-Word Removal"</span>,</span>
<span id="cb377-1140"><a href="#cb377-1140" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Word"</span>,</span>
<span id="cb377-1141"><a href="#cb377-1141" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>)</span>
<span id="cb377-1142"><a href="#cb377-1142" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1143"><a href="#cb377-1143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1144"><a href="#cb377-1144" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1145"><a href="#cb377-1145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1146"><a href="#cb377-1146" aria-hidden="true" tabindex="-1"></a>**Create a Word Cloud**</span>
<span id="cb377-1147"><a href="#cb377-1147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1148"><a href="#cb377-1148" aria-hidden="true" tabindex="-1"></a>A word cloud presents word frequencies visually, with more frequent words appearing larger. It offers a quick snapshot of key terms in the dataset.</span>
<span id="cb377-1149"><a href="#cb377-1149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1152"><a href="#cb377-1152" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1153"><a href="#cb377-1153" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>))  <span class="co"># reduce plot margins</span></span>
<span id="cb377-1154"><a href="#cb377-1154" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(<span class="at">words =</span> word_freq_clean<span class="sc">$</span>word,</span>
<span id="cb377-1155"><a href="#cb377-1155" aria-hidden="true" tabindex="-1"></a>          <span class="at">freq =</span> word_freq_clean<span class="sc">$</span>n,</span>
<span id="cb377-1156"><a href="#cb377-1156" aria-hidden="true" tabindex="-1"></a>          <span class="at">min.freq =</span> <span class="dv">1</span>,</span>
<span id="cb377-1157"><a href="#cb377-1157" aria-hidden="true" tabindex="-1"></a>          <span class="at">max.words =</span> <span class="dv">100</span>,</span>
<span id="cb377-1158"><a href="#cb377-1158" aria-hidden="true" tabindex="-1"></a>          <span class="at">random.order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb377-1159"><a href="#cb377-1159" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1160"><a href="#cb377-1160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1161"><a href="#cb377-1161" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1162"><a href="#cb377-1162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1163"><a href="#cb377-1163" aria-hidden="true" tabindex="-1"></a>**TF‚ÄìIDF Analysis**</span>
<span id="cb377-1164"><a href="#cb377-1164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1165"><a href="#cb377-1165" aria-hidden="true" tabindex="-1"></a>TF‚ÄìIDF (Term Frequency‚ÄìInverse Document Frequency) highlights words that are common within a group but rare across groups. This helps identify terms that are contextually important for specific subgroups.</span>
<span id="cb377-1166"><a href="#cb377-1166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1167"><a href="#cb377-1167" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=FALSE}</span></span>
<span id="cb377-1168"><a href="#cb377-1168" aria-hidden="true" tabindex="-1"></a><span class="in"># Example assumes a column called 'source_id' identifies individual documents</span></span>
<span id="cb377-1169"><a href="#cb377-1169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1170"><a href="#cb377-1170" aria-hidden="true" tabindex="-1"></a><span class="in">tfidf_result &lt;- vaccination %&gt;%</span></span>
<span id="cb377-1171"><a href="#cb377-1171" aria-hidden="true" tabindex="-1"></a><span class="in">  select(source_id, DESCRIPTION) %&gt;%</span></span>
<span id="cb377-1172"><a href="#cb377-1172" aria-hidden="true" tabindex="-1"></a><span class="in">  unnest_tokens(word, DESCRIPTION) %&gt;%</span></span>
<span id="cb377-1173"><a href="#cb377-1173" aria-hidden="true" tabindex="-1"></a><span class="in">  anti_join(stop_words, by = "word") %&gt;%</span></span>
<span id="cb377-1174"><a href="#cb377-1174" aria-hidden="true" tabindex="-1"></a><span class="in">  count(source_id, word, sort = TRUE) %&gt;%</span></span>
<span id="cb377-1175"><a href="#cb377-1175" aria-hidden="true" tabindex="-1"></a><span class="in">  bind_tf_idf(word, source_id, n) %&gt;%</span></span>
<span id="cb377-1176"><a href="#cb377-1176" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(desc(tf_idf))</span></span>
<span id="cb377-1177"><a href="#cb377-1177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1178"><a href="#cb377-1178" aria-hidden="true" tabindex="-1"></a><span class="in">head(tfidf_result)</span></span>
<span id="cb377-1179"><a href="#cb377-1179" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1180"><a href="#cb377-1180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1181"><a href="#cb377-1181" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1182"><a href="#cb377-1182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1183"><a href="#cb377-1183" aria-hidden="true" tabindex="-1"></a>**Bigrams and Trigrams (n-grams)**</span>
<span id="cb377-1184"><a href="#cb377-1184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1185"><a href="#cb377-1185" aria-hidden="true" tabindex="-1"></a>Sometimes the context of words matters more than individual terms. N-grams (bigrams, trigrams, etc.) allow us to capture meaningful phrases instead of isolated words.</span>
<span id="cb377-1186"><a href="#cb377-1186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1187"><a href="#cb377-1187" aria-hidden="true" tabindex="-1"></a>**Bigrams ‚Äì two-word phrases**</span>
<span id="cb377-1188"><a href="#cb377-1188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1191"><a href="#cb377-1191" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1192"><a href="#cb377-1192" aria-hidden="true" tabindex="-1"></a>bigrams <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb377-1193"><a href="#cb377-1193" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(bigram, DESCRIPTION, <span class="at">token =</span> <span class="st">"ngrams"</span>, <span class="at">n =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-1194"><a href="#cb377-1194" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(bigram, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb377-1195"><a href="#cb377-1195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1196"><a href="#cb377-1196" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bigrams)</span>
<span id="cb377-1197"><a href="#cb377-1197" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1198"><a href="#cb377-1198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1199"><a href="#cb377-1199" aria-hidden="true" tabindex="-1"></a>**Trigrams ‚Äì three-word phrases**</span>
<span id="cb377-1200"><a href="#cb377-1200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1203"><a href="#cb377-1203" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1204"><a href="#cb377-1204" aria-hidden="true" tabindex="-1"></a>trigrams <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb377-1205"><a href="#cb377-1205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(trigram, DESCRIPTION, <span class="at">token =</span> <span class="st">"ngrams"</span>, <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-1206"><a href="#cb377-1206" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(trigram, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb377-1207"><a href="#cb377-1207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1208"><a href="#cb377-1208" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(trigrams)</span>
<span id="cb377-1209"><a href="#cb377-1209" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1210"><a href="#cb377-1210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1211"><a href="#cb377-1211" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1212"><a href="#cb377-1212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1213"><a href="#cb377-1213" aria-hidden="true" tabindex="-1"></a>**Create Categorical Variables from free and unstructured Text**</span>
<span id="cb377-1214"><a href="#cb377-1214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1215"><a href="#cb377-1215" aria-hidden="true" tabindex="-1"></a>We use regular expressions to classify unstructured free-text values into consistent categories. This transformation is critical for summarising or modelling based on text. We can identify and map all words that contain a certain substring (like "covid" in "COVID-19", "covid_19", or "covid"). You can use str_detect() with a case-insensitive regular expression to filter your word frequency table.</span>
<span id="cb377-1216"><a href="#cb377-1216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1219"><a href="#cb377-1219" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1220"><a href="#cb377-1220" aria-hidden="true" tabindex="-1"></a>vaccination <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb377-1221"><a href="#cb377-1221" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vaccine_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb377-1222"><a href="#cb377-1222" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"covid|sars-cov-2"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"COVID-19"</span>,</span>
<span id="cb377-1223"><a href="#cb377-1223" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"influenza"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Influenza"</span>,</span>
<span id="cb377-1224"><a href="#cb377-1224" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"hepatitis|hep a|hep b"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Hepatitis"</span>,</span>
<span id="cb377-1225"><a href="#cb377-1225" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"hpv"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"HPV"</span>,</span>
<span id="cb377-1226"><a href="#cb377-1226" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"mmr"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"MMR"</span>,</span>
<span id="cb377-1227"><a href="#cb377-1227" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"dtap|tdap|tetanus|td </span><span class="sc">\\</span><span class="st">(?adult</span><span class="sc">\\</span><span class="st">)?"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"DTP group"</span>,</span>
<span id="cb377-1228"><a href="#cb377-1228" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"ipv"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"IPV"</span>,</span>
<span id="cb377-1229"><a href="#cb377-1229" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"hib"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Hib"</span>,</span>
<span id="cb377-1230"><a href="#cb377-1230" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"meningococcal|mcv4"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Meningococcal"</span>,</span>
<span id="cb377-1231"><a href="#cb377-1231" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"pneumococcal.*13"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Pneumococcal PCV13"</span>,</span>
<span id="cb377-1232"><a href="#cb377-1232" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"pneumococcal.*23"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Pneumococcal PPV23"</span>,</span>
<span id="cb377-1233"><a href="#cb377-1233" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"rotavirus"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Rotavirus"</span>,</span>
<span id="cb377-1234"><a href="#cb377-1234" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"varicella"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Varicella"</span>,</span>
<span id="cb377-1235"><a href="#cb377-1235" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DESCRIPTION, <span class="fu">regex</span>(<span class="st">"zoster"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"Zoster"</span>,</span>
<span id="cb377-1236"><a href="#cb377-1236" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span></span>
<span id="cb377-1237"><a href="#cb377-1237" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb377-1238"><a href="#cb377-1238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1239"><a href="#cb377-1239" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency check</span></span>
<span id="cb377-1240"><a href="#cb377-1240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1241"><a href="#cb377-1241" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(vaccination<span class="sc">$</span>vaccine_group)</span>
<span id="cb377-1242"><a href="#cb377-1242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1243"><a href="#cb377-1243" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouping Values Using %in% Inside case_when()</span></span>
<span id="cb377-1244"><a href="#cb377-1244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1245"><a href="#cb377-1245" aria-hidden="true" tabindex="-1"></a>vaccination <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb377-1246"><a href="#cb377-1246" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vacc_group3 =</span> <span class="fu">case_when</span>(</span>
<span id="cb377-1247"><a href="#cb377-1247" aria-hidden="true" tabindex="-1"></a>    vaccine_group <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"COVID-19"</span>, <span class="st">"Influenza"</span>) <span class="sc">~</span> <span class="st">"Respiratory vaccines"</span>,</span>
<span id="cb377-1248"><a href="#cb377-1248" aria-hidden="true" tabindex="-1"></a>    vaccine_group <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DTP group"</span>, <span class="st">"Hepatitis"</span>, <span class="st">"HPV"</span>, <span class="st">"Hib"</span>, <span class="st">"IPV"</span>, </span>
<span id="cb377-1249"><a href="#cb377-1249" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Meningococcal"</span>, <span class="st">"MMR"</span>) <span class="sc">~</span> <span class="st">"Childhood vaccines"</span>,</span>
<span id="cb377-1250"><a href="#cb377-1250" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span></span>
<span id="cb377-1251"><a href="#cb377-1251" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb377-1252"><a href="#cb377-1252" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>ENCOUNTER, <span class="sc">-</span>CODE)</span>
<span id="cb377-1253"><a href="#cb377-1253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1254"><a href="#cb377-1254" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> (vaccination)</span>
<span id="cb377-1255"><a href="#cb377-1255" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1256"><a href="#cb377-1256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1257"><a href="#cb377-1257" aria-hidden="true" tabindex="-1"></a>**Conclusion**</span>
<span id="cb377-1258"><a href="#cb377-1258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1259"><a href="#cb377-1259" aria-hidden="true" tabindex="-1"></a>By combining the <span class="in">`tidytext`</span>, <span class="in">`stringr`</span>, and <span class="in">`dplyr`</span> packages we converted messy free-text into structured data ready for analysis. This approach supports reproducible work, clearer insights, and more robust statistical modelling.</span>
<span id="cb377-1260"><a href="#cb377-1260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1261"><a href="#cb377-1261" aria-hidden="true" tabindex="-1"></a><span class="fu">### **3.3 Factors and Labels**</span></span>
<span id="cb377-1262"><a href="#cb377-1262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1263"><a href="#cb377-1263" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Creating factor levels and relabeling\</span>
<span id="cb377-1264"><a href="#cb377-1264" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Applying labels with <span class="in">`label()`</span> and <span class="in">`val_labels()`</span>\</span>
<span id="cb377-1265"><a href="#cb377-1265" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Descriptive summaries with <span class="in">`describe()`</span></span>
<span id="cb377-1266"><a href="#cb377-1266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1267"><a href="#cb377-1267" aria-hidden="true" tabindex="-1"></a>In R, categorical variables can be represented as **factors** to support grouping, modeling, and formatting for reporting. Factor variables store both the value and its associated level label.</span>
<span id="cb377-1268"><a href="#cb377-1268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1269"><a href="#cb377-1269" aria-hidden="true" tabindex="-1"></a>This section introduces key functions to:</span>
<span id="cb377-1270"><a href="#cb377-1270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1271"><a href="#cb377-1271" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Convert variables into factors\</span>
<span id="cb377-1272"><a href="#cb377-1272" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Rename or reorder levels for clarity\</span>
<span id="cb377-1273"><a href="#cb377-1273" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Apply variable-level labels using <span class="in">`label()`</span> or <span class="in">`var_label()`</span>\</span>
<span id="cb377-1274"><a href="#cb377-1274" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Assign value labels using <span class="in">`val_labels()`</span> (e.g., <span class="in">`1 = Male`</span>)\</span>
<span id="cb377-1275"><a href="#cb377-1275" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Generate descriptive metadata summaries using <span class="in">`Hmisc::describe()`</span></span>
<span id="cb377-1276"><a href="#cb377-1276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1277"><a href="#cb377-1277" aria-hidden="true" tabindex="-1"></a>**Value labels** are especially useful when numeric codes represent categorical responses. These can be shown in summaries or retained for export and display.</span>
<span id="cb377-1278"><a href="#cb377-1278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1279"><a href="#cb377-1279" aria-hidden="true" tabindex="-1"></a>You can choose to display or hide value labels:</span>
<span id="cb377-1280"><a href="#cb377-1280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1281"><a href="#cb377-1281" aria-hidden="true" tabindex="-1"></a>options(labelled::val_labels_visible = TRUE) <span class="sc">\#</span> Show values like "1 = Male" options(labelled::val_labels_visible = FALSE) <span class="sc">\#</span> Show only "Male"</span>
<span id="cb377-1282"><a href="#cb377-1282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1283"><a href="#cb377-1283" aria-hidden="true" tabindex="-1"></a>**üîπ Summary of Functions for Working with Factors and Labels**</span>
<span id="cb377-1284"><a href="#cb377-1284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1285"><a href="#cb377-1285" aria-hidden="true" tabindex="-1"></a>| **Task** | **Function** | **Description** |</span>
<span id="cb377-1286"><a href="#cb377-1286" aria-hidden="true" tabindex="-1"></a>|------------------|-----------------------|-------------------------------|</span>
<span id="cb377-1287"><a href="#cb377-1287" aria-hidden="true" tabindex="-1"></a>| Convert to factor | <span class="in">`as.factor(x)`</span> | Convert a character or numeric variable into a factor |</span>
<span id="cb377-1288"><a href="#cb377-1288" aria-hidden="true" tabindex="-1"></a>| Reorder levels | <span class="in">`factor(x, levels = ...)`</span> | Define a specific order for levels |</span>
<span id="cb377-1289"><a href="#cb377-1289" aria-hidden="true" tabindex="-1"></a>| Rename factor levels | <span class="in">`levels(x) &lt;- c(...)`</span> | Manually change the displayed names of factor levels |</span>
<span id="cb377-1290"><a href="#cb377-1290" aria-hidden="true" tabindex="-1"></a>| Recode with <span class="in">`forcats`</span> | <span class="in">`fct_recode()`</span>, <span class="in">`fct_relevel()`</span> | Relabel, reorder, or collapse factor levels using tidyverse tools |</span>
<span id="cb377-1291"><a href="#cb377-1291" aria-hidden="true" tabindex="-1"></a>| Apply variable label | <span class="in">`label(x) &lt;- "..."`</span> or <span class="in">`var_label(x) &lt;- "..."`</span> | Assign a description to a variable |</span>
<span id="cb377-1292"><a href="#cb377-1292" aria-hidden="true" tabindex="-1"></a>| Apply value labels | <span class="in">`val_labels(x) &lt;- c("Label" = code)`</span> | Define how codes map to category names (e.g., <span class="in">`1 = Male`</span>) |</span>
<span id="cb377-1293"><a href="#cb377-1293" aria-hidden="true" tabindex="-1"></a>| Retrieve labels | <span class="in">`label(x)`</span>, <span class="in">`val_labels(x)`</span> | View current labels or mappings |</span>
<span id="cb377-1294"><a href="#cb377-1294" aria-hidden="true" tabindex="-1"></a>| Generate summary with labels | <span class="in">`Hmisc::describe(df)`</span> | Return a summary including variable names, labels, types, and distributions |</span>
<span id="cb377-1295"><a href="#cb377-1295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1296"><a href="#cb377-1296" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb377-1297"><a href="#cb377-1297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1298"><a href="#cb377-1298" aria-hidden="true" tabindex="-1"></a><span class="in"># Convert column names to lowercase</span></span>
<span id="cb377-1299"><a href="#cb377-1299" aria-hidden="true" tabindex="-1"></a><span class="in">colnames(patients) &lt;- tolower(colnames(patients))</span></span>
<span id="cb377-1300"><a href="#cb377-1300" aria-hidden="true" tabindex="-1"></a><span class="in">colnames(vaccination) &lt;- tolower(colnames(vaccination))</span></span>
<span id="cb377-1301"><a href="#cb377-1301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1302"><a href="#cb377-1302" aria-hidden="true" tabindex="-1"></a><span class="in">vacc_pt_merged &lt;- left_join(patients, vaccination, by = c("id" = "patient"))</span></span>
<span id="cb377-1303"><a href="#cb377-1303" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1304"><a href="#cb377-1304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1307"><a href="#cb377-1307" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1308"><a href="#cb377-1308" aria-hidden="true" tabindex="-1"></a><span class="co"># Select two categorical variables</span></span>
<span id="cb377-1309"><a href="#cb377-1309" aria-hidden="true" tabindex="-1"></a>vacc_factor <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb377-1310"><a href="#cb377-1310" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gender, marital)</span>
<span id="cb377-1311"><a href="#cb377-1311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1312"><a href="#cb377-1312" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert character to factor</span></span>
<span id="cb377-1313"><a href="#cb377-1313" aria-hidden="true" tabindex="-1"></a>vacc_factor <span class="ot">&lt;-</span> vacc_factor <span class="sc">%&gt;%</span></span>
<span id="cb377-1314"><a href="#cb377-1314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1315"><a href="#cb377-1315" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender =</span> <span class="fu">factor</span>(gender),</span>
<span id="cb377-1316"><a href="#cb377-1316" aria-hidden="true" tabindex="-1"></a>    <span class="at">marital =</span> <span class="fu">factor</span>(marital)</span>
<span id="cb377-1317"><a href="#cb377-1317" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-1318"><a href="#cb377-1318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1319"><a href="#cb377-1319" aria-hidden="true" tabindex="-1"></a><span class="co"># Relabel factor levels using fct_recode()</span></span>
<span id="cb377-1320"><a href="#cb377-1320" aria-hidden="true" tabindex="-1"></a>vacc_factor <span class="ot">&lt;-</span> vacc_factor <span class="sc">%&gt;%</span></span>
<span id="cb377-1321"><a href="#cb377-1321" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1322"><a href="#cb377-1322" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender =</span> <span class="fu">fct_recode</span>(gender, <span class="st">"Male"</span> <span class="ot">=</span> <span class="st">"M"</span>, <span class="st">"Female"</span> <span class="ot">=</span> <span class="st">"F"</span>),</span>
<span id="cb377-1323"><a href="#cb377-1323" aria-hidden="true" tabindex="-1"></a>    <span class="at">marital =</span> <span class="fu">fct_recode</span>(marital,</span>
<span id="cb377-1324"><a href="#cb377-1324" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Married"</span> <span class="ot">=</span> <span class="st">"M"</span>,</span>
<span id="cb377-1325"><a href="#cb377-1325" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Divorced"</span> <span class="ot">=</span> <span class="st">"D"</span>,</span>
<span id="cb377-1326"><a href="#cb377-1326" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Single"</span> <span class="ot">=</span> <span class="st">"S"</span>,</span>
<span id="cb377-1327"><a href="#cb377-1327" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Widowed"</span> <span class="ot">=</span> <span class="st">"W"</span>)</span>
<span id="cb377-1328"><a href="#cb377-1328" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-1329"><a href="#cb377-1329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1330"><a href="#cb377-1330" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(vacc_factor)</span>
<span id="cb377-1331"><a href="#cb377-1331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1332"><a href="#cb377-1332" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign variable labels</span></span>
<span id="cb377-1333"><a href="#cb377-1333" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(vacc_factor<span class="sc">$</span>gender) <span class="ot">&lt;-</span> <span class="st">"Biological Sex"</span></span>
<span id="cb377-1334"><a href="#cb377-1334" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(vacc_factor<span class="sc">$</span>marital) <span class="ot">&lt;-</span> <span class="st">"Marital Status"</span></span>
<span id="cb377-1335"><a href="#cb377-1335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1336"><a href="#cb377-1336" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign value labels</span></span>
<span id="cb377-1337"><a href="#cb377-1337" aria-hidden="true" tabindex="-1"></a>vacc_factor<span class="sc">$</span>gender_chr <span class="ot">&lt;-</span> <span class="fu">as.character</span>(vacc_factor<span class="sc">$</span>gender) <span class="co"># Convert factor to character</span></span>
<span id="cb377-1338"><a href="#cb377-1338" aria-hidden="true" tabindex="-1"></a><span class="fu">val_labels</span>(vacc_factor<span class="sc">$</span>gender_chr) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Male"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"Female"</span>)</span>
<span id="cb377-1339"><a href="#cb377-1339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1340"><a href="#cb377-1340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1341"><a href="#cb377-1341" aria-hidden="true" tabindex="-1"></a><span class="co"># View internal structure and label info</span></span>
<span id="cb377-1342"><a href="#cb377-1342" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(vacc_factor)</span>
<span id="cb377-1343"><a href="#cb377-1343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1344"><a href="#cb377-1344" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove bad labels if needed:</span></span>
<span id="cb377-1345"><a href="#cb377-1345" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(vacc_factor<span class="sc">$</span>gender) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb377-1346"><a href="#cb377-1346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1347"><a href="#cb377-1347" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove temporary object</span></span>
<span id="cb377-1348"><a href="#cb377-1348" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vacc_factor)</span>
<span id="cb377-1349"><a href="#cb377-1349" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1350"><a href="#cb377-1350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1351"><a href="#cb377-1351" aria-hidden="true" tabindex="-1"></a><span class="fu">### **3.4 Grouping and Summarizing Data**</span></span>
<span id="cb377-1352"><a href="#cb377-1352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1355"><a href="#cb377-1355" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1356"><a href="#cb377-1356" aria-hidden="true" tabindex="-1"></a><span class="co"># Select two categorical variables</span></span>
<span id="cb377-1357"><a href="#cb377-1357" aria-hidden="true" tabindex="-1"></a>vacc_factor <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb377-1358"><a href="#cb377-1358" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gender, marital)</span>
<span id="cb377-1359"><a href="#cb377-1359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1360"><a href="#cb377-1360" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert character to factor</span></span>
<span id="cb377-1361"><a href="#cb377-1361" aria-hidden="true" tabindex="-1"></a>vacc_factor <span class="ot">&lt;-</span> vacc_factor <span class="sc">%&gt;%</span></span>
<span id="cb377-1362"><a href="#cb377-1362" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1363"><a href="#cb377-1363" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender =</span> <span class="fu">factor</span>(gender),</span>
<span id="cb377-1364"><a href="#cb377-1364" aria-hidden="true" tabindex="-1"></a>    <span class="at">marital =</span> <span class="fu">factor</span>(marital)</span>
<span id="cb377-1365"><a href="#cb377-1365" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-1366"><a href="#cb377-1366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1367"><a href="#cb377-1367" aria-hidden="true" tabindex="-1"></a><span class="co"># Relabel factor levels using fct_recode()</span></span>
<span id="cb377-1368"><a href="#cb377-1368" aria-hidden="true" tabindex="-1"></a>vacc_factor <span class="ot">&lt;-</span> vacc_factor <span class="sc">%&gt;%</span></span>
<span id="cb377-1369"><a href="#cb377-1369" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1370"><a href="#cb377-1370" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender =</span> <span class="fu">fct_recode</span>(gender, <span class="st">"Male"</span> <span class="ot">=</span> <span class="st">"M"</span>, <span class="st">"Female"</span> <span class="ot">=</span> <span class="st">"F"</span>),</span>
<span id="cb377-1371"><a href="#cb377-1371" aria-hidden="true" tabindex="-1"></a>    <span class="at">marital =</span> <span class="fu">fct_recode</span>(marital,</span>
<span id="cb377-1372"><a href="#cb377-1372" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Married"</span> <span class="ot">=</span> <span class="st">"M"</span>,</span>
<span id="cb377-1373"><a href="#cb377-1373" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Divorced"</span> <span class="ot">=</span> <span class="st">"D"</span>,</span>
<span id="cb377-1374"><a href="#cb377-1374" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Single"</span> <span class="ot">=</span> <span class="st">"S"</span>,</span>
<span id="cb377-1375"><a href="#cb377-1375" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Widowed"</span> <span class="ot">=</span> <span class="st">"W"</span>)</span>
<span id="cb377-1376"><a href="#cb377-1376" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-1377"><a href="#cb377-1377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1378"><a href="#cb377-1378" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(vacc_factor)</span>
<span id="cb377-1379"><a href="#cb377-1379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1380"><a href="#cb377-1380" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign variable labels</span></span>
<span id="cb377-1381"><a href="#cb377-1381" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(vacc_factor<span class="sc">$</span>gender) <span class="ot">&lt;-</span> <span class="st">"Biological Sex"</span></span>
<span id="cb377-1382"><a href="#cb377-1382" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(vacc_factor<span class="sc">$</span>marital) <span class="ot">&lt;-</span> <span class="st">"Marital Status"</span></span>
<span id="cb377-1383"><a href="#cb377-1383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1384"><a href="#cb377-1384" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign value labels</span></span>
<span id="cb377-1385"><a href="#cb377-1385" aria-hidden="true" tabindex="-1"></a>vacc_factor<span class="sc">$</span>gender_chr <span class="ot">&lt;-</span> <span class="fu">as.character</span>(vacc_factor<span class="sc">$</span>gender) <span class="co"># Convert factor to character</span></span>
<span id="cb377-1386"><a href="#cb377-1386" aria-hidden="true" tabindex="-1"></a><span class="fu">val_labels</span>(vacc_factor<span class="sc">$</span>gender_chr) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Male"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"Female"</span>)</span>
<span id="cb377-1387"><a href="#cb377-1387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1388"><a href="#cb377-1388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1389"><a href="#cb377-1389" aria-hidden="true" tabindex="-1"></a><span class="co"># View internal structure and label info</span></span>
<span id="cb377-1390"><a href="#cb377-1390" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(vacc_factor)</span>
<span id="cb377-1391"><a href="#cb377-1391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1392"><a href="#cb377-1392" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove bad labels if needed:</span></span>
<span id="cb377-1393"><a href="#cb377-1393" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(vacc_factor<span class="sc">$</span>gender) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb377-1394"><a href="#cb377-1394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1395"><a href="#cb377-1395" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove temporary object</span></span>
<span id="cb377-1396"><a href="#cb377-1396" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vacc_factor)</span>
<span id="cb377-1397"><a href="#cb377-1397" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1398"><a href="#cb377-1398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1399"><a href="#cb377-1399" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`group_by()`</span>, <span class="in">`summarize()`</span>, <span class="in">`ungroup()`</span></span>
<span id="cb377-1400"><a href="#cb377-1400" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Row and column percentages: details presented in section 7.2 below</span>
<span id="cb377-1401"><a href="#cb377-1401" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Weighted summaries with <span class="in">`wt =`</span></span>
<span id="cb377-1402"><a href="#cb377-1402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1403"><a href="#cb377-1403" aria-hidden="true" tabindex="-1"></a>Grouping and summarizing data is fundamental for understanding patterns, distributions, and relationships within datasets.\</span>
<span id="cb377-1404"><a href="#cb377-1404" aria-hidden="true" tabindex="-1"></a>In <span class="in">`dplyr`</span>, the functions <span class="in">`group_by()`</span> and <span class="in">`summarize()`</span> are used together to calculate statistics across different groups.\</span>
<span id="cb377-1405"><a href="#cb377-1405" aria-hidden="true" tabindex="-1"></a>We can also calculate proportions (row-wise or column-wise) and perform weighted summaries when necessary. The details regarding row and column percentages are presented in section 7.2 below.</span>
<span id="cb377-1406"><a href="#cb377-1406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1407"><a href="#cb377-1407" aria-hidden="true" tabindex="-1"></a>These steps are critical for aggregating information into meaningful insights, especially when working with categorical, grouped, or longitudinal data.</span>
<span id="cb377-1408"><a href="#cb377-1408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1409"><a href="#cb377-1409" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1410"><a href="#cb377-1410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1411"><a href="#cb377-1411" aria-hidden="true" tabindex="-1"></a>üîπ **Summary of Functions for Grouping and Summarizing**</span>
<span id="cb377-1412"><a href="#cb377-1412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1413"><a href="#cb377-1413" aria-hidden="true" tabindex="-1"></a>| **Task** | **Function** | **Purpose** |</span>
<span id="cb377-1414"><a href="#cb377-1414" aria-hidden="true" tabindex="-1"></a>|:--------------------|:--------------------|:-----------------------------|</span>
<span id="cb377-1415"><a href="#cb377-1415" aria-hidden="true" tabindex="-1"></a>| Group data by one or more variables | <span class="in">`group_by()`</span> | Define groups for aggregation |</span>
<span id="cb377-1416"><a href="#cb377-1416" aria-hidden="true" tabindex="-1"></a>| Summarize grouped data | <span class="in">`summarize()`</span> | Apply aggregation functions (e.g., mean, sum, count) |</span>
<span id="cb377-1417"><a href="#cb377-1417" aria-hidden="true" tabindex="-1"></a>| Remove grouping structure | <span class="in">`ungroup()`</span> | Return to ungrouped state after summary |</span>
<span id="cb377-1418"><a href="#cb377-1418" aria-hidden="true" tabindex="-1"></a>| Calculate row-wise or column-wise proportions | Manual with <span class="in">`mutate()`</span>, <span class="in">`prop.table()`</span>, etc. | Understand percentage distribution within/between groups |</span>
<span id="cb377-1419"><a href="#cb377-1419" aria-hidden="true" tabindex="-1"></a>| Weighted summaries | <span class="in">`summarize(wt = )`</span> | Compute weighted means, sums, or percentages when different rows contribute differently |</span>
<span id="cb377-1420"><a href="#cb377-1420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1421"><a href="#cb377-1421" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1422"><a href="#cb377-1422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1423"><a href="#cb377-1423" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è Grouping and summarization allow efficient exploration of key relationships and preparation of clean summary tables.</span>
<span id="cb377-1424"><a href="#cb377-1424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1425"><a href="#cb377-1425" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1426"><a href="#cb377-1426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1429"><a href="#cb377-1429" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1430"><a href="#cb377-1430" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1431"><a href="#cb377-1431" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouping and Summarizing Breast Cancer Data</span></span>
<span id="cb377-1432"><a href="#cb377-1432" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1433"><a href="#cb377-1433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1434"><a href="#cb377-1434" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouping by SA3 name, State, and Year, and summarizing participation</span></span>
<span id="cb377-1435"><a href="#cb377-1435" aria-hidden="true" tabindex="-1"></a>bc_summary_year <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-1436"><a href="#cb377-1436" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb377-1437"><a href="#cb377-1437" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb377-1438"><a href="#cb377-1438" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_participants =</span> <span class="fu">sum</span>(part50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb377-1439"><a href="#cb377-1439" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_population =</span> <span class="fu">sum</span>(pop50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb377-1440"><a href="#cb377-1440" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_screening_rate =</span> <span class="fu">mean</span>(rate50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb377-1441"><a href="#cb377-1441" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb377-1442"><a href="#cb377-1442" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-1443"><a href="#cb377-1443" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_summary_year, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-1444"><a href="#cb377-1444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1445"><a href="#cb377-1445" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Create Vaccination Pattern Dataset ---</span></span>
<span id="cb377-1446"><a href="#cb377-1446" aria-hidden="true" tabindex="-1"></a>df_vaccination_plot <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb377-1447"><a href="#cb377-1447" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month, vaccine_group) <span class="sc">%&gt;%</span></span>
<span id="cb377-1448"><a href="#cb377-1448" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb377-1449"><a href="#cb377-1449" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(),  <span class="co"># Number of records per year-month-vaccine_group combination</span></span>
<span id="cb377-1450"><a href="#cb377-1450" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb377-1451"><a href="#cb377-1451" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1452"><a href="#cb377-1452" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb377-1453"><a href="#cb377-1453" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month) <span class="sc">%&gt;%</span></span>
<span id="cb377-1454"><a href="#cb377-1454" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1455"><a href="#cb377-1455" aria-hidden="true" tabindex="-1"></a>    <span class="at">count_month =</span> <span class="fu">sum</span>(count)  <span class="co"># Total vaccines in that year-month across all groups</span></span>
<span id="cb377-1456"><a href="#cb377-1456" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1457"><a href="#cb377-1457" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb377-1458"><a href="#cb377-1458" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1459"><a href="#cb377-1459" aria-hidden="true" tabindex="-1"></a>    <span class="at">proportion_month =</span> <span class="fu">round</span>((count <span class="sc">/</span> count_month) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)  <span class="co"># % per vaccine group within month</span></span>
<span id="cb377-1460"><a href="#cb377-1460" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1461"><a href="#cb377-1461" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb377-1462"><a href="#cb377-1462" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1463"><a href="#cb377-1463" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_year =</span> <span class="fu">sum</span>(count)  <span class="co"># Total vaccines across the year</span></span>
<span id="cb377-1464"><a href="#cb377-1464" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1465"><a href="#cb377-1465" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1466"><a href="#cb377-1466" aria-hidden="true" tabindex="-1"></a>    <span class="at">proportion_year =</span> <span class="fu">round</span>((count <span class="sc">/</span> total_year) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)  <span class="co"># % per vaccine group within year</span></span>
<span id="cb377-1467"><a href="#cb377-1467" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1468"><a href="#cb377-1468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb377-1469"><a href="#cb377-1469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1470"><a href="#cb377-1470" aria-hidden="true" tabindex="-1"></a><span class="co"># View first few rows</span></span>
<span id="cb377-1471"><a href="#cb377-1471" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(df_vaccination_plot)</span>
<span id="cb377-1472"><a href="#cb377-1472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1473"><a href="#cb377-1473" aria-hidden="true" tabindex="-1"></a><span class="co"># Enhanced summary of breast cancer screening data with SA3, State, and National Year-level proportions</span></span>
<span id="cb377-1474"><a href="#cb377-1474" aria-hidden="true" tabindex="-1"></a><span class="co"># use na.rm = TRUE to remove (ignore) missing values (NA) when calculating</span></span>
<span id="cb377-1475"><a href="#cb377-1475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1476"><a href="#cb377-1476" aria-hidden="true" tabindex="-1"></a>bc_summary <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-1477"><a href="#cb377-1477" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Group by SA3 area, State, and Year</span></span>
<span id="cb377-1478"><a href="#cb377-1478" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sa3name, state, year) <span class="sc">%&gt;%</span></span>
<span id="cb377-1479"><a href="#cb377-1479" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb377-1480"><a href="#cb377-1480" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_participants =</span> <span class="fu">sum</span>(part50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),  <span class="co"># Sum of screened participants</span></span>
<span id="cb377-1481"><a href="#cb377-1481" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_population =</span> <span class="fu">sum</span>(pop50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),     <span class="co"># Sum of target population</span></span>
<span id="cb377-1482"><a href="#cb377-1482" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb377-1483"><a href="#cb377-1483" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1484"><a href="#cb377-1484" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate SA3-level screening rate and proportion</span></span>
<span id="cb377-1485"><a href="#cb377-1485" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1486"><a href="#cb377-1486" aria-hidden="true" tabindex="-1"></a>    <span class="at">screening_rate =</span> <span class="fu">round</span>((total_participants <span class="sc">/</span> total_population) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>),  <span class="co"># % screened in that SA3</span></span>
<span id="cb377-1487"><a href="#cb377-1487" aria-hidden="true" tabindex="-1"></a>    <span class="at">proportion_area =</span> <span class="fu">round</span>((total_participants <span class="sc">/</span> <span class="fu">sum</span>(total_participants)) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)  <span class="co"># % contribution to national participants</span></span>
<span id="cb377-1488"><a href="#cb377-1488" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1489"><a href="#cb377-1489" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add State-level aggregated summaries</span></span>
<span id="cb377-1490"><a href="#cb377-1490" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year) <span class="sc">%&gt;%</span></span>
<span id="cb377-1491"><a href="#cb377-1491" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1492"><a href="#cb377-1492" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_sa3 =</span> <span class="fu">n</span>(),  <span class="co"># Number of SA3 areas within each State-Year</span></span>
<span id="cb377-1493"><a href="#cb377-1493" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_total_participants =</span> <span class="fu">sum</span>(total_participants, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),  <span class="co"># State-wide participants</span></span>
<span id="cb377-1494"><a href="#cb377-1494" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_total_population =</span> <span class="fu">sum</span>(total_population, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),      <span class="co"># State-wide target population</span></span>
<span id="cb377-1495"><a href="#cb377-1495" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_screening_rate =</span> <span class="fu">round</span>((state_total_participants <span class="sc">/</span> state_total_population) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>),  <span class="co"># % screened at State level</span></span>
<span id="cb377-1496"><a href="#cb377-1496" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_proportion =</span> <span class="fu">round</span>((state_total_participants <span class="sc">/</span> <span class="fu">sum</span>(total_participants)) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)  <span class="co"># State share of total participants</span></span>
<span id="cb377-1497"><a href="#cb377-1497" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1498"><a href="#cb377-1498" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb377-1499"><a href="#cb377-1499" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add National Year-level aggregated summaries</span></span>
<span id="cb377-1500"><a href="#cb377-1500" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb377-1501"><a href="#cb377-1501" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1502"><a href="#cb377-1502" aria-hidden="true" tabindex="-1"></a>    <span class="at">year_sa3 =</span> <span class="fu">n</span>(),  <span class="co"># Number of SA3 areas within each Year</span></span>
<span id="cb377-1503"><a href="#cb377-1503" aria-hidden="true" tabindex="-1"></a>    <span class="at">year_total_participants =</span> <span class="fu">sum</span>(total_participants, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),  <span class="co"># Australia-wide participants for that year</span></span>
<span id="cb377-1504"><a href="#cb377-1504" aria-hidden="true" tabindex="-1"></a>    <span class="at">year_total_population =</span> <span class="fu">sum</span>(total_population, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),      <span class="co"># Australia-wide target population for that year</span></span>
<span id="cb377-1505"><a href="#cb377-1505" aria-hidden="true" tabindex="-1"></a>    <span class="at">year_screening_rate =</span> <span class="fu">round</span>((year_total_participants <span class="sc">/</span> year_total_population) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>),  <span class="co"># National % screened</span></span>
<span id="cb377-1506"><a href="#cb377-1506" aria-hidden="true" tabindex="-1"></a>    <span class="at">year_proportion =</span> <span class="fu">round</span>((year_total_participants <span class="sc">/</span> <span class="fu">sum</span>(total_participants)) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)  <span class="co"># National share</span></span>
<span id="cb377-1507"><a href="#cb377-1507" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1508"><a href="#cb377-1508" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb377-1509"><a href="#cb377-1509" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, state, sa3name)   <span class="co"># Final arrangement for neat viewing</span></span>
<span id="cb377-1510"><a href="#cb377-1510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1511"><a href="#cb377-1511" aria-hidden="true" tabindex="-1"></a><span class="co"># View the last few rows</span></span>
<span id="cb377-1512"><a href="#cb377-1512" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(bc_summary)</span>
<span id="cb377-1513"><a href="#cb377-1513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1514"><a href="#cb377-1514" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1515"><a href="#cb377-1515" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating Proportions: details presented in section 7.2 below</span></span>
<span id="cb377-1516"><a href="#cb377-1516" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1517"><a href="#cb377-1517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1518"><a href="#cb377-1518" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding participation proportion within each SA3-year group</span></span>
<span id="cb377-1519"><a href="#cb377-1519" aria-hidden="true" tabindex="-1"></a>bc_summary_with_prop <span class="ot">&lt;-</span> bc_summary <span class="sc">%&gt;%</span></span>
<span id="cb377-1520"><a href="#cb377-1520" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1521"><a href="#cb377-1521" aria-hidden="true" tabindex="-1"></a>    <span class="at">participation_rate =</span> (total_participants <span class="sc">/</span> total_population) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb377-1522"><a href="#cb377-1522" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb377-1523"><a href="#cb377-1523" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(participation_rate)</span>
<span id="cb377-1524"><a href="#cb377-1524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1525"><a href="#cb377-1525" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_summary_with_prop)</span>
<span id="cb377-1526"><a href="#cb377-1526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1527"><a href="#cb377-1527" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1528"><a href="#cb377-1528" aria-hidden="true" tabindex="-1"></a><span class="co"># Weighted Summarization (Weighted Average Screening Rate)</span></span>
<span id="cb377-1529"><a href="#cb377-1529" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1530"><a href="#cb377-1530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1531"><a href="#cb377-1531" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate weighted mean screening rate by SA3</span></span>
<span id="cb377-1532"><a href="#cb377-1532" aria-hidden="true" tabindex="-1"></a>bc_weighted_summary <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-1533"><a href="#cb377-1533" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sa3name, state, year) <span class="sc">%&gt;%</span></span>
<span id="cb377-1534"><a href="#cb377-1534" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb377-1535"><a href="#cb377-1535" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_participants =</span> <span class="fu">sum</span>(part50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb377-1536"><a href="#cb377-1536" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_population =</span> <span class="fu">sum</span>(pop50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb377-1537"><a href="#cb377-1537" aria-hidden="true" tabindex="-1"></a>    <span class="at">weighted_screening_rate =</span> <span class="fu">round</span>(<span class="fu">sum</span>(rate50_74 <span class="sc">*</span> pop50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">sum</span>(pop50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">1</span>),</span>
<span id="cb377-1538"><a href="#cb377-1538" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb377-1539"><a href="#cb377-1539" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-1540"><a href="#cb377-1540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1541"><a href="#cb377-1541" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_weighted_summary)</span>
<span id="cb377-1542"><a href="#cb377-1542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1543"><a href="#cb377-1543" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1544"><a href="#cb377-1544" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove all temporary objects created in this chunk</span></span>
<span id="cb377-1545"><a href="#cb377-1545" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1546"><a href="#cb377-1546" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(bc_summary, bc_summary_with_prop, bc_weighted_summary)</span>
<span id="cb377-1547"><a href="#cb377-1547" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1548"><a href="#cb377-1548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1549"><a href="#cb377-1549" aria-hidden="true" tabindex="-1"></a><span class="fu">### **3.5 Sorting, Reordering, Slicing, and Arranging**</span></span>
<span id="cb377-1550"><a href="#cb377-1550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1551"><a href="#cb377-1551" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`arrange()`</span>, <span class="in">`desc()`</span></span>
<span id="cb377-1552"><a href="#cb377-1552" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`slice_max()`</span>, <span class="in">`slice_min()`</span>, <span class="in">`top_n()`</span></span>
<span id="cb377-1553"><a href="#cb377-1553" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Ranking data and filtering top/bottom groups</span>
<span id="cb377-1554"><a href="#cb377-1554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1555"><a href="#cb377-1555" aria-hidden="true" tabindex="-1"></a>Sorting and reordering data is important for finding trends, identifying extremes (top or bottom performers), and preparing tables for reporting or visualization.\</span>
<span id="cb377-1556"><a href="#cb377-1556" aria-hidden="true" tabindex="-1"></a>In <span class="in">`dplyr`</span>, the <span class="in">`arrange()`</span> function sorts datasets by one or more variables, while <span class="in">`desc()`</span> allows descending (reverse) order.\</span>
<span id="cb377-1557"><a href="#cb377-1557" aria-hidden="true" tabindex="-1"></a>For selecting specific rows like top N or bottom N values, <span class="in">`slice_max()`</span> and <span class="in">`slice_min()`</span> are commonly used.</span>
<span id="cb377-1558"><a href="#cb377-1558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1559"><a href="#cb377-1559" aria-hidden="true" tabindex="-1"></a>These techniques allow focusing on key records, comparing rankings across groups, and making datasets easier to review.</span>
<span id="cb377-1560"><a href="#cb377-1560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1561"><a href="#cb377-1561" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1562"><a href="#cb377-1562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1563"><a href="#cb377-1563" aria-hidden="true" tabindex="-1"></a>**üîπ Summary of Functions for Sorting and Reordering**</span>
<span id="cb377-1564"><a href="#cb377-1564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1565"><a href="#cb377-1565" aria-hidden="true" tabindex="-1"></a>| **Task** | **Function** | **Purpose** |</span>
<span id="cb377-1566"><a href="#cb377-1566" aria-hidden="true" tabindex="-1"></a>|:-----------------------|:------------------|:----------------------------|</span>
<span id="cb377-1567"><a href="#cb377-1567" aria-hidden="true" tabindex="-1"></a>| Sort ascending order | <span class="in">`arrange()`</span> | Sort rows by one or more variables (lowest to highest) |</span>
<span id="cb377-1568"><a href="#cb377-1568" aria-hidden="true" tabindex="-1"></a>| Sort descending order | <span class="in">`arrange(desc())`</span> | Sort rows highest to lowest |</span>
<span id="cb377-1569"><a href="#cb377-1569" aria-hidden="true" tabindex="-1"></a>| Select top N rows by a variable | <span class="in">`slice_max()`</span> | Keep top N records based on a variable |</span>
<span id="cb377-1570"><a href="#cb377-1570" aria-hidden="true" tabindex="-1"></a>| Select bottom N rows by a variable | <span class="in">`slice_min()`</span> | Keep bottom N records based on a variable |</span>
<span id="cb377-1571"><a href="#cb377-1571" aria-hidden="true" tabindex="-1"></a>| Select top N rows (old method) | <span class="in">`top_n()`</span> | Deprecated alternative to <span class="in">`slice_max()`</span> (not recommended now) |</span>
<span id="cb377-1572"><a href="#cb377-1572" aria-hidden="true" tabindex="-1"></a>| Rank within groups | <span class="in">`mutate(rank = row_number())`</span> | Create custom ranking inside grouped data |</span>
<span id="cb377-1573"><a href="#cb377-1573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1574"><a href="#cb377-1574" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1575"><a href="#cb377-1575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1576"><a href="#cb377-1576" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è Sorting and slicing help prioritize key data points and create targeted outputs for decision-making or visualization.</span>
<span id="cb377-1577"><a href="#cb377-1577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1578"><a href="#cb377-1578" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1579"><a href="#cb377-1579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1582"><a href="#cb377-1582" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1583"><a href="#cb377-1583" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1584"><a href="#cb377-1584" aria-hidden="true" tabindex="-1"></a><span class="co"># Sorting, Reordering, Slicing, and Arranging (Breast Cancer Data)</span></span>
<span id="cb377-1585"><a href="#cb377-1585" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1586"><a href="#cb377-1586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1587"><a href="#cb377-1587" aria-hidden="true" tabindex="-1"></a><span class="co"># Sorting by Screening Rate in Ascending Order</span></span>
<span id="cb377-1588"><a href="#cb377-1588" aria-hidden="true" tabindex="-1"></a>bc_sorted_rate <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-1589"><a href="#cb377-1589" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(rate50_74) <span class="sc">%&gt;%</span></span>
<span id="cb377-1590"><a href="#cb377-1590" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sa3code, sa3coden, sa3name, state, year,</span>
<span id="cb377-1591"><a href="#cb377-1591" aria-hidden="true" tabindex="-1"></a>         part50_74, pop50_74, rate50_74, agen50_74, expct50_74)</span>
<span id="cb377-1592"><a href="#cb377-1592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1593"><a href="#cb377-1593" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_sorted_rate)</span>
<span id="cb377-1594"><a href="#cb377-1594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1595"><a href="#cb377-1595" aria-hidden="true" tabindex="-1"></a><span class="co"># Sorting by Screening Rate in Descending Order</span></span>
<span id="cb377-1596"><a href="#cb377-1596" aria-hidden="true" tabindex="-1"></a>bc_sorted_rate_desc <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-1597"><a href="#cb377-1597" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(rate50_74)) <span class="sc">%&gt;%</span></span>
<span id="cb377-1598"><a href="#cb377-1598" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sa3code, sa3coden, sa3name, state, year,</span>
<span id="cb377-1599"><a href="#cb377-1599" aria-hidden="true" tabindex="-1"></a>         part50_74, pop50_74, rate50_74, agen50_74, expct50_74)</span>
<span id="cb377-1600"><a href="#cb377-1600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1601"><a href="#cb377-1601" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_sorted_rate_desc)</span>
<span id="cb377-1602"><a href="#cb377-1602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1603"><a href="#cb377-1603" aria-hidden="true" tabindex="-1"></a><span class="co"># Slicing Top 10 SA3s with Highest Screening Rates</span></span>
<span id="cb377-1604"><a href="#cb377-1604" aria-hidden="true" tabindex="-1"></a>bc_top_screening <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-1605"><a href="#cb377-1605" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> rate50_74, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-1606"><a href="#cb377-1606" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sa3code, sa3coden, sa3name, state, year,</span>
<span id="cb377-1607"><a href="#cb377-1607" aria-hidden="true" tabindex="-1"></a>         part50_74, pop50_74, rate50_74, agen50_74, expct50_74)</span>
<span id="cb377-1608"><a href="#cb377-1608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1609"><a href="#cb377-1609" aria-hidden="true" tabindex="-1"></a>bc_top_screening</span>
<span id="cb377-1610"><a href="#cb377-1610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1611"><a href="#cb377-1611" aria-hidden="true" tabindex="-1"></a><span class="co"># Slicing Bottom 5 SA3s with Lowest Screening Rates</span></span>
<span id="cb377-1612"><a href="#cb377-1612" aria-hidden="true" tabindex="-1"></a>bc_bottom_screening <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-1613"><a href="#cb377-1613" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(<span class="at">order_by =</span> rate50_74, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-1614"><a href="#cb377-1614" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sa3code, sa3coden, sa3name, state, year,</span>
<span id="cb377-1615"><a href="#cb377-1615" aria-hidden="true" tabindex="-1"></a>         part50_74, pop50_74, rate50_74, agen50_74, expct50_74)</span>
<span id="cb377-1616"><a href="#cb377-1616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1617"><a href="#cb377-1617" aria-hidden="true" tabindex="-1"></a>bc_bottom_screening</span>
<span id="cb377-1618"><a href="#cb377-1618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1619"><a href="#cb377-1619" aria-hidden="true" tabindex="-1"></a><span class="co"># Ranking Within Each State</span></span>
<span id="cb377-1620"><a href="#cb377-1620" aria-hidden="true" tabindex="-1"></a>bc_ranked <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-1621"><a href="#cb377-1621" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb377-1622"><a href="#cb377-1622" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(rate50_74), <span class="at">.by_group =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-1623"><a href="#cb377-1623" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">screening_rank =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb377-1624"><a href="#cb377-1624" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(screening_rank, rate50_74, state) <span class="sc">%&gt;%</span> </span>
<span id="cb377-1625"><a href="#cb377-1625" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb377-1626"><a href="#cb377-1626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1627"><a href="#cb377-1627" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_ranked, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb377-1628"><a href="#cb377-1628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1629"><a href="#cb377-1629" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1630"><a href="#cb377-1630" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove all temporary objects created in this chunk</span></span>
<span id="cb377-1631"><a href="#cb377-1631" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1632"><a href="#cb377-1632" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(bc_sorted_rate, bc_sorted_rate_desc, bc_top_screening, bc_bottom_screening, bc_ranked)</span>
<span id="cb377-1633"><a href="#cb377-1633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1634"><a href="#cb377-1634" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1635"><a href="#cb377-1635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1636"><a href="#cb377-1636" aria-hidden="true" tabindex="-1"></a><span class="fu">### **3.6 Reshaping and Tidy Data**</span></span>
<span id="cb377-1637"><a href="#cb377-1637" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1638"><a href="#cb377-1638" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`pivot_longer()`</span>, <span class="in">`pivot_wider()`</span></span>
<span id="cb377-1639"><a href="#cb377-1639" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Wide-to-long and long-to-wide transformations</span>
<span id="cb377-1640"><a href="#cb377-1640" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Separating and uniting columns with <span class="in">`separate()`</span> and <span class="in">`unite()`</span>\</span>
<span id="cb377-1641"><a href="#cb377-1641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1642"><a href="#cb377-1642" aria-hidden="true" tabindex="-1"></a>In data analysis, datasets often need to be reorganized ‚Äî from wide format to long format, or vice versa ‚Äî to suit different types of analysis or visualization.\</span>
<span id="cb377-1643"><a href="#cb377-1643" aria-hidden="true" tabindex="-1"></a>The goal is to follow **Tidy Data principles** where: - Each variable forms a column - Each observation forms a row - Each type of observational unit forms a table</span>
<span id="cb377-1644"><a href="#cb377-1644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1645"><a href="#cb377-1645" aria-hidden="true" tabindex="-1"></a><span class="in">`dplyr`</span> and <span class="in">`tidyr`</span> provide key functions for reshaping: - <span class="in">`pivot_longer()`</span> turns many columns into two columns (variable name and value). - <span class="in">`pivot_wider()`</span> spreads one column into multiple columns. - <span class="in">`separate()`</span> splits one column into multiple columns based on a separator. - <span class="in">`unite()`</span> combines multiple columns into one.</span>
<span id="cb377-1646"><a href="#cb377-1646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1647"><a href="#cb377-1647" aria-hidden="true" tabindex="-1"></a>These tools help create clean, organized datasets ready for efficient analysis and plotting.</span>
<span id="cb377-1648"><a href="#cb377-1648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1649"><a href="#cb377-1649" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1650"><a href="#cb377-1650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1651"><a href="#cb377-1651" aria-hidden="true" tabindex="-1"></a>**üîπ Summary of Functions for Reshaping and Tidy Data**</span>
<span id="cb377-1652"><a href="#cb377-1652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1653"><a href="#cb377-1653" aria-hidden="true" tabindex="-1"></a>| **Task** | **Function** | **Purpose** |</span>
<span id="cb377-1654"><a href="#cb377-1654" aria-hidden="true" tabindex="-1"></a>|:-----------------------|:-----------------|:-----------------------------|</span>
<span id="cb377-1655"><a href="#cb377-1655" aria-hidden="true" tabindex="-1"></a>| Reshape wide to long | <span class="in">`pivot_longer()`</span> | Collapse multiple columns into key-value pairs |</span>
<span id="cb377-1656"><a href="#cb377-1656" aria-hidden="true" tabindex="-1"></a>| Reshape long to wide | <span class="in">`pivot_wider()`</span> | Spread key-value pairs across multiple columns |</span>
<span id="cb377-1657"><a href="#cb377-1657" aria-hidden="true" tabindex="-1"></a>| Split a column into multiple parts | <span class="in">`separate()`</span> | Separate one column into several columns by a delimiter |</span>
<span id="cb377-1658"><a href="#cb377-1658" aria-hidden="true" tabindex="-1"></a>| Combine multiple columns into one | <span class="in">`unite()`</span> | Merge several columns into a single column |</span>
<span id="cb377-1659"><a href="#cb377-1659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1660"><a href="#cb377-1660" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1661"><a href="#cb377-1661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1662"><a href="#cb377-1662" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è These reshaping techniques make it easy to transform datasets into a tidy structure for summaries, modeling, or visualization.</span>
<span id="cb377-1663"><a href="#cb377-1663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1664"><a href="#cb377-1664" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; </span><span class="sc">\*\*</span><span class="at"> üîé Regular Expression Tip for </span><span class="in">`names_pattern`</span><span class="sc">\*\*</span></span>
<span id="cb377-1665"><a href="#cb377-1665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1666"><a href="#cb377-1666" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; In </span><span class="in">`pivot_longer()`</span><span class="at">, we use a regular expression to split the column names into two components: - </span><span class="in">`part`</span><span class="at">, </span><span class="in">`pop`</span><span class="at">, </span><span class="in">`rate`</span><span class="at">, or </span><span class="in">`expct`</span><span class="at"> ‚Üí **measure** - `50_54`, `55_59`, etc. ‚Üí **age group** The pattern </span><span class="in">`([0-9]{2}_[0-9]{2})`</span><span class="at"> works as follows:</span></span>
<span id="cb377-1667"><a href="#cb377-1667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1668"><a href="#cb377-1668" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; | **Component** | **Meaning**           |</span></span>
<span id="cb377-1669"><a href="#cb377-1669" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; |:--------------|:----------------------|</span></span>
<span id="cb377-1670"><a href="#cb377-1670" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; | </span><span class="in">`[0-9]`</span><span class="at">       | Match any digit (0‚Äì9) |</span></span>
<span id="cb377-1671"><a href="#cb377-1671" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; | </span><span class="in">`{2}`</span><span class="at">         | Exactly two digits    |</span></span>
<span id="cb377-1672"><a href="#cb377-1672" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; | </span><span class="in">`_`</span><span class="at">           | An underscore         |</span></span>
<span id="cb377-1673"><a href="#cb377-1673" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; | </span><span class="in">`[0-9]{2}`</span><span class="at">    | Another two digits    |</span></span>
<span id="cb377-1674"><a href="#cb377-1674" aria-hidden="true" tabindex="-1"></a><span class="at">&gt;</span></span>
<span id="cb377-1675"><a href="#cb377-1675" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; ‚û°Ô∏è This captures typical age formats like </span><span class="in">`50_54`</span><span class="at">, </span><span class="in">`60_64`</span><span class="at">, etc.</span></span>
<span id="cb377-1676"><a href="#cb377-1676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1677"><a href="#cb377-1677" aria-hidden="true" tabindex="-1"></a>Original Column Name: rate50_54</span>
<span id="cb377-1678"><a href="#cb377-1678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1679"><a href="#cb377-1679" aria-hidden="true" tabindex="-1"></a>Components: ‚îå‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îê ....<span class="sc">\&gt;</span> ‚îÇrate ‚îÇ ‚îÇ50_54 ‚îÇ <span class="sc">\&gt;</span> ‚îî‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îò</span>
<span id="cb377-1680"><a href="#cb377-1680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1683"><a href="#cb377-1683" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1684"><a href="#cb377-1684" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1685"><a href="#cb377-1685" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshaping, Separate and Unite Columns: Breast Cancer Data</span></span>
<span id="cb377-1686"><a href="#cb377-1686" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1687"><a href="#cb377-1687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1688"><a href="#cb377-1688" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot longer by extracting measure type and age group separately</span></span>
<span id="cb377-1689"><a href="#cb377-1689" aria-hidden="true" tabindex="-1"></a>breast_cancer_long <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-1690"><a href="#cb377-1690" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb377-1691"><a href="#cb377-1691" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"part"</span>) <span class="sc">|</span> <span class="fu">starts_with</span>(<span class="st">"pop"</span>) <span class="sc">|</span> <span class="fu">starts_with</span>(<span class="st">"rate"</span>) <span class="sc">|</span> <span class="fu">starts_with</span>(<span class="st">"expct"</span>),</span>
<span id="cb377-1692"><a href="#cb377-1692" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"measure"</span>, <span class="st">"age_group"</span>),</span>
<span id="cb377-1693"><a href="#cb377-1693" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_pattern =</span> <span class="st">"(part|pop|rate|expct)([0-9]{2}_[0-9]{2})"</span>,</span>
<span id="cb377-1694"><a href="#cb377-1694" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb377-1695"><a href="#cb377-1695" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1696"><a href="#cb377-1696" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(measure, age_group, <span class="at">.before =</span> sa3code)</span>
<span id="cb377-1697"><a href="#cb377-1697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1698"><a href="#cb377-1698" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_cancer_long, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb377-1699"><a href="#cb377-1699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1700"><a href="#cb377-1700" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot wider to spread measures into separate columns</span></span>
<span id="cb377-1701"><a href="#cb377-1701" aria-hidden="true" tabindex="-1"></a>breast_cancer_final <span class="ot">&lt;-</span> breast_cancer_long <span class="sc">%&gt;%</span></span>
<span id="cb377-1702"><a href="#cb377-1702" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb377-1703"><a href="#cb377-1703" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> measure,</span>
<span id="cb377-1704"><a href="#cb377-1704" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> value</span>
<span id="cb377-1705"><a href="#cb377-1705" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-1706"><a href="#cb377-1706" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(part, pop, rate, expct, <span class="at">.before =</span> sa3code)</span>
<span id="cb377-1707"><a href="#cb377-1707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1708"><a href="#cb377-1708" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_cancer_final, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb377-1709"><a href="#cb377-1709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1710"><a href="#cb377-1710" aria-hidden="true" tabindex="-1"></a><span class="co"># Separate 'age_group' into two new columns: start and end age</span></span>
<span id="cb377-1711"><a href="#cb377-1711" aria-hidden="true" tabindex="-1"></a>breast_cancer_separated <span class="ot">&lt;-</span> breast_cancer_long <span class="sc">%&gt;%</span></span>
<span id="cb377-1712"><a href="#cb377-1712" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb377-1713"><a href="#cb377-1713" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> age_group,</span>
<span id="cb377-1714"><a href="#cb377-1714" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"age_start"</span>, <span class="st">"age_end"</span>),</span>
<span id="cb377-1715"><a href="#cb377-1715" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"_"</span>,</span>
<span id="cb377-1716"><a href="#cb377-1716" aria-hidden="true" tabindex="-1"></a>    <span class="at">convert =</span> <span class="cn">TRUE</span></span>
<span id="cb377-1717"><a href="#cb377-1717" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb377-1718"><a href="#cb377-1718" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">"age_start"</span>, <span class="st">"age_end"</span>, <span class="fu">everything</span>())</span>
<span id="cb377-1719"><a href="#cb377-1719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1720"><a href="#cb377-1720" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_cancer_separated, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-1721"><a href="#cb377-1721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1722"><a href="#cb377-1722" aria-hidden="true" tabindex="-1"></a><span class="co"># Unite 'age_start' and 'age_end' into a single age group label</span></span>
<span id="cb377-1723"><a href="#cb377-1723" aria-hidden="true" tabindex="-1"></a>breast_cancer_united <span class="ot">&lt;-</span> breast_cancer_separated <span class="sc">%&gt;%</span></span>
<span id="cb377-1724"><a href="#cb377-1724" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(</span>
<span id="cb377-1725"><a href="#cb377-1725" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> age_group_combined,</span>
<span id="cb377-1726"><a href="#cb377-1726" aria-hidden="true" tabindex="-1"></a>    age_start, age_end,</span>
<span id="cb377-1727"><a href="#cb377-1727" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"-"</span>,</span>
<span id="cb377-1728"><a href="#cb377-1728" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="cn">FALSE</span></span>
<span id="cb377-1729"><a href="#cb377-1729" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-1730"><a href="#cb377-1730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1731"><a href="#cb377-1731" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(breast_cancer_united, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-1732"><a href="#cb377-1732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1733"><a href="#cb377-1733" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1734"><a href="#cb377-1734" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove temporary objects created in this chunk</span></span>
<span id="cb377-1735"><a href="#cb377-1735" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1736"><a href="#cb377-1736" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(breast_cancer_long, breast_cancer_separated, breast_cancer_united, breast_cancer_final)</span>
<span id="cb377-1737"><a href="#cb377-1737" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1738"><a href="#cb377-1738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1739"><a href="#cb377-1739" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1740"><a href="#cb377-1740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1741"><a href="#cb377-1741" aria-hidden="true" tabindex="-1"></a><span class="fu">## **PART IV: ADVANCED WRANGLING AND INTEGRATION**</span></span>
<span id="cb377-1742"><a href="#cb377-1742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1743"><a href="#cb377-1743" aria-hidden="true" tabindex="-1"></a><span class="fu">### **4.1 Date and Time data manipulation**</span></span>
<span id="cb377-1744"><a href="#cb377-1744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1745"><a href="#cb377-1745" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`lubridate::ymd()`</span>, <span class="in">`as_date()`</span>, <span class="in">`format()`</span>, <span class="in">`%p`</span>, <span class="in">`weekdays()`</span></span>
<span id="cb377-1746"><a href="#cb377-1746" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Extracting date components: year, month, quarter</span>
<span id="cb377-1747"><a href="#cb377-1747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1748"><a href="#cb377-1748" aria-hidden="true" tabindex="-1"></a>Working with dates is essential in many datasets, particularly for time-based trends, age calculations, seasonal effects, and survival analysis.\</span>
<span id="cb377-1749"><a href="#cb377-1749" aria-hidden="true" tabindex="-1"></a>We use the <span class="in">`lubridate`</span> package to parse, extract, and manipulate dates efficiently. The details about time and date data has been presented separately.</span>
<span id="cb377-1750"><a href="#cb377-1750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1751"><a href="#cb377-1751" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è **For full tutorials and videos:** - **YouTube (AnalyticsHub)**: [Watch Full Video](https://studio.youtube.com/video/AZjUWcakEEY/edit) - **GitHub**: <span class="co">[</span><span class="ot">Access Here</span><span class="co">](https://github.com/HabtamuBizuayehu/Date-and-Time-Manipulation-and-Analysis_Data_insight)</span></span>
<span id="cb377-1752"><a href="#cb377-1752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1753"><a href="#cb377-1753" aria-hidden="true" tabindex="-1"></a>**Summary of Functions for Date Handling**</span>
<span id="cb377-1754"><a href="#cb377-1754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1755"><a href="#cb377-1755" aria-hidden="true" tabindex="-1"></a>| **Task** | **Function** | **Purpose** |</span>
<span id="cb377-1756"><a href="#cb377-1756" aria-hidden="true" tabindex="-1"></a>|:---------------------|:--------------------|:----------------------------|</span>
<span id="cb377-1757"><a href="#cb377-1757" aria-hidden="true" tabindex="-1"></a>| Parse ISO dates | <span class="in">`as.Date()`</span>, <span class="in">`strptime()`</span> | Read and convert raw string timestamps |</span>
<span id="cb377-1758"><a href="#cb377-1758" aria-hidden="true" tabindex="-1"></a>| Format date output | <span class="in">`format()`</span> | Customize how dates are displayed |</span>
<span id="cb377-1759"><a href="#cb377-1759" aria-hidden="true" tabindex="-1"></a>| Extract components | <span class="in">`year()`</span>, <span class="in">`month()`</span>, <span class="in">`day()`</span>, <span class="in">`quarter()`</span>, <span class="in">`week()`</span> | Pull year, month, day, quarter, week from dates |</span>
<span id="cb377-1760"><a href="#cb377-1760" aria-hidden="true" tabindex="-1"></a>| Weekday labels | <span class="in">`wday(label = TRUE)`</span> | Get day of week in text form |</span>
<span id="cb377-1761"><a href="#cb377-1761" aria-hidden="true" tabindex="-1"></a>| Date arithmetic | <span class="in">`difftime()`</span>, <span class="in">`-`</span> | Calculate differences between dates |</span>
<span id="cb377-1762"><a href="#cb377-1762" aria-hidden="true" tabindex="-1"></a>| Logical operations | <span class="in">`&lt;`</span>, <span class="in">`&gt;`</span>, <span class="in">`between()`</span> | Filter by date ranges |</span>
<span id="cb377-1763"><a href="#cb377-1763" aria-hidden="true" tabindex="-1"></a>| Fiscal/seasonal grouping | <span class="in">`case_when()`</span> | Categorize based on seasons or financial years |</span>
<span id="cb377-1764"><a href="#cb377-1764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1765"><a href="#cb377-1765" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1766"><a href="#cb377-1766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1767"><a href="#cb377-1767" aria-hidden="true" tabindex="-1"></a>**Demonstration using Vaccination Dataset**</span>
<span id="cb377-1768"><a href="#cb377-1768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1771"><a href="#cb377-1771" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1772"><a href="#cb377-1772" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert DATE into usable R date format</span></span>
<span id="cb377-1773"><a href="#cb377-1773" aria-hidden="true" tabindex="-1"></a>vaccination <span class="ot">&lt;-</span> vaccination <span class="sc">%&gt;%</span></span>
<span id="cb377-1774"><a href="#cb377-1774" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1775"><a href="#cb377-1775" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_date =</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(date, <span class="at">format =</span> <span class="st">"%Y-%m-%dT%H:%M:%SZ"</span>)),</span>
<span id="cb377-1776"><a href="#cb377-1776" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_year =</span> <span class="fu">year</span>(vacc_date),</span>
<span id="cb377-1777"><a href="#cb377-1777" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_month =</span> <span class="fu">month</span>(vacc_date, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>)</span>
<span id="cb377-1778"><a href="#cb377-1778" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb377-1779"><a href="#cb377-1779" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>description, base_cost)</span>
<span id="cb377-1780"><a href="#cb377-1780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1781"><a href="#cb377-1781" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vaccination)</span>
<span id="cb377-1782"><a href="#cb377-1782" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1783"><a href="#cb377-1783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1784"><a href="#cb377-1784" aria-hidden="true" tabindex="-1"></a>Calculating Time Differences</span>
<span id="cb377-1785"><a href="#cb377-1785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1788"><a href="#cb377-1788" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1789"><a href="#cb377-1789" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating Time Differences</span></span>
<span id="cb377-1790"><a href="#cb377-1790" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1791"><a href="#cb377-1791" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert column names to lowercase</span></span>
<span id="cb377-1792"><a href="#cb377-1792" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(patients) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">colnames</span>(patients))</span>
<span id="cb377-1793"><a href="#cb377-1793" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(vaccination) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">colnames</span>(vaccination))</span>
<span id="cb377-1794"><a href="#cb377-1794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1795"><a href="#cb377-1795" aria-hidden="true" tabindex="-1"></a><span class="co"># vacc_pt_merged &lt;- left_join(patients, vaccination, by = "id" )</span></span>
<span id="cb377-1796"><a href="#cb377-1796" aria-hidden="true" tabindex="-1"></a>vacc_pt_merged <span class="ot">&lt;-</span> <span class="fu">left_join</span>(patients, vaccination, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>))</span>
<span id="cb377-1797"><a href="#cb377-1797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1798"><a href="#cb377-1798" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span> (vacc_pt_merged)</span>
<span id="cb377-1799"><a href="#cb377-1799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1800"><a href="#cb377-1800" aria-hidden="true" tabindex="-1"></a>vacc_pt_merged <span class="sc">%&gt;%</span> </span>
<span id="cb377-1801"><a href="#cb377-1801" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1802"><a href="#cb377-1802" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_date =</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(date, <span class="at">format =</span> <span class="st">"%Y-%m-%dT%H:%M:%SZ"</span>)),</span>
<span id="cb377-1803"><a href="#cb377-1803" aria-hidden="true" tabindex="-1"></a>    <span class="at">birthdate =</span> <span class="fu">as.Date</span>(birthdate),</span>
<span id="cb377-1804"><a href="#cb377-1804" aria-hidden="true" tabindex="-1"></a>    <span class="at">days_to_vax =</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(vacc_date, birthdate, <span class="at">units =</span> <span class="st">"days"</span>)),</span>
<span id="cb377-1805"><a href="#cb377-1805" aria-hidden="true" tabindex="-1"></a>    <span class="at">weeks_to_vax =</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(vacc_date, birthdate, <span class="at">units =</span> <span class="st">"weeks"</span>)),</span>
<span id="cb377-1806"><a href="#cb377-1806" aria-hidden="true" tabindex="-1"></a>    <span class="at">months_to_vax =</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(vacc_date, birthdate, <span class="at">units =</span> <span class="st">"days"</span>)) <span class="sc">/</span> <span class="fl">30.44</span>,</span>
<span id="cb377-1807"><a href="#cb377-1807" aria-hidden="true" tabindex="-1"></a>    <span class="at">years_to_vax =</span> <span class="fu">floor</span>(<span class="fu">as.numeric</span>(<span class="fu">difftime</span>(vacc_date, birthdate, <span class="at">units =</span> <span class="st">"days"</span>)) <span class="sc">/</span> <span class="fl">365.25</span>)</span>
<span id="cb377-1808"><a href="#cb377-1808" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> vacc_pt_merged</span>
<span id="cb377-1809"><a href="#cb377-1809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1810"><a href="#cb377-1810" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vacc_pt_merged<span class="sc">$</span>days_to_vax)</span>
<span id="cb377-1811"><a href="#cb377-1811" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vacc_pt_merged<span class="sc">$</span>years_to_vax)</span>
<span id="cb377-1812"><a href="#cb377-1812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1813"><a href="#cb377-1813" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1814"><a href="#cb377-1814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1815"><a href="#cb377-1815" aria-hidden="true" tabindex="-1"></a>Extracting Date Components</span>
<span id="cb377-1816"><a href="#cb377-1816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1819"><a href="#cb377-1819" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1820"><a href="#cb377-1820" aria-hidden="true" tabindex="-1"></a>vacc_pt_merged <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb377-1821"><a href="#cb377-1821" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1822"><a href="#cb377-1822" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_day =</span> <span class="fu">day</span>(vacc_date),</span>
<span id="cb377-1823"><a href="#cb377-1823" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_month_num =</span> <span class="fu">month</span>(vacc_date),</span>
<span id="cb377-1824"><a href="#cb377-1824" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_month_name =</span> <span class="fu">month</span>(vacc_date, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>),</span>
<span id="cb377-1825"><a href="#cb377-1825" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_weekday =</span> <span class="fu">wday</span>(vacc_date, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>),</span>
<span id="cb377-1826"><a href="#cb377-1826" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_week =</span> <span class="fu">week</span>(vacc_date),</span>
<span id="cb377-1827"><a href="#cb377-1827" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_quarter =</span> <span class="fu">quarter</span>(vacc_date),</span>
<span id="cb377-1828"><a href="#cb377-1828" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_year =</span> <span class="fu">year</span>(vacc_date),  <span class="co"># Define vacc_year first</span></span>
<span id="cb377-1829"><a href="#cb377-1829" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_fy =</span> <span class="fu">if_else</span>(vacc_month_num <span class="sc">&gt;=</span> <span class="dv">7</span>, vacc_year, vacc_year <span class="sc">-</span> <span class="dv">1</span>),  <span class="co"># FY starts 1 July in Australia</span></span>
<span id="cb377-1830"><a href="#cb377-1830" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_season =</span> <span class="fu">case_when</span>(</span>
<span id="cb377-1831"><a href="#cb377-1831" aria-hidden="true" tabindex="-1"></a>      vacc_month_num <span class="sc">%in%</span> <span class="dv">12</span><span class="sc">:</span><span class="dv">2</span> <span class="sc">~</span> <span class="st">"Summer"</span>,</span>
<span id="cb377-1832"><a href="#cb377-1832" aria-hidden="true" tabindex="-1"></a>      vacc_month_num <span class="sc">%in%</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>  <span class="sc">~</span> <span class="st">"Autumn"</span>,</span>
<span id="cb377-1833"><a href="#cb377-1833" aria-hidden="true" tabindex="-1"></a>      vacc_month_num <span class="sc">%in%</span> <span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>  <span class="sc">~</span> <span class="st">"Winter"</span>,</span>
<span id="cb377-1834"><a href="#cb377-1834" aria-hidden="true" tabindex="-1"></a>      vacc_month_num <span class="sc">%in%</span> <span class="dv">9</span><span class="sc">:</span><span class="dv">11</span> <span class="sc">~</span> <span class="st">"Spring"</span></span>
<span id="cb377-1835"><a href="#cb377-1835" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb377-1836"><a href="#cb377-1836" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_weekend =</span> <span class="fu">wday</span>(vacc_date) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">7</span>),</span>
<span id="cb377-1837"><a href="#cb377-1837" aria-hidden="true" tabindex="-1"></a>    <span class="at">days_since_ref =</span> <span class="fu">floor</span>(<span class="fu">as.numeric</span>(<span class="fu">difftime</span>(vacc_date, <span class="fu">as.Date</span>(<span class="st">"2020-01-01"</span>), <span class="at">units =</span> <span class="st">"days"</span>)))</span>
<span id="cb377-1838"><a href="#cb377-1838" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-1839"><a href="#cb377-1839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1840"><a href="#cb377-1840" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb377-1841"><a href="#cb377-1841" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(vacc_day, vacc_month_num, vacc_month_name, vacc_weekday, vacc_week,</span>
<span id="cb377-1842"><a href="#cb377-1842" aria-hidden="true" tabindex="-1"></a>         vacc_quarter, vacc_year, vacc_fy, vacc_season, is_weekend, days_since_ref)</span>
<span id="cb377-1843"><a href="#cb377-1843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1844"><a href="#cb377-1844" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(temp, <span class="at">n =</span> <span class="dv">8</span>)</span>
<span id="cb377-1845"><a href="#cb377-1845" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> (temp)</span>
<span id="cb377-1846"><a href="#cb377-1846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1847"><a href="#cb377-1847" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1848"><a href="#cb377-1848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1849"><a href="#cb377-1849" aria-hidden="true" tabindex="-1"></a>Filtering Between Date Ranges</span>
<span id="cb377-1850"><a href="#cb377-1850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1853"><a href="#cb377-1853" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1854"><a href="#cb377-1854" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate Age as of 31 December 2024</span></span>
<span id="cb377-1855"><a href="#cb377-1855" aria-hidden="true" tabindex="-1"></a><span class="co"># str(vacc_pt_merged$birthdate) </span></span>
<span id="cb377-1856"><a href="#cb377-1856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1857"><a href="#cb377-1857" aria-hidden="true" tabindex="-1"></a>vacc_pt_merged <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb377-1858"><a href="#cb377-1858" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1859"><a href="#cb377-1859" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">floor</span>(<span class="fu">time_length</span>(<span class="fu">difftime</span>(<span class="fu">as.Date</span>(<span class="st">"2024-12-31"</span>), birthdate), <span class="at">unit =</span> <span class="st">"years"</span>))</span>
<span id="cb377-1860"><a href="#cb377-1860" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-1861"><a href="#cb377-1861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1862"><a href="#cb377-1862" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span> (vacc_pt_merged<span class="sc">$</span>age)</span>
<span id="cb377-1863"><a href="#cb377-1863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1864"><a href="#cb377-1864" aria-hidden="true" tabindex="-1"></a><span class="co"># Categorize into Age Groups</span></span>
<span id="cb377-1865"><a href="#cb377-1865" aria-hidden="true" tabindex="-1"></a>vacc_pt_merged <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb377-1866"><a href="#cb377-1866" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1867"><a href="#cb377-1867" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_group =</span> <span class="fu">cut</span>(</span>
<span id="cb377-1868"><a href="#cb377-1868" aria-hidden="true" tabindex="-1"></a>      age,</span>
<span id="cb377-1869"><a href="#cb377-1869" aria-hidden="true" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">9</span>, <span class="dv">19</span>, <span class="dv">29</span>, <span class="dv">49</span>, <span class="dv">100</span>),</span>
<span id="cb377-1870"><a href="#cb377-1870" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"0‚Äì9"</span>, <span class="st">"10‚Äì19"</span>, <span class="st">"20‚Äì29"</span>, <span class="st">"30‚Äì49"</span>, <span class="st">"50+"</span>),</span>
<span id="cb377-1871"><a href="#cb377-1871" aria-hidden="true" tabindex="-1"></a>      <span class="at">right =</span> <span class="cn">TRUE</span></span>
<span id="cb377-1872"><a href="#cb377-1872" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb377-1873"><a href="#cb377-1873" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-1874"><a href="#cb377-1874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1875"><a href="#cb377-1875" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span> (vacc_pt_merged<span class="sc">$</span>age_group)</span>
<span id="cb377-1876"><a href="#cb377-1876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1877"><a href="#cb377-1877" aria-hidden="true" tabindex="-1"></a><span class="co"># Vaccinations only in 2022</span></span>
<span id="cb377-1878"><a href="#cb377-1878" aria-hidden="true" tabindex="-1"></a>vacc_2022 <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb377-1879"><a href="#cb377-1879" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(vacc_date <span class="sc">&gt;=</span> <span class="fu">ymd</span>(<span class="st">"2022-01-01"</span>) <span class="sc">&amp;</span> vacc_date <span class="sc">&lt;=</span> <span class="fu">ymd</span>(<span class="st">"2022-12-31"</span>))</span>
<span id="cb377-1880"><a href="#cb377-1880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1881"><a href="#cb377-1881" aria-hidden="true" tabindex="-1"></a><span class="co"># Vaccinations between 2015 and 2024</span></span>
<span id="cb377-1882"><a href="#cb377-1882" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="ot">&lt;-</span> vacc_pt_merged <span class="sc">%&gt;%</span></span>
<span id="cb377-1883"><a href="#cb377-1883" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(vacc_year <span class="sc">&gt;=</span> <span class="dv">2015</span> <span class="sc">&amp;</span> vacc_year <span class="sc">&lt;=</span> <span class="dv">2024</span>)</span>
<span id="cb377-1884"><a href="#cb377-1884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1885"><a href="#cb377-1885" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(vacc_1524<span class="sc">$</span>vacc_year)</span>
<span id="cb377-1886"><a href="#cb377-1886" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1887"><a href="#cb377-1887" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vacc_2022)</span>
<span id="cb377-1888"><a href="#cb377-1888" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1889"><a href="#cb377-1889" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1890"><a href="#cb377-1890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1891"><a href="#cb377-1891" aria-hidden="true" tabindex="-1"></a><span class="fu">### **4.2 Duplicate Observations and Creating ID**</span></span>
<span id="cb377-1892"><a href="#cb377-1892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1893"><a href="#cb377-1893" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>ID Creation (if missing): paste(), substr(), as.Date(), unite()</span>
<span id="cb377-1894"><a href="#cb377-1894" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Detecting Duplicates: duplicated(), distinct(), n_distinct(), row_number(), count(distinct(...))</span>
<span id="cb377-1895"><a href="#cb377-1895" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Tagging Duplicates: row_number(), duplicated(), mutate(dup = row_number())</span>
<span id="cb377-1896"><a href="#cb377-1896" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Validating Duplicates: group_by() + filter(n() <span class="sc">\&gt;</span> 1), arrange(), subset()</span>
<span id="cb377-1897"><a href="#cb377-1897" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Removing Duplicates: filter(dup == 1), distinct(), summarise()</span>
<span id="cb377-1898"><a href="#cb377-1898" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Optional Filtering Rules: Keep first/last by date, non-missing only, domain-specific logic</span>
<span id="cb377-1899"><a href="#cb377-1899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1900"><a href="#cb377-1900" aria-hidden="true" tabindex="-1"></a>Duplicate records in health or survey data can compromise the integrity of analyses. A critical first step is ensuring each individual has a consistent and unique identifier (ID). When explicit IDs are missing or unreliable, they can be constructed using combinations of variables such as names, dates of birth, and location (e.g., using <span class="in">`paste()`</span>, <span class="in">`substr()`</span>, or <span class="in">`unite()`</span>). Once IDs are established, duplicates can be detected, reviewed, and resolved systematically through tagging (<span class="in">`row_number()`</span>), visual inspection, and appropriate retention or removal strategies.</span>
<span id="cb377-1901"><a href="#cb377-1901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1902"><a href="#cb377-1902" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1903"><a href="#cb377-1903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1904"><a href="#cb377-1904" aria-hidden="true" tabindex="-1"></a>üîπ Key Aspects of Duplicate Management</span>
<span id="cb377-1905"><a href="#cb377-1905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1906"><a href="#cb377-1906" aria-hidden="true" tabindex="-1"></a>| **Aspect** | **What to Address** | **Why It Matters** |</span>
<span id="cb377-1907"><a href="#cb377-1907" aria-hidden="true" tabindex="-1"></a>|------------------------|------------------------|------------------------|</span>
<span id="cb377-1908"><a href="#cb377-1908" aria-hidden="true" tabindex="-1"></a>| Detection Methods | Use <span class="in">`duplicated()`</span>, <span class="in">`distinct()`</span>, <span class="in">`n_distinct()`</span>, <span class="in">`row_number()`</span> by ID or keys | Helps quantify and locate potential duplicates |</span>
<span id="cb377-1909"><a href="#cb377-1909" aria-hidden="true" tabindex="-1"></a>| Validation | Visual/manual review using <span class="in">`arrange()`</span>, <span class="in">`group_by()`</span> + <span class="in">`filter()`</span> | Prevents removal of legitimate but similar entries |</span>
<span id="cb377-1910"><a href="#cb377-1910" aria-hidden="true" tabindex="-1"></a>| Tagging Duplicates | Label using <span class="in">`row_number()`</span> or <span class="in">`duplicated()`</span> | Allows flexible filtering or analysis of repeats |</span>
<span id="cb377-1911"><a href="#cb377-1911" aria-hidden="true" tabindex="-1"></a>| Deciding What to Keep | Keep first, latest (by date), or non-missing based on rules | Avoids loss of useful or most complete records |</span>
<span id="cb377-1912"><a href="#cb377-1912" aria-hidden="true" tabindex="-1"></a>| Removal or Aggregation | Drop with <span class="in">`filter()`</span>, or use <span class="in">`summarise()`</span> to collapse duplicates | Depends on context: reporting vs. recordkeeping |</span>
<span id="cb377-1913"><a href="#cb377-1913" aria-hidden="true" tabindex="-1"></a>| ID Creation / Fixing | Use <span class="in">`mutate()`</span> to create or correct IDs | Enables future joins and tracking |</span>
<span id="cb377-1914"><a href="#cb377-1914" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1915"><a href="#cb377-1915" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-1916"><a href="#cb377-1916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1917"><a href="#cb377-1917" aria-hidden="true" tabindex="-1"></a>The following table shows the summary with some data manipulation options</span>
<span id="cb377-1918"><a href="#cb377-1918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1919"><a href="#cb377-1919" aria-hidden="true" tabindex="-1"></a>| **Task** | **Function / Code** | **Purpose** |</span>
<span id="cb377-1920"><a href="#cb377-1920" aria-hidden="true" tabindex="-1"></a>|------------------------|------------------------|------------------------|</span>
<span id="cb377-1921"><a href="#cb377-1921" aria-hidden="true" tabindex="-1"></a>| Identify blank IDs or fields | <span class="in">`x[x == ""] &lt;- NA`</span> | Convert empty strings to <span class="in">`NA`</span> for proper detection |</span>
<span id="cb377-1922"><a href="#cb377-1922" aria-hidden="true" tabindex="-1"></a>| Count missing values | <span class="in">`sum(is.na(x))`</span> | Check how many values are missing |</span>
<span id="cb377-1923"><a href="#cb377-1923" aria-hidden="true" tabindex="-1"></a>| Count unique observations | <span class="in">`count(distinct(df, id))`</span> | Determine the number of unique records |</span>
<span id="cb377-1924"><a href="#cb377-1924" aria-hidden="true" tabindex="-1"></a>| Generate row numbers per group | <span class="in">`group_by(id) %&gt;% mutate(dup = row_number())`</span> | Label duplicates within each ID |</span>
<span id="cb377-1925"><a href="#cb377-1925" aria-hidden="true" tabindex="-1"></a>| Check duplication status | <span class="in">`table(df$dup)`</span> or <span class="in">`sum(dup &gt;= 2)`</span> | Summarise duplication pattern |</span>
<span id="cb377-1926"><a href="#cb377-1926" aria-hidden="true" tabindex="-1"></a>| Subset for review | <span class="in">`subset(df, dup == 2)`</span> | View specific duplicates for manual inspection |</span>
<span id="cb377-1927"><a href="#cb377-1927" aria-hidden="true" tabindex="-1"></a>| Filter duplicated individuals | <span class="in">`filter(n() &gt; 1)`</span> | Extract only duplicated IDs |</span>
<span id="cb377-1928"><a href="#cb377-1928" aria-hidden="true" tabindex="-1"></a>| Remove duplicates | <span class="in">`filter(!(dup &gt;= 2))`</span> | Keep only the first instance per group (if needed) |</span>
<span id="cb377-1929"><a href="#cb377-1929" aria-hidden="true" tabindex="-1"></a>| Clean temporary object | <span class="in">`rm()`</span> | Remove intermediate datasets from environment |</span>
<span id="cb377-1930"><a href="#cb377-1930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1931"><a href="#cb377-1931" aria-hidden="true" tabindex="-1"></a>This setup ensures duplicates are clearly identified, reviewed, and removed where appropriate.</span>
<span id="cb377-1932"><a href="#cb377-1932" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1933"><a href="#cb377-1933" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb377-1934"><a href="#cb377-1934" aria-hidden="true" tabindex="-1"></a><span class="in"># --- Create ID by combining first 4 letters of first &amp; last names + birthdate ---</span></span>
<span id="cb377-1935"><a href="#cb377-1935" aria-hidden="true" tabindex="-1"></a><span class="in">setwd("C:/Users/User/Desktop/Materials_ Course and proposals/Course Related/DataCamp/Data/Synthetic_data")</span></span>
<span id="cb377-1936"><a href="#cb377-1936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1937"><a href="#cb377-1937" aria-hidden="true" tabindex="-1"></a><span class="in">patients &lt;- read.csv("patients.csv")</span></span>
<span id="cb377-1938"><a href="#cb377-1938" aria-hidden="true" tabindex="-1"></a><span class="in">colnames(patients) &lt;- tolower(colnames(patients))</span></span>
<span id="cb377-1939"><a href="#cb377-1939" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-1940"><a href="#cb377-1940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1943"><a href="#cb377-1943" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-1944"><a href="#cb377-1944" aria-hidden="true" tabindex="-1"></a>patients <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb377-1945"><a href="#cb377-1945" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-1946"><a href="#cb377-1946" aria-hidden="true" tabindex="-1"></a>    <span class="at">birthdate =</span> <span class="fu">as.Date</span>(birthdate),</span>
<span id="cb377-1947"><a href="#cb377-1947" aria-hidden="true" tabindex="-1"></a>    <span class="at">id_text =</span> <span class="fu">paste0</span>(<span class="fu">substr</span>(first, <span class="dv">1</span>, <span class="dv">4</span>), <span class="st">"|"</span>, <span class="fu">substr</span>(last, <span class="dv">1</span>, <span class="dv">4</span>), <span class="st">"|"</span>, birthdate)</span>
<span id="cb377-1948"><a href="#cb377-1948" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb377-1949"><a href="#cb377-1949" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview new ID</span></span>
<span id="cb377-1950"><a href="#cb377-1950" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patients<span class="sc">$</span>id_text, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-1951"><a href="#cb377-1951" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1952"><a href="#cb377-1952" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Step 2: Create random numeric ID per individual ---</span></span>
<span id="cb377-1953"><a href="#cb377-1953" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)  <span class="co"># for reproducibility</span></span>
<span id="cb377-1954"><a href="#cb377-1954" aria-hidden="true" tabindex="-1"></a>patients <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb377-1955"><a href="#cb377-1955" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id_num =</span> <span class="fu">sample</span>(<span class="dv">100000</span><span class="sc">:</span><span class="dv">999999</span>, <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">FALSE</span>))</span>
<span id="cb377-1956"><a href="#cb377-1956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1957"><a href="#cb377-1957" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview both ID columns</span></span>
<span id="cb377-1958"><a href="#cb377-1958" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb377-1959"><a href="#cb377-1959" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(first, last, birthdate, id_text, id_num) <span class="sc">%&gt;%</span></span>
<span id="cb377-1960"><a href="#cb377-1960" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span>
<span id="cb377-1961"><a href="#cb377-1961" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1962"><a href="#cb377-1962" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1963"><a href="#cb377-1963" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean-up if needed</span></span>
<span id="cb377-1964"><a href="#cb377-1964" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-1965"><a href="#cb377-1965" aria-hidden="true" tabindex="-1"></a><span class="co"># rm(id_text, id_num) # optional if you store externally</span></span>
<span id="cb377-1966"><a href="#cb377-1966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1967"><a href="#cb377-1967" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span> (patients<span class="sc">$</span>race)</span>
<span id="cb377-1968"><a href="#cb377-1968" aria-hidden="true" tabindex="-1"></a>otherrace <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb377-1969"><a href="#cb377-1969" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(race <span class="sc">!=</span> <span class="st">"white"</span>)</span>
<span id="cb377-1970"><a href="#cb377-1970" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1971"><a href="#cb377-1971" aria-hidden="true" tabindex="-1"></a>patients <span class="ot">&lt;-</span> <span class="fu">rbind</span>(patients, otherrace)</span>
<span id="cb377-1972"><a href="#cb377-1972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1973"><a href="#cb377-1973" aria-hidden="true" tabindex="-1"></a><span class="co"># Count total and unique records</span></span>
<span id="cb377-1974"><a href="#cb377-1974" aria-hidden="true" tabindex="-1"></a>n_total <span class="ot">&lt;-</span> <span class="fu">nrow</span>(patients)</span>
<span id="cb377-1975"><a href="#cb377-1975" aria-hidden="true" tabindex="-1"></a>n_unique <span class="ot">&lt;-</span> <span class="fu">n_distinct</span>(patients<span class="sc">$</span>id_text)</span>
<span id="cb377-1976"><a href="#cb377-1976" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">"Total records: {n_total}, Unique IDs: {n_unique}"</span>))</span>
<span id="cb377-1977"><a href="#cb377-1977" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1978"><a href="#cb377-1978" aria-hidden="true" tabindex="-1"></a><span class="co"># Tag duplicates using row_number()</span></span>
<span id="cb377-1979"><a href="#cb377-1979" aria-hidden="true" tabindex="-1"></a>patients <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb377-1980"><a href="#cb377-1980" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id_text) <span class="sc">%&gt;%</span></span>
<span id="cb377-1981"><a href="#cb377-1981" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_text) <span class="sc">%&gt;%</span></span>
<span id="cb377-1982"><a href="#cb377-1982" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dup =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb377-1983"><a href="#cb377-1983" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb377-1984"><a href="#cb377-1984" aria-hidden="true" tabindex="-1"></a><span class="co"># Count number of true duplicates</span></span>
<span id="cb377-1985"><a href="#cb377-1985" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(patients<span class="sc">$</span>dup)</span>
<span id="cb377-1986"><a href="#cb377-1986" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sum</span>(patients<span class="sc">$</span>dup <span class="sc">&gt;=</span> <span class="dv">2</span>))</span>
<span id="cb377-1987"><a href="#cb377-1987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1988"><a href="#cb377-1988" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep only records from individuals who have duplicates</span></span>
<span id="cb377-1989"><a href="#cb377-1989" aria-hidden="true" tabindex="-1"></a>duplicates <span class="ot">&lt;-</span> patients <span class="sc">%&gt;%</span></span>
<span id="cb377-1990"><a href="#cb377-1990" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_text) <span class="sc">%&gt;%</span></span>
<span id="cb377-1991"><a href="#cb377-1991" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>() <span class="sc">&gt;=</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-1992"><a href="#cb377-1992" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_text, id_num, race, marital, gender, birthdate) <span class="sc">%&gt;%</span></span>
<span id="cb377-1993"><a href="#cb377-1993" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb377-1994"><a href="#cb377-1994" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1995"><a href="#cb377-1995" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview records from duplicated individuals</span></span>
<span id="cb377-1996"><a href="#cb377-1996" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(duplicates)</span>
<span id="cb377-1997"><a href="#cb377-1997" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-1998"><a href="#cb377-1998" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(duplicates, n_total, n_unique)</span>
<span id="cb377-1999"><a href="#cb377-1999" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2000"><a href="#cb377-2000" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2001"><a href="#cb377-2001" aria-hidden="true" tabindex="-1"></a><span class="fu">### **4.3 Merging (Joining) and Appending Datasets**</span></span>
<span id="cb377-2002"><a href="#cb377-2002" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2003"><a href="#cb377-2003" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`left_join()`</span>, <span class="in">`right_join()`</span>, <span class="in">`inner_join()`</span>, <span class="in">`full_join()`</span></span>
<span id="cb377-2004"><a href="#cb377-2004" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`semi_join()`</span> and <span class="in">`anti_join()`</span></span>
<span id="cb377-2005"><a href="#cb377-2005" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`bind_rows()`</span>, <span class="in">`rbind()`</span> , <span class="in">`bind_cols()`</span> and <span class="in">`cbind()`</span></span>
<span id="cb377-2006"><a href="#cb377-2006" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2007"><a href="#cb377-2007" aria-hidden="true" tabindex="-1"></a>When analyzing real-world datasets, it‚Äôs often necessary to **merge** or **append** multiple datasets.\</span>
<span id="cb377-2008"><a href="#cb377-2008" aria-hidden="true" tabindex="-1"></a>This could involve matching rows based on common identifiers, appending additional cases, or combining variables side-by-side.</span>
<span id="cb377-2009"><a href="#cb377-2009" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2010"><a href="#cb377-2010" aria-hidden="true" tabindex="-1"></a>We can **join**, **bind**, or **filter** datasets efficiently using <span class="in">`dplyr`</span> and base R techniques.</span>
<span id="cb377-2011"><a href="#cb377-2011" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2012"><a href="#cb377-2012" aria-hidden="true" tabindex="-1"></a>**Brief Descriptions**</span>
<span id="cb377-2013"><a href="#cb377-2013" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2014"><a href="#cb377-2014" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**left_join()**: Keep all records from the left (main) table; bring matching records from the right table.</span>
<span id="cb377-2015"><a href="#cb377-2015" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**right_join()**: Keep all records from the right table; bring matching records from the left.</span>
<span id="cb377-2016"><a href="#cb377-2016" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**inner_join()**: Keep only rows where keys match in both tables.</span>
<span id="cb377-2017"><a href="#cb377-2017" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**full_join()**: Keep all records from both tables; missing matches filled with <span class="in">`NA`</span>.</span>
<span id="cb377-2018"><a href="#cb377-2018" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**semi_join()**: Keep rows from the left table where a match exists in the right.</span>
<span id="cb377-2019"><a href="#cb377-2019" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**anti_join()**: Keep only rows from the left table that **don't** match the right.</span>
<span id="cb377-2020"><a href="#cb377-2020" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2021"><a href="#cb377-2021" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è <span class="in">`bind_rows()`</span> and <span class="in">`rbind()`</span> are used for **stacking** datasets.\</span>
<span id="cb377-2022"><a href="#cb377-2022" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è <span class="in">`bind_cols()`</span> and <span class="in">`cbind()`</span> are used for **attaching new columns** horizontally.</span>
<span id="cb377-2023"><a href="#cb377-2023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2024"><a href="#cb377-2024" aria-hidden="true" tabindex="-1"></a>**Summary Table: Key Functions for Joining and Appending**</span>
<span id="cb377-2025"><a href="#cb377-2025" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2026"><a href="#cb377-2026" aria-hidden="true" tabindex="-1"></a>| **Task** | **Function** | **Purpose** |</span>
<span id="cb377-2027"><a href="#cb377-2027" aria-hidden="true" tabindex="-1"></a>|:------------------|:-----------------|:----------------------------------|</span>
<span id="cb377-2028"><a href="#cb377-2028" aria-hidden="true" tabindex="-1"></a>| Merge by common key | <span class="in">`left_join()`</span>, <span class="in">`right_join()`</span>, <span class="in">`inner_join()`</span>, <span class="in">`full_join()`</span> | Merge datasets using common variables |</span>
<span id="cb377-2029"><a href="#cb377-2029" aria-hidden="true" tabindex="-1"></a>| Filter matching rows | <span class="in">`semi_join()`</span> | Keep rows from left table that have matches in right table |</span>
<span id="cb377-2030"><a href="#cb377-2030" aria-hidden="true" tabindex="-1"></a>| Filter non-matching rows | <span class="in">`anti_join()`</span> | Keep rows from left table with no match in right table |</span>
<span id="cb377-2031"><a href="#cb377-2031" aria-hidden="true" tabindex="-1"></a>| Row-wise append | <span class="in">`bind_rows()`</span> | Stack two datasets vertically (must have same columns) |</span>
<span id="cb377-2032"><a href="#cb377-2032" aria-hidden="true" tabindex="-1"></a>| Column-wise append | <span class="in">`bind_cols()`</span> | Add columns side-by-side (matching by row position) |</span>
<span id="cb377-2033"><a href="#cb377-2033" aria-hidden="true" tabindex="-1"></a>| Basic base R row bind | <span class="in">`rbind()`</span> | Append rows (base R equivalent to <span class="in">`bind_rows`</span>) |</span>
<span id="cb377-2034"><a href="#cb377-2034" aria-hidden="true" tabindex="-1"></a>| Basic base R column bind | <span class="in">`cbind()`</span> | Append columns (base R equivalent to <span class="in">`bind_cols`</span>) |</span>
<span id="cb377-2035"><a href="#cb377-2035" aria-hidden="true" tabindex="-1"></a>| Join a table to itself | Self-join | Analyze relationships within a single dataset (e.g., hierarchy) |</span>
<span id="cb377-2036"><a href="#cb377-2036" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2037"><a href="#cb377-2037" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2038"><a href="#cb377-2038" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2039"><a href="#cb377-2039" aria-hidden="true" tabindex="-1"></a>**Important Reminders** - Joins (`left_join`, etc.) match based on a **key** (column/s). - `bind_rows()` assumes **same column names and types**. - `bind_cols()` assumes **same number of rows**. - `rbind()` and `cbind()` are **base R** methods but <span class="in">`dplyr::bind_*()`</span> are more flexible. ---</span>
<span id="cb377-2040"><a href="#cb377-2040" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2041"><a href="#cb377-2041" aria-hidden="true" tabindex="-1"></a>**Demonstrating Different Types of Joins with Brief Descriptions**</span>
<span id="cb377-2042"><a href="#cb377-2042" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2043"><a href="#cb377-2043" aria-hidden="true" tabindex="-1"></a>**Standardizing variable Names**</span>
<span id="cb377-2044"><a href="#cb377-2044" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2045"><a href="#cb377-2045" aria-hidden="true" tabindex="-1"></a>Before performing joins, it is essential to ensure column names match in both datasets.\</span>
<span id="cb377-2046"><a href="#cb377-2046" aria-hidden="true" tabindex="-1"></a>This avoids errors caused by case differences or inconsistent naming.</span>
<span id="cb377-2047"><a href="#cb377-2047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2048"><a href="#cb377-2048" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE, include=FALSE}</span></span>
<span id="cb377-2049"><a href="#cb377-2049" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2050"><a href="#cb377-2050" aria-hidden="true" tabindex="-1"></a><span class="in">setwd("C:/Users/User/Desktop/Materials_ Course and proposals/Course Related/DataCamp/Data/Synthetic_data")</span></span>
<span id="cb377-2051"><a href="#cb377-2051" aria-hidden="true" tabindex="-1"></a><span class="in">patients &lt;- read.csv("patients.csv")</span></span>
<span id="cb377-2052"><a href="#cb377-2052" aria-hidden="true" tabindex="-1"></a><span class="in">vaccination &lt;- read.csv("immunizations.csv")</span></span>
<span id="cb377-2053"><a href="#cb377-2053" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2054"><a href="#cb377-2054" aria-hidden="true" tabindex="-1"></a><span class="in"># Convert column names to lowercase</span></span>
<span id="cb377-2055"><a href="#cb377-2055" aria-hidden="true" tabindex="-1"></a><span class="in">colnames(vaccination) &lt;- tolower(colnames(vaccination))</span></span>
<span id="cb377-2056"><a href="#cb377-2056" aria-hidden="true" tabindex="-1"></a><span class="in">colnames(patients) &lt;- tolower(colnames(patients))</span></span>
<span id="cb377-2057"><a href="#cb377-2057" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2058"><a href="#cb377-2058" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2059"><a href="#cb377-2059" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2062"><a href="#cb377-2062" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-2063"><a href="#cb377-2063" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2064"><a href="#cb377-2064" aria-hidden="true" tabindex="-1"></a><span class="co"># Full Join: Keep everything from both datasets</span></span>
<span id="cb377-2065"><a href="#cb377-2065" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2066"><a href="#cb377-2066" aria-hidden="true" tabindex="-1"></a>vacc_full_join <span class="ot">&lt;-</span> <span class="fu">full_join</span>(</span>
<span id="cb377-2067"><a href="#cb377-2067" aria-hidden="true" tabindex="-1"></a>  patients,</span>
<span id="cb377-2068"><a href="#cb377-2068" aria-hidden="true" tabindex="-1"></a>  vaccination,</span>
<span id="cb377-2069"><a href="#cb377-2069" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>)</span>
<span id="cb377-2070"><a href="#cb377-2070" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb377-2071"><a href="#cb377-2071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2072"><a href="#cb377-2072" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vacc_full_join, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-2073"><a href="#cb377-2073" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2074"><a href="#cb377-2074" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2075"><a href="#cb377-2075" aria-hidden="true" tabindex="-1"></a><span class="co"># Left Join: Keep all patients, add vaccination if available</span></span>
<span id="cb377-2076"><a href="#cb377-2076" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2077"><a href="#cb377-2077" aria-hidden="true" tabindex="-1"></a>vacc_left_join <span class="ot">&lt;-</span> <span class="fu">left_join</span>(</span>
<span id="cb377-2078"><a href="#cb377-2078" aria-hidden="true" tabindex="-1"></a>  patients,</span>
<span id="cb377-2079"><a href="#cb377-2079" aria-hidden="true" tabindex="-1"></a>  vaccination,</span>
<span id="cb377-2080"><a href="#cb377-2080" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>)</span>
<span id="cb377-2081"><a href="#cb377-2081" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb377-2082"><a href="#cb377-2082" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2083"><a href="#cb377-2083" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vacc_left_join, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-2084"><a href="#cb377-2084" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2085"><a href="#cb377-2085" aria-hidden="true" tabindex="-1"></a><span class="co"># Right Join: Keep all vaccinations, add patients if available</span></span>
<span id="cb377-2086"><a href="#cb377-2086" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2087"><a href="#cb377-2087" aria-hidden="true" tabindex="-1"></a>vacc_right_join <span class="ot">&lt;-</span> <span class="fu">right_join</span>(</span>
<span id="cb377-2088"><a href="#cb377-2088" aria-hidden="true" tabindex="-1"></a>  patients,</span>
<span id="cb377-2089"><a href="#cb377-2089" aria-hidden="true" tabindex="-1"></a>  vaccination,</span>
<span id="cb377-2090"><a href="#cb377-2090" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>)</span>
<span id="cb377-2091"><a href="#cb377-2091" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb377-2092"><a href="#cb377-2092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2093"><a href="#cb377-2093" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vacc_right_join, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-2094"><a href="#cb377-2094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2095"><a href="#cb377-2095" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2096"><a href="#cb377-2096" aria-hidden="true" tabindex="-1"></a><span class="co"># Inner Join: Keep only matched patients and vaccinations</span></span>
<span id="cb377-2097"><a href="#cb377-2097" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2098"><a href="#cb377-2098" aria-hidden="true" tabindex="-1"></a>vacc_inner_join <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(</span>
<span id="cb377-2099"><a href="#cb377-2099" aria-hidden="true" tabindex="-1"></a>  patients,</span>
<span id="cb377-2100"><a href="#cb377-2100" aria-hidden="true" tabindex="-1"></a>  vaccination,</span>
<span id="cb377-2101"><a href="#cb377-2101" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>))</span>
<span id="cb377-2102"><a href="#cb377-2102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2103"><a href="#cb377-2103" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vacc_inner_join, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-2104"><a href="#cb377-2104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2105"><a href="#cb377-2105" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2106"><a href="#cb377-2106" aria-hidden="true" tabindex="-1"></a><span class="co"># Semi Join: Keep only patients that have a vaccination match</span></span>
<span id="cb377-2107"><a href="#cb377-2107" aria-hidden="true" tabindex="-1"></a><span class="co"># (Only patient columns are kept)</span></span>
<span id="cb377-2108"><a href="#cb377-2108" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2109"><a href="#cb377-2109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2110"><a href="#cb377-2110" aria-hidden="true" tabindex="-1"></a>vacc_semi_join <span class="ot">&lt;-</span> <span class="fu">semi_join</span>(</span>
<span id="cb377-2111"><a href="#cb377-2111" aria-hidden="true" tabindex="-1"></a>  patients,</span>
<span id="cb377-2112"><a href="#cb377-2112" aria-hidden="true" tabindex="-1"></a>  vaccination,</span>
<span id="cb377-2113"><a href="#cb377-2113" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>))</span>
<span id="cb377-2114"><a href="#cb377-2114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2115"><a href="#cb377-2115" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vacc_semi_join, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-2116"><a href="#cb377-2116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2117"><a href="#cb377-2117" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2118"><a href="#cb377-2118" aria-hidden="true" tabindex="-1"></a><span class="co"># Anti Join: Keep only patients that do not have a vaccination match</span></span>
<span id="cb377-2119"><a href="#cb377-2119" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2120"><a href="#cb377-2120" aria-hidden="true" tabindex="-1"></a>vacc_anti_join <span class="ot">&lt;-</span> <span class="fu">anti_join</span>(</span>
<span id="cb377-2121"><a href="#cb377-2121" aria-hidden="true" tabindex="-1"></a>  patients,</span>
<span id="cb377-2122"><a href="#cb377-2122" aria-hidden="true" tabindex="-1"></a>  vaccination,</span>
<span id="cb377-2123"><a href="#cb377-2123" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"patient"</span>))</span>
<span id="cb377-2124"><a href="#cb377-2124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2125"><a href="#cb377-2125" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vacc_anti_join, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-2126"><a href="#cb377-2126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2127"><a href="#cb377-2127" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2128"><a href="#cb377-2128" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove temporary datasets</span></span>
<span id="cb377-2129"><a href="#cb377-2129" aria-hidden="true" tabindex="-1"></a><span class="co"># ......................................</span></span>
<span id="cb377-2130"><a href="#cb377-2130" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vacc_left_join, vacc_right_join, vacc_inner_join, vacc_full_join, vacc_semi_join, vacc_anti_join)</span>
<span id="cb377-2131"><a href="#cb377-2131" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2132"><a href="#cb377-2132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2133"><a href="#cb377-2133" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE, include=FALSE}</span></span>
<span id="cb377-2134"><a href="#cb377-2134" aria-hidden="true" tabindex="-1"></a><span class="in"># Prepare data for appending data</span></span>
<span id="cb377-2135"><a href="#cb377-2135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2136"><a href="#cb377-2136" aria-hidden="true" tabindex="-1"></a><span class="in"># 1. Filter NSW separately</span></span>
<span id="cb377-2137"><a href="#cb377-2137" aria-hidden="true" tabindex="-1"></a><span class="in">breast_cancer_NSW &lt;- breast_cancer_data %&gt;%</span></span>
<span id="cb377-2138"><a href="#cb377-2138" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(state == "NSW")</span></span>
<span id="cb377-2139"><a href="#cb377-2139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2140"><a href="#cb377-2140" aria-hidden="true" tabindex="-1"></a><span class="in"># 2. Filter WA separately</span></span>
<span id="cb377-2141"><a href="#cb377-2141" aria-hidden="true" tabindex="-1"></a><span class="in">breast_cancer_WA &lt;- breast_cancer_data %&gt;%</span></span>
<span id="cb377-2142"><a href="#cb377-2142" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(state == "WA")</span></span>
<span id="cb377-2143"><a href="#cb377-2143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2144"><a href="#cb377-2144" aria-hidden="true" tabindex="-1"></a><span class="in"># 3. Filter Others (NOT NSW and NOT WA)</span></span>
<span id="cb377-2145"><a href="#cb377-2145" aria-hidden="true" tabindex="-1"></a><span class="in">breast_cancer_others &lt;- breast_cancer_data %&gt;%</span></span>
<span id="cb377-2146"><a href="#cb377-2146" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(!(state == "NSW" | state == "WA"))</span></span>
<span id="cb377-2147"><a href="#cb377-2147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2148"><a href="#cb377-2148" aria-hidden="true" tabindex="-1"></a><span class="in"># 4. Prepare Participation Data (Remove SA3 columns)</span></span>
<span id="cb377-2149"><a href="#cb377-2149" aria-hidden="true" tabindex="-1"></a><span class="in">participation &lt;- breast_cancer_data %&gt;%</span></span>
<span id="cb377-2150"><a href="#cb377-2150" aria-hidden="true" tabindex="-1"></a><span class="in">  select(-sa3code, -sa3coden, -sa3name, -state)</span></span>
<span id="cb377-2151"><a href="#cb377-2151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2152"><a href="#cb377-2152" aria-hidden="true" tabindex="-1"></a><span class="in"># 5. Prepare SA3 metadata (for mapping etc.)</span></span>
<span id="cb377-2153"><a href="#cb377-2153" aria-hidden="true" tabindex="-1"></a><span class="in">breast_cancer_SA3_info &lt;- breast_cancer_data %&gt;%</span></span>
<span id="cb377-2154"><a href="#cb377-2154" aria-hidden="true" tabindex="-1"></a><span class="in">  select(sa3code, sa3coden, sa3name, state) </span></span>
<span id="cb377-2155"><a href="#cb377-2155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2156"><a href="#cb377-2156" aria-hidden="true" tabindex="-1"></a><span class="in"># 6. Check</span></span>
<span id="cb377-2157"><a href="#cb377-2157" aria-hidden="true" tabindex="-1"></a><span class="in">nrow(breast_cancer_NSW)</span></span>
<span id="cb377-2158"><a href="#cb377-2158" aria-hidden="true" tabindex="-1"></a><span class="in">nrow(breast_cancer_WA)</span></span>
<span id="cb377-2159"><a href="#cb377-2159" aria-hidden="true" tabindex="-1"></a><span class="in">nrow(breast_cancer_others)</span></span>
<span id="cb377-2160"><a href="#cb377-2160" aria-hidden="true" tabindex="-1"></a><span class="in">nrow(participation)</span></span>
<span id="cb377-2161"><a href="#cb377-2161" aria-hidden="true" tabindex="-1"></a><span class="in">nrow(breast_cancer_SA3_info)</span></span>
<span id="cb377-2162"><a href="#cb377-2162" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2163"><a href="#cb377-2163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2164"><a href="#cb377-2164" aria-hidden="true" tabindex="-1"></a>**Appending (Binding) DataFrames: Rows and Columns**</span>
<span id="cb377-2165"><a href="#cb377-2165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2168"><a href="#cb377-2168" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-2169"><a href="#cb377-2169" aria-hidden="true" tabindex="-1"></a><span class="co"># Binding Rows Together (bind_rows): Combine NSW, WA, and Others into one dataset</span></span>
<span id="cb377-2170"><a href="#cb377-2170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2171"><a href="#cb377-2171" aria-hidden="true" tabindex="-1"></a>bc_combined_rows <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb377-2172"><a href="#cb377-2172" aria-hidden="true" tabindex="-1"></a>  breast_cancer_NSW,</span>
<span id="cb377-2173"><a href="#cb377-2173" aria-hidden="true" tabindex="-1"></a>  breast_cancer_WA,</span>
<span id="cb377-2174"><a href="#cb377-2174" aria-hidden="true" tabindex="-1"></a>  breast_cancer_others</span>
<span id="cb377-2175"><a href="#cb377-2175" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb377-2176"><a href="#cb377-2176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2177"><a href="#cb377-2177" aria-hidden="true" tabindex="-1"></a><span class="co"># Check result</span></span>
<span id="cb377-2178"><a href="#cb377-2178" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_combined_rows, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-2179"><a href="#cb377-2179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2180"><a href="#cb377-2180" aria-hidden="true" tabindex="-1"></a><span class="co"># Confirm number of rows</span></span>
<span id="cb377-2181"><a href="#cb377-2181" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(bc_combined_rows)</span>
<span id="cb377-2182"><a href="#cb377-2182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2183"><a href="#cb377-2183" aria-hidden="true" tabindex="-1"></a><span class="co"># Binding Columns Together (bind_cols): Combine Participation Data with SA3 metadata</span></span>
<span id="cb377-2184"><a href="#cb377-2184" aria-hidden="true" tabindex="-1"></a><span class="co"># (needs same number of rows)</span></span>
<span id="cb377-2185"><a href="#cb377-2185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2186"><a href="#cb377-2186" aria-hidden="true" tabindex="-1"></a>bc_combined_cols <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(</span>
<span id="cb377-2187"><a href="#cb377-2187" aria-hidden="true" tabindex="-1"></a>  participation,</span>
<span id="cb377-2188"><a href="#cb377-2188" aria-hidden="true" tabindex="-1"></a>  breast_cancer_SA3_info )</span>
<span id="cb377-2189"><a href="#cb377-2189" aria-hidden="true" tabindex="-1"></a><span class="co"># Check result</span></span>
<span id="cb377-2190"><a href="#cb377-2190" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_combined_cols, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-2191"><a href="#cb377-2191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2192"><a href="#cb377-2192" aria-hidden="true" tabindex="-1"></a><span class="co"># Appending Rows Using Base R rbind()</span></span>
<span id="cb377-2193"><a href="#cb377-2193" aria-hidden="true" tabindex="-1"></a><span class="co"># (Equivalent to bind_rows but simpler cases, needs identical columns)</span></span>
<span id="cb377-2194"><a href="#cb377-2194" aria-hidden="true" tabindex="-1"></a>bc_combined_rbind <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb377-2195"><a href="#cb377-2195" aria-hidden="true" tabindex="-1"></a>  breast_cancer_NSW,</span>
<span id="cb377-2196"><a href="#cb377-2196" aria-hidden="true" tabindex="-1"></a>  breast_cancer_WA</span>
<span id="cb377-2197"><a href="#cb377-2197" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb377-2198"><a href="#cb377-2198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2199"><a href="#cb377-2199" aria-hidden="true" tabindex="-1"></a><span class="co"># Check result</span></span>
<span id="cb377-2200"><a href="#cb377-2200" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_combined_rbind, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-2201"><a href="#cb377-2201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2202"><a href="#cb377-2202" aria-hidden="true" tabindex="-1"></a><span class="co"># Appending Columns Using Base R cbind()</span></span>
<span id="cb377-2203"><a href="#cb377-2203" aria-hidden="true" tabindex="-1"></a><span class="co"># (Simple column binding, assumes same number of rows)</span></span>
<span id="cb377-2204"><a href="#cb377-2204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2205"><a href="#cb377-2205" aria-hidden="true" tabindex="-1"></a>bc_combined_cbind <span class="ot">&lt;-</span> <span class="fu">cbind</span>(</span>
<span id="cb377-2206"><a href="#cb377-2206" aria-hidden="true" tabindex="-1"></a>  participation,</span>
<span id="cb377-2207"><a href="#cb377-2207" aria-hidden="true" tabindex="-1"></a>  breast_cancer_SA3_info)</span>
<span id="cb377-2208"><a href="#cb377-2208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2209"><a href="#cb377-2209" aria-hidden="true" tabindex="-1"></a><span class="co"># Check result</span></span>
<span id="cb377-2210"><a href="#cb377-2210" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bc_combined_cbind, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb377-2211"><a href="#cb377-2211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2212"><a href="#cb377-2212" aria-hidden="true" tabindex="-1"></a><span class="co"># Important Notes:</span></span>
<span id="cb377-2213"><a href="#cb377-2213" aria-hidden="true" tabindex="-1"></a><span class="co"># - bind_rows() can handle different column orders safely</span></span>
<span id="cb377-2214"><a href="#cb377-2214" aria-hidden="true" tabindex="-1"></a><span class="co"># - rbind() requires identical column names and order</span></span>
<span id="cb377-2215"><a href="#cb377-2215" aria-hidden="true" tabindex="-1"></a><span class="co"># - bind_cols() simply pastes side-by-side, no matching by keys</span></span>
<span id="cb377-2216"><a href="#cb377-2216" aria-hidden="true" tabindex="-1"></a><span class="co"># - cbind() assumes same number of rows</span></span>
<span id="cb377-2217"><a href="#cb377-2217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2218"><a href="#cb377-2218" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-2219"><a href="#cb377-2219" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove all temporary objects created in this chunk</span></span>
<span id="cb377-2220"><a href="#cb377-2220" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-2221"><a href="#cb377-2221" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(</span>
<span id="cb377-2222"><a href="#cb377-2222" aria-hidden="true" tabindex="-1"></a>  breast_cancer_NSW, breast_cancer_WA, breast_cancer_others, participation, breast_cancer_SA3_info,</span>
<span id="cb377-2223"><a href="#cb377-2223" aria-hidden="true" tabindex="-1"></a>  bc_combined_rows, bc_combined_cols, bc_combined_rbind, bc_combined_cbind</span>
<span id="cb377-2224"><a href="#cb377-2224" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb377-2225"><a href="#cb377-2225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2226"><a href="#cb377-2226" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2227"><a href="#cb377-2227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2228"><a href="#cb377-2228" aria-hidden="true" tabindex="-1"></a><span class="fu">### **4.4 Missing Value Identification and Imputations**</span></span>
<span id="cb377-2229"><a href="#cb377-2229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2230"><a href="#cb377-2230" aria-hidden="true" tabindex="-1"></a>**A. Identifying Missing Values**</span>
<span id="cb377-2231"><a href="#cb377-2231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2232"><a href="#cb377-2232" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>is.na(), anyNA(), sum(is.na(x)), colSums() ‚Äì detect/count missing values</span>
<span id="cb377-2233"><a href="#cb377-2233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2234"><a href="#cb377-2234" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>complete.cases() ‚Äì filter complete rows</span>
<span id="cb377-2235"><a href="#cb377-2235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2236"><a href="#cb377-2236" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Convert blanks to NA: x<span class="sc">\[</span>x == ""<span class="sc">\]</span> <span class="sc">\&lt;</span>- NA</span>
<span id="cb377-2237"><a href="#cb377-2237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2238"><a href="#cb377-2238" aria-hidden="true" tabindex="-1"></a>**B. Handling Missing Values**</span>
<span id="cb377-2239"><a href="#cb377-2239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2240"><a href="#cb377-2240" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Basic Removal/Replacement: na.omit(), replace_na() (tidyr), ifelse()</span>
<span id="cb377-2241"><a href="#cb377-2241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2242"><a href="#cb377-2242" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Forward/Backward Fill: fill() (tidyr) with .direction = "down" / "up"</span>
<span id="cb377-2243"><a href="#cb377-2243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2244"><a href="#cb377-2244" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Statistical Imputation:</span>
<span id="cb377-2245"><a href="#cb377-2245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2246"><a href="#cb377-2246" aria-hidden="true" tabindex="-1"></a>-Simple: mean/median imputation</span>
<span id="cb377-2247"><a href="#cb377-2247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2248"><a href="#cb377-2248" aria-hidden="true" tabindex="-1"></a>-Multiple: mice::mice()()</span>
<span id="cb377-2249"><a href="#cb377-2249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2250"><a href="#cb377-2250" aria-hidden="true" tabindex="-1"></a><span class="sc">\-</span>**Advanced**: Hmisc::aregImpute, missForest, Amelia, zoo::na.fill</span>
<span id="cb377-2251"><a href="#cb377-2251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2252"><a href="#cb377-2252" aria-hidden="true" tabindex="-1"></a>Missing data is a common issue in real-world datasets. In R, handling missing values properly is essential to ensure the integrity of analyses and avoid misleading results.</span>
<span id="cb377-2253"><a href="#cb377-2253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2254"><a href="#cb377-2254" aria-hidden="true" tabindex="-1"></a>This section covers how to **identify**, **clean**, and **impute** missing values using base R and tidyverse tools. Techniques range from basic filtering to advanced imputation models.</span>
<span id="cb377-2255"><a href="#cb377-2255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2256"><a href="#cb377-2256" aria-hidden="true" tabindex="-1"></a>‚û°Ô∏è Missing values are typically represented as <span class="in">`NA`</span> in R. Empty strings (e.g., <span class="in">`""`</span>) or special codes (e.g., <span class="in">`-99`</span>, <span class="in">`"missing"`</span>) may also indicate missingness and need conversion before analysis.</span>
<span id="cb377-2257"><a href="#cb377-2257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2258"><a href="#cb377-2258" aria-hidden="true" tabindex="-1"></a>üîπ Summary of Functions for Handling Missing Values</span>
<span id="cb377-2259"><a href="#cb377-2259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2260"><a href="#cb377-2260" aria-hidden="true" tabindex="-1"></a>| **Task** | **Function** / **Code** | **Purpose** |</span>
<span id="cb377-2261"><a href="#cb377-2261" aria-hidden="true" tabindex="-1"></a>|-------------------|------------------------|-----------------------------|</span>
<span id="cb377-2262"><a href="#cb377-2262" aria-hidden="true" tabindex="-1"></a>| Detect missing values | <span class="in">`is.na(x)`</span>, <span class="in">`anyNA(x)`</span>, <span class="in">`sum(is.na(x))`</span> | Identify/count missing values |</span>
<span id="cb377-2263"><a href="#cb377-2263" aria-hidden="true" tabindex="-1"></a>| Missing per column | <span class="in">`colSums(is.na(df))`</span> | Count NAs per column |</span>
<span id="cb377-2264"><a href="#cb377-2264" aria-hidden="true" tabindex="-1"></a>| Filter complete rows | <span class="in">`complete.cases(df)`</span> | Keep only rows without any missing values |</span>
<span id="cb377-2265"><a href="#cb377-2265" aria-hidden="true" tabindex="-1"></a>| Convert blanks to <span class="in">`NA`</span> | <span class="in">`x[x == ""] &lt;- NA`</span> | Convert empty strings to missing values |</span>
<span id="cb377-2266"><a href="#cb377-2266" aria-hidden="true" tabindex="-1"></a>| Remove missing rows | <span class="in">`na.omit(df)`</span> | Remove rows with any missing value |</span>
<span id="cb377-2267"><a href="#cb377-2267" aria-hidden="true" tabindex="-1"></a>| Replace missing values | <span class="in">`replace_na(df, list(...))`</span>, <span class="in">`ifelse(is.na(x), ...)`</span> | Impute or replace NA with custom logic |</span>
<span id="cb377-2268"><a href="#cb377-2268" aria-hidden="true" tabindex="-1"></a>| Forward/backward fill | <span class="in">`fill(df, .direction = "down" / "up")`</span> | Fill NA using nearby values |</span>
<span id="cb377-2269"><a href="#cb377-2269" aria-hidden="true" tabindex="-1"></a>| Mean/median imputation | <span class="in">`x[is.na(x)] &lt;- mean(x, na.rm = TRUE)`</span> | Replace NA with summary statistic |</span>
<span id="cb377-2270"><a href="#cb377-2270" aria-hidden="true" tabindex="-1"></a>| Multiple imputation | <span class="in">`mice::mice(df)`</span> | Create multiple imputed datasets using chained equations |</span>
<span id="cb377-2271"><a href="#cb377-2271" aria-hidden="true" tabindex="-1"></a>| Advanced imputation | <span class="in">`Hmisc::aregImpute`</span>, <span class="in">`missForest`</span>, <span class="in">`Amelia`</span>, <span class="in">`zoo::na.fill()`</span> | Specialized techniques for complex imputations |</span>
<span id="cb377-2272"><a href="#cb377-2272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2273"><a href="#cb377-2273" aria-hidden="true" tabindex="-1"></a>üìö **Further Learning and Resources**</span>
<span id="cb377-2274"><a href="#cb377-2274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2275"><a href="#cb377-2275" aria-hidden="true" tabindex="-1"></a>Additional tutorials, demonstrations, and datasets are available on:</span>
<span id="cb377-2276"><a href="#cb377-2276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2277"><a href="#cb377-2277" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**YouTube Channel ‚Äì AnalyticsHub**\</span>
<span id="cb377-2278"><a href="#cb377-2278" aria-hidden="true" tabindex="-1"></a>    <span class="ot">&lt;https://studio.youtube.com/channel/UCLVKP0g8GvHhOh0kn20T8eg/videos/upload?filter=%5B%5D&amp;sort=%7B%22columnType%22%3A%22date%22%2C%22sortOrder%22%3A%22DESCENDING%22%7D&gt;</span></span>
<span id="cb377-2279"><a href="#cb377-2279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2280"><a href="#cb377-2280" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**GitHub Repository**\</span>
<span id="cb377-2281"><a href="#cb377-2281" aria-hidden="true" tabindex="-1"></a>    <span class="ot">&lt;https://github.com/HabtamuBizuayehu?tab=repositories&gt;</span></span>
<span id="cb377-2282"><a href="#cb377-2282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2283"><a href="#cb377-2283" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2284"><a href="#cb377-2284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2285"><a href="#cb377-2285" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb377-2286"><a href="#cb377-2286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2287"><a href="#cb377-2287" aria-hidden="true" tabindex="-1"></a><span class="in">setwd("C:/Users/User/Desktop/Materials_ Course and proposals/Course Related/DataCamp/Data/Synthetic_data")</span></span>
<span id="cb377-2288"><a href="#cb377-2288" aria-hidden="true" tabindex="-1"></a><span class="in">visits_all &lt;- read.csv("patients.csv")</span></span>
<span id="cb377-2289"><a href="#cb377-2289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2290"><a href="#cb377-2290" aria-hidden="true" tabindex="-1"></a><span class="in">colnames(visits_all) &lt;- tolower(colnames(visits_all))</span></span>
<span id="cb377-2291"><a href="#cb377-2291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2292"><a href="#cb377-2292" aria-hidden="true" tabindex="-1"></a><span class="in"># Generate variables for demonstrating bassAckward and forward imputation</span></span>
<span id="cb377-2293"><a href="#cb377-2293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2294"><a href="#cb377-2294" aria-hidden="true" tabindex="-1"></a><span class="in">set.seed(123)  # For reproducibility</span></span>
<span id="cb377-2295"><a href="#cb377-2295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2296"><a href="#cb377-2296" aria-hidden="true" tabindex="-1"></a><span class="in">visit_1 &lt;- visits_all %&gt;%</span></span>
<span id="cb377-2297"><a href="#cb377-2297" aria-hidden="true" tabindex="-1"></a><span class="in">  slice_sample(n = 10) %&gt;% </span></span>
<span id="cb377-2298"><a href="#cb377-2298" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(visit = 1)</span></span>
<span id="cb377-2299"><a href="#cb377-2299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2300"><a href="#cb377-2300" aria-hidden="true" tabindex="-1"></a><span class="in"># Label visit_1 if not already done</span></span>
<span id="cb377-2301"><a href="#cb377-2301" aria-hidden="true" tabindex="-1"></a><span class="in">visit_1 &lt;- visit_1 %&gt;%</span></span>
<span id="cb377-2302"><a href="#cb377-2302" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(visit = 1)</span></span>
<span id="cb377-2303"><a href="#cb377-2303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2304"><a href="#cb377-2304" aria-hidden="true" tabindex="-1"></a><span class="in"># Create visit_2 (all race &amp; income missing)</span></span>
<span id="cb377-2305"><a href="#cb377-2305" aria-hidden="true" tabindex="-1"></a><span class="in">visit_2 &lt;- visit_1 %&gt;%</span></span>
<span id="cb377-2306"><a href="#cb377-2306" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb377-2307"><a href="#cb377-2307" aria-hidden="true" tabindex="-1"></a><span class="in">    visit = 2,</span></span>
<span id="cb377-2308"><a href="#cb377-2308" aria-hidden="true" tabindex="-1"></a><span class="in">    race = NA,</span></span>
<span id="cb377-2309"><a href="#cb377-2309" aria-hidden="true" tabindex="-1"></a><span class="in">    income = NA</span></span>
<span id="cb377-2310"><a href="#cb377-2310" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-2311"><a href="#cb377-2311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2312"><a href="#cb377-2312" aria-hidden="true" tabindex="-1"></a><span class="in"># Create visit_3: 5 missing race, 5 missing income, others income - 1000</span></span>
<span id="cb377-2313"><a href="#cb377-2313" aria-hidden="true" tabindex="-1"></a><span class="in">set.seed(123)</span></span>
<span id="cb377-2314"><a href="#cb377-2314" aria-hidden="true" tabindex="-1"></a><span class="in">race_miss_idx_v3 &lt;- sample(1:nrow(visit_1), 5)</span></span>
<span id="cb377-2315"><a href="#cb377-2315" aria-hidden="true" tabindex="-1"></a><span class="in">income_miss_idx_v3 &lt;- sample(setdiff(1:nrow(visit_1), race_miss_idx_v3), 5)</span></span>
<span id="cb377-2316"><a href="#cb377-2316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2317"><a href="#cb377-2317" aria-hidden="true" tabindex="-1"></a><span class="in">visit_3 &lt;- visit_1 %&gt;%</span></span>
<span id="cb377-2318"><a href="#cb377-2318" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb377-2319"><a href="#cb377-2319" aria-hidden="true" tabindex="-1"></a><span class="in">    visit = 3,</span></span>
<span id="cb377-2320"><a href="#cb377-2320" aria-hidden="true" tabindex="-1"></a><span class="in">    race = ifelse(row_number() %in% race_miss_idx_v3, NA, race),</span></span>
<span id="cb377-2321"><a href="#cb377-2321" aria-hidden="true" tabindex="-1"></a><span class="in">    income = case_when(</span></span>
<span id="cb377-2322"><a href="#cb377-2322" aria-hidden="true" tabindex="-1"></a><span class="in">      row_number() %in% income_miss_idx_v3 ~ NA_real_,</span></span>
<span id="cb377-2323"><a href="#cb377-2323" aria-hidden="true" tabindex="-1"></a><span class="in">      TRUE ~ income - 1000</span></span>
<span id="cb377-2324"><a href="#cb377-2324" aria-hidden="true" tabindex="-1"></a><span class="in">    )</span></span>
<span id="cb377-2325"><a href="#cb377-2325" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-2326"><a href="#cb377-2326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2327"><a href="#cb377-2327" aria-hidden="true" tabindex="-1"></a><span class="in"># Create visit_4: reverse missing pattern of visit_3</span></span>
<span id="cb377-2328"><a href="#cb377-2328" aria-hidden="true" tabindex="-1"></a><span class="in">visit_4 &lt;- visit_1 %&gt;%</span></span>
<span id="cb377-2329"><a href="#cb377-2329" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb377-2330"><a href="#cb377-2330" aria-hidden="true" tabindex="-1"></a><span class="in">    visit = 4,</span></span>
<span id="cb377-2331"><a href="#cb377-2331" aria-hidden="true" tabindex="-1"></a><span class="in">    race = ifelse(row_number() %in% income_miss_idx_v3, NA, race),</span></span>
<span id="cb377-2332"><a href="#cb377-2332" aria-hidden="true" tabindex="-1"></a><span class="in">    income = case_when(</span></span>
<span id="cb377-2333"><a href="#cb377-2333" aria-hidden="true" tabindex="-1"></a><span class="in">      row_number() %in% race_miss_idx_v3 ~ NA_real_,</span></span>
<span id="cb377-2334"><a href="#cb377-2334" aria-hidden="true" tabindex="-1"></a><span class="in">      TRUE ~ income - 1000</span></span>
<span id="cb377-2335"><a href="#cb377-2335" aria-hidden="true" tabindex="-1"></a><span class="in">    )</span></span>
<span id="cb377-2336"><a href="#cb377-2336" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-2337"><a href="#cb377-2337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2338"><a href="#cb377-2338" aria-hidden="true" tabindex="-1"></a><span class="in"># Combine all visits</span></span>
<span id="cb377-2339"><a href="#cb377-2339" aria-hidden="true" tabindex="-1"></a><span class="in">visits_all &lt;- bind_rows(visit_1, visit_2, visit_3, visit_4)</span></span>
<span id="cb377-2340"><a href="#cb377-2340" aria-hidden="true" tabindex="-1"></a><span class="in"># Optional: preview</span></span>
<span id="cb377-2341"><a href="#cb377-2341" aria-hidden="true" tabindex="-1"></a><span class="in">head(visits_all)</span></span>
<span id="cb377-2342"><a href="#cb377-2342" aria-hidden="true" tabindex="-1"></a><span class="in">rm(visit_1, visit_2, visit_3, visit_4)</span></span>
<span id="cb377-2343"><a href="#cb377-2343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2344"><a href="#cb377-2344" aria-hidden="true" tabindex="-1"></a><span class="in"># Standardise missing values</span></span>
<span id="cb377-2345"><a href="#cb377-2345" aria-hidden="true" tabindex="-1"></a><span class="in">visits_all &lt;- visits_all %&gt;%</span></span>
<span id="cb377-2346"><a href="#cb377-2346" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb377-2347"><a href="#cb377-2347" aria-hidden="true" tabindex="-1"></a><span class="in">    across(where(is.character), ~ na_if(.x, "")),</span></span>
<span id="cb377-2348"><a href="#cb377-2348" aria-hidden="true" tabindex="-1"></a><span class="in">    across(where(is.numeric), ~ ifelse(.x == 0, NA, .x)))</span></span>
<span id="cb377-2349"><a href="#cb377-2349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2350"><a href="#cb377-2350" aria-hidden="true" tabindex="-1"></a><span class="in"># Create a unique patient ID by combining parts of first and last name with birthdate</span></span>
<span id="cb377-2351"><a href="#cb377-2351" aria-hidden="true" tabindex="-1"></a><span class="in">visits_all &lt;- visits_all %&gt;%</span></span>
<span id="cb377-2352"><a href="#cb377-2352" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb377-2353"><a href="#cb377-2353" aria-hidden="true" tabindex="-1"></a><span class="in">    birthdate = as.Date(birthdate),</span></span>
<span id="cb377-2354"><a href="#cb377-2354" aria-hidden="true" tabindex="-1"></a><span class="in">    id_text = paste0(substr(first, 1, 4), "|", substr(last, 1, 4), "|", birthdate))</span></span>
<span id="cb377-2355"><a href="#cb377-2355" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2356"><a href="#cb377-2356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2357"><a href="#cb377-2357" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE, results='hide', include=FALSE, eval=FALSE}</span></span>
<span id="cb377-2358"><a href="#cb377-2358" aria-hidden="true" tabindex="-1"></a><span class="in"># Check patterns of missing data (optional: mice)</span></span>
<span id="cb377-2359"><a href="#cb377-2359" aria-hidden="true" tabindex="-1"></a><span class="in">md.pattern(visits_all)</span></span>
<span id="cb377-2360"><a href="#cb377-2360" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2361"><a href="#cb377-2361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2364"><a href="#cb377-2364" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-2365"><a href="#cb377-2365" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarise missing values across all columns</span></span>
<span id="cb377-2366"><a href="#cb377-2366" aria-hidden="true" tabindex="-1"></a>missing_summary <span class="ot">&lt;-</span> <span class="fu">colSums</span>(<span class="fu">is.na</span>(visits_all))</span>
<span id="cb377-2367"><a href="#cb377-2367" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(missing_summary[missing_summary <span class="sc">&gt;</span> <span class="dv">0</span>])</span>
<span id="cb377-2368"><a href="#cb377-2368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2369"><a href="#cb377-2369" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number of missing cells</span></span>
<span id="cb377-2370"><a href="#cb377-2370" aria-hidden="true" tabindex="-1"></a>total_missing <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(visits_all))</span>
<span id="cb377-2371"><a href="#cb377-2371" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Total missing values in dataset:"</span>, total_missing, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb377-2372"><a href="#cb377-2372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2373"><a href="#cb377-2373" aria-hidden="true" tabindex="-1"></a><span class="co"># Count of individuals with at least one missing value</span></span>
<span id="cb377-2374"><a href="#cb377-2374" aria-hidden="true" tabindex="-1"></a>n_missing_individuals <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">complete.cases</span>(visits_all))</span>
<span id="cb377-2375"><a href="#cb377-2375" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Number of individuals with at least one missing value:"</span>, n_missing_individuals, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb377-2376"><a href="#cb377-2376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2377"><a href="#cb377-2377" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort records by patient ID and visit number</span></span>
<span id="cb377-2378"><a href="#cb377-2378" aria-hidden="true" tabindex="-1"></a>visits_all <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb377-2379"><a href="#cb377-2379" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id_text, visit)</span>
<span id="cb377-2380"><a href="#cb377-2380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2381"><a href="#cb377-2381" aria-hidden="true" tabindex="-1"></a><span class="co"># View rows with any missing values</span></span>
<span id="cb377-2382"><a href="#cb377-2382" aria-hidden="true" tabindex="-1"></a>missing_rows <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb377-2383"><a href="#cb377-2383" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">complete.cases</span>(.))</span>
<span id="cb377-2384"><a href="#cb377-2384" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(missing_rows, <span class="at">n =</span> <span class="dv">12</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(id_text, race, income, passport)</span>
<span id="cb377-2385"><a href="#cb377-2385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2386"><a href="#cb377-2386" aria-hidden="true" tabindex="-1"></a><span class="co"># Impute passport with "UNKNOWN"</span></span>
<span id="cb377-2387"><a href="#cb377-2387" aria-hidden="true" tabindex="-1"></a>df_passport <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb377-2388"><a href="#cb377-2388" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">passport_imputed =</span> <span class="fu">replace_na</span>(passport, <span class="st">"UNKNOWN"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb377-2389"><a href="#cb377-2389" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(passport)) <span class="sc">%&gt;%</span></span>
<span id="cb377-2390"><a href="#cb377-2390" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, id_text, visit, passport, passport_imputed)</span>
<span id="cb377-2391"><a href="#cb377-2391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2392"><a href="#cb377-2392" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_passport, <span class="at">n =</span> <span class="dv">12</span>)</span>
<span id="cb377-2393"><a href="#cb377-2393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2394"><a href="#cb377-2394" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort records by patient ID and visit number (to prepare for forward/backward fill)</span></span>
<span id="cb377-2395"><a href="#cb377-2395" aria-hidden="true" tabindex="-1"></a>visits_all <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb377-2396"><a href="#cb377-2396" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id_text, visit)</span>
<span id="cb377-2397"><a href="#cb377-2397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2398"><a href="#cb377-2398" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview sorted data (tail)</span></span>
<span id="cb377-2399"><a href="#cb377-2399" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(visits_all <span class="sc">%&gt;%</span> <span class="fu">select</span>(id_text, visit, race, income), <span class="at">n =</span> <span class="dv">12</span>)</span>
<span id="cb377-2400"><a href="#cb377-2400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2401"><a href="#cb377-2401" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward fill missing race values within each patient (downward)</span></span>
<span id="cb377-2402"><a href="#cb377-2402" aria-hidden="true" tabindex="-1"></a>visits_all <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb377-2403"><a href="#cb377-2403" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_text) <span class="sc">%&gt;%</span></span>
<span id="cb377-2404"><a href="#cb377-2404" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race_forward =</span> race) <span class="sc">%&gt;%</span></span>
<span id="cb377-2405"><a href="#cb377-2405" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(race_forward, <span class="at">.direction =</span> <span class="st">"down"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-2406"><a href="#cb377-2406" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb377-2407"><a href="#cb377-2407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2408"><a href="#cb377-2408" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview forward-filled race values (head)</span></span>
<span id="cb377-2409"><a href="#cb377-2409" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(visits_all <span class="sc">%&gt;%</span> <span class="fu">select</span>(id_text, visit, race, race_forward), <span class="at">n =</span> <span class="dv">12</span>)</span>
<span id="cb377-2410"><a href="#cb377-2410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2411"><a href="#cb377-2411" aria-hidden="true" tabindex="-1"></a><span class="co"># Backward fill missing race values within each patient (upward)</span></span>
<span id="cb377-2412"><a href="#cb377-2412" aria-hidden="true" tabindex="-1"></a>visits_all <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb377-2413"><a href="#cb377-2413" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_text) <span class="sc">%&gt;%</span></span>
<span id="cb377-2414"><a href="#cb377-2414" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race_backward =</span> race) <span class="sc">%&gt;%</span></span>
<span id="cb377-2415"><a href="#cb377-2415" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(race_backward, <span class="at">.direction =</span> <span class="st">"up"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-2416"><a href="#cb377-2416" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb377-2417"><a href="#cb377-2417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2418"><a href="#cb377-2418" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview backward-filled race values (tail)</span></span>
<span id="cb377-2419"><a href="#cb377-2419" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(visits_all <span class="sc">%&gt;%</span> <span class="fu">select</span>(id_text, visit, race, race_backward), <span class="at">n =</span> <span class="dv">12</span>)</span>
<span id="cb377-2420"><a href="#cb377-2420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2421"><a href="#cb377-2421" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the global (overall) mean income</span></span>
<span id="cb377-2422"><a href="#cb377-2422" aria-hidden="true" tabindex="-1"></a>global_mean_income <span class="ot">&lt;-</span> <span class="fu">mean</span>(visits_all<span class="sc">$</span>income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb377-2423"><a href="#cb377-2423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2424"><a href="#cb377-2424" aria-hidden="true" tabindex="-1"></a><span class="co"># Use global mean to impute missing income values</span></span>
<span id="cb377-2425"><a href="#cb377-2425" aria-hidden="true" tabindex="-1"></a>visits_all <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb377-2426"><a href="#cb377-2426" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">income_global_mean =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(income), global_mean_income, income))</span>
<span id="cb377-2427"><a href="#cb377-2427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2428"><a href="#cb377-2428" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview global mean-imputed income (head)</span></span>
<span id="cb377-2429"><a href="#cb377-2429" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(visits_all <span class="sc">%&gt;%</span> <span class="fu">select</span>(id_text, visit, income, income_global_mean), <span class="at">n =</span> <span class="dv">12</span>)</span>
<span id="cb377-2430"><a href="#cb377-2430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2431"><a href="#cb377-2431" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate mean income per participant (id_text)</span></span>
<span id="cb377-2432"><a href="#cb377-2432" aria-hidden="true" tabindex="-1"></a>participant_mean_income <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb377-2433"><a href="#cb377-2433" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_text) <span class="sc">%&gt;%</span></span>
<span id="cb377-2434"><a href="#cb377-2434" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_income_id =</span> <span class="fu">mean</span>(income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb377-2435"><a href="#cb377-2435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2436"><a href="#cb377-2436" aria-hidden="true" tabindex="-1"></a><span class="co"># Use participant-level mean to impute missing income values</span></span>
<span id="cb377-2437"><a href="#cb377-2437" aria-hidden="true" tabindex="-1"></a>visits_all <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb377-2438"><a href="#cb377-2438" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(participant_mean_income, <span class="at">by =</span> <span class="st">"id_text"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-2439"><a href="#cb377-2439" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">income_participant_mean =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(income), mean_income_id, income))</span>
<span id="cb377-2440"><a href="#cb377-2440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2441"><a href="#cb377-2441" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview participant mean-imputed income (tail)</span></span>
<span id="cb377-2442"><a href="#cb377-2442" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(visits_all <span class="sc">%&gt;%</span> <span class="fu">select</span>(id_text, visit, income, income_participant_mean), <span class="at">n =</span> <span class="dv">12</span>)</span>
<span id="cb377-2443"><a href="#cb377-2443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2444"><a href="#cb377-2444" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiple imputation for fips, zip, healthcare_coverage, and income</span></span>
<span id="cb377-2445"><a href="#cb377-2445" aria-hidden="true" tabindex="-1"></a>patients_mice <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb377-2446"><a href="#cb377-2446" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_text, fips, zip, healthcare_coverage, income)</span>
<span id="cb377-2447"><a href="#cb377-2447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2448"><a href="#cb377-2448" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply mice</span></span>
<span id="cb377-2449"><a href="#cb377-2449" aria-hidden="true" tabindex="-1"></a>imputed <span class="ot">&lt;-</span> <span class="fu">mice</span>(patients_mice <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>id_text), <span class="at">method =</span> <span class="st">"pmm"</span>, <span class="at">m =</span> <span class="dv">1</span>, <span class="at">printFlag =</span> <span class="cn">FALSE</span>)</span>
<span id="cb377-2450"><a href="#cb377-2450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2451"><a href="#cb377-2451" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieve completed dataset</span></span>
<span id="cb377-2452"><a href="#cb377-2452" aria-hidden="true" tabindex="-1"></a>mice_result <span class="ot">&lt;-</span> <span class="fu">complete</span>(imputed)</span>
<span id="cb377-2453"><a href="#cb377-2453" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mice_result) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">colnames</span>(mice_result), <span class="st">"_imputed"</span>)</span>
<span id="cb377-2454"><a href="#cb377-2454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2455"><a href="#cb377-2455" aria-hidden="true" tabindex="-1"></a><span class="co"># Join ID and filter rows with original missing values</span></span>
<span id="cb377-2456"><a href="#cb377-2456" aria-hidden="true" tabindex="-1"></a>df_mice <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(patients_mice, mice_result) <span class="sc">%&gt;%</span></span>
<span id="cb377-2457"><a href="#cb377-2457" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(fips) <span class="sc">|</span> <span class="fu">is.na</span>(zip) <span class="sc">|</span> <span class="fu">is.na</span>(healthcare_coverage) <span class="sc">|</span> <span class="fu">is.na</span>(income)) <span class="sc">%&gt;%</span></span>
<span id="cb377-2458"><a href="#cb377-2458" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_text,</span>
<span id="cb377-2459"><a href="#cb377-2459" aria-hidden="true" tabindex="-1"></a>         fips, fips_imputed,</span>
<span id="cb377-2460"><a href="#cb377-2460" aria-hidden="true" tabindex="-1"></a>         zip, zip_imputed,</span>
<span id="cb377-2461"><a href="#cb377-2461" aria-hidden="true" tabindex="-1"></a>         healthcare_coverage, healthcare_coverage_imputed,</span>
<span id="cb377-2462"><a href="#cb377-2462" aria-hidden="true" tabindex="-1"></a>         income, income_imputed)</span>
<span id="cb377-2463"><a href="#cb377-2463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2464"><a href="#cb377-2464" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_mice, <span class="at">n =</span> <span class="dv">12</span>)</span>
<span id="cb377-2465"><a href="#cb377-2465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2466"><a href="#cb377-2466" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional: Inspect logged events from mice</span></span>
<span id="cb377-2467"><a href="#cb377-2467" aria-hidden="true" tabindex="-1"></a>imputed<span class="sc">$</span>loggedEvents</span>
<span id="cb377-2468"><a href="#cb377-2468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2469"><a href="#cb377-2469" aria-hidden="true" tabindex="-1"></a><span class="co"># Final summary: compare original and imputed values for rows with missingness</span></span>
<span id="cb377-2470"><a href="#cb377-2470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2471"><a href="#cb377-2471" aria-hidden="true" tabindex="-1"></a>final_impute_check <span class="ot">&lt;-</span> visits_all <span class="sc">%&gt;%</span></span>
<span id="cb377-2472"><a href="#cb377-2472" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(race) <span class="sc">|</span> <span class="fu">is.na</span>(income)) <span class="sc">%&gt;%</span></span>
<span id="cb377-2473"><a href="#cb377-2473" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_text, visit,</span>
<span id="cb377-2474"><a href="#cb377-2474" aria-hidden="true" tabindex="-1"></a>         race, race_forward, race_backward,</span>
<span id="cb377-2475"><a href="#cb377-2475" aria-hidden="true" tabindex="-1"></a>         income, income_global_mean, income_participant_mean)</span>
<span id="cb377-2476"><a href="#cb377-2476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2477"><a href="#cb377-2477" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview top 12</span></span>
<span id="cb377-2478"><a href="#cb377-2478" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(final_impute_check, <span class="at">n =</span> <span class="dv">12</span>)</span>
<span id="cb377-2479"><a href="#cb377-2479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2480"><a href="#cb377-2480" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview bottom 12</span></span>
<span id="cb377-2481"><a href="#cb377-2481" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(final_impute_check, <span class="at">n =</span> <span class="dv">12</span>)</span>
<span id="cb377-2482"><a href="#cb377-2482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2483"><a href="#cb377-2483" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up temporary objects </span></span>
<span id="cb377-2484"><a href="#cb377-2484" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>( participant_mean_income, final_impute_check, global_mean_income, df_passport, df_mice,</span>
<span id="cb377-2485"><a href="#cb377-2485" aria-hidden="true" tabindex="-1"></a>    patients_mice, imputed, mice_result, missing_summary, total_missing, n_missing_individuals, missing_rows</span>
<span id="cb377-2486"><a href="#cb377-2486" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb377-2487"><a href="#cb377-2487" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2488"><a href="#cb377-2488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2489"><a href="#cb377-2489" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2490"><a href="#cb377-2490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2491"><a href="#cb377-2491" aria-hidden="true" tabindex="-1"></a><span class="fu">## **üî¢ PART VI: Descriptive Statistics and Tabulation**</span></span>
<span id="cb377-2492"><a href="#cb377-2492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2493"><a href="#cb377-2493" aria-hidden="true" tabindex="-1"></a>In data analysis, summarising and tabulating variables is often the first step before conducting modelling or drawing conclusions. Descriptive statistics reveal the central tendency, variability, distribution shape, and frequency patterns in your dataset.</span>
<span id="cb377-2494"><a href="#cb377-2494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2495"><a href="#cb377-2495" aria-hidden="true" tabindex="-1"></a>This section provides an overview of the most commonly used R functions for summarising both numeric and categorical variables. These tools help detect outliers, missing data, or skewed distributions and are essential for generating publication-ready summary tables.</span>
<span id="cb377-2496"><a href="#cb377-2496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2497"><a href="#cb377-2497" aria-hidden="true" tabindex="-1"></a>üìö *Further are available via:*</span>
<span id="cb377-2498"><a href="#cb377-2498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2499"><a href="#cb377-2499" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>YouTube: <span class="co">[</span><span class="ot">AnalyticsHub</span><span class="co">](https://studio.youtube.com/video/5V7SPBH-8BE/edit)</span>\</span>
<span id="cb377-2500"><a href="#cb377-2500" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Github: <span class="co">[</span><span class="ot">Summary Tools Repository</span><span class="co">](https://github.com/HabtamuBizuayehu)</span></span>
<span id="cb377-2501"><a href="#cb377-2501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2502"><a href="#cb377-2502" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2503"><a href="#cb377-2503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2504"><a href="#cb377-2504" aria-hidden="true" tabindex="-1"></a>Some of the contents essential for this section are presented below.</span>
<span id="cb377-2505"><a href="#cb377-2505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2506"><a href="#cb377-2506" aria-hidden="true" tabindex="-1"></a>**Basic Summary Statistics**\</span>
<span id="cb377-2507"><a href="#cb377-2507" aria-hidden="true" tabindex="-1"></a>summary(), mean(), median(), min(), max(), sd(), var(), range(), quantile(), IQR()</span>
<span id="cb377-2508"><a href="#cb377-2508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2509"><a href="#cb377-2509" aria-hidden="true" tabindex="-1"></a>**Distribution Shape / Skewness**: skewness(), kurtosis() **Extended Descriptive Summaries**: describe() ,stat.desc(), skim() **Tabulation (Frequencies and Proportions)**\</span>
<span id="cb377-2510"><a href="#cb377-2510" aria-hidden="true" tabindex="-1"></a>table(), prop.table(), addmargins(), xtabs()</span>
<span id="cb377-2511"><a href="#cb377-2511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2512"><a href="#cb377-2512" aria-hidden="true" tabindex="-1"></a>**Tidy Summary and Tabulations**\</span>
<span id="cb377-2513"><a href="#cb377-2513" aria-hidden="true" tabindex="-1"></a>tabyl(), adorn_percentages(), adorn_totals() ‚Äì From janitor\</span>
<span id="cb377-2514"><a href="#cb377-2514" aria-hidden="true" tabindex="-1"></a>count(), group_by() + summarise() ‚Äì From dplyr\</span>
<span id="cb377-2515"><a href="#cb377-2515" aria-hidden="true" tabindex="-1"></a>pivot_wider(), pivot_longer() ‚Äì From tidyr</span>
<span id="cb377-2516"><a href="#cb377-2516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2517"><a href="#cb377-2517" aria-hidden="true" tabindex="-1"></a>**Cross Tabulations**: CrossTable() ‚Äì From gmodels</span>
<span id="cb377-2518"><a href="#cb377-2518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2519"><a href="#cb377-2519" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ 1. Basic Summary Statistics**</span></span>
<span id="cb377-2520"><a href="#cb377-2520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2521"><a href="#cb377-2521" aria-hidden="true" tabindex="-1"></a>These functions are useful for summarising continuous variables such as age, vaccine cost, or time intervals:</span>
<span id="cb377-2522"><a href="#cb377-2522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2523"><a href="#cb377-2523" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`summary()`</span> ‚Äì 5-number summary + mean\</span>
<span id="cb377-2524"><a href="#cb377-2524" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`mean()`</span>, <span class="in">`median()`</span> ‚Äì Measures of central tendency\</span>
<span id="cb377-2525"><a href="#cb377-2525" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`sd()`</span>, <span class="in">`var()`</span> ‚Äì Measures of spread\</span>
<span id="cb377-2526"><a href="#cb377-2526" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`min()`</span>, <span class="in">`max()`</span> ‚Äì Extremes\</span>
<span id="cb377-2527"><a href="#cb377-2527" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`range()`</span> ‚Äì Min and max in one\</span>
<span id="cb377-2528"><a href="#cb377-2528" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`quantile()`</span> ‚Äì Percentiles (e.g., 25th, 75th)</span>
<span id="cb377-2529"><a href="#cb377-2529" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`IQR()`</span> ‚Äì Interquartile range</span>
<span id="cb377-2530"><a href="#cb377-2530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2531"><a href="#cb377-2531" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE, message=FALSE, warning=FALSE}</span></span>
<span id="cb377-2532"><a href="#cb377-2532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2533"><a href="#cb377-2533" aria-hidden="true" tabindex="-1"></a><span class="in"># Recode marital status while leaving unknown values as missing</span></span>
<span id="cb377-2534"><a href="#cb377-2534" aria-hidden="true" tabindex="-1"></a><span class="in">vacc_1524 &lt;- vacc_1524 %&gt;%</span></span>
<span id="cb377-2535"><a href="#cb377-2535" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(marital_2group = case_when(</span></span>
<span id="cb377-2536"><a href="#cb377-2536" aria-hidden="true" tabindex="-1"></a><span class="in">    marital == "M" ~ "Partnered",</span></span>
<span id="cb377-2537"><a href="#cb377-2537" aria-hidden="true" tabindex="-1"></a><span class="in">    marital == "D" | marital == "S" | marital == "W" ~ "Not partnered",</span></span>
<span id="cb377-2538"><a href="#cb377-2538" aria-hidden="true" tabindex="-1"></a><span class="in">    TRUE ~ NA_character_  # Replaces unknown values with missing (NA)</span></span>
<span id="cb377-2539"><a href="#cb377-2539" aria-hidden="true" tabindex="-1"></a><span class="in">  ))</span></span>
<span id="cb377-2540"><a href="#cb377-2540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2541"><a href="#cb377-2541" aria-hidden="true" tabindex="-1"></a><span class="in"># Recode race status while leaving unknown values as missing</span></span>
<span id="cb377-2542"><a href="#cb377-2542" aria-hidden="true" tabindex="-1"></a><span class="in">vacc_1524 &lt;- vacc_1524 %&gt;%</span></span>
<span id="cb377-2543"><a href="#cb377-2543" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(race_grouped = case_when(</span></span>
<span id="cb377-2544"><a href="#cb377-2544" aria-hidden="true" tabindex="-1"></a><span class="in">    race == 'white' ~ "White",</span></span>
<span id="cb377-2545"><a href="#cb377-2545" aria-hidden="true" tabindex="-1"></a><span class="in">    race == "asian" ~ "Asian",</span></span>
<span id="cb377-2546"><a href="#cb377-2546" aria-hidden="true" tabindex="-1"></a><span class="in">    race == "native" | race == "other" ~ "Other",</span></span>
<span id="cb377-2547"><a href="#cb377-2547" aria-hidden="true" tabindex="-1"></a><span class="in">    TRUE ~ NA_character_</span></span>
<span id="cb377-2548"><a href="#cb377-2548" aria-hidden="true" tabindex="-1"></a><span class="in">  ))</span></span>
<span id="cb377-2549"><a href="#cb377-2549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2550"><a href="#cb377-2550" aria-hidden="true" tabindex="-1"></a><span class="in">vacc_1524$vacc_group3 &lt;- vacc_1524$vacc_group3 %&gt;%</span></span>
<span id="cb377-2551"><a href="#cb377-2551" aria-hidden="true" tabindex="-1"></a><span class="in">  fct_recode("Childhood" = "Childhood vaccines",</span></span>
<span id="cb377-2552"><a href="#cb377-2552" aria-hidden="true" tabindex="-1"></a><span class="in">             "Respiratory" = "Respiratory vaccines",</span></span>
<span id="cb377-2553"><a href="#cb377-2553" aria-hidden="true" tabindex="-1"></a><span class="in">             "Other" = "Other") %&gt;%</span></span>
<span id="cb377-2554"><a href="#cb377-2554" aria-hidden="true" tabindex="-1"></a><span class="in">  fct_relevel("Childhood", "Respiratory", "Other")</span></span>
<span id="cb377-2555"><a href="#cb377-2555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2556"><a href="#cb377-2556" aria-hidden="true" tabindex="-1"></a><span class="in">table(vacc_1524$vacc_group3)</span></span>
<span id="cb377-2557"><a href="#cb377-2557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2558"><a href="#cb377-2558" aria-hidden="true" tabindex="-1"></a><span class="in">library(forcats)</span></span>
<span id="cb377-2559"><a href="#cb377-2559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2560"><a href="#cb377-2560" aria-hidden="true" tabindex="-1"></a><span class="in">vacc_1524$gender &lt;- fct_recode(vacc_1524$gender,</span></span>
<span id="cb377-2561"><a href="#cb377-2561" aria-hidden="true" tabindex="-1"></a><span class="in">                               "Male" = "M",</span></span>
<span id="cb377-2562"><a href="#cb377-2562" aria-hidden="true" tabindex="-1"></a><span class="in">                               "Female" = "F")</span></span>
<span id="cb377-2563"><a href="#cb377-2563" aria-hidden="true" tabindex="-1"></a><span class="in">table(vacc_1524$gender)</span></span>
<span id="cb377-2564"><a href="#cb377-2564" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2565"><a href="#cb377-2565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2568"><a href="#cb377-2568" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-2569"><a href="#cb377-2569" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-2570"><a href="#cb377-2570" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic Summary Statistics Using Base R</span></span>
<span id="cb377-2571"><a href="#cb377-2571" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-2572"><a href="#cb377-2572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2573"><a href="#cb377-2573" aria-hidden="true" tabindex="-1"></a><span class="co"># Select key numeric variables</span></span>
<span id="cb377-2574"><a href="#cb377-2574" aria-hidden="true" tabindex="-1"></a>summary_vars <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span> </span>
<span id="cb377-2575"><a href="#cb377-2575" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, base_cost, healthcare_expenses)</span>
<span id="cb377-2576"><a href="#cb377-2576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2577"><a href="#cb377-2577" aria-hidden="true" tabindex="-1"></a><span class="co"># View summary() for a quick five-number summary + mean</span></span>
<span id="cb377-2578"><a href="#cb377-2578" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(summary_vars)</span>
<span id="cb377-2579"><a href="#cb377-2579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2580"><a href="#cb377-2580" aria-hidden="true" tabindex="-1"></a><span class="co"># Individual statistics for 'age'</span></span>
<span id="cb377-2581"><a href="#cb377-2581" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)             <span class="co"># Mean age</span></span>
<span id="cb377-2582"><a href="#cb377-2582" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)           <span class="co"># Median age</span></span>
<span id="cb377-2583"><a href="#cb377-2583" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)              <span class="co"># Minimum age</span></span>
<span id="cb377-2584"><a href="#cb377-2584" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)              <span class="co"># Maximum age</span></span>
<span id="cb377-2585"><a href="#cb377-2585" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)               <span class="co"># Standard deviation of age</span></span>
<span id="cb377-2586"><a href="#cb377-2586" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)              <span class="co"># Variance of age</span></span>
<span id="cb377-2587"><a href="#cb377-2587" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)            <span class="co"># Range: min and max</span></span>
<span id="cb377-2588"><a href="#cb377-2588" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(vacc_1524<span class="sc">$</span>age, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  <span class="co"># Quartiles</span></span>
<span id="cb377-2589"><a href="#cb377-2589" aria-hidden="true" tabindex="-1"></a><span class="fu">IQR</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)              <span class="co"># Interquartile range</span></span>
<span id="cb377-2590"><a href="#cb377-2590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2591"><a href="#cb377-2591" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-2592"><a href="#cb377-2592" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up temporary object</span></span>
<span id="cb377-2593"><a href="#cb377-2593" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-2594"><a href="#cb377-2594" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(summary_vars)</span>
<span id="cb377-2595"><a href="#cb377-2595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2596"><a href="#cb377-2596" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2597"><a href="#cb377-2597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2598"><a href="#cb377-2598" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ 2. Shape of Distribution (Skewness and Kurtosis)**</span></span>
<span id="cb377-2599"><a href="#cb377-2599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2600"><a href="#cb377-2600" aria-hidden="true" tabindex="-1"></a>These indicators describe the **shape** of a numeric variable‚Äôs distribution. They help identify when a variable is:</span>
<span id="cb377-2601"><a href="#cb377-2601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2602"><a href="#cb377-2602" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Skewed (not symmetric)</span>
<span id="cb377-2603"><a href="#cb377-2603" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Heavy-tailed (high kurtosis)</span>
<span id="cb377-2604"><a href="#cb377-2604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2605"><a href="#cb377-2605" aria-hidden="true" tabindex="-1"></a>**Distribution Shape: Skewness and Kurtosis**</span>
<span id="cb377-2606"><a href="#cb377-2606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2607"><a href="#cb377-2607" aria-hidden="true" tabindex="-1"></a>| Value Range | **Skewness** | **Kurtosis** (Excess) |</span>
<span id="cb377-2608"><a href="#cb377-2608" aria-hidden="true" tabindex="-1"></a>|------------------------|---------------------|---------------------------|</span>
<span id="cb377-2609"><a href="#cb377-2609" aria-hidden="true" tabindex="-1"></a>| ‚âà 0 | Symmetrical | Mesokurtic (normal-tailed) |</span>
<span id="cb377-2610"><a href="#cb377-2610" aria-hidden="true" tabindex="-1"></a>| ¬±0.5 | Approximately symmetrical | Slight deviation |</span>
<span id="cb377-2611"><a href="#cb377-2611" aria-hidden="true" tabindex="-1"></a>| ¬±0.5 ‚Äì ¬±1 | Moderate skew | Moderate peakedness or flatness |</span>
<span id="cb377-2612"><a href="#cb377-2612" aria-hidden="true" tabindex="-1"></a>| <span class="sc">\&gt;</span> ¬±1 | High skew (strong asymmetry) | Substantial deviation from normality |</span>
<span id="cb377-2613"><a href="#cb377-2613" aria-hidden="true" tabindex="-1"></a>| <span class="sc">\&gt;</span> 0 (kurtosis - 3 <span class="sc">\&gt;</span> 0) | ‚Äì | Leptokurtic (peaked, heavy tails) |</span>
<span id="cb377-2614"><a href="#cb377-2614" aria-hidden="true" tabindex="-1"></a>| <span class="sc">\&lt;</span> 0 (kurtosis - 3 <span class="sc">\&lt;</span> 0) | ‚Äì | Platykurtic (flat, light tails) |</span>
<span id="cb377-2615"><a href="#cb377-2615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2616"><a href="#cb377-2616" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE, results='hide'}</span></span>
<span id="cb377-2617"><a href="#cb377-2617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2618"><a href="#cb377-2618" aria-hidden="true" tabindex="-1"></a><span class="in"># Ensure the 'moments' package is installed</span></span>
<span id="cb377-2619"><a href="#cb377-2619" aria-hidden="true" tabindex="-1"></a><span class="in">if (!requireNamespace("moments", quietly = TRUE)) {install.packages("moments")}</span></span>
<span id="cb377-2620"><a href="#cb377-2620" aria-hidden="true" tabindex="-1"></a><span class="in">library(moments)</span></span>
<span id="cb377-2621"><a href="#cb377-2621" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2622"><a href="#cb377-2622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2625"><a href="#cb377-2625" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-2626"><a href="#cb377-2626" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate distribution shape statistics</span></span>
<span id="cb377-2627"><a href="#cb377-2627" aria-hidden="true" tabindex="-1"></a><span class="fu">skewness</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)     <span class="co"># Skewness: +ve = right-skewed, -ve = left-skewed</span></span>
<span id="cb377-2628"><a href="#cb377-2628" aria-hidden="true" tabindex="-1"></a><span class="fu">kurtosis</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)     <span class="co"># Kurtosis: &gt;3 = heavy tails, &lt;3 = flat distribution</span></span>
<span id="cb377-2629"><a href="#cb377-2629" aria-hidden="true" tabindex="-1"></a><span class="fu">kurtosis</span>(vacc_1524<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="dv">3</span>  <span class="co"># Excess kurtosis</span></span>
<span id="cb377-2630"><a href="#cb377-2630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2631"><a href="#cb377-2631" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-2632"><a href="#cb377-2632" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram to Visualize Distribution Shape</span></span>
<span id="cb377-2633"><a href="#cb377-2633" aria-hidden="true" tabindex="-1"></a><span class="co"># ....................................................</span></span>
<span id="cb377-2634"><a href="#cb377-2634" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(vacc_1524<span class="sc">$</span>age, </span>
<span id="cb377-2635"><a href="#cb377-2635" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Histogram of Age"</span>,</span>
<span id="cb377-2636"><a href="#cb377-2636" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Age (Years)"</span>, </span>
<span id="cb377-2637"><a href="#cb377-2637" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"#69b3a2"</span>, </span>
<span id="cb377-2638"><a href="#cb377-2638" aria-hidden="true" tabindex="-1"></a>     <span class="at">border =</span> <span class="st">"white"</span>)</span>
<span id="cb377-2639"><a href="#cb377-2639" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2640"><a href="#cb377-2640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2641"><a href="#cb377-2641" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2642"><a href="#cb377-2642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2643"><a href="#cb377-2643" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ 3. Extended Descriptive Summaries**</span></span>
<span id="cb377-2644"><a href="#cb377-2644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2645"><a href="#cb377-2645" aria-hidden="true" tabindex="-1"></a>To produce a comprehensive summary of all variables (especially helpful in surveys or health system datasets), use:</span>
<span id="cb377-2646"><a href="#cb377-2646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2647"><a href="#cb377-2647" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`describe()`</span> ‚Äì From <span class="in">`Hmisc`</span>: includes labels, missing %, and stats\</span>
<span id="cb377-2648"><a href="#cb377-2648" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`stat.desc()`</span> ‚Äì From <span class="in">`pastecs`</span>: full statistical description with skew/kurtosis\</span>
<span id="cb377-2649"><a href="#cb377-2649" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`skim()`</span> ‚Äì From <span class="in">`skimr`</span>: summary with inline histograms and types</span>
<span id="cb377-2650"><a href="#cb377-2650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2651"><a href="#cb377-2651" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2652"><a href="#cb377-2652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2653"><a href="#cb377-2653" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE, results='hide'}</span></span>
<span id="cb377-2654"><a href="#cb377-2654" aria-hidden="true" tabindex="-1"></a><span class="in"># Install required packages if missing</span></span>
<span id="cb377-2655"><a href="#cb377-2655" aria-hidden="true" tabindex="-1"></a><span class="in">packages &lt;- c("Hmisc", "pastecs", "skimr")</span></span>
<span id="cb377-2656"><a href="#cb377-2656" aria-hidden="true" tabindex="-1"></a><span class="in">for (p in packages) {if (!requireNamespace(p, quietly = TRUE)) install.packages(p)}</span></span>
<span id="cb377-2657"><a href="#cb377-2657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2658"><a href="#cb377-2658" aria-hidden="true" tabindex="-1"></a><span class="in"># Explicitly load the packages</span></span>
<span id="cb377-2659"><a href="#cb377-2659" aria-hidden="true" tabindex="-1"></a><span class="in">library(Hmisc)     # for describe()</span></span>
<span id="cb377-2660"><a href="#cb377-2660" aria-hidden="true" tabindex="-1"></a><span class="in">library(pastecs)   # for stat.desc()</span></span>
<span id="cb377-2661"><a href="#cb377-2661" aria-hidden="true" tabindex="-1"></a><span class="in">library(skimr)     # for skim()</span></span>
<span id="cb377-2662"><a href="#cb377-2662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2663"><a href="#cb377-2663" aria-hidden="true" tabindex="-1"></a><span class="in">rm (packages)</span></span>
<span id="cb377-2664"><a href="#cb377-2664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2665"><a href="#cb377-2665" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2666"><a href="#cb377-2666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2669"><a href="#cb377-2669" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-2670"><a href="#cb377-2670" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb377-2671"><a href="#cb377-2671" aria-hidden="true" tabindex="-1"></a><span class="co"># Extended Descriptive Summaries</span></span>
<span id="cb377-2672"><a href="#cb377-2672" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb377-2673"><a href="#cb377-2673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2674"><a href="#cb377-2674" aria-hidden="true" tabindex="-1"></a><span class="co"># Hmisc::describe() ‚Äì Detailed variable summary</span></span>
<span id="cb377-2675"><a href="#cb377-2675" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(vacc_1524[, <span class="fu">c</span>(<span class="st">"age"</span>, <span class="st">"gender"</span>, <span class="st">"race"</span>)])</span>
<span id="cb377-2676"><a href="#cb377-2676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2677"><a href="#cb377-2677" aria-hidden="true" tabindex="-1"></a><span class="co"># pastecs::stat.desc() ‚Äì Full statistics with skewness/kurtosis</span></span>
<span id="cb377-2678"><a href="#cb377-2678" aria-hidden="true" tabindex="-1"></a><span class="fu">stat.desc</span>(vacc_1524<span class="sc">$</span>age)</span>
<span id="cb377-2679"><a href="#cb377-2679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2680"><a href="#cb377-2680" aria-hidden="true" tabindex="-1"></a><span class="co"># skimr::skim() ‚Äì Tidy summary with histograms and data types</span></span>
<span id="cb377-2681"><a href="#cb377-2681" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(vacc_1524[, <span class="fu">c</span>(<span class="st">"age"</span>, <span class="st">"gender"</span>, <span class="st">"income"</span>)])</span>
<span id="cb377-2682"><a href="#cb377-2682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2683"><a href="#cb377-2683" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2684"><a href="#cb377-2684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2685"><a href="#cb377-2685" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ 4. Tabulation (Frequencies and Proportions)**</span></span>
<span id="cb377-2686"><a href="#cb377-2686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2687"><a href="#cb377-2687" aria-hidden="true" tabindex="-1"></a>Used for categorical variables like gender, race, or vaccine group:</span>
<span id="cb377-2688"><a href="#cb377-2688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2689"><a href="#cb377-2689" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`table()`</span> ‚Äì Basic frequency counts\</span>
<span id="cb377-2690"><a href="#cb377-2690" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`prop.table()`</span> ‚Äì Row/column proportions\</span>
<span id="cb377-2691"><a href="#cb377-2691" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`addmargins()`</span> ‚Äì Adds totals to tables\</span>
<span id="cb377-2692"><a href="#cb377-2692" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`xtabs()`</span> ‚Äì Cross-tabulation formula interface</span>
<span id="cb377-2693"><a href="#cb377-2693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2694"><a href="#cb377-2694" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2695"><a href="#cb377-2695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2698"><a href="#cb377-2698" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-2699"><a href="#cb377-2699" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------------------------------------</span></span>
<span id="cb377-2700"><a href="#cb377-2700" aria-hidden="true" tabindex="-1"></a><span class="co"># üîπ Categorical Variable Summary </span></span>
<span id="cb377-2701"><a href="#cb377-2701" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------------------------------------</span></span>
<span id="cb377-2702"><a href="#cb377-2702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2703"><a href="#cb377-2703" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic frequency counts for individual vaccine types</span></span>
<span id="cb377-2704"><a href="#cb377-2704" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(vacc_1524<span class="sc">$</span>vaccine_group)</span>
<span id="cb377-2705"><a href="#cb377-2705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2706"><a href="#cb377-2706" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency counts for grouped vaccine categories</span></span>
<span id="cb377-2707"><a href="#cb377-2707" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(vacc_1524<span class="sc">$</span>vacc_group3)</span>
<span id="cb377-2708"><a href="#cb377-2708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2709"><a href="#cb377-2709" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportion of grouped vaccine categories</span></span>
<span id="cb377-2710"><a href="#cb377-2710" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(vacc_1524<span class="sc">$</span>vacc_group3))  <span class="co"># Overall proportions</span></span>
<span id="cb377-2711"><a href="#cb377-2711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2712"><a href="#cb377-2712" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table with row/column totals added</span></span>
<span id="cb377-2713"><a href="#cb377-2713" aria-hidden="true" tabindex="-1"></a><span class="fu">addmargins</span>(<span class="fu">table</span>(vacc_1524<span class="sc">$</span>vacc_group3))</span>
<span id="cb377-2714"><a href="#cb377-2714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2715"><a href="#cb377-2715" aria-hidden="true" tabindex="-1"></a><span class="co"># Cross-tabulation between vaccine group and gender</span></span>
<span id="cb377-2716"><a href="#cb377-2716" aria-hidden="true" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> vacc_group3 <span class="sc">+</span> gender, <span class="at">data =</span> vacc_1524)</span>
<span id="cb377-2717"><a href="#cb377-2717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2718"><a href="#cb377-2718" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2719"><a href="#cb377-2719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2720"><a href="#cb377-2720" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ 5. Tidy Summary and Tabulations**</span></span>
<span id="cb377-2721"><a href="#cb377-2721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2722"><a href="#cb377-2722" aria-hidden="true" tabindex="-1"></a>Modern workflows prefer tidy-format summaries using:</span>
<span id="cb377-2723"><a href="#cb377-2723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2724"><a href="#cb377-2724" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`tabyl()`</span> ‚Äì From <span class="in">`janitor`</span>: clean frequency tables\</span>
<span id="cb377-2725"><a href="#cb377-2725" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`adorn_totals()`</span>, <span class="in">`adorn_percentages()`</span> ‚Äì Add percentages and totals\</span>
<span id="cb377-2726"><a href="#cb377-2726" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`count()`</span> ‚Äì From <span class="in">`dplyr`</span>: group-level counts\</span>
<span id="cb377-2727"><a href="#cb377-2727" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`group_by()`</span> + <span class="in">`summarise()`</span> ‚Äì Group-wise summary</span>
<span id="cb377-2728"><a href="#cb377-2728" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`pivot_wider()`</span>, <span class="in">`pivot_longer()`</span> ‚Äì Reshape tables</span>
<span id="cb377-2729"><a href="#cb377-2729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2730"><a href="#cb377-2730" aria-hidden="true" tabindex="-1"></a>The section below demonstrates tabulations using <span class="in">`janitor::tabyl()`</span> and tidyverse functions for grouped summaries and table reshaping.</span>
<span id="cb377-2731"><a href="#cb377-2731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2734"><a href="#cb377-2734" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-2735"><a href="#cb377-2735" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------------------------------------</span></span>
<span id="cb377-2736"><a href="#cb377-2736" aria-hidden="true" tabindex="-1"></a><span class="co"># üîπ Tabulation and Table Reshaping </span></span>
<span id="cb377-2737"><a href="#cb377-2737" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------------------------------------</span></span>
<span id="cb377-2738"><a href="#cb377-2738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2739"><a href="#cb377-2739" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Basic clean frequency table with janitor::tabyl()</span></span>
<span id="cb377-2740"><a href="#cb377-2740" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-2741"><a href="#cb377-2741" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(vacc_group3)</span>
<span id="cb377-2742"><a href="#cb377-2742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2743"><a href="#cb377-2743" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Add column percentages and total row</span></span>
<span id="cb377-2744"><a href="#cb377-2744" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-2745"><a href="#cb377-2745" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(vacc_group3, gender) <span class="sc">%&gt;%</span></span>
<span id="cb377-2746"><a href="#cb377-2746" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"col"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-2747"><a href="#cb377-2747" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">"row"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-2748"><a href="#cb377-2748" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)  <span class="co"># Cleaner column names</span></span>
<span id="cb377-2749"><a href="#cb377-2749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2750"><a href="#cb377-2750" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Group-level count using dplyr::count()</span></span>
<span id="cb377-2751"><a href="#cb377-2751" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-2752"><a href="#cb377-2752" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_group3, gender)</span>
<span id="cb377-2753"><a href="#cb377-2753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2754"><a href="#cb377-2754" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Group-wise summary using group_by + summarise</span></span>
<span id="cb377-2755"><a href="#cb377-2755" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-2756"><a href="#cb377-2756" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb377-2757"><a href="#cb377-2757" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-2758"><a href="#cb377-2758" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span>
<span id="cb377-2759"><a href="#cb377-2759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2760"><a href="#cb377-2760" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Pivot table to wide format (e.g., for display or reporting)</span></span>
<span id="cb377-2761"><a href="#cb377-2761" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-2762"><a href="#cb377-2762" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_group3, gender) <span class="sc">%&gt;%</span></span>
<span id="cb377-2763"><a href="#cb377-2763" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> gender, <span class="at">values_from =</span> n, <span class="at">values_fill =</span> <span class="dv">0</span>)</span>
<span id="cb377-2764"><a href="#cb377-2764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2765"><a href="#cb377-2765" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Optional: Pivot longer to return to tidy format</span></span>
<span id="cb377-2766"><a href="#cb377-2766" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-2767"><a href="#cb377-2767" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_group3, gender) <span class="sc">%&gt;%</span></span>
<span id="cb377-2768"><a href="#cb377-2768" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> gender, <span class="at">values_from =</span> n, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-2769"><a href="#cb377-2769" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>vacc_group3, <span class="at">names_to =</span> <span class="st">"gender"</span>, <span class="at">values_to =</span> <span class="st">"count"</span>)</span>
<span id="cb377-2770"><a href="#cb377-2770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2771"><a href="#cb377-2771" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2772"><a href="#cb377-2772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2773"><a href="#cb377-2773" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ 6. Cross Tabulations**</span></span>
<span id="cb377-2774"><a href="#cb377-2774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2775"><a href="#cb377-2775" aria-hidden="true" tabindex="-1"></a>Used to explore the relationship between two or more categorical variables.</span>
<span id="cb377-2776"><a href="#cb377-2776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2777"><a href="#cb377-2777" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`CrossTable()`</span> ‚Äì From <span class="in">`gmodels`</span>: produces detailed cross-tabs with row %, column %, and counts</span>
<span id="cb377-2778"><a href="#cb377-2778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2779"><a href="#cb377-2779" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE, results='hide'}</span></span>
<span id="cb377-2780"><a href="#cb377-2780" aria-hidden="true" tabindex="-1"></a><span class="in"># Install and load the gmodels package for cross-tabulation</span></span>
<span id="cb377-2781"><a href="#cb377-2781" aria-hidden="true" tabindex="-1"></a><span class="in">if (!requireNamespace("gmodels", quietly = TRUE)) {</span></span>
<span id="cb377-2782"><a href="#cb377-2782" aria-hidden="true" tabindex="-1"></a><span class="in">  install.packages("gmodels")</span></span>
<span id="cb377-2783"><a href="#cb377-2783" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb377-2784"><a href="#cb377-2784" aria-hidden="true" tabindex="-1"></a><span class="in">library(gmodels)</span></span>
<span id="cb377-2785"><a href="#cb377-2785" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2786"><a href="#cb377-2786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2789"><a href="#cb377-2789" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-2790"><a href="#cb377-2790" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb377-2791"><a href="#cb377-2791" aria-hidden="true" tabindex="-1"></a><span class="co"># Cross Tabulation Example</span></span>
<span id="cb377-2792"><a href="#cb377-2792" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb377-2793"><a href="#cb377-2793" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2794"><a href="#cb377-2794" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate a contingency table between gender and vaccine group</span></span>
<span id="cb377-2795"><a href="#cb377-2795" aria-hidden="true" tabindex="-1"></a><span class="fu">CrossTable</span>(vacc_1524<span class="sc">$</span>vacc_group3, vacc_1524<span class="sc">$</span>gender,</span>
<span id="cb377-2796"><a href="#cb377-2796" aria-hidden="true" tabindex="-1"></a>           <span class="at">prop.r =</span> <span class="cn">FALSE</span>,     <span class="co"># Row proportions</span></span>
<span id="cb377-2797"><a href="#cb377-2797" aria-hidden="true" tabindex="-1"></a>           <span class="at">prop.c =</span> <span class="cn">TRUE</span>,     <span class="co"># Column proportions</span></span>
<span id="cb377-2798"><a href="#cb377-2798" aria-hidden="true" tabindex="-1"></a>           <span class="at">prop.t =</span> <span class="cn">FALSE</span>,    <span class="co"># Overall proportion (optional)</span></span>
<span id="cb377-2799"><a href="#cb377-2799" aria-hidden="true" tabindex="-1"></a>           <span class="at">chisq =</span> <span class="cn">TRUE</span>)      <span class="co"># Include chi-square test for independence</span></span>
<span id="cb377-2800"><a href="#cb377-2800" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2801"><a href="#cb377-2801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2802"><a href="#cb377-2802" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2803"><a href="#cb377-2803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2804"><a href="#cb377-2804" aria-hidden="true" tabindex="-1"></a>**üîπ Summary Table: Descriptive Statistics and Tabulation Functions**</span>
<span id="cb377-2805"><a href="#cb377-2805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2806"><a href="#cb377-2806" aria-hidden="true" tabindex="-1"></a>| **Task** | **Function** | **Package** |</span>
<span id="cb377-2807"><a href="#cb377-2807" aria-hidden="true" tabindex="-1"></a>|------------------------|------------------------|------------------------|</span>
<span id="cb377-2808"><a href="#cb377-2808" aria-hidden="true" tabindex="-1"></a>| Basic numeric summaries | <span class="in">`summary()`</span>, <span class="in">`mean()`</span>, <span class="in">`sd()`</span>, <span class="in">`IQR()`</span> | base |</span>
<span id="cb377-2809"><a href="#cb377-2809" aria-hidden="true" tabindex="-1"></a>| Percentiles and range | <span class="in">`quantile()`</span>, <span class="in">`range()`</span> | base |</span>
<span id="cb377-2810"><a href="#cb377-2810" aria-hidden="true" tabindex="-1"></a>| Skewness / Kurtosis | <span class="in">`skewness()`</span>, <span class="in">`kurtosis()`</span> | e1071, moments |</span>
<span id="cb377-2811"><a href="#cb377-2811" aria-hidden="true" tabindex="-1"></a>| Extended profiling | <span class="in">`describe()`</span>, <span class="in">`stat.desc()`</span>, <span class="in">`skim()`</span> | Hmisc, pastecs, skimr |</span>
<span id="cb377-2812"><a href="#cb377-2812" aria-hidden="true" tabindex="-1"></a>| Frequency tables | <span class="in">`table()`</span>, <span class="in">`xtabs()`</span>, <span class="in">`prop.table()`</span> | base |</span>
<span id="cb377-2813"><a href="#cb377-2813" aria-hidden="true" tabindex="-1"></a>| Clean tables (tidy) | <span class="in">`tabyl()`</span>, <span class="in">`adorn_*()`</span>, <span class="in">`count()`</span> | janitor, dplyr |</span>
<span id="cb377-2814"><a href="#cb377-2814" aria-hidden="true" tabindex="-1"></a>| Group summaries | <span class="in">`group_by()`</span> + <span class="in">`summarise()`</span> | dplyr |</span>
<span id="cb377-2815"><a href="#cb377-2815" aria-hidden="true" tabindex="-1"></a>| Reshape for tables | <span class="in">`pivot_wider()`</span>, <span class="in">`pivot_longer()`</span> | tidyr |</span>
<span id="cb377-2816"><a href="#cb377-2816" aria-hidden="true" tabindex="-1"></a>| Rich cross-tabulation | <span class="in">`CrossTable()`</span> | gmodels |</span>
<span id="cb377-2817"><a href="#cb377-2817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2818"><a href="#cb377-2818" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2819"><a href="#cb377-2819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2820"><a href="#cb377-2820" aria-hidden="true" tabindex="-1"></a><span class="fu">### **7.2 Saving and Writing Data**</span></span>
<span id="cb377-2821"><a href="#cb377-2821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2822"><a href="#cb377-2822" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`write.csv()`</span>, <span class="in">`write_xlsx()`</span>, <span class="in">`saveRDS()`</span>, <span class="in">`write_tsv()`</span></span>
<span id="cb377-2823"><a href="#cb377-2823" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Exporting interactive tables with <span class="in">`DT::datatable()`</span></span>
<span id="cb377-2824"><a href="#cb377-2824" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Saving and loading the entire R workspace (save.image(), load())</span>
<span id="cb377-2825"><a href="#cb377-2825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2826"><a href="#cb377-2826" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2827"><a href="#cb377-2827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2828"><a href="#cb377-2828" aria-hidden="true" tabindex="-1"></a><span class="fu">## **PART VII: DATA VISUALIZATION WITH `ggplot2`**</span></span>
<span id="cb377-2829"><a href="#cb377-2829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2830"><a href="#cb377-2830" aria-hidden="true" tabindex="-1"></a>**Visualization Contents and Types Overview**</span>
<span id="cb377-2831"><a href="#cb377-2831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2832"><a href="#cb377-2832" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Layers**: Theme, Coordinates, Facets, Statistics, Geometries, Aesthetics, Data</span>
<span id="cb377-2833"><a href="#cb377-2833" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Chart Types**: line, histogram, boxplot, bar, area, density, violin, dotplot, ECDF, scatter, bubble, QQ plot</span>
<span id="cb377-2834"><a href="#cb377-2834" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Comparative &amp; Multivariate**: faceted plot, pair plot, heatmap, treemap, radar chart, ridgeline plot, forest plot</span>
<span id="cb377-2835"><a href="#cb377-2835" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Geospatial Visualization**: choropleth map, point map, heatmap overlay</span>
<span id="cb377-2836"><a href="#cb377-2836" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Statistical Overlays**: error bars, confidence intervals, regression lines, smoothers</span>
<span id="cb377-2837"><a href="#cb377-2837" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Interactive Visualization**: scatter/line/bar (Plotly), interactive tables (DT), interactive maps (Leaflet), dashboards (Shiny, flexdashboard)</span>
<span id="cb377-2838"><a href="#cb377-2838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2839"><a href="#cb377-2839" aria-hidden="true" tabindex="-1"></a>Effective visualizations help uncover patterns, trends, and insights in data. In R, we commonly use the <span class="in">`ggplot2`</span> package for static plots and tools like <span class="in">`plotly`</span>, <span class="in">`DT`</span>, and <span class="in">`leaflet`</span> for interactive dashboards and graphics.</span>
<span id="cb377-2840"><a href="#cb377-2840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2841"><a href="#cb377-2841" aria-hidden="true" tabindex="-1"></a>The sections below summarize different types of visualizations and how they fit into analysis workflows.</span>
<span id="cb377-2842"><a href="#cb377-2842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2843"><a href="#cb377-2843" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2844"><a href="#cb377-2844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2845"><a href="#cb377-2845" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ Visualization Layer Components**</span></span>
<span id="cb377-2846"><a href="#cb377-2846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2847"><a href="#cb377-2847" aria-hidden="true" tabindex="-1"></a>Every ggplot chart is built using multiple composable layers: - **Data**: The dataset to visualize. - **Aesthetics (`aes()`)**: Mappings between variables and visual elements (e.g., x, y, color). - **Geometries (`geom_*`)**: Plot types (e.g., `geom_line()`, `geom_bar()`). - **Statistics (`stat_*`)**: Summaries or transformations (e.g., `stat_smooth()`). - **Facets**: Create multiple plots by group (`facet_wrap()`, `facet_grid()`). - **Coordinates**: Set axis and aspect ratio (`coord_cartesian()`, `coord_flip()`). - **Themes**: Control overall appearance (e.g., <span class="in">`theme_minimal()`</span>, <span class="in">`theme_bw()`</span>).</span>
<span id="cb377-2848"><a href="#cb377-2848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2849"><a href="#cb377-2849" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ Common Chart Types**</span></span>
<span id="cb377-2850"><a href="#cb377-2850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2851"><a href="#cb377-2851" aria-hidden="true" tabindex="-1"></a>| **Chart Type** | **Function** | **Used For** |</span>
<span id="cb377-2852"><a href="#cb377-2852" aria-hidden="true" tabindex="-1"></a>|------------------|------------------------|------------------------------|</span>
<span id="cb377-2853"><a href="#cb377-2853" aria-hidden="true" tabindex="-1"></a>| Line Chart | <span class="in">`geom_line()`</span> | Trends over time |</span>
<span id="cb377-2854"><a href="#cb377-2854" aria-hidden="true" tabindex="-1"></a>| Histogram | <span class="in">`geom_histogram()`</span> | Distribution of continuous variables |</span>
<span id="cb377-2855"><a href="#cb377-2855" aria-hidden="true" tabindex="-1"></a>| Boxplot | <span class="in">`geom_boxplot()`</span> | Distribution &amp; outliers |</span>
<span id="cb377-2856"><a href="#cb377-2856" aria-hidden="true" tabindex="-1"></a>| Bar Plot | <span class="in">`geom_bar()`</span> | Counts or categorical comparison |</span>
<span id="cb377-2857"><a href="#cb377-2857" aria-hidden="true" tabindex="-1"></a>| Area Plot | <span class="in">`geom_area()`</span> | Cumulative trends |</span>
<span id="cb377-2858"><a href="#cb377-2858" aria-hidden="true" tabindex="-1"></a>| Density Plot | <span class="in">`geom_density()`</span> | Smoothed distribution |</span>
<span id="cb377-2859"><a href="#cb377-2859" aria-hidden="true" tabindex="-1"></a>| Violin Plot | <span class="in">`geom_violin()`</span> | Combination of boxplot + density |</span>
<span id="cb377-2860"><a href="#cb377-2860" aria-hidden="true" tabindex="-1"></a>| Dot Plot | <span class="in">`geom_dotplot()`</span> | Count-based plots |</span>
<span id="cb377-2861"><a href="#cb377-2861" aria-hidden="true" tabindex="-1"></a>| ECDF Plot | <span class="in">`stat_ecdf()`</span> | Cumulative distribution |</span>
<span id="cb377-2862"><a href="#cb377-2862" aria-hidden="true" tabindex="-1"></a>| Scatter Plot | <span class="in">`geom_point()`</span> | Bivariate relationships |</span>
<span id="cb377-2863"><a href="#cb377-2863" aria-hidden="true" tabindex="-1"></a>| Bubble Plot | <span class="in">`geom_point(aes(size = ...))`</span> | 3-variable comparison using size |</span>
<span id="cb377-2864"><a href="#cb377-2864" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2865"><a href="#cb377-2865" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2866"><a href="#cb377-2866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2867"><a href="#cb377-2867" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ Comparative &amp; Multivariate Visuals**</span></span>
<span id="cb377-2868"><a href="#cb377-2868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2869"><a href="#cb377-2869" aria-hidden="true" tabindex="-1"></a>| **Visual Type** | **Purpose** |</span>
<span id="cb377-2870"><a href="#cb377-2870" aria-hidden="true" tabindex="-1"></a>|------------------------------------|------------------------------------|</span>
<span id="cb377-2871"><a href="#cb377-2871" aria-hidden="true" tabindex="-1"></a>| **Faceted Plot** (<span class="in">`facet_wrap`</span>) | Compare subgroups in separate panels |</span>
<span id="cb377-2872"><a href="#cb377-2872" aria-hidden="true" tabindex="-1"></a>| **Pair Plot** (<span class="in">`GGally::ggpairs`</span>) | Explore all pairwise relationships |</span>
<span id="cb377-2873"><a href="#cb377-2873" aria-hidden="true" tabindex="-1"></a>| **Heatmap** (<span class="in">`geom_tile`</span>, <span class="in">`heatmap()`</span>) | Show intensity using color |</span>
<span id="cb377-2874"><a href="#cb377-2874" aria-hidden="true" tabindex="-1"></a>| **Treemap** (<span class="in">`treemapify`</span>) | Hierarchical categories and values |</span>
<span id="cb377-2875"><a href="#cb377-2875" aria-hidden="true" tabindex="-1"></a>| **Radar Chart** (<span class="in">`fmsb`</span>) | Compare multivariate profiles |</span>
<span id="cb377-2876"><a href="#cb377-2876" aria-hidden="true" tabindex="-1"></a>| **Ridgeline Plot** (<span class="in">`ggridges`</span>) | Distribution comparison across groups |</span>
<span id="cb377-2877"><a href="#cb377-2877" aria-hidden="true" tabindex="-1"></a>| **Forest Plot** (<span class="in">`forestplot`</span>, <span class="in">`ggforestplot`</span>) | Confidence intervals and effect sizes |</span>
<span id="cb377-2878"><a href="#cb377-2878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2879"><a href="#cb377-2879" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2880"><a href="#cb377-2880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2881"><a href="#cb377-2881" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ Geospatial Visualizations**</span></span>
<span id="cb377-2882"><a href="#cb377-2882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2883"><a href="#cb377-2883" aria-hidden="true" tabindex="-1"></a>| **Map Type** | **Function/Use** |</span>
<span id="cb377-2884"><a href="#cb377-2884" aria-hidden="true" tabindex="-1"></a>|-----------------------|-------------------------------------------------|</span>
<span id="cb377-2885"><a href="#cb377-2885" aria-hidden="true" tabindex="-1"></a>| Choropleth Map | Show values by region (e.g., <span class="in">`geom_sf()`</span>, <span class="in">`tmap`</span>) |</span>
<span id="cb377-2886"><a href="#cb377-2886" aria-hidden="true" tabindex="-1"></a>| Point Map | Locations with coordinates (e.g., <span class="in">`geom_point()`</span>, <span class="in">`leaflet::addMarkers`</span>) |</span>
<span id="cb377-2887"><a href="#cb377-2887" aria-hidden="true" tabindex="-1"></a>| Heatmap Overlay | Density of spatial events (e.g., <span class="in">`leaflet::addHeatmap()`</span>) |</span>
<span id="cb377-2888"><a href="#cb377-2888" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2889"><a href="#cb377-2889" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2890"><a href="#cb377-2890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2891"><a href="#cb377-2891" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ Statistical Enhancements (Overlays)**</span></span>
<span id="cb377-2892"><a href="#cb377-2892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2893"><a href="#cb377-2893" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Error bars**: <span class="in">`geom_errorbar()`</span> for confidence or SD intervals</span>
<span id="cb377-2894"><a href="#cb377-2894" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Regression lines**: <span class="in">`geom_smooth(method = "lm")`</span></span>
<span id="cb377-2895"><a href="#cb377-2895" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Trend smoothing**: <span class="in">`geom_smooth()`</span> with <span class="in">`method = "loess"`</span></span>
<span id="cb377-2896"><a href="#cb377-2896" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Labeling**: <span class="in">`geom_text()`</span>, <span class="in">`geom_label()`</span> to annotate plots</span>
<span id="cb377-2897"><a href="#cb377-2897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2898"><a href="#cb377-2898" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2899"><a href="#cb377-2899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2900"><a href="#cb377-2900" aria-hidden="true" tabindex="-1"></a>This section demonstrates how to visualize breast cancer screening and vaccination data. We'll walk through common chart types such as line plots, bar charts, boxplots, and faceted views. Each example is designed with annotations and descriptions to aid understanding.</span>
<span id="cb377-2901"><a href="#cb377-2901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2902"><a href="#cb377-2902" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-2903"><a href="#cb377-2903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2904"><a href="#cb377-2904" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ Visualization Layer Components with Examples**</span></span>
<span id="cb377-2905"><a href="#cb377-2905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2906"><a href="#cb377-2906" aria-hidden="true" tabindex="-1"></a>Each chart demonstrates how different <span class="in">`ggplot2`</span> components come together using real health datasets.</span>
<span id="cb377-2907"><a href="#cb377-2907" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2908"><a href="#cb377-2908" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, message=FALSE, warning=FALSE, results='hide'}</span></span>
<span id="cb377-2909"><a href="#cb377-2909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2910"><a href="#cb377-2910" aria-hidden="true" tabindex="-1"></a><span class="in"># Install if not already installed</span></span>
<span id="cb377-2911"><a href="#cb377-2911" aria-hidden="true" tabindex="-1"></a><span class="in">if (!requireNamespace("treemapify", quietly = TRUE)) {install.packages("treemapify")}</span></span>
<span id="cb377-2912"><a href="#cb377-2912" aria-hidden="true" tabindex="-1"></a><span class="in">if (!requireNamespace("ggridges", quietly = TRUE)) {install.packages("ggridges")}</span></span>
<span id="cb377-2913"><a href="#cb377-2913" aria-hidden="true" tabindex="-1"></a><span class="in">if (!requireNamespace("gganimate", quietly = TRUE)) install.packages("gganimate")</span></span>
<span id="cb377-2914"><a href="#cb377-2914" aria-hidden="true" tabindex="-1"></a><span class="in">if (!requireNamespace("gifski", quietly = TRUE)) install.packages("gifski")</span></span>
<span id="cb377-2915"><a href="#cb377-2915" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2916"><a href="#cb377-2916" aria-hidden="true" tabindex="-1"></a><span class="in">library(gganimate)</span></span>
<span id="cb377-2917"><a href="#cb377-2917" aria-hidden="true" tabindex="-1"></a><span class="in">library(gifski)</span></span>
<span id="cb377-2918"><a href="#cb377-2918" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggridges)</span></span>
<span id="cb377-2919"><a href="#cb377-2919" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb377-2920"><a href="#cb377-2920" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggplot2)</span></span>
<span id="cb377-2921"><a href="#cb377-2921" aria-hidden="true" tabindex="-1"></a><span class="in">library(plotly)</span></span>
<span id="cb377-2922"><a href="#cb377-2922" aria-hidden="true" tabindex="-1"></a><span class="in">library(treemapify)</span></span>
<span id="cb377-2923"><a href="#cb377-2923" aria-hidden="true" tabindex="-1"></a><span class="in">library(stringr)  # for str_to_title()</span></span>
<span id="cb377-2924"><a href="#cb377-2924" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyr)</span></span>
<span id="cb377-2925"><a href="#cb377-2925" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2926"><a href="#cb377-2926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2927"><a href="#cb377-2927" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb377-2928"><a href="#cb377-2928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2929"><a href="#cb377-2929" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate Age as of 31 December 2024</span></span>
<span id="cb377-2930"><a href="#cb377-2930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2931"><a href="#cb377-2931" aria-hidden="true" tabindex="-1"></a><span class="in">library(lubridate)</span></span>
<span id="cb377-2932"><a href="#cb377-2932" aria-hidden="true" tabindex="-1"></a><span class="in">str(vacc_1524$birthdate) </span></span>
<span id="cb377-2933"><a href="#cb377-2933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2934"><a href="#cb377-2934" aria-hidden="true" tabindex="-1"></a><span class="in">vacc_1524 &lt;- vacc_1524 %&gt;%</span></span>
<span id="cb377-2935"><a href="#cb377-2935" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb377-2936"><a href="#cb377-2936" aria-hidden="true" tabindex="-1"></a><span class="in">    age = floor(time_length(difftime(as.Date("2024-12-31"), birthdate), unit = "years"))</span></span>
<span id="cb377-2937"><a href="#cb377-2937" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-2938"><a href="#cb377-2938" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2939"><a href="#cb377-2939" aria-hidden="true" tabindex="-1"></a><span class="in">table (vacc_1524$age)</span></span>
<span id="cb377-2940"><a href="#cb377-2940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2941"><a href="#cb377-2941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2942"><a href="#cb377-2942" aria-hidden="true" tabindex="-1"></a><span class="in"># Categorize into Age Groups</span></span>
<span id="cb377-2943"><a href="#cb377-2943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2944"><a href="#cb377-2944" aria-hidden="true" tabindex="-1"></a><span class="in">vacc_1524 &lt;- vacc_1524 %&gt;%</span></span>
<span id="cb377-2945"><a href="#cb377-2945" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb377-2946"><a href="#cb377-2946" aria-hidden="true" tabindex="-1"></a><span class="in">    age_group = cut(</span></span>
<span id="cb377-2947"><a href="#cb377-2947" aria-hidden="true" tabindex="-1"></a><span class="in">      age,</span></span>
<span id="cb377-2948"><a href="#cb377-2948" aria-hidden="true" tabindex="-1"></a><span class="in">      breaks = c(0, 9, 19, 29, 49, 100),</span></span>
<span id="cb377-2949"><a href="#cb377-2949" aria-hidden="true" tabindex="-1"></a><span class="in">      labels = c("0‚Äì9", "10‚Äì19", "20‚Äì29", "30‚Äì49", "50+"),</span></span>
<span id="cb377-2950"><a href="#cb377-2950" aria-hidden="true" tabindex="-1"></a><span class="in">      right = TRUE</span></span>
<span id="cb377-2951"><a href="#cb377-2951" aria-hidden="true" tabindex="-1"></a><span class="in">    )</span></span>
<span id="cb377-2952"><a href="#cb377-2952" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-2953"><a href="#cb377-2953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2954"><a href="#cb377-2954" aria-hidden="true" tabindex="-1"></a><span class="in">table (vacc_1524$age_group)</span></span>
<span id="cb377-2955"><a href="#cb377-2955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2956"><a href="#cb377-2956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2957"><a href="#cb377-2957" aria-hidden="true" tabindex="-1"></a><span class="in"># extract values like "201617", "201718".</span></span>
<span id="cb377-2958"><a href="#cb377-2958" aria-hidden="true" tabindex="-1"></a><span class="in">breast_cancer_data &lt;- breast_cancer_data %&gt;%</span></span>
<span id="cb377-2959"><a href="#cb377-2959" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(year_4digit = as.integer(gsub("^([0-9]{4}).*", "\\1", year)))</span></span>
<span id="cb377-2960"><a href="#cb377-2960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2961"><a href="#cb377-2961" aria-hidden="true" tabindex="-1"></a><span class="in">table(breast_cancer_data$year_4digit)</span></span>
<span id="cb377-2962"><a href="#cb377-2962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2963"><a href="#cb377-2963" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-2964"><a href="#cb377-2964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2965"><a href="#cb377-2965" aria-hidden="true" tabindex="-1"></a>**Line Chart ‚Äì Breast Cancer Screening Trends by Region in Australia**</span>
<span id="cb377-2966"><a href="#cb377-2966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2967"><a href="#cb377-2967" aria-hidden="true" tabindex="-1"></a>The example below shows a **line chart** illustrating trends in **breast cancer screening rates** across Australian states from 2016 to 2019.</span>
<span id="cb377-2968"><a href="#cb377-2968" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2969"><a href="#cb377-2969" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Breast cancer screening rates across most Australian states appeared relatively consistent from 2016 to 2018, with minor year-to-year variations.</span>
<span id="cb377-2970"><a href="#cb377-2970" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2971"><a href="#cb377-2971" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>A notable decline in screening rates is evident after 2018 and particularly in 2019, coinciding with the early stages of the COVID-19 pandemic</span>
<span id="cb377-2972"><a href="#cb377-2972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2973"><a href="#cb377-2973" aria-hidden="true" tabindex="-1"></a>**State-specific Observations:**</span>
<span id="cb377-2974"><a href="#cb377-2974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2975"><a href="#cb377-2975" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Tasmania (Tas)** consistently had the highest screening rate, around 60%, but showed a clear decline post-2018.</span>
<span id="cb377-2976"><a href="#cb377-2976" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2977"><a href="#cb377-2977" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The **Northern Territory (NT)** had the lowest rates, around 40%, also experiencing a slight decline during this period.</span>
<span id="cb377-2978"><a href="#cb377-2978" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2979"><a href="#cb377-2979" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Other states (**ACT, NSW, Qld, SA, Vic, WA**) maintained relatively stable rates (around 55%) until 2018, after which a distinct downturn is noticeable, particularly in Western Australia (WA) and Victoria (Vic).</span>
<span id="cb377-2980"><a href="#cb377-2980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2981"><a href="#cb377-2981" aria-hidden="true" tabindex="-1"></a>**Impact of COVID-19:**</span>
<span id="cb377-2982"><a href="#cb377-2982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2983"><a href="#cb377-2983" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The observed decline in breast cancer screening from 2019 onwards aligns with the emergence of the COVID-19 pandemic, which disrupted routine healthcare services globally.</span>
<span id="cb377-2984"><a href="#cb377-2984" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2985"><a href="#cb377-2985" aria-hidden="true" tabindex="-1"></a>This analysis underscores the importance of maintaining consistent access to healthcare services, particularly preventive screenings, even during periods of significant healthcare disruption.</span>
<span id="cb377-2986"><a href="#cb377-2986" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2989"><a href="#cb377-2989" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-2990"><a href="#cb377-2990" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizing changes in screening rates (50‚Äì74 years) over time by state</span></span>
<span id="cb377-2991"><a href="#cb377-2991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-2992"><a href="#cb377-2992" aria-hidden="true" tabindex="-1"></a>breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-2993"><a href="#cb377-2993" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year_4digit) <span class="sc">%&gt;%</span>  <span class="co"># group by state and year</span></span>
<span id="cb377-2994"><a href="#cb377-2994" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_rate =</span> <span class="fu">mean</span>(rate50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-2995"><a href="#cb377-2995" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_4digit, <span class="at">y =</span> mean_rate, <span class="at">color =</span> state)) <span class="sc">+</span>  <span class="co"># map axes and color</span></span>
<span id="cb377-2996"><a href="#cb377-2996" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span>  <span class="co"># trend lines</span></span>
<span id="cb377-2997"><a href="#cb377-2997" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span>   <span class="co"># points for each year</span></span>
<span id="cb377-2998"><a href="#cb377-2998" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb377-2999"><a href="#cb377-2999" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Breast Cancer Screening Rates (50‚Äì74 yrs)"</span>,  </span>
<span id="cb377-3000"><a href="#cb377-3000" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Aggregated by State and Year"</span>,           </span>
<span id="cb377-3001"><a href="#cb377-3001" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Screening Rate (%)"</span>,  <span class="co"># Axis labels</span></span>
<span id="cb377-3002"><a href="#cb377-3002" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"State"</span>   <span class="co"># Legend title</span></span>
<span id="cb377-3003"><a href="#cb377-3003" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb377-3004"><a href="#cb377-3004" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb377-3005"><a href="#cb377-3005" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()  </span>
<span id="cb377-3006"><a href="#cb377-3006" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3007"><a href="#cb377-3007" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3008"><a href="#cb377-3008" aria-hidden="true" tabindex="-1"></a>**Histogram ‚Äì Distribution of Age**\</span>
<span id="cb377-3009"><a href="#cb377-3009" aria-hidden="true" tabindex="-1"></a>Displays the frequency of vaccinated individuals by age, with a density line overlay to visualize the distribution shape.</span>
<span id="cb377-3010"><a href="#cb377-3010" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3011"><a href="#cb377-3011" aria-hidden="true" tabindex="-1"></a>The example below shows a histogram illustrating the **age distribution** within our studied population. The distribution highlights a clear **bimodal pattern**, indicating two main age groups. The largest group comprises younger adults, predominantly around 20‚Äì30 years old, suggesting a significant representation of young adults. A smaller secondary group emerges around 55‚Äì65 years old, reflecting a noticeable segment of older adults. This pattern may indicate specific target groups or demographic characteristics relevant to the population from which the data was collected. Understanding these age clusters can help tailor appropriate health strategies, services, or interventions accordingly.</span>
<span id="cb377-3012"><a href="#cb377-3012" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3015"><a href="#cb377-3015" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3016"><a href="#cb377-3016" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3017"><a href="#cb377-3017" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb377-3018"><a href="#cb377-3018" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">fill =</span> <span class="st">"darkblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb377-3019"><a href="#cb377-3019" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb377-3020"><a href="#cb377-3020" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Age Distribution with Density Curve"</span>, <span class="at">x =</span> <span class="st">"Age"</span>, <span class="at">y =</span> <span class="st">"Density"</span>) <span class="sc">+</span></span>
<span id="cb377-3021"><a href="#cb377-3021" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb377-3022"><a href="#cb377-3022" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3023"><a href="#cb377-3023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3024"><a href="#cb377-3024" aria-hidden="true" tabindex="-1"></a>**Pie Chart ‚Äì Proportion by Vaccine Group**\</span>
<span id="cb377-3025"><a href="#cb377-3025" aria-hidden="true" tabindex="-1"></a>Shows how vaccine groups are proportionally represented in the dataset. Useful for visualizing categorical outcomes.</span>
<span id="cb377-3026"><a href="#cb377-3026" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3027"><a href="#cb377-3027" aria-hidden="true" tabindex="-1"></a>In the example below, the pie chart represents the proportion of vaccinations grouped into three categories:</span>
<span id="cb377-3028"><a href="#cb377-3028" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3029"><a href="#cb377-3029" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Respiratory vaccines** account for the largest proportion, comprising **61%** of all vaccines administered.</span>
<span id="cb377-3030"><a href="#cb377-3030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3031"><a href="#cb377-3031" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Childhood vaccines** represent a significant portion as well, making up **30%**.</span>
<span id="cb377-3032"><a href="#cb377-3032" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3033"><a href="#cb377-3033" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The category labeled **Other** includes **8%** of vaccines administered, indicating a smaller but notable group of vaccinations outside the respiratory and childhood classifications.</span>
<span id="cb377-3034"><a href="#cb377-3034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3037"><a href="#cb377-3037" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3038"><a href="#cb377-3038" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3039"><a href="#cb377-3039" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb377-3040"><a href="#cb377-3040" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n), <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(perc)) <span class="sc">%&gt;%</span></span>
<span id="cb377-3041"><a href="#cb377-3041" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> perc, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb377-3042"><a href="#cb377-3042" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb377-3043"><a href="#cb377-3043" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb377-3044"><a href="#cb377-3044" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb377-3045"><a href="#cb377-3045" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Vaccine Group Proportions"</span>, <span class="at">fill =</span> <span class="st">"Vaccine Group"</span>) <span class="sc">+</span></span>
<span id="cb377-3046"><a href="#cb377-3046" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb377-3047"><a href="#cb377-3047" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3048"><a href="#cb377-3048" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3049"><a href="#cb377-3049" aria-hidden="true" tabindex="-1"></a>**Bar Plot ‚Äì Vaccination Count by Vaccine Group**\</span>
<span id="cb377-3050"><a href="#cb377-3050" aria-hidden="true" tabindex="-1"></a>This plot compares the absolute count of vaccinations across groups, with horizontal bars for better readability of long labels.</span>
<span id="cb377-3051"><a href="#cb377-3051" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3052"><a href="#cb377-3052" aria-hidden="true" tabindex="-1"></a>The example below shows a **horizontal bar chart** illustrating the total number of vaccinations administered, grouped into three distinct categories:</span>
<span id="cb377-3053"><a href="#cb377-3053" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3054"><a href="#cb377-3054" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Respiratory vaccines** clearly represent the largest group, indicating that these vaccines were administered most frequently within the population.</span>
<span id="cb377-3055"><a href="#cb377-3055" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3056"><a href="#cb377-3056" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The **Other** category accounts for the smallest number of vaccinations, suggesting a relatively minor proportion of miscellaneous or specialized vaccines.</span>
<span id="cb377-3057"><a href="#cb377-3057" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3060"><a href="#cb377-3060" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3061"><a href="#cb377-3061" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3062"><a href="#cb377-3062" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb377-3063"><a href="#cb377-3063" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(vacc_group3, n), <span class="at">y =</span> n, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb377-3064"><a href="#cb377-3064" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb377-3065"><a href="#cb377-3065" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb377-3066"><a href="#cb377-3066" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Vaccination Count by Group"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Count"</span>) <span class="sc">+</span></span>
<span id="cb377-3067"><a href="#cb377-3067" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb377-3068"><a href="#cb377-3068" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb377-3069"><a href="#cb377-3069" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3070"><a href="#cb377-3070" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3071"><a href="#cb377-3071" aria-hidden="true" tabindex="-1"></a>**Grouped Bar Plot ‚Äì Vaccination by Race and Vaccine Group**\</span>
<span id="cb377-3072"><a href="#cb377-3072" aria-hidden="true" tabindex="-1"></a>The example below shows a **stacked bar chart** presenting the distribution of vaccinations by race and vaccine category.</span>
<span id="cb377-3073"><a href="#cb377-3073" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3074"><a href="#cb377-3074" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Respiratory vaccines** (represented in blue) dominate across all racial groups, consistently making up the largest proportion of administered vaccines, especially noticeable among **Black** and **White** groups.</span>
<span id="cb377-3075"><a href="#cb377-3075" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3076"><a href="#cb377-3076" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Childhood vaccines** (represented in red) form a significant proportion of vaccinations among the **Asian** and **Native** groups, highlighting targeted or population-specific vaccination programs for younger age groups within these communities.</span>
<span id="cb377-3077"><a href="#cb377-3077" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3078"><a href="#cb377-3078" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The **Other vaccines** category (represented in green) comprises a relatively minor proportion and appears more prominent among the **Asian** and **White** populations.</span>
<span id="cb377-3079"><a href="#cb377-3079" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3080"><a href="#cb377-3080" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3081"><a href="#cb377-3081" aria-hidden="true" tabindex="-1"></a><span class="in">**Implications:**</span></span>
<span id="cb377-3082"><a href="#cb377-3082" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3083"><a href="#cb377-3083" aria-hidden="true" tabindex="-1"></a><span class="in">These patterns may suggest varying public health strategies, demographic factors, or differing healthcare access across racial groups. Understanding these variations can guide targeted healthcare interventions and improve vaccine coverage equity.</span></span>
<span id="cb377-3084"><a href="#cb377-3084" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3085"><a href="#cb377-3085" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3088"><a href="#cb377-3088" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3089"><a href="#cb377-3089" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data: count vaccinations by race and vaccine group</span></span>
<span id="cb377-3090"><a href="#cb377-3090" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3091"><a href="#cb377-3091" aria-hidden="true" tabindex="-1"></a>vacc_1524<span class="sc">$</span>race <span class="ot">&lt;-</span> tools<span class="sc">::</span><span class="fu">toTitleCase</span>(vacc_1524<span class="sc">$</span>race)</span>
<span id="cb377-3092"><a href="#cb377-3092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3093"><a href="#cb377-3093" aria-hidden="true" tabindex="-1"></a>vacc_summary <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3094"><a href="#cb377-3094" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(race, vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb377-3095"><a href="#cb377-3095" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(race) <span class="sc">%&gt;%</span></span>
<span id="cb377-3096"><a href="#cb377-3096" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb377-3097"><a href="#cb377-3097" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb377-3098"><a href="#cb377-3098" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3099"><a href="#cb377-3099" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(vacc_summary, <span class="fu">aes</span>(<span class="at">x =</span> race, <span class="at">y =</span> prop, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb377-3100"><a href="#cb377-3100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb377-3101"><a href="#cb377-3101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb377-3102"><a href="#cb377-3102" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Vaccination Distribution by Race and Vaccine Group"</span>,</span>
<span id="cb377-3103"><a href="#cb377-3103" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Race"</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>,</span>
<span id="cb377-3104"><a href="#cb377-3104" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Vaccine Group"</span></span>
<span id="cb377-3105"><a href="#cb377-3105" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb377-3106"><a href="#cb377-3106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb377-3107"><a href="#cb377-3107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb377-3108"><a href="#cb377-3108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb377-3109"><a href="#cb377-3109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3110"><a href="#cb377-3110" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vacc_summary)</span>
<span id="cb377-3111"><a href="#cb377-3111" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3112"><a href="#cb377-3112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3113"><a href="#cb377-3113" aria-hidden="true" tabindex="-1"></a>**Stacked Bar Chart ‚Äì Race by Vaccine Group**</span>
<span id="cb377-3114"><a href="#cb377-3114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3115"><a href="#cb377-3115" aria-hidden="true" tabindex="-1"></a>The example below shows a **stacked bar chart** illustrating the number of vaccinations administered, grouped by vaccine type and categorized by racial groups.</span>
<span id="cb377-3116"><a href="#cb377-3116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3117"><a href="#cb377-3117" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The **White** population received the highest number of vaccinations across all vaccine categories (**Childhood, Other, and Respiratory vaccines**).</span>
<span id="cb377-3118"><a href="#cb377-3118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3119"><a href="#cb377-3119" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Other racial groups (**Asian, Black, Native, and Other**) also received vaccinations, though in smaller numbers across each vaccine type, indicating ongoing efforts to reach diverse communities.</span>
<span id="cb377-3120"><a href="#cb377-3120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3121"><a href="#cb377-3121" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Respiratory vaccines** had the highest total number of vaccinations administered, suggesting these vaccines were a primary focus within the vaccination program.</span>
<span id="cb377-3122"><a href="#cb377-3122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3123"><a href="#cb377-3123" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3124"><a href="#cb377-3124" aria-hidden="true" tabindex="-1"></a><span class="in">This data helps to illustrate which groups have higher vaccine coverage and highlights the importance of ensuring equitable access and distribution across all communities.</span></span>
<span id="cb377-3125"><a href="#cb377-3125" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3126"><a href="#cb377-3126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3129"><a href="#cb377-3129" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3130"><a href="#cb377-3130" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3131"><a href="#cb377-3131" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> stringr<span class="sc">::</span><span class="fu">str_to_title</span>(race)) <span class="sc">%&gt;%</span></span>
<span id="cb377-3132"><a href="#cb377-3132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_group3, race) <span class="sc">%&gt;%</span></span>
<span id="cb377-3133"><a href="#cb377-3133" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> n, <span class="at">fill =</span> race)) <span class="sc">+</span></span>
<span id="cb377-3134"><a href="#cb377-3134" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb377-3135"><a href="#cb377-3135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Stacked Bar Chart: Race by Vaccine Group"</span>, <span class="at">x =</span> <span class="st">"Vaccine Group"</span>, <span class="at">y =</span> <span class="st">"Count"</span>) <span class="sc">+</span></span>
<span id="cb377-3136"><a href="#cb377-3136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb377-3137"><a href="#cb377-3137" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3138"><a href="#cb377-3138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3139"><a href="#cb377-3139" aria-hidden="true" tabindex="-1"></a>**Boxplot ‚Äì Age Distribution by Vaccine Group**\</span>
<span id="cb377-3140"><a href="#cb377-3140" aria-hidden="true" tabindex="-1"></a>Visualizes how age varies across vaccine groups using standard boxplots.</span>
<span id="cb377-3141"><a href="#cb377-3141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3142"><a href="#cb377-3142" aria-hidden="true" tabindex="-1"></a>The example below shows a **box plot** depicting age distribution for three vaccine categories (**Childhood vaccines, Other vaccines, and Respiratory vaccines**):</span>
<span id="cb377-3143"><a href="#cb377-3143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3144"><a href="#cb377-3144" aria-hidden="true" tabindex="-1"></a>**Key Observations:**</span>
<span id="cb377-3145"><a href="#cb377-3145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3146"><a href="#cb377-3146" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Childhood vaccines** primarily cover younger ages, with most recipients under 25 years old. Some individuals beyond this age range appear as outliers, suggesting occasional vaccinations in older groups.</span>
<span id="cb377-3147"><a href="#cb377-3147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3148"><a href="#cb377-3148" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Respiratory vaccines** generally target an older age group, with the median age around 50 years, and a broad range from younger adults to elderly populations.</span>
<span id="cb377-3149"><a href="#cb377-3149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3150"><a href="#cb377-3150" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The **Other vaccines** category has a wider age distribution overall, suggesting these vaccines serve diverse age groups, though with fewer individuals compared to the other two groups.</span>
<span id="cb377-3151"><a href="#cb377-3151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3152"><a href="#cb377-3152" aria-hidden="true" tabindex="-1"></a>**Implications:**</span>
<span id="cb377-3153"><a href="#cb377-3153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3154"><a href="#cb377-3154" aria-hidden="true" tabindex="-1"></a>This visualization highlights clear age-based targeting for different vaccine categories. Childhood vaccines are expectedly administered primarily to younger populations, while respiratory vaccines predominantly reach older adults. Understanding these age patterns helps to plan targeted public health campaigns and resource allocation effectively.</span>
<span id="cb377-3155"><a href="#cb377-3155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3158"><a href="#cb377-3158" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3159"><a href="#cb377-3159" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3160"><a href="#cb377-3160" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> age, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb377-3161"><a href="#cb377-3161" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb377-3162"><a href="#cb377-3162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Age Distribution by Vaccine Group"</span>,</span>
<span id="cb377-3163"><a href="#cb377-3163" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Vaccine Group"</span>, <span class="at">y =</span> <span class="st">"Age (Years)"</span>) <span class="sc">+</span></span>
<span id="cb377-3164"><a href="#cb377-3164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb377-3165"><a href="#cb377-3165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb377-3166"><a href="#cb377-3166" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3167"><a href="#cb377-3167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3168"><a href="#cb377-3168" aria-hidden="true" tabindex="-1"></a>**Boxplot with Jittered (Individual Data) Points**\</span>
<span id="cb377-3169"><a href="#cb377-3169" aria-hidden="true" tabindex="-1"></a>Combines summary and raw data by overlaying individual age points on the boxplot.</span>
<span id="cb377-3170"><a href="#cb377-3170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3171"><a href="#cb377-3171" aria-hidden="true" tabindex="-1"></a>The example below shows a **boxplot with individual data points (jittered)**, displaying the **age distribution** of individuals across three vaccine groups: **Childhood vaccines, Other vaccines, and Respiratory vaccines**.</span>
<span id="cb377-3172"><a href="#cb377-3172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3173"><a href="#cb377-3173" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Childhood vaccines**:</span>
<span id="cb377-3174"><a href="#cb377-3174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3175"><a href="#cb377-3175" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Most individuals who received childhood vaccines are young, with a median age around 10 years.</span>
<span id="cb377-3176"><a href="#cb377-3176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3177"><a href="#cb377-3177" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The distribution is tightly concentrated, though some older individuals (outliers) also received these vaccines.</span>
<span id="cb377-3178"><a href="#cb377-3178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3179"><a href="#cb377-3179" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The data points clearly cluster in younger age ranges, which is expected for this vaccine group.</span>
<span id="cb377-3180"><a href="#cb377-3180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3181"><a href="#cb377-3181" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>**Respiratory vaccines**:</span>
<span id="cb377-3182"><a href="#cb377-3182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3183"><a href="#cb377-3183" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>This group has the highest median age, around 40‚Äì50 years.</span>
<span id="cb377-3184"><a href="#cb377-3184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3185"><a href="#cb377-3185" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>The data points are more evenly spread out across a wide age range, with many individuals above 60 years, indicating respiratory vaccines are frequently administered to older populations.</span>
<span id="cb377-3186"><a href="#cb377-3186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3187"><a href="#cb377-3187" aria-hidden="true" tabindex="-1"></a>    **Other vaccines**:</span>
<span id="cb377-3188"><a href="#cb377-3188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3189"><a href="#cb377-3189" aria-hidden="true" tabindex="-1"></a><span class="in">    -   This group shows a wide range of ages, from infants to older adults.</span></span>
<span id="cb377-3190"><a href="#cb377-3190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3191"><a href="#cb377-3191" aria-hidden="true" tabindex="-1"></a><span class="in">    -   While the median age is still relatively low, the spread is broader compared to childhood vaccines, suggesting this category includes various vaccines administered across different age groups.</span></span>
<span id="cb377-3192"><a href="#cb377-3192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3193"><a href="#cb377-3193" aria-hidden="true" tabindex="-1"></a><span class="in">    **Implications:**</span></span>
<span id="cb377-3194"><a href="#cb377-3194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3195"><a href="#cb377-3195" aria-hidden="true" tabindex="-1"></a><span class="in">    By combining summary statistics (boxplot) with individual-level data (dots), this chart offers a clear view of both overall trends and variation in vaccination by age. It confirms that vaccine distribution aligns with age-specific health needs‚Äîyoung children for childhood vaccines, and older adults for respiratory vaccines‚Äîwhile also showing the diversity within each group.</span></span>
<span id="cb377-3196"><a href="#cb377-3196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3199"><a href="#cb377-3199" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3200"><a href="#cb377-3200" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3201"><a href="#cb377-3201" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> age, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb377-3202"><a href="#cb377-3202" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.shape =</span> <span class="cn">NA</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb377-3203"><a href="#cb377-3203" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>),</span>
<span id="cb377-3204"><a href="#cb377-3204" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb377-3205"><a href="#cb377-3205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot with Individual Data Points"</span>,</span>
<span id="cb377-3206"><a href="#cb377-3206" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Vaccine Group"</span>, <span class="at">y =</span> <span class="st">"Age"</span>) <span class="sc">+</span></span>
<span id="cb377-3207"><a href="#cb377-3207" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb377-3208"><a href="#cb377-3208" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb377-3209"><a href="#cb377-3209" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3210"><a href="#cb377-3210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3211"><a href="#cb377-3211" aria-hidden="true" tabindex="-1"></a>**Boxplot with Violin Overlay**\</span>
<span id="cb377-3212"><a href="#cb377-3212" aria-hidden="true" tabindex="-1"></a>Adds a violin plot to visualize the full distribution of ages while preserving boxplot summary stats.</span>
<span id="cb377-3213"><a href="#cb377-3213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3214"><a href="#cb377-3214" aria-hidden="true" tabindex="-1"></a>The plot below combines a **boxplot** and **violin plot** to display the age distribution across different vaccine groups: **Childhood vaccines**, **Other vaccines**, and **Respiratory vaccines**.</span>
<span id="cb377-3215"><a href="#cb377-3215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3216"><a href="#cb377-3216" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Childhood vaccines**:\</span>
<span id="cb377-3217"><a href="#cb377-3217" aria-hidden="true" tabindex="-1"></a>    The age distribution is heavily concentrated among younger individuals, with most recipients under 25 years. The violin shape is widest near the lower ages, tapering quickly, which indicates that childhood vaccines are rarely given to older individuals.</span>
<span id="cb377-3218"><a href="#cb377-3218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3219"><a href="#cb377-3219" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Respiratory vaccines**:\</span>
<span id="cb377-3220"><a href="#cb377-3220" aria-hidden="true" tabindex="-1"></a>    The distribution leans toward older age groups, with the median age higher than in other categories. The violin is widest in the 40‚Äì70 age range, suggesting respiratory vaccines are more commonly administered to older adults.</span>
<span id="cb377-3221"><a href="#cb377-3221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3222"><a href="#cb377-3222" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- --&gt;</span></span>
<span id="cb377-3223"><a href="#cb377-3223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3224"><a href="#cb377-3224" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Other vaccines**:\</span>
<span id="cb377-3225"><a href="#cb377-3225" aria-hidden="true" tabindex="-1"></a>    This group shows a broader age range. The shape suggests two areas of concentration: one among younger children and another around age 60‚Äì70, indicating this group includes vaccine types used across diverse age groups.</span>
<span id="cb377-3226"><a href="#cb377-3226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3227"><a href="#cb377-3227" aria-hidden="true" tabindex="-1"></a>    **Overall**, this combined plot provides both statistical summaries (via boxplot) and full distribution shapes (via violin plot), helping to clearly distinguish the age-related usage patterns across vaccine types.</span>
<span id="cb377-3228"><a href="#cb377-3228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3231"><a href="#cb377-3231" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3232"><a href="#cb377-3232" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3233"><a href="#cb377-3233" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> age, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb377-3234"><a href="#cb377-3234" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb377-3235"><a href="#cb377-3235" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">outlier.shape =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb377-3236"><a href="#cb377-3236" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot with Violin Overlay"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Age"</span>) <span class="sc">+</span></span>
<span id="cb377-3237"><a href="#cb377-3237" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb377-3238"><a href="#cb377-3238" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb377-3239"><a href="#cb377-3239" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3240"><a href="#cb377-3240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3241"><a href="#cb377-3241" aria-hidden="true" tabindex="-1"></a>**Notched Boxplot ‚Äì Median Comparison**\</span>
<span id="cb377-3242"><a href="#cb377-3242" aria-hidden="true" tabindex="-1"></a>Notches allow a rough comparison of medians across groups. Non-overlapping notches suggest a significant difference.</span>
<span id="cb377-3243"><a href="#cb377-3243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3244"><a href="#cb377-3244" aria-hidden="true" tabindex="-1"></a>The plot below presents a **notched boxplot** showing the age distribution for each vaccine group‚Äî**Childhood vaccines**, **Other vaccines**, and **Respiratory vaccines**.</span>
<span id="cb377-3245"><a href="#cb377-3245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3246"><a href="#cb377-3246" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The **notches** around the medians provide a visual guide for comparing the central values (medians) across groups. If the notches do not overlap, it suggests that the medians are likely different in a statistically meaningful way.</span>
<span id="cb377-3247"><a href="#cb377-3247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3248"><a href="#cb377-3248" aria-hidden="true" tabindex="-1"></a>**Key insights:**</span>
<span id="cb377-3249"><a href="#cb377-3249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3250"><a href="#cb377-3250" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Childhood vaccines** show a younger age distribution, with a median age around 10 years and a narrow spread. Outliers indicate a few older individuals also received these vaccines.</span>
<span id="cb377-3251"><a href="#cb377-3251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3252"><a href="#cb377-3252" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Respiratory vaccines** are mainly administered to older age groups, with the highest median age among the three categories.</span>
<span id="cb377-3253"><a href="#cb377-3253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3254"><a href="#cb377-3254" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Other vaccines** span a wider range of ages, but the median remains lower than that of respiratory vaccines.</span>
<span id="cb377-3255"><a href="#cb377-3255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3256"><a href="#cb377-3256" aria-hidden="true" tabindex="-1"></a>**Median Comparison:**</span>
<span id="cb377-3257"><a href="#cb377-3257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3258"><a href="#cb377-3258" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The **non-overlapping notches** between childhood and respiratory vaccines suggest a clear difference in median ages.</span>
<span id="cb377-3259"><a href="#cb377-3259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3260"><a href="#cb377-3260" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The **other vaccines** group overlaps slightly with both, indicating a more mixed age distribution and less pronounced difference.</span>
<span id="cb377-3261"><a href="#cb377-3261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3264"><a href="#cb377-3264" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3265"><a href="#cb377-3265" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3266"><a href="#cb377-3266" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> age, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb377-3267"><a href="#cb377-3267" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">notch =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb377-3268"><a href="#cb377-3268" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Notched Boxplot: Vaccine Group vs Age"</span>, <span class="at">x =</span> <span class="st">"Group"</span>, <span class="at">y =</span> <span class="st">"Age"</span>) <span class="sc">+</span></span>
<span id="cb377-3269"><a href="#cb377-3269" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb377-3270"><a href="#cb377-3270" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb377-3271"><a href="#cb377-3271" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3272"><a href="#cb377-3272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3273"><a href="#cb377-3273" aria-hidden="true" tabindex="-1"></a>**Faceted Boxplot by Gender**\</span>
<span id="cb377-3274"><a href="#cb377-3274" aria-hidden="true" tabindex="-1"></a>Breaks down the age distribution by vaccine group and gender to compare across subgroups.</span>
<span id="cb377-3275"><a href="#cb377-3275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3276"><a href="#cb377-3276" aria-hidden="true" tabindex="-1"></a>The plot below shows **boxplots of age distribution** by **vaccine group** (**Childhood**, **Respiratory**, and **Other vaccines**), separated into two panels by **gender** (**Female** and **Male**).</span>
<span id="cb377-3277"><a href="#cb377-3277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3278"><a href="#cb377-3278" aria-hidden="true" tabindex="-1"></a>**Key Observations:**</span>
<span id="cb377-3279"><a href="#cb377-3279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3280"><a href="#cb377-3280" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Childhood vaccines**:</span>
<span id="cb377-3281"><a href="#cb377-3281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3282"><a href="#cb377-3282" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3283"><a href="#cb377-3283" aria-hidden="true" tabindex="-1"></a><span class="in">-    Age distributions are similar for both females and males, with most recipients being under 25 years.</span></span>
<span id="cb377-3284"><a href="#cb377-3284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3285"><a href="#cb377-3285" aria-hidden="true" tabindex="-1"></a><span class="in">-    A few older outliers are present, especially among females, but the bulk of vaccine recipients are children and adolescents.</span></span>
<span id="cb377-3286"><a href="#cb377-3286" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3287"><a href="#cb377-3287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3288"><a href="#cb377-3288" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Respiratory vaccines**:</span>
<span id="cb377-3289"><a href="#cb377-3289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3290"><a href="#cb377-3290" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3291"><a href="#cb377-3291" aria-hidden="true" tabindex="-1"></a><span class="in">-    This group shows a wide age range in both genders, with median ages around 40‚Äì45 years.</span></span>
<span id="cb377-3292"><a href="#cb377-3292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3293"><a href="#cb377-3293" aria-hidden="true" tabindex="-1"></a><span class="in">-    The distribution is slightly more spread out among males, but the overall trend remains consistent across genders.</span></span>
<span id="cb377-3294"><a href="#cb377-3294" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3295"><a href="#cb377-3295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3296"><a href="#cb377-3296" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Other vaccines**:</span>
<span id="cb377-3297"><a href="#cb377-3297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3298"><a href="#cb377-3298" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3299"><a href="#cb377-3299" aria-hidden="true" tabindex="-1"></a><span class="in">-    A notable gender difference is visible here:</span></span>
<span id="cb377-3300"><a href="#cb377-3300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3301"><a href="#cb377-3301" aria-hidden="true" tabindex="-1"></a><span class="in">    -   Among **females**, recipients span a broad age range, including many older adults.</span></span>
<span id="cb377-3302"><a href="#cb377-3302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3303"><a href="#cb377-3303" aria-hidden="true" tabindex="-1"></a><span class="in">    -    Among **males**, the age distribution is narrower and skewed toward younger adults.</span></span>
<span id="cb377-3304"><a href="#cb377-3304" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3305"><a href="#cb377-3305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3306"><a href="#cb377-3306" aria-hidden="true" tabindex="-1"></a>**Summary:**</span>
<span id="cb377-3307"><a href="#cb377-3307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3308"><a href="#cb377-3308" aria-hidden="true" tabindex="-1"></a>This faceted view helps highlight how **age patterns differ by both vaccine group and gender**. While childhood and respiratory vaccine distributions are generally similar across genders, the **"Other" vaccine group shows more variation**, possibly reflecting differences in vaccine eligibility, access, or health needs.</span>
<span id="cb377-3309"><a href="#cb377-3309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3312"><a href="#cb377-3312" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3313"><a href="#cb377-3313" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3314"><a href="#cb377-3314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> age, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb377-3315"><a href="#cb377-3315" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb377-3316"><a href="#cb377-3316" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> gender) <span class="sc">+</span></span>
<span id="cb377-3317"><a href="#cb377-3317" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Age by Vaccine Group, Faceted by Gender"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Age"</span>) <span class="sc">+</span></span>
<span id="cb377-3318"><a href="#cb377-3318" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb377-3319"><a href="#cb377-3319" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb377-3320"><a href="#cb377-3320" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3321"><a href="#cb377-3321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3322"><a href="#cb377-3322" aria-hidden="true" tabindex="-1"></a>**Ordered Boxplot ‚Äì by Median Age**\</span>
<span id="cb377-3323"><a href="#cb377-3323" aria-hidden="true" tabindex="-1"></a>Reorders vaccine groups by median age to emphasize differences in distribution centrality.</span>
<span id="cb377-3324"><a href="#cb377-3324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3325"><a href="#cb377-3325" aria-hidden="true" tabindex="-1"></a>The plot below shows **age distributions by vaccine group**, with the groups reordered by **median age** to highlight differences in central tendency.</span>
<span id="cb377-3326"><a href="#cb377-3326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3327"><a href="#cb377-3327" aria-hidden="true" tabindex="-1"></a>**Key Observations:**</span>
<span id="cb377-3328"><a href="#cb377-3328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3329"><a href="#cb377-3329" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Childhood vaccines** have the **lowest median age**, with most recipients being under 20 years. A small number of older individuals appear as outliers.</span>
<span id="cb377-3330"><a href="#cb377-3330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3331"><a href="#cb377-3331" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Other vaccines** show a **moderate median age**, but with a wide spread across age groups‚Äîranging from infants to older adults. This suggests these vaccines are used in more varied contexts.</span>
<span id="cb377-3332"><a href="#cb377-3332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3333"><a href="#cb377-3333" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Respiratory vaccines** have the **highest median age**, with recipients typically ranging from their 30s to older adulthood, reflecting their common use among older populations.</span>
<span id="cb377-3334"><a href="#cb377-3334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3335"><a href="#cb377-3335" aria-hidden="true" tabindex="-1"></a>**Conclusion:**</span>
<span id="cb377-3336"><a href="#cb377-3336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3337"><a href="#cb377-3337" aria-hidden="true" tabindex="-1"></a>By ordering the boxplots by median age, this visual emphasizes the different age profiles targeted by each vaccine group. This approach helps communicate age-related trends in vaccine administration more clearly .</span>
<span id="cb377-3338"><a href="#cb377-3338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3341"><a href="#cb377-3341" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3342"><a href="#cb377-3342" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3343"><a href="#cb377-3343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vacc_group3 =</span> <span class="fu">fct_reorder</span>(vacc_group3, age, median, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb377-3344"><a href="#cb377-3344" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> age, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb377-3345"><a href="#cb377-3345" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb377-3346"><a href="#cb377-3346" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot Ordered by Median Age"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Age"</span>) <span class="sc">+</span></span>
<span id="cb377-3347"><a href="#cb377-3347" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb377-3348"><a href="#cb377-3348" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb377-3349"><a href="#cb377-3349" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3350"><a href="#cb377-3350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3351"><a href="#cb377-3351" aria-hidden="true" tabindex="-1"></a>**Area Plot ‚Äì Monthly Vaccination Trends Over Years**\</span>
<span id="cb377-3352"><a href="#cb377-3352" aria-hidden="true" tabindex="-1"></a>Uses an area chart to show monthly vaccination volumes over multiple years, stacked by year.</span>
<span id="cb377-3353"><a href="#cb377-3353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3354"><a href="#cb377-3354" aria-hidden="true" tabindex="-1"></a>The area chart below displays **monthly vaccination counts** over multiple years (2015‚Äì2024), helping visualize seasonal and annual trends in vaccine uptake.</span>
<span id="cb377-3355"><a href="#cb377-3355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3356"><a href="#cb377-3356" aria-hidden="true" tabindex="-1"></a>**Key Observations:**</span>
<span id="cb377-3357"><a href="#cb377-3357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3358"><a href="#cb377-3358" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**2020** stands out with the highest overall vaccination counts, especially between **April and June**, likely reflecting a surge due to public health responses such as the COVID-19 pandemic.</span>
<span id="cb377-3359"><a href="#cb377-3359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3360"><a href="#cb377-3360" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>In other years, vaccination numbers are more evenly distributed, with moderate peaks around **March‚ÄìApril** or **August‚ÄìSeptember**, possibly aligning with seasonal vaccination programs (e.g., flu campaigns).</span>
<span id="cb377-3361"><a href="#cb377-3361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3362"><a href="#cb377-3362" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**2023 and 2024** show a relatively steady pattern throughout the year, with less fluctuation month-to-month.</span>
<span id="cb377-3363"><a href="#cb377-3363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3364"><a href="#cb377-3364" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Earlier years** (2015‚Äì2017) have lower and more variable volumes compared to recent years.</span>
<span id="cb377-3365"><a href="#cb377-3365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3366"><a href="#cb377-3366" aria-hidden="true" tabindex="-1"></a>**Conclusion:**</span>
<span id="cb377-3367"><a href="#cb377-3367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3368"><a href="#cb377-3368" aria-hidden="true" tabindex="-1"></a>This chart highlights both **seasonal vaccination patterns** and the **impact of specific public health events**, such as the elevated activity in 2020. Monitoring these trends over time supports planning for future vaccination campaigns and resource allocation.</span>
<span id="cb377-3369"><a href="#cb377-3369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3372"><a href="#cb377-3372" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3373"><a href="#cb377-3373" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3374"><a href="#cb377-3374" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_year, vacc_month_name) <span class="sc">%&gt;%</span></span>
<span id="cb377-3375"><a href="#cb377-3375" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_month_name, <span class="at">y =</span> n, <span class="at">group =</span> vacc_year, <span class="at">fill =</span> <span class="fu">factor</span>(vacc_year))) <span class="sc">+</span></span>
<span id="cb377-3376"><a href="#cb377-3376" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">position =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb377-3377"><a href="#cb377-3377" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Monthly Vaccination Trends by Year"</span>,</span>
<span id="cb377-3378"><a href="#cb377-3378" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Month"</span>, <span class="at">y =</span> <span class="st">"Number of Vaccinations"</span>, <span class="at">fill =</span> <span class="st">"Year"</span>) <span class="sc">+</span></span>
<span id="cb377-3379"><a href="#cb377-3379" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb377-3380"><a href="#cb377-3380" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3381"><a href="#cb377-3381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3382"><a href="#cb377-3382" aria-hidden="true" tabindex="-1"></a>**Faceted Plot ‚Äì Proportional Vaccination Trends by Group and Race**\</span>
<span id="cb377-3383"><a href="#cb377-3383" aria-hidden="true" tabindex="-1"></a>Displays how the proportion of vaccinations among different races changed across years, separately for each vaccine group.</span>
<span id="cb377-3384"><a href="#cb377-3384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3385"><a href="#cb377-3385" aria-hidden="true" tabindex="-1"></a>The faceted line plot below shows how the **proportion of vaccinations** among different **racial groups** has changed over time (**2015‚Äì2024**), presented separately for each **vaccine group**: **Childhood**, **Respiratory**, and **Other**.</span>
<span id="cb377-3386"><a href="#cb377-3386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3387"><a href="#cb377-3387" aria-hidden="true" tabindex="-1"></a>**Key Observations:**</span>
<span id="cb377-3388"><a href="#cb377-3388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3389"><a href="#cb377-3389" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Childhood vaccines**:</span>
<span id="cb377-3390"><a href="#cb377-3390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3391"><a href="#cb377-3391" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3392"><a href="#cb377-3392" aria-hidden="true" tabindex="-1"></a><span class="in">-   Proportions vary notably year to year, especially for **Asian**, **Black**, and **Native** groups.</span></span>
<span id="cb377-3393"><a href="#cb377-3393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3394"><a href="#cb377-3394" aria-hidden="true" tabindex="-1"></a><span class="in">-   The **"Other"** and **White** groups show a more consistent presence but with modest fluctuations.</span></span>
<span id="cb377-3395"><a href="#cb377-3395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3396"><a href="#cb377-3396" aria-hidden="true" tabindex="-1"></a><span class="in">-    Some groups (e.g., Native) show a steady rise in recent years.</span></span>
<span id="cb377-3397"><a href="#cb377-3397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3398"><a href="#cb377-3398" aria-hidden="true" tabindex="-1"></a><span class="in">**Respiratory vaccines**:</span></span>
<span id="cb377-3399"><a href="#cb377-3399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3400"><a href="#cb377-3400" aria-hidden="true" tabindex="-1"></a><span class="in">-    Several racial groups (notably **Native**, **Black**, and **Other**) show periods of very high proportions, including years where proportions reached **100%**, likely due to small subgroup sample sizes or data dominance.</span></span>
<span id="cb377-3401"><a href="#cb377-3401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3402"><a href="#cb377-3402" aria-hidden="true" tabindex="-1"></a><span class="in">-    The **White** and **Asian** groups tend to remain stable, though proportions fluctuate in certain years (e.g., 2020‚Äì2022).</span></span>
<span id="cb377-3403"><a href="#cb377-3403" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3404"><a href="#cb377-3404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3405"><a href="#cb377-3405" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Other vaccines**:</span>
<span id="cb377-3406"><a href="#cb377-3406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3407"><a href="#cb377-3407" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3408"><a href="#cb377-3408" aria-hidden="true" tabindex="-1"></a><span class="in">-   Representation is generally lower and more variable across all racial groups.</span></span>
<span id="cb377-3409"><a href="#cb377-3409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3410"><a href="#cb377-3410" aria-hidden="true" tabindex="-1"></a><span class="in">-    The **White** group maintains a small but steady share throughout most years.</span></span>
<span id="cb377-3411"><a href="#cb377-3411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3412"><a href="#cb377-3412" aria-hidden="true" tabindex="-1"></a><span class="in">**Interpretation:**</span></span>
<span id="cb377-3413"><a href="#cb377-3413" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3414"><a href="#cb377-3414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3415"><a href="#cb377-3415" aria-hidden="true" tabindex="-1"></a>This faceted view enables comparisons within and between vaccine types, highlighting potential shifts in **vaccine access**, **uptake**, or **data coverage** by racial group over time. It also suggests where disparities or changes in focus may have occurred, helping to inform more equitable vaccination strategies.</span>
<span id="cb377-3416"><a href="#cb377-3416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3419"><a href="#cb377-3419" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3420"><a href="#cb377-3420" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data: floor year, count by group, compute proportions within each group</span></span>
<span id="cb377-3421"><a href="#cb377-3421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3422"><a href="#cb377-3422" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean and count total per race/year (for denominator)</span></span>
<span id="cb377-3423"><a href="#cb377-3423" aria-hidden="true" tabindex="-1"></a>total_by_race_year <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3424"><a href="#cb377-3424" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-3425"><a href="#cb377-3425" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">as.integer</span>(<span class="fu">round</span>(age)),</span>
<span id="cb377-3426"><a href="#cb377-3426" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_year =</span> <span class="fu">as.integer</span>(<span class="fu">floor</span>(vacc_year)),</span>
<span id="cb377-3427"><a href="#cb377-3427" aria-hidden="true" tabindex="-1"></a>    <span class="at">race =</span> <span class="fu">str_to_title</span>(<span class="fu">as.character</span>(race))</span>
<span id="cb377-3428"><a href="#cb377-3428" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-3429"><a href="#cb377-3429" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_year, race, <span class="at">name =</span> <span class="st">"total_race_year"</span>)</span>
<span id="cb377-3430"><a href="#cb377-3430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3431"><a href="#cb377-3431" aria-hidden="true" tabindex="-1"></a><span class="co">#  Count per vaccine group (for numerator), then join</span></span>
<span id="cb377-3432"><a href="#cb377-3432" aria-hidden="true" tabindex="-1"></a>vacc_plot_data <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3433"><a href="#cb377-3433" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-3434"><a href="#cb377-3434" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">as.integer</span>(<span class="fu">round</span>(age)),</span>
<span id="cb377-3435"><a href="#cb377-3435" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacc_year =</span> <span class="fu">as.integer</span>(<span class="fu">floor</span>(vacc_year)),</span>
<span id="cb377-3436"><a href="#cb377-3436" aria-hidden="true" tabindex="-1"></a>    <span class="at">race =</span> <span class="fu">str_to_title</span>(<span class="fu">as.character</span>(race))</span>
<span id="cb377-3437"><a href="#cb377-3437" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-3438"><a href="#cb377-3438" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_year, race, vacc_group3, <span class="at">name =</span> <span class="st">"n"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-3439"><a href="#cb377-3439" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(total_by_race_year, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"vacc_year"</span>, <span class="st">"race"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb377-3440"><a href="#cb377-3440" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> total_race_year)</span>
<span id="cb377-3441"><a href="#cb377-3441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3442"><a href="#cb377-3442" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot proportion by race within group</span></span>
<span id="cb377-3443"><a href="#cb377-3443" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(vacc_plot_data, <span class="fu">aes</span>(<span class="at">x =</span> vacc_year, <span class="at">y =</span> prop, <span class="at">color =</span> race)) <span class="sc">+</span></span>
<span id="cb377-3444"><a href="#cb377-3444" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb377-3445"><a href="#cb377-3445" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> vacc_group3) <span class="sc">+</span></span>
<span id="cb377-3446"><a href="#cb377-3446" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb377-3447"><a href="#cb377-3447" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">pretty</span>(<span class="fu">unique</span>(vacc_plot_data<span class="sc">$</span>vacc_year))) <span class="sc">+</span></span>
<span id="cb377-3448"><a href="#cb377-3448" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb377-3449"><a href="#cb377-3449" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Proportion of Race Within Vaccine Groups by Year"</span>,</span>
<span id="cb377-3450"><a href="#cb377-3450" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>, <span class="at">color =</span> <span class="st">"Race"</span></span>
<span id="cb377-3451"><a href="#cb377-3451" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb377-3452"><a href="#cb377-3452" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb377-3453"><a href="#cb377-3453" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb377-3454"><a href="#cb377-3454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3455"><a href="#cb377-3455" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(vacc_plot_data, total_by_race_year)</span>
<span id="cb377-3456"><a href="#cb377-3456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3457"><a href="#cb377-3457" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3458"><a href="#cb377-3458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3459"><a href="#cb377-3459" aria-hidden="true" tabindex="-1"></a>**Statistical Overlay ‚Äì Regression Line on Vaccination Age**\</span>
<span id="cb377-3460"><a href="#cb377-3460" aria-hidden="true" tabindex="-1"></a>Adds a linear regression to examine the relationship between income and age at vaccination.</span>
<span id="cb377-3461"><a href="#cb377-3461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3462"><a href="#cb377-3462" aria-hidden="true" tabindex="-1"></a>The scatterplot below visualizes the relationship between **income** (horizontal axis) and **age at vaccination** (vertical axis), with a **linear regression line** and confidence band overlaid to summarize the trend.</span>
<span id="cb377-3463"><a href="#cb377-3463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3464"><a href="#cb377-3464" aria-hidden="true" tabindex="-1"></a>**Key Observations:**</span>
<span id="cb377-3465"><a href="#cb377-3465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3466"><a href="#cb377-3466" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The fitted **regression line** shows a **slight negative slope**, suggesting that as income increases, the age at which individuals receive vaccination tends to **decrease modestly**.</span>
<span id="cb377-3467"><a href="#cb377-3467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3468"><a href="#cb377-3468" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The **confidence band** (shaded region) around the line is relatively narrow, indicating a fair level of certainty in the trend across the central range of income.</span>
<span id="cb377-3469"><a href="#cb377-3469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3470"><a href="#cb377-3470" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The majority of data points are concentrated in the lower income ranges, while higher income values are more sparsely populated and show greater variability.</span>
<span id="cb377-3471"><a href="#cb377-3471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3472"><a href="#cb377-3472" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3473"><a href="#cb377-3473" aria-hidden="true" tabindex="-1"></a><span class="in">**Interpretation:**</span></span>
<span id="cb377-3474"><a href="#cb377-3474" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3475"><a href="#cb377-3475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3476"><a href="#cb377-3476" aria-hidden="true" tabindex="-1"></a>This trend suggests a **possible inverse relationship** between income and vaccination age‚Äîindividuals with higher income may be more likely to receive vaccines at younger ages. This could reflect differences in healthcare access, awareness, or proactive health behaviors associated with income level.</span>
<span id="cb377-3477"><a href="#cb377-3477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3480"><a href="#cb377-3480" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3481"><a href="#cb377-3481" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3482"><a href="#cb377-3482" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> income, <span class="at">y =</span> age)) <span class="sc">+</span></span>
<span id="cb377-3483"><a href="#cb377-3483" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">"gray50"</span>) <span class="sc">+</span></span>
<span id="cb377-3484"><a href="#cb377-3484" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb377-3485"><a href="#cb377-3485" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb377-3486"><a href="#cb377-3486" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Association Between Income and Age at Vaccination"</span>,</span>
<span id="cb377-3487"><a href="#cb377-3487" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Income"</span>, <span class="at">y =</span> <span class="st">"Age"</span></span>
<span id="cb377-3488"><a href="#cb377-3488" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb377-3489"><a href="#cb377-3489" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb377-3490"><a href="#cb377-3490" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3491"><a href="#cb377-3491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3492"><a href="#cb377-3492" aria-hidden="true" tabindex="-1"></a>**Regression Plot ‚Äì Age vs Income by Vaccine Group (Log Scale)**\</span>
<span id="cb377-3493"><a href="#cb377-3493" aria-hidden="true" tabindex="-1"></a>Adds linear regression and facets by vaccine group. The x-axis is log-scaled to handle skewed income data.</span>
<span id="cb377-3494"><a href="#cb377-3494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3495"><a href="#cb377-3495" aria-hidden="true" tabindex="-1"></a>The plot below shows **scatterplots with linear regression lines**, examining the relationship between **income** and **age at vaccination**. The plots are faceted by **vaccine group**: **Childhood**, **Other**, and **Respiratory**. The x-axis uses a **logarithmic scale** to better handle the skewed distribution of income.</span>
<span id="cb377-3496"><a href="#cb377-3496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3497"><a href="#cb377-3497" aria-hidden="true" tabindex="-1"></a>**Key Observations:**</span>
<span id="cb377-3498"><a href="#cb377-3498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3499"><a href="#cb377-3499" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Childhood vaccines**:</span>
<span id="cb377-3500"><a href="#cb377-3500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3501"><a href="#cb377-3501" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3502"><a href="#cb377-3502" aria-hidden="true" tabindex="-1"></a><span class="in">-    A **slight negative trend** is observed, indicating that as income increases, age at vaccination tends to decrease slightly.</span></span>
<span id="cb377-3503"><a href="#cb377-3503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3504"><a href="#cb377-3504" aria-hidden="true" tabindex="-1"></a><span class="in">-    This may reflect earlier or more timely vaccinations among higher-income individuals for childhood vaccines.</span></span>
<span id="cb377-3505"><a href="#cb377-3505" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3506"><a href="#cb377-3506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3507"><a href="#cb377-3507" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Other vaccines**:</span>
<span id="cb377-3508"><a href="#cb377-3508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3509"><a href="#cb377-3509" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3510"><a href="#cb377-3510" aria-hidden="true" tabindex="-1"></a><span class="in">-   The regression line is nearly flat with a wide confidence interval, suggesting **no strong or consistent relationship** between income and age at vaccination in this group.</span></span>
<span id="cb377-3511"><a href="#cb377-3511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3512"><a href="#cb377-3512" aria-hidden="true" tabindex="-1"></a><span class="in">-    This likely reflects diverse vaccine purposes and use across a broad age and income range.</span></span>
<span id="cb377-3513"><a href="#cb377-3513" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3514"><a href="#cb377-3514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3515"><a href="#cb377-3515" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Respiratory vaccines**:</span>
<span id="cb377-3516"><a href="#cb377-3516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3517"><a href="#cb377-3517" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3518"><a href="#cb377-3518" aria-hidden="true" tabindex="-1"></a><span class="in">-   A **mild negative trend** is also seen here, where higher-income individuals may receive respiratory vaccines at slightly younger ages.</span></span>
<span id="cb377-3519"><a href="#cb377-3519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3520"><a href="#cb377-3520" aria-hidden="true" tabindex="-1"></a><span class="in">-    However, the relationship is subtle and the confidence interval overlaps considerably with the regression line.</span></span>
<span id="cb377-3521"><a href="#cb377-3521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3522"><a href="#cb377-3522" aria-hidden="true" tabindex="-1"></a><span class="in">**Interpretation:**</span></span>
<span id="cb377-3523"><a href="#cb377-3523" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3524"><a href="#cb377-3524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3525"><a href="#cb377-3525" aria-hidden="true" tabindex="-1"></a>While the strength of association varies across groups, both the childhood and respiratory vaccine panels suggest a small trend where **higher income is associated with younger age at vaccination**. This may be related to differences in **access**, **preventive health behaviors**, or **healthcare utilization** by income level.</span>
<span id="cb377-3526"><a href="#cb377-3526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3529"><a href="#cb377-3529" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3530"><a href="#cb377-3530" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3531"><a href="#cb377-3531" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vacc_group3 =</span> <span class="fu">str_to_title</span>(vacc_group3)) <span class="sc">%&gt;%</span></span>
<span id="cb377-3532"><a href="#cb377-3532" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> income, <span class="at">y =</span> age)) <span class="sc">+</span></span>
<span id="cb377-3533"><a href="#cb377-3533" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">"gray50"</span>) <span class="sc">+</span></span>
<span id="cb377-3534"><a href="#cb377-3534" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb377-3535"><a href="#cb377-3535" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb377-3536"><a href="#cb377-3536" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> vacc_group3) <span class="sc">+</span></span>
<span id="cb377-3537"><a href="#cb377-3537" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb377-3538"><a href="#cb377-3538" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Association Between Income and Age at Vaccination"</span>,</span>
<span id="cb377-3539"><a href="#cb377-3539" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Income (log scale)"</span>, <span class="at">y =</span> <span class="st">"Age"</span></span>
<span id="cb377-3540"><a href="#cb377-3540" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb377-3541"><a href="#cb377-3541" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb377-3542"><a href="#cb377-3542" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3543"><a href="#cb377-3543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3544"><a href="#cb377-3544" aria-hidden="true" tabindex="-1"></a>**ECDF ‚Äì Age at Vaccination**</span>
<span id="cb377-3545"><a href="#cb377-3545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3546"><a href="#cb377-3546" aria-hidden="true" tabindex="-1"></a>The empirical cumulative distribution function (ECDF) shows the proportion of individuals vaccinated at or below each age. This helps visualize the age distribution in a cumulative way.</span>
<span id="cb377-3547"><a href="#cb377-3547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3548"><a href="#cb377-3548" aria-hidden="true" tabindex="-1"></a>The plot below presents shows the **cumulative proportion** of individuals who received a vaccination at or below each age.</span>
<span id="cb377-3549"><a href="#cb377-3549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3550"><a href="#cb377-3550" aria-hidden="true" tabindex="-1"></a>**Key Observations:**</span>
<span id="cb377-3551"><a href="#cb377-3551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3552"><a href="#cb377-3552" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The curve rises steeply in the early age range, indicating that a large proportion of individuals were vaccinated at younger ages (e.g., before 30).</span>
<span id="cb377-3553"><a href="#cb377-3553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3554"><a href="#cb377-3554" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>By around **age 50**, approximately **80%** of individuals had been vaccinated.</span>
<span id="cb377-3555"><a href="#cb377-3555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3556"><a href="#cb377-3556" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The curve flattens out after age 75, suggesting fewer vaccinations occur at older ages.</span>
<span id="cb377-3557"><a href="#cb377-3557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3558"><a href="#cb377-3558" aria-hidden="true" tabindex="-1"></a>**Interpretation:**</span>
<span id="cb377-3559"><a href="#cb377-3559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3560"><a href="#cb377-3560" aria-hidden="true" tabindex="-1"></a>The ECDF provides an intuitive way to understand the **distribution of vaccination ages**. It highlights that most vaccinations occur in **childhood and early adulthood**, with fewer individuals vaccinated later in life. This cumulative view complements histograms and boxplots by showing the proportion of individuals affected up to each age.</span>
<span id="cb377-3561"><a href="#cb377-3561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3564"><a href="#cb377-3564" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3565"><a href="#cb377-3565" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(income <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="sc">!</span><span class="fu">is.na</span>(age))</span>
<span id="cb377-3566"><a href="#cb377-3566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3567"><a href="#cb377-3567" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3568"><a href="#cb377-3568" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb377-3569"><a href="#cb377-3569" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_ecdf</span>(<span class="at">geom =</span> <span class="st">"step"</span>, <span class="at">color =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb377-3570"><a href="#cb377-3570" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ECDF of Age at Vaccination"</span>, <span class="at">x =</span> <span class="st">"Age"</span>, <span class="at">y =</span> <span class="st">"Cumulative Proportion"</span>) <span class="sc">+</span></span>
<span id="cb377-3571"><a href="#cb377-3571" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb377-3572"><a href="#cb377-3572" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3573"><a href="#cb377-3573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3574"><a href="#cb377-3574" aria-hidden="true" tabindex="-1"></a>**Treemap ‚Äì Vaccination by Race and Vaccine Group**</span>
<span id="cb377-3575"><a href="#cb377-3575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3576"><a href="#cb377-3576" aria-hidden="true" tabindex="-1"></a>This treemap visualizes the distribution of vaccinations by race and vaccine group. Larger areas indicate more individuals within each combination.</span>
<span id="cb377-3577"><a href="#cb377-3577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3578"><a href="#cb377-3578" aria-hidden="true" tabindex="-1"></a>The treemap below displays the **distribution of vaccinations** across **racial groups**, further categorized by **vaccine group** (Childhood, Respiratory, and Other). Each rectangle represents a combination of race and vaccine type, with **area size corresponding to the number of individuals** vaccinated.</span>
<span id="cb377-3579"><a href="#cb377-3579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3580"><a href="#cb377-3580" aria-hidden="true" tabindex="-1"></a>**Key Observations:**</span>
<span id="cb377-3581"><a href="#cb377-3581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3582"><a href="#cb377-3582" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The **White** population accounts for the **largest share overall**, with:</span>
<span id="cb377-3583"><a href="#cb377-3583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3584"><a href="#cb377-3584" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3585"><a href="#cb377-3585" aria-hidden="true" tabindex="-1"></a><span class="in">-    **788 individuals (50.7%)** in the **Respiratory** vaccine group.</span></span>
<span id="cb377-3586"><a href="#cb377-3586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3587"><a href="#cb377-3587" aria-hidden="true" tabindex="-1"></a><span class="in">-    **404 individuals (26.0%)** in the **Childhood** vaccine group.</span></span>
<span id="cb377-3588"><a href="#cb377-3588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3589"><a href="#cb377-3589" aria-hidden="true" tabindex="-1"></a><span class="in">-    **114 individuals (7.3%)** in the **Other** vaccine group.</span></span>
<span id="cb377-3590"><a href="#cb377-3590" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3591"><a href="#cb377-3591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3592"><a href="#cb377-3592" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Other racial groups have smaller shares:</span>
<span id="cb377-3593"><a href="#cb377-3593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3594"><a href="#cb377-3594" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3595"><a href="#cb377-3595" aria-hidden="true" tabindex="-1"></a><span class="in">-    **Black** individuals make up a modest proportion across groups, particularly **4.5%** in the Respiratory group and **1.4%** in Childhood vaccines.</span></span>
<span id="cb377-3596"><a href="#cb377-3596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3597"><a href="#cb377-3597" aria-hidden="true" tabindex="-1"></a><span class="in">-    **Asian** individuals represent **4.4%** of Respiratory vaccines and **2.1%** of Childhood vaccines.</span></span>
<span id="cb377-3598"><a href="#cb377-3598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3599"><a href="#cb377-3599" aria-hidden="true" tabindex="-1"></a><span class="in">-    **Native** and **Other** groups have minimal representation overall.</span></span>
<span id="cb377-3600"><a href="#cb377-3600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3601"><a href="#cb377-3601" aria-hidden="true" tabindex="-1"></a><span class="in">**Interpretation:**</span></span>
<span id="cb377-3602"><a href="#cb377-3602" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3603"><a href="#cb377-3603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3604"><a href="#cb377-3604" aria-hidden="true" tabindex="-1"></a>This treemap visually emphasizes the dominant contribution of the White population across all vaccine types, especially for respiratory vaccines. It also illustrates disparities in representation among racial groups, which can be important for assessing **equity in vaccine access**, **uptake**, and **program targeting**.</span>
<span id="cb377-3605"><a href="#cb377-3605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3608"><a href="#cb377-3608" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3609"><a href="#cb377-3609" aria-hidden="true" tabindex="-1"></a><span class="co"># Cross-platform ‚Äúnew device‚Äù:</span></span>
<span id="cb377-3610"><a href="#cb377-3610" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.new</span>(<span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">6</span>)  </span>
<span id="cb377-3611"><a href="#cb377-3611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3612"><a href="#cb377-3612" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3613"><a href="#cb377-3613" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(race, vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb377-3614"><a href="#cb377-3614" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">str_to_title</span>(race)) <span class="sc">%&gt;%</span></span>
<span id="cb377-3615"><a href="#cb377-3615" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">area =</span> n, <span class="at">fill =</span> vacc_group3, <span class="at">label =</span> race)) <span class="sc">+</span></span>
<span id="cb377-3616"><a href="#cb377-3616" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_treemap</span>() <span class="sc">+</span></span>
<span id="cb377-3617"><a href="#cb377-3617" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_treemap_text</span>(<span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">place =</span> <span class="st">"centre"</span>, <span class="at">grow =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb377-3618"><a href="#cb377-3618" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb377-3619"><a href="#cb377-3619" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Treemap: Vaccination by Race and Vaccine Group"</span>,</span>
<span id="cb377-3620"><a href="#cb377-3620" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill  =</span> <span class="st">"Vaccine Group"</span></span>
<span id="cb377-3621"><a href="#cb377-3621" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb377-3622"><a href="#cb377-3622" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb377-3623"><a href="#cb377-3623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3624"><a href="#cb377-3624" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p)</span>
<span id="cb377-3625"><a href="#cb377-3625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3626"><a href="#cb377-3626" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> (p)</span>
<span id="cb377-3627"><a href="#cb377-3627" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3628"><a href="#cb377-3628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3631"><a href="#cb377-3631" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3632"><a href="#cb377-3632" aria-hidden="true" tabindex="-1"></a><span class="co">#  Treemap - with Labels Showing Counts and Proportions by Race and vaccine Group</span></span>
<span id="cb377-3633"><a href="#cb377-3633" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3634"><a href="#cb377-3634" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(race, vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb377-3635"><a href="#cb377-3635" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb377-3636"><a href="#cb377-3636" aria-hidden="true" tabindex="-1"></a>    <span class="at">race =</span> <span class="fu">str_to_title</span>(race),</span>
<span id="cb377-3637"><a href="#cb377-3637" aria-hidden="true" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">sum</span>(n),</span>
<span id="cb377-3638"><a href="#cb377-3638" aria-hidden="true" tabindex="-1"></a>    <span class="at">proportion =</span> n <span class="sc">/</span> total,</span>
<span id="cb377-3639"><a href="#cb377-3639" aria-hidden="true" tabindex="-1"></a>    <span class="at">label_text =</span> <span class="fu">paste0</span>(race, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, n, <span class="st">" ("</span>, <span class="fu">percent</span>(proportion, <span class="at">accuracy =</span> <span class="fl">0.1</span>), <span class="st">")"</span>)</span>
<span id="cb377-3640"><a href="#cb377-3640" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb377-3641"><a href="#cb377-3641" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">area =</span> n, <span class="at">fill =</span> vacc_group3, <span class="at">label =</span> label_text)) <span class="sc">+</span></span>
<span id="cb377-3642"><a href="#cb377-3642" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_treemap</span>() <span class="sc">+</span></span>
<span id="cb377-3643"><a href="#cb377-3643" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_treemap_text</span>(<span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">place =</span> <span class="st">"centre"</span>, <span class="at">grow =</span> <span class="cn">TRUE</span>, <span class="at">reflow =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb377-3644"><a href="#cb377-3644" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb377-3645"><a href="#cb377-3645" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Treemap: Vaccination by Race and Vaccine Group"</span>,</span>
<span id="cb377-3646"><a href="#cb377-3646" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Vaccine Group"</span></span>
<span id="cb377-3647"><a href="#cb377-3647" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb377-3648"><a href="#cb377-3648" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb377-3649"><a href="#cb377-3649" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3650"><a href="#cb377-3650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3651"><a href="#cb377-3651" aria-hidden="true" tabindex="-1"></a>**Correlation Heatmap ‚Äì Numeric Variables**</span>
<span id="cb377-3652"><a href="#cb377-3652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3653"><a href="#cb377-3653" aria-hidden="true" tabindex="-1"></a>This heatmap displays Pearson correlation coefficients between selected numeric variables. Strong positive or negative values help identify relationships worth further analysis.</span>
<span id="cb377-3654"><a href="#cb377-3654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3655"><a href="#cb377-3655" aria-hidden="true" tabindex="-1"></a>The heatmap below displays **Pearson correlation coefficients** between selected numeric variables: **age**, **income**, **healthcare expenses**, and **healthcare coverage**. Correlation values range from **-1 to 1**, where values closer to ¬±1 indicate stronger relationships.</span>
<span id="cb377-3656"><a href="#cb377-3656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3657"><a href="#cb377-3657" aria-hidden="true" tabindex="-1"></a>**Key Observations:**</span>
<span id="cb377-3658"><a href="#cb377-3658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3659"><a href="#cb377-3659" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Age and healthcare coverage** show a **strong positive correlation** (**0.65**), suggesting that as individuals age, they are more likely to have greater healthcare coverage.</span>
<span id="cb377-3660"><a href="#cb377-3660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3661"><a href="#cb377-3661" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Age and healthcare expenses** are also **positively correlated** (**0.66**), indicating that older individuals tend to incur higher healthcare costs.</span>
<span id="cb377-3662"><a href="#cb377-3662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3663"><a href="#cb377-3663" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Healthcare coverage and healthcare expenses** show a **moderate positive correlation** (**0.44**), which may reflect that those with more coverage also utilize healthcare services more frequently or thoroughly.</span>
<span id="cb377-3664"><a href="#cb377-3664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3665"><a href="#cb377-3665" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Income** is **not strongly correlated** with any other variable in this set, with the highest being a negligible **0.02** with healthcare coverage and a slightly negative value with age (**-0.04**) and expenses (**-0.05**).</span>
<span id="cb377-3666"><a href="#cb377-3666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3667"><a href="#cb377-3667" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3668"><a href="#cb377-3668" aria-hidden="true" tabindex="-1"></a><span class="in">**Interpretation:**</span></span>
<span id="cb377-3669"><a href="#cb377-3669" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3670"><a href="#cb377-3670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3671"><a href="#cb377-3671" aria-hidden="true" tabindex="-1"></a>This heatmap highlights potential relationships that may inform further analysis‚Äîespecially the connections between **age, coverage, and expenses**. In contrast, **income appears relatively independent** of the other variables in this dataset.</span>
<span id="cb377-3672"><a href="#cb377-3672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3675"><a href="#cb377-3675" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3676"><a href="#cb377-3676" aria-hidden="true" tabindex="-1"></a>numeric_vars <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3677"><a href="#cb377-3677" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, income, healthcare_expenses, healthcare_coverage) <span class="sc">%&gt;%</span></span>
<span id="cb377-3678"><a href="#cb377-3678" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()</span>
<span id="cb377-3679"><a href="#cb377-3679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3680"><a href="#cb377-3680" aria-hidden="true" tabindex="-1"></a>cor_matrix <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">cor</span>(numeric_vars), <span class="dv">2</span>)</span>
<span id="cb377-3681"><a href="#cb377-3681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3682"><a href="#cb377-3682" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(<span class="fu">as.table</span>(cor_matrix)) <span class="sc">%&gt;%</span></span>
<span id="cb377-3683"><a href="#cb377-3683" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Var1 =</span> Var1, <span class="at">Var2 =</span> Var2, <span class="at">Correlation =</span> Freq) <span class="sc">%&gt;%</span></span>
<span id="cb377-3684"><a href="#cb377-3684" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Var1, <span class="at">y =</span> Var2, <span class="at">fill =</span> Correlation)) <span class="sc">+</span></span>
<span id="cb377-3685"><a href="#cb377-3685" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb377-3686"><a href="#cb377-3686" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Correlation), <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb377-3687"><a href="#cb377-3687" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">"red"</span>, <span class="at">high =</span> <span class="st">"blue"</span>, <span class="at">mid =</span> <span class="st">"white"</span>, <span class="at">midpoint =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb377-3688"><a href="#cb377-3688" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Correlation Heatmap of Numeric Variables"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb377-3689"><a href="#cb377-3689" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb377-3690"><a href="#cb377-3690" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3691"><a href="#cb377-3691" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3692"><a href="#cb377-3692" aria-hidden="true" tabindex="-1"></a>**Ridgeline Plot ‚Äì Age by Vaccine Group**</span>
<span id="cb377-3693"><a href="#cb377-3693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3694"><a href="#cb377-3694" aria-hidden="true" tabindex="-1"></a>This ridgeline plot shows the age distribution for each vaccine group. It highlights where age densities differ across categories.</span>
<span id="cb377-3695"><a href="#cb377-3695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3696"><a href="#cb377-3696" aria-hidden="true" tabindex="-1"></a>The ridgeline plot below shows **age distributions** for three vaccine groups: **Childhood**, **Other**, and **Respiratory**. Each layer represents the **density of ages** within a vaccine category, allowing for visual comparison of where individuals are most commonly vaccinated within each group.</span>
<span id="cb377-3697"><a href="#cb377-3697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3698"><a href="#cb377-3698" aria-hidden="true" tabindex="-1"></a>**Key Observations:**</span>
<span id="cb377-3699"><a href="#cb377-3699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3700"><a href="#cb377-3700" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Childhood vaccines** show a clear peak at very young ages, as expected. The density drops rapidly as age increases, with a small secondary bump around middle age, possibly reflecting catch-up vaccinations or data irregularities.</span>
<span id="cb377-3701"><a href="#cb377-3701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3702"><a href="#cb377-3702" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Other vaccines** have a **bimodal distribution** with one peak in younger adults and another in older adults (around 70+ years), suggesting they are used across multiple life stages.</span>
<span id="cb377-3703"><a href="#cb377-3703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3704"><a href="#cb377-3704" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Respiratory vaccines** have a **broad distribution**, with a peak density around **60‚Äì70 years**, consistent with routine respiratory vaccinations for older adults (e.g., influenza or pneumococcal vaccines).</span>
<span id="cb377-3705"><a href="#cb377-3705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3706"><a href="#cb377-3706" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3707"><a href="#cb377-3707" aria-hidden="true" tabindex="-1"></a><span class="in">**Interpretation:**</span></span>
<span id="cb377-3708"><a href="#cb377-3708" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3709"><a href="#cb377-3709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3710"><a href="#cb377-3710" aria-hidden="true" tabindex="-1"></a>This visualization effectively highlights **differences in age targeting** across vaccine groups. It shows that:</span>
<span id="cb377-3711"><a href="#cb377-3711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3712"><a href="#cb377-3712" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Childhood vaccines are concentrated in early life,</span>
<span id="cb377-3713"><a href="#cb377-3713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3714"><a href="#cb377-3714" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Other vaccines are used more broadly across age ranges, and</span>
<span id="cb377-3715"><a href="#cb377-3715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3716"><a href="#cb377-3716" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Respiratory vaccines are predominantly administered to older populations.</span>
<span id="cb377-3717"><a href="#cb377-3717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3720"><a href="#cb377-3720" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3721"><a href="#cb377-3721" aria-hidden="true" tabindex="-1"></a>vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3722"><a href="#cb377-3722" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vacc_group3 =</span> stringr<span class="sc">::</span><span class="fu">str_to_title</span>(vacc_group3)) <span class="sc">%&gt;%</span></span>
<span id="cb377-3723"><a href="#cb377-3723" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> vacc_group3, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb377-3724"><a href="#cb377-3724" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>(<span class="at">scale =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb377-3725"><a href="#cb377-3725" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Ridgeline Plot: Age Distribution by Vaccine Group"</span>, <span class="at">x =</span> <span class="st">"Age"</span>, <span class="at">y =</span> <span class="st">"Vaccine Group"</span>) <span class="sc">+</span></span>
<span id="cb377-3726"><a href="#cb377-3726" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb377-3727"><a href="#cb377-3727" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb377-3728"><a href="#cb377-3728" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3729"><a href="#cb377-3729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3730"><a href="#cb377-3730" aria-hidden="true" tabindex="-1"></a>**Interactive Plot ‚Äì Income vs Age by Race**</span>
<span id="cb377-3731"><a href="#cb377-3731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3732"><a href="#cb377-3732" aria-hidden="true" tabindex="-1"></a>This interactive scatter plot shows the relationship between income and age, colored by race. Hovering reveals more details including group and income.</span>
<span id="cb377-3733"><a href="#cb377-3733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3736"><a href="#cb377-3736" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3737"><a href="#cb377-3737" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3738"><a href="#cb377-3738" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> stringr<span class="sc">::</span><span class="fu">str_to_title</span>(race)) <span class="sc">%&gt;%</span></span>
<span id="cb377-3739"><a href="#cb377-3739" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> income, <span class="at">y =</span> age, <span class="at">color =</span> race,</span>
<span id="cb377-3740"><a href="#cb377-3740" aria-hidden="true" tabindex="-1"></a>             <span class="at">text =</span> <span class="fu">paste</span>(<span class="st">"Race:"</span>, race,</span>
<span id="cb377-3741"><a href="#cb377-3741" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"&lt;br&gt;Group:"</span>, vacc_group3,</span>
<span id="cb377-3742"><a href="#cb377-3742" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"&lt;br&gt;Income:"</span>, income,</span>
<span id="cb377-3743"><a href="#cb377-3743" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"&lt;br&gt;Age:"</span>, age))) <span class="sc">+</span></span>
<span id="cb377-3744"><a href="#cb377-3744" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb377-3745"><a href="#cb377-3745" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"gray30"</span>) <span class="sc">+</span></span>
<span id="cb377-3746"><a href="#cb377-3746" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Interactive: Income vs Age by Race"</span>,</span>
<span id="cb377-3747"><a href="#cb377-3747" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Income"</span>, <span class="at">y =</span> <span class="st">"Age"</span>, <span class="at">color =</span> <span class="st">"Race"</span>) <span class="sc">+</span></span>
<span id="cb377-3748"><a href="#cb377-3748" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb377-3749"><a href="#cb377-3749" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb377-3750"><a href="#cb377-3750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3751"><a href="#cb377-3751" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span>
<span id="cb377-3752"><a href="#cb377-3752" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(p)</span>
<span id="cb377-3753"><a href="#cb377-3753" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3754"><a href="#cb377-3754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3755"><a href="#cb377-3755" aria-hidden="true" tabindex="-1"></a>**Animation ‚Äì Vaccination Trends Over Years**</span>
<span id="cb377-3756"><a href="#cb377-3756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3757"><a href="#cb377-3757" aria-hidden="true" tabindex="-1"></a>This animation shows how vaccination counts across vaccine groups change over time. It helps spot temporal trends and emerging patterns.</span>
<span id="cb377-3758"><a href="#cb377-3758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3761"><a href="#cb377-3761" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3762"><a href="#cb377-3762" aria-hidden="true" tabindex="-1"></a>anim_plot <span class="ot">&lt;-</span> vacc_1524 <span class="sc">%&gt;%</span></span>
<span id="cb377-3763"><a href="#cb377-3763" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vacc_year =</span> <span class="fu">as.integer</span>(<span class="fu">floor</span>(vacc_year))) <span class="sc">%&gt;%</span></span>
<span id="cb377-3764"><a href="#cb377-3764" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(vacc_year, vacc_group3) <span class="sc">%&gt;%</span></span>
<span id="cb377-3765"><a href="#cb377-3765" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> vacc_group3, <span class="at">y =</span> n, <span class="at">fill =</span> vacc_group3)) <span class="sc">+</span></span>
<span id="cb377-3766"><a href="#cb377-3766" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb377-3767"><a href="#cb377-3767" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">'Year: {frame_time}'</span>, <span class="at">x =</span> <span class="st">'Vaccine Group'</span>, <span class="at">y =</span> <span class="st">'Count'</span>) <span class="sc">+</span></span>
<span id="cb377-3768"><a href="#cb377-3768" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb377-3769"><a href="#cb377-3769" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_time</span>(vacc_year) <span class="sc">+</span></span>
<span id="cb377-3770"><a href="#cb377-3770" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ease_aes</span>(<span class="st">'linear'</span>)</span>
<span id="cb377-3771"><a href="#cb377-3771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3772"><a href="#cb377-3772" aria-hidden="true" tabindex="-1"></a>anim_file <span class="ot">&lt;-</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">".gif"</span>)</span>
<span id="cb377-3773"><a href="#cb377-3773" aria-hidden="true" tabindex="-1"></a>anim <span class="ot">&lt;-</span> <span class="fu">animate</span>(anim_plot, <span class="at">nframes =</span> <span class="dv">100</span>, <span class="at">fps =</span> <span class="dv">10</span>, <span class="at">renderer =</span> <span class="fu">gifski_renderer</span>(anim_file))</span>
<span id="cb377-3774"><a href="#cb377-3774" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(anim)</span>
<span id="cb377-3775"><a href="#cb377-3775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3776"><a href="#cb377-3776" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(anim_plot, anim_file, anim)</span>
<span id="cb377-3777"><a href="#cb377-3777" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3778"><a href="#cb377-3778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3779"><a href="#cb377-3779" aria-hidden="true" tabindex="-1"></a>**Animation ‚Äì Breast Cancer Screening Uptake by State**</span>
<span id="cb377-3780"><a href="#cb377-3780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3781"><a href="#cb377-3781" aria-hidden="true" tabindex="-1"></a>This animated bar chart shows breast cancer screening uptake over time for each Australian state. It uses faceting to compare regional trends.</span>
<span id="cb377-3782"><a href="#cb377-3782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3785"><a href="#cb377-3785" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb377-3786"><a href="#cb377-3786" aria-hidden="true" tabindex="-1"></a>breast_anim <span class="ot">&lt;-</span> breast_cancer_data <span class="sc">%&gt;%</span></span>
<span id="cb377-3787"><a href="#cb377-3787" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Other"</span>, <span class="st">"Unknown"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb377-3788"><a href="#cb377-3788" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_4digit =</span> <span class="fu">as.integer</span>(year_4digit)) <span class="sc">%&gt;%</span></span>
<span id="cb377-3789"><a href="#cb377-3789" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year_4digit) <span class="sc">%&gt;%</span></span>
<span id="cb377-3790"><a href="#cb377-3790" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_screened =</span> <span class="fu">sum</span>(part50_74, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb377-3791"><a href="#cb377-3791" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_4digit, <span class="at">y =</span> total_screened, <span class="at">fill =</span> state)) <span class="sc">+</span></span>
<span id="cb377-3792"><a href="#cb377-3792" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb377-3793"><a href="#cb377-3793" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> state) <span class="sc">+</span></span>
<span id="cb377-3794"><a href="#cb377-3794" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">'Year: {frame_time}'</span>, <span class="at">x =</span> <span class="st">'Year'</span>, <span class="at">y =</span> <span class="st">'Women Screened (50‚Äì74 yrs)'</span>) <span class="sc">+</span></span>
<span id="cb377-3795"><a href="#cb377-3795" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb377-3796"><a href="#cb377-3796" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_time</span>(year_4digit) <span class="sc">+</span></span>
<span id="cb377-3797"><a href="#cb377-3797" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ease_aes</span>(<span class="st">'linear'</span>)</span>
<span id="cb377-3798"><a href="#cb377-3798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3799"><a href="#cb377-3799" aria-hidden="true" tabindex="-1"></a>screening_gif <span class="ot">&lt;-</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">".gif"</span>)</span>
<span id="cb377-3800"><a href="#cb377-3800" aria-hidden="true" tabindex="-1"></a>anim_screen <span class="ot">&lt;-</span> <span class="fu">animate</span>(breast_anim, <span class="at">nframes =</span> <span class="dv">100</span>, <span class="at">fps =</span> <span class="dv">10</span>, <span class="at">renderer =</span> <span class="fu">gifski_renderer</span>(screening_gif))</span>
<span id="cb377-3801"><a href="#cb377-3801" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(anim_screen)</span>
<span id="cb377-3802"><a href="#cb377-3802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3803"><a href="#cb377-3803" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(breast_anim, screening_gif, anim_screen)</span>
<span id="cb377-3804"><a href="#cb377-3804" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3805"><a href="#cb377-3805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3806"><a href="#cb377-3806" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ Formatting, themes and fonts of figures**</span></span>
<span id="cb377-3807"><a href="#cb377-3807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3808"><a href="#cb377-3808" aria-hidden="true" tabindex="-1"></a>**Heatmap ‚Äì Number of Vaccinations by Month and Weekday** Highlights vaccination activity patterns by day of week and month. Darker tiles represent higher counts.</span>
<span id="cb377-3809"><a href="#cb377-3809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3810"><a href="#cb377-3810" aria-hidden="true" tabindex="-1"></a>The heatmap below demonstrates the **number of vaccinations administered** across **each day of the week** and **each calendar month**. Color intensity indicates the relative number of vaccinations, with darker red representing higher uptake and pale yellow representing lower activity.</span>
<span id="cb377-3811"><a href="#cb377-3811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3812"><a href="#cb377-3812" aria-hidden="true" tabindex="-1"></a>**Key Observations:**</span>
<span id="cb377-3813"><a href="#cb377-3813" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3814"><a href="#cb377-3814" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Saturday consistently shows high uptake**, particularly in **October, September, and July**, suggesting that weekends may be more accessible or preferred for vaccination appointments.</span>
<span id="cb377-3815"><a href="#cb377-3815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3816"><a href="#cb377-3816" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Tuesday in May** and **Wednesday in August** also show pronounced peaks, likely linked to specific campaign efforts or seasonal programs.</span>
<span id="cb377-3817"><a href="#cb377-3817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3818"><a href="#cb377-3818" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Thursday and Friday** generally have moderate activity, while **Sunday and Monday** tend to have lower vaccination counts across most months.</span>
<span id="cb377-3819"><a href="#cb377-3819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3820"><a href="#cb377-3820" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Overall, the **summer and early fall months (July to October)** show increased uptake across several weekdays, possibly aligning with back-to-school vaccination drives or respiratory vaccine rollouts.</span>
<span id="cb377-3821"><a href="#cb377-3821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3822"><a href="#cb377-3822" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb377-3823"><a href="#cb377-3823" aria-hidden="true" tabindex="-1"></a><span class="in">**Interpretation:**</span></span>
<span id="cb377-3824"><a href="#cb377-3824" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3825"><a href="#cb377-3825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3826"><a href="#cb377-3826" aria-hidden="true" tabindex="-1"></a>The plot reveals both **seasonal** and **weekly rhythms** in vaccination behavior. Recognizing these patterns can guide better **scheduling of clinics**, **resource planning**, and **public messaging** to align with high-demand periods and improve overall vaccine accessibility.</span>
<span id="cb377-3827"><a href="#cb377-3827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3828"><a href="#cb377-3828" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb377-3829"><a href="#cb377-3829" aria-hidden="true" tabindex="-1"></a><span class="in"># ................Without  Adding the long Title ........................................................</span></span>
<span id="cb377-3830"><a href="#cb377-3830" aria-hidden="true" tabindex="-1"></a><span class="in"># ..............................................................................................</span></span>
<span id="cb377-3831"><a href="#cb377-3831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3832"><a href="#cb377-3832" aria-hidden="true" tabindex="-1"></a><span class="in"># --- Order weekday and month factors for proper axis display ---</span></span>
<span id="cb377-3833"><a href="#cb377-3833" aria-hidden="true" tabindex="-1"></a><span class="in"># --- Convert original vaccination date to Eastern Time (Massachusetts local time) ---</span></span>
<span id="cb377-3834"><a href="#cb377-3834" aria-hidden="true" tabindex="-1"></a><span class="in"># Assumes vacc_date is POSIXct or character in UTC or local system time</span></span>
<span id="cb377-3835"><a href="#cb377-3835" aria-hidden="true" tabindex="-1"></a><span class="in">vacc_1524 &lt;- vacc_1524 %&gt;%</span></span>
<span id="cb377-3836"><a href="#cb377-3836" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb377-3837"><a href="#cb377-3837" aria-hidden="true" tabindex="-1"></a><span class="in">    vacc_datetime_et = with_tz(as.POSIXct(vacc_date, tz = "UTC"), tzone = "America/New_York"),  # Adjust timezone to Eastern Time</span></span>
<span id="cb377-3838"><a href="#cb377-3838" aria-hidden="true" tabindex="-1"></a><span class="in">    vacc_weekday = wday(vacc_datetime_et, label = TRUE, abbr = FALSE),                          # Extract weekday (e.g., Monday)</span></span>
<span id="cb377-3839"><a href="#cb377-3839" aria-hidden="true" tabindex="-1"></a><span class="in">    vacc_month_name = month(vacc_datetime_et, label = TRUE, abbr = FALSE)                       # Extract month (e.g., January)</span></span>
<span id="cb377-3840"><a href="#cb377-3840" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-3841"><a href="#cb377-3841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3842"><a href="#cb377-3842" aria-hidden="true" tabindex="-1"></a><span class="in"># --- Order weekday and month factors for proper axis display ---</span></span>
<span id="cb377-3843"><a href="#cb377-3843" aria-hidden="true" tabindex="-1"></a><span class="in">vacc_1524 &lt;- vacc_1524 %&gt;%</span></span>
<span id="cb377-3844"><a href="#cb377-3844" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb377-3845"><a href="#cb377-3845" aria-hidden="true" tabindex="-1"></a><span class="in">    vacc_month_name = factor(vacc_month_name, levels = month.name),  # Ensure months are in calendar order</span></span>
<span id="cb377-3846"><a href="#cb377-3846" aria-hidden="true" tabindex="-1"></a><span class="in">    vacc_weekday = factor(vacc_weekday, levels = c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"))  # Ensure weekdays are in logical order</span></span>
<span id="cb377-3847"><a href="#cb377-3847" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-3848"><a href="#cb377-3848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3849"><a href="#cb377-3849" aria-hidden="true" tabindex="-1"></a><span class="in"># --- Create heatmap of vaccination counts by weekday and month ---</span></span>
<span id="cb377-3850"><a href="#cb377-3850" aria-hidden="true" tabindex="-1"></a><span class="in">vacc_1524 %&gt;%</span></span>
<span id="cb377-3851"><a href="#cb377-3851" aria-hidden="true" tabindex="-1"></a><span class="in">  count(vacc_weekday, vacc_month_name) %&gt;%  # Count number of vaccinations by weekday and month</span></span>
<span id="cb377-3852"><a href="#cb377-3852" aria-hidden="true" tabindex="-1"></a><span class="in">  ggplot(aes(x = vacc_weekday, y = vacc_month_name, fill = n)) +     # Map weekday to x-axis, month to y-axis, and fill by count</span></span>
<span id="cb377-3853"><a href="#cb377-3853" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_tile(color = "white") +                                       # Draw heatmap tiles with white border for readability</span></span>
<span id="cb377-3854"><a href="#cb377-3854" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_fill_gradientn(                                              # Use custom yellow-to-red color scale</span></span>
<span id="cb377-3855"><a href="#cb377-3855" aria-hidden="true" tabindex="-1"></a><span class="in">    colors = c("#ffffcc", "#ffeda0", "#feb24c", "#f03b20", "#bd0026"),</span></span>
<span id="cb377-3856"><a href="#cb377-3856" aria-hidden="true" tabindex="-1"></a><span class="in">    breaks = scales::pretty_breaks(n = 5),                           # Auto-select 5 good breakpoints for legend</span></span>
<span id="cb377-3857"><a href="#cb377-3857" aria-hidden="true" tabindex="-1"></a><span class="in">    name = "Vaccinated Number"                                       # Legend title</span></span>
<span id="cb377-3858"><a href="#cb377-3858" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb377-3859"><a href="#cb377-3859" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb377-3860"><a href="#cb377-3860" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Vaccination Uptake by Weekday and Month",               # Plot title</span></span>
<span id="cb377-3861"><a href="#cb377-3861" aria-hidden="true" tabindex="-1"></a><span class="in">    subtitle = "Timestamps interpreted as US Eastern Time (Massachusetts)",  # Timezone context</span></span>
<span id="cb377-3862"><a href="#cb377-3862" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Weekday", y = "Month", fill = "Vaccinated Number",          # Axis and legend labels</span></span>
<span id="cb377-3863"><a href="#cb377-3863" aria-hidden="true" tabindex="-1"></a><span class="in">    caption = "Note: Original timestamps converted from UTC to America/New_York"</span></span>
<span id="cb377-3864"><a href="#cb377-3864" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb377-3865"><a href="#cb377-3865" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb377-3866"><a href="#cb377-3866" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(</span></span>
<span id="cb377-3867"><a href="#cb377-3867" aria-hidden="true" tabindex="-1"></a><span class="in">    text = element_text(family = "Times New Roman"),                 # Font style</span></span>
<span id="cb377-3868"><a href="#cb377-3868" aria-hidden="true" tabindex="-1"></a><span class="in">    legend.position = "bottom",                                      # Move legend below the plot</span></span>
<span id="cb377-3869"><a href="#cb377-3869" aria-hidden="true" tabindex="-1"></a><span class="in">    axis.text.x = element_text(angle = 45, hjust = 1, size = 10, face = "bold"),  # X-axis label formatting</span></span>
<span id="cb377-3870"><a href="#cb377-3870" aria-hidden="true" tabindex="-1"></a><span class="in">    axis.text.y = element_text(size = 10, face = "bold"),            # Y-axis label formatting</span></span>
<span id="cb377-3871"><a href="#cb377-3871" aria-hidden="true" tabindex="-1"></a><span class="in">    axis.title.x = element_text(face = "bold", size = 11),</span></span>
<span id="cb377-3872"><a href="#cb377-3872" aria-hidden="true" tabindex="-1"></a><span class="in">    axis.title.y = element_text(face = "bold", size = 11),</span></span>
<span id="cb377-3873"><a href="#cb377-3873" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.title = element_text(size = 12, face = "bold"),</span></span>
<span id="cb377-3874"><a href="#cb377-3874" aria-hidden="true" tabindex="-1"></a><span class="in">    legend.title = element_text(size = 10),</span></span>
<span id="cb377-3875"><a href="#cb377-3875" aria-hidden="true" tabindex="-1"></a><span class="in">    legend.text = element_text(size = 8)</span></span>
<span id="cb377-3876"><a href="#cb377-3876" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-3877"><a href="#cb377-3877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3878"><a href="#cb377-3878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3879"><a href="#cb377-3879" aria-hidden="true" tabindex="-1"></a><span class="in"># Use figure title below to render in Quarto or Rmarkdown </span></span>
<span id="cb377-3880"><a href="#cb377-3880" aria-hidden="true" tabindex="-1"></a><span class="in">#"Figure XX: Vaccination uptake by weekday and month among individuals aged 15‚Äì24, 2016‚Äì2024."</span></span>
<span id="cb377-3881"><a href="#cb377-3881" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3882"><a href="#cb377-3882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3883"><a href="#cb377-3883" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE, echo=FALSE}</span></span>
<span id="cb377-3884"><a href="#cb377-3884" aria-hidden="true" tabindex="-1"></a><span class="in"># Install patchwork if not already installed</span></span>
<span id="cb377-3885"><a href="#cb377-3885" aria-hidden="true" tabindex="-1"></a><span class="in">if (!requireNamespace("patchwork", quietly = TRUE)) {install.packages("patchwork")}</span></span>
<span id="cb377-3886"><a href="#cb377-3886" aria-hidden="true" tabindex="-1"></a><span class="in">library(patchwork)</span></span>
<span id="cb377-3887"><a href="#cb377-3887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3888"><a href="#cb377-3888" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3889"><a href="#cb377-3889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3890"><a href="#cb377-3890" aria-hidden="true" tabindex="-1"></a><span class="in">```{r warning=FALSE, message=FALSE}</span></span>
<span id="cb377-3891"><a href="#cb377-3891" aria-hidden="true" tabindex="-1"></a><span class="in"># ................Adding the long Title ........................................................</span></span>
<span id="cb377-3892"><a href="#cb377-3892" aria-hidden="true" tabindex="-1"></a><span class="in"># ..............................................................................................</span></span>
<span id="cb377-3893"><a href="#cb377-3893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3894"><a href="#cb377-3894" aria-hidden="true" tabindex="-1"></a><span class="in"># --- Convert original vaccination date to Eastern Time (Massachusetts local time) ---</span></span>
<span id="cb377-3895"><a href="#cb377-3895" aria-hidden="true" tabindex="-1"></a><span class="in"># Assumes vacc_date is POSIXct or character in UTC or local system time</span></span>
<span id="cb377-3896"><a href="#cb377-3896" aria-hidden="true" tabindex="-1"></a><span class="in">vacc_1524 &lt;- vacc_1524 %&gt;%</span></span>
<span id="cb377-3897"><a href="#cb377-3897" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb377-3898"><a href="#cb377-3898" aria-hidden="true" tabindex="-1"></a><span class="in">    vacc_datetime_et = with_tz(as.POSIXct(vacc_date, tz = "UTC"), tzone = "America/New_York"),  # Adjust timezone to Eastern Time</span></span>
<span id="cb377-3899"><a href="#cb377-3899" aria-hidden="true" tabindex="-1"></a><span class="in">    vacc_weekday = wday(vacc_datetime_et, label = TRUE, abbr = FALSE),                          # Extract weekday (e.g., Monday)</span></span>
<span id="cb377-3900"><a href="#cb377-3900" aria-hidden="true" tabindex="-1"></a><span class="in">    vacc_month_name = month(vacc_datetime_et, label = TRUE, abbr = FALSE)                       # Extract month (e.g., January)</span></span>
<span id="cb377-3901"><a href="#cb377-3901" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-3902"><a href="#cb377-3902" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3903"><a href="#cb377-3903" aria-hidden="true" tabindex="-1"></a><span class="in"># --- Order weekday and month factors for proper axis display ---</span></span>
<span id="cb377-3904"><a href="#cb377-3904" aria-hidden="true" tabindex="-1"></a><span class="in">vacc_1524 &lt;- vacc_1524 %&gt;%</span></span>
<span id="cb377-3905"><a href="#cb377-3905" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb377-3906"><a href="#cb377-3906" aria-hidden="true" tabindex="-1"></a><span class="in">    vacc_month_name = factor(vacc_month_name, levels = month.name),  # Ensure months are in calendar order</span></span>
<span id="cb377-3907"><a href="#cb377-3907" aria-hidden="true" tabindex="-1"></a><span class="in">    vacc_weekday = factor(vacc_weekday, levels = c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"))  # Ensure weekdays are in logical order</span></span>
<span id="cb377-3908"><a href="#cb377-3908" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-3909"><a href="#cb377-3909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3910"><a href="#cb377-3910" aria-hidden="true" tabindex="-1"></a><span class="in"># --- Create heatmap of vaccination counts by weekday and month ---</span></span>
<span id="cb377-3911"><a href="#cb377-3911" aria-hidden="true" tabindex="-1"></a><span class="in">p &lt;- vacc_1524 %&gt;%</span></span>
<span id="cb377-3912"><a href="#cb377-3912" aria-hidden="true" tabindex="-1"></a><span class="in">  count(vacc_weekday, vacc_month_name) %&gt;%  # Count number of vaccinations by weekday and month</span></span>
<span id="cb377-3913"><a href="#cb377-3913" aria-hidden="true" tabindex="-1"></a><span class="in">  ggplot(aes(x = vacc_weekday, y = vacc_month_name, fill = n)) +     # Map weekday to x-axis, month to y-axis, and fill by count</span></span>
<span id="cb377-3914"><a href="#cb377-3914" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_tile(color = "white") +                                       # Draw heatmap tiles with white border for readability</span></span>
<span id="cb377-3915"><a href="#cb377-3915" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_fill_gradientn(                                              # Use custom yellow-to-red color scale</span></span>
<span id="cb377-3916"><a href="#cb377-3916" aria-hidden="true" tabindex="-1"></a><span class="in">    colors = c("#ffffcc", "#ffeda0", "#feb24c", "#f03b20", "#bd0026"),</span></span>
<span id="cb377-3917"><a href="#cb377-3917" aria-hidden="true" tabindex="-1"></a><span class="in">    breaks = scales::pretty_breaks(n = 5),                           # Auto-select 5 good breakpoints for legend</span></span>
<span id="cb377-3918"><a href="#cb377-3918" aria-hidden="true" tabindex="-1"></a><span class="in">    name = "Vaccinated Number"                                       # Legend title</span></span>
<span id="cb377-3919"><a href="#cb377-3919" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb377-3920"><a href="#cb377-3920" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb377-3921"><a href="#cb377-3921" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Vaccination Uptake by Weekday and Month",               # Plot title</span></span>
<span id="cb377-3922"><a href="#cb377-3922" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Weekday", y = "Month", fill = "Vaccinated Number"           # Axis and legend labels</span></span>
<span id="cb377-3923"><a href="#cb377-3923" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb377-3924"><a href="#cb377-3924" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb377-3925"><a href="#cb377-3925" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(</span></span>
<span id="cb377-3926"><a href="#cb377-3926" aria-hidden="true" tabindex="-1"></a><span class="in">    text = element_text(family = "Times New Roman"),                 # Font style</span></span>
<span id="cb377-3927"><a href="#cb377-3927" aria-hidden="true" tabindex="-1"></a><span class="in">    legend.position = "bottom",                                      # Move legend below the plot</span></span>
<span id="cb377-3928"><a href="#cb377-3928" aria-hidden="true" tabindex="-1"></a><span class="in">    axis.text.x = element_text(angle = 45, hjust = 1, size = 10, face = "bold"),  # X-axis label formatting</span></span>
<span id="cb377-3929"><a href="#cb377-3929" aria-hidden="true" tabindex="-1"></a><span class="in">    axis.text.y = element_text(size = 10, face = "bold"),            # Y-axis label formatting</span></span>
<span id="cb377-3930"><a href="#cb377-3930" aria-hidden="true" tabindex="-1"></a><span class="in">    axis.title.x = element_text(face = "bold", size = 11),</span></span>
<span id="cb377-3931"><a href="#cb377-3931" aria-hidden="true" tabindex="-1"></a><span class="in">    axis.title.y = element_text(face = "bold", size = 11),</span></span>
<span id="cb377-3932"><a href="#cb377-3932" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.title = element_text(size = 12, face = "bold"),</span></span>
<span id="cb377-3933"><a href="#cb377-3933" aria-hidden="true" tabindex="-1"></a><span class="in">    legend.title = element_text(size = 10),</span></span>
<span id="cb377-3934"><a href="#cb377-3934" aria-hidden="true" tabindex="-1"></a><span class="in">    legend.text = element_text(size = 8)</span></span>
<span id="cb377-3935"><a href="#cb377-3935" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-3936"><a href="#cb377-3936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3937"><a href="#cb377-3937" aria-hidden="true" tabindex="-1"></a><span class="in"># --- Add descriptive figure caption using patchwork's plot_annotation() ---</span></span>
<span id="cb377-3938"><a href="#cb377-3938" aria-hidden="true" tabindex="-1"></a><span class="in">final_plot &lt;- p + plot_annotation(</span></span>
<span id="cb377-3939"><a href="#cb377-3939" aria-hidden="true" tabindex="-1"></a><span class="in">  caption = "Figure XX: Vaccination uptake by weekday and month among individuals aged 15‚Äì24, 2016‚Äì2024.",</span></span>
<span id="cb377-3940"><a href="#cb377-3940" aria-hidden="true" tabindex="-1"></a><span class="in">  theme = theme(</span></span>
<span id="cb377-3941"><a href="#cb377-3941" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.caption = element_text(</span></span>
<span id="cb377-3942"><a href="#cb377-3942" aria-hidden="true" tabindex="-1"></a><span class="in">      size = 10, family = "Times New Roman", hjust = 0</span></span>
<span id="cb377-3943"><a href="#cb377-3943" aria-hidden="true" tabindex="-1"></a><span class="in">    )</span></span>
<span id="cb377-3944"><a href="#cb377-3944" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-3945"><a href="#cb377-3945" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb377-3946"><a href="#cb377-3946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3947"><a href="#cb377-3947" aria-hidden="true" tabindex="-1"></a><span class="in"># --- Display the final plot with caption ---</span></span>
<span id="cb377-3948"><a href="#cb377-3948" aria-hidden="true" tabindex="-1"></a><span class="in">final_plot</span></span>
<span id="cb377-3949"><a href="#cb377-3949" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3950"><a href="#cb377-3950" aria-hidden="true" tabindex="-1"></a><span class="in"># setwd ("C:/Users/User/Desktop/Materials_ Course and proposals/VIP collection for Syntax code or project titles/R codes/Data Manipulation and Wrangling")</span></span>
<span id="cb377-3951"><a href="#cb377-3951" aria-hidden="true" tabindex="-1"></a><span class="in"># </span></span>
<span id="cb377-3952"><a href="#cb377-3952" aria-hidden="true" tabindex="-1"></a><span class="in"># # Save plots</span></span>
<span id="cb377-3953"><a href="#cb377-3953" aria-hidden="true" tabindex="-1"></a><span class="in"># ggsave("Heatmap_vaccination_pattern by day and month.TIFF", plot = last_plot(), device = "tiff", width = 10, height = 6, units = "in")</span></span>
<span id="cb377-3954"><a href="#cb377-3954" aria-hidden="true" tabindex="-1"></a><span class="in"># ggsave("Heatmap_vaccination_pattern by day and month.svg", plot = last_plot(), device = "svg", width = 10, height = 6, units = "in")</span></span>
<span id="cb377-3955"><a href="#cb377-3955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3956"><a href="#cb377-3956" aria-hidden="true" tabindex="-1"></a><span class="in">rm (p, final_plot)</span></span>
<span id="cb377-3957"><a href="#cb377-3957" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-3958"><a href="#cb377-3958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3959"><a href="#cb377-3959" aria-hidden="true" tabindex="-1"></a><span class="fu">## **PART VIII: SHINY App: BUILDING WEB APPS**</span></span>
<span id="cb377-3960"><a href="#cb377-3960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3961"><a href="#cb377-3961" aria-hidden="true" tabindex="-1"></a>8.1 **UI** <span class="in">`fluidPage()`</span>, <span class="in">`sidebarLayout()`</span>, <span class="in">`sidebarPanel()`</span>, <span class="in">`mainPanel()`</span>, <span class="in">`tabsetPanel()`</span>, <span class="in">`tags$style()`</span></span>
<span id="cb377-3962"><a href="#cb377-3962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3963"><a href="#cb377-3963" aria-hidden="true" tabindex="-1"></a>8.2 **Server** <span class="in">`reactive()`</span>, <span class="in">`observeEvent()`</span>, <span class="in">`req()`</span>, <span class="in">`renderPlotly()`</span>, <span class="in">`renderDT()`</span>, <span class="in">`modalDialog()`</span>, <span class="in">`showModal()`</span></span>
<span id="cb377-3964"><a href="#cb377-3964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3965"><a href="#cb377-3965" aria-hidden="true" tabindex="-1"></a>8.3 **App Launch** <span class="in">`shinyApp(ui, server)`</span></span>
<span id="cb377-3966"><a href="#cb377-3966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3967"><a href="#cb377-3967" aria-hidden="true" tabindex="-1"></a>8.4 **Inputs** <span class="in">`sliderInput()`</span>, <span class="in">`selectInput()`</span>, <span class="in">`colourInput()`</span>, <span class="in">`actionButton()`</span>, <span class="in">`downloadButton()`</span></span>
<span id="cb377-3968"><a href="#cb377-3968" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3969"><a href="#cb377-3969" aria-hidden="true" tabindex="-1"></a>8.5 **Outputs** <span class="in">`plotlyOutput()`</span>, <span class="in">`DTOutput()`</span>, <span class="in">`datatable()`</span>, <span class="in">`formatStyle()`</span></span>
<span id="cb377-3970"><a href="#cb377-3970" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3971"><a href="#cb377-3971" aria-hidden="true" tabindex="-1"></a>8.6 **DT Features** <span class="in">`extensions = 'Buttons'`</span>, export options: <span class="in">`copy`</span>, <span class="in">`csv`</span>, <span class="in">`excel`</span>, <span class="in">`pdf`</span>, <span class="in">`print`</span></span>
<span id="cb377-3972"><a href="#cb377-3972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3973"><a href="#cb377-3973" aria-hidden="true" tabindex="-1"></a>8.7 **Styling and Themes** <span class="in">`tags$style()`</span>, (<span class="in">`shinythemes::shinytheme()`</span> ‚Äì loaded but not applied)</span>
<span id="cb377-3974"><a href="#cb377-3974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3975"><a href="#cb377-3975" aria-hidden="true" tabindex="-1"></a>Shiny is a web application framework for R that allows analysts to build interactive dashboards and tools using familiar syntax. It provides a structured approach to turning R scripts into accessible apps for broader audiences.</span>
<span id="cb377-3976"><a href="#cb377-3976" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3977"><a href="#cb377-3977" aria-hidden="true" tabindex="-1"></a>A typical Shiny app includes two core components:</span>
<span id="cb377-3978"><a href="#cb377-3978" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3979"><a href="#cb377-3979" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**UI (User Interface)**: Defines layout, inputs, and outputs shown on the screen interface.</span>
<span id="cb377-3980"><a href="#cb377-3980" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Server**: Contains the logic that processes data and responds to user interactions.</span>
<span id="cb377-3981"><a href="#cb377-3981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3982"><a href="#cb377-3982" aria-hidden="true" tabindex="-1"></a>Shiny apps can include multiple views (tabs), export buttons, dynamic filtering, charts, and customized design themes.</span>
<span id="cb377-3983"><a href="#cb377-3983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3984"><a href="#cb377-3984" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-3985"><a href="#cb377-3985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3986"><a href="#cb377-3986" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ UI Layout and Page Structure**</span></span>
<span id="cb377-3987"><a href="#cb377-3987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3988"><a href="#cb377-3988" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`fluidPage()`</span>: Defines the page layout.</span>
<span id="cb377-3989"><a href="#cb377-3989" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`sidebarLayout()`</span>, <span class="in">`sidebarPanel()`</span>, <span class="in">`mainPanel()`</span>: Organize inputs and outputs side-by-side.</span>
<span id="cb377-3990"><a href="#cb377-3990" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`tabsetPanel()`</span>: Allows tab navigation for multi-page apps.</span>
<span id="cb377-3991"><a href="#cb377-3991" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`tags$style()`</span>, <span class="in">`shinythemes::shinytheme()`</span>: Add or apply custom styles/themes.</span>
<span id="cb377-3992"><a href="#cb377-3992" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3993"><a href="#cb377-3993" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-3994"><a href="#cb377-3994" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3995"><a href="#cb377-3995" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ Server Logic and Reactivity**</span></span>
<span id="cb377-3996"><a href="#cb377-3996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3997"><a href="#cb377-3997" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`reactive()`</span>: Creates reactive data or expressions.</span>
<span id="cb377-3998"><a href="#cb377-3998" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`observeEvent()`</span>: Executes code when a trigger changes.</span>
<span id="cb377-3999"><a href="#cb377-3999" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`req()`</span>: Validates necessary input before proceeding.</span>
<span id="cb377-4000"><a href="#cb377-4000" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Output functions: <span class="in">`renderPlotly()`</span>, <span class="in">`renderDT()`</span>, <span class="in">`renderText()`</span>, <span class="in">`renderTable()`</span>.</span>
<span id="cb377-4001"><a href="#cb377-4001" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4002"><a href="#cb377-4002" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-4003"><a href="#cb377-4003" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4004"><a href="#cb377-4004" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ Inputs and Outputs**</span></span>
<span id="cb377-4005"><a href="#cb377-4005" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4006"><a href="#cb377-4006" aria-hidden="true" tabindex="-1"></a>| **Type** | **Function** | **Purpose** |</span>
<span id="cb377-4007"><a href="#cb377-4007" aria-hidden="true" tabindex="-1"></a>|------------------|----------------------|---------------------------------|</span>
<span id="cb377-4008"><a href="#cb377-4008" aria-hidden="true" tabindex="-1"></a>| Input | <span class="in">`sliderInput()`</span> | Select a numeric value or range |</span>
<span id="cb377-4009"><a href="#cb377-4009" aria-hidden="true" tabindex="-1"></a>| Input | <span class="in">`selectInput()`</span> | Dropdown menu to choose a category |</span>
<span id="cb377-4010"><a href="#cb377-4010" aria-hidden="true" tabindex="-1"></a>| Input | <span class="in">`colourInput()`</span> | Select a color |</span>
<span id="cb377-4011"><a href="#cb377-4011" aria-hidden="true" tabindex="-1"></a>| Input | <span class="in">`actionButton()`</span> | Trigger processing on click |</span>
<span id="cb377-4012"><a href="#cb377-4012" aria-hidden="true" tabindex="-1"></a>| Input | <span class="in">`downloadButton()`</span> | Download output tables or data |</span>
<span id="cb377-4013"><a href="#cb377-4013" aria-hidden="true" tabindex="-1"></a>| Output | <span class="in">`plotlyOutput()`</span> | Render interactive plots using Plotly |</span>
<span id="cb377-4014"><a href="#cb377-4014" aria-hidden="true" tabindex="-1"></a>| Output | <span class="in">`DTOutput()`</span>, <span class="in">`datatable()`</span> | Render interactive tables |</span>
<span id="cb377-4015"><a href="#cb377-4015" aria-hidden="true" tabindex="-1"></a>| Output | <span class="in">`formatStyle()`</span> | Apply styling (e.g., color, font) to tables |</span>
<span id="cb377-4016"><a href="#cb377-4016" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4017"><a href="#cb377-4017" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-4018"><a href="#cb377-4018" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4019"><a href="#cb377-4019" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ Table Export Options (DT Extension)**</span></span>
<span id="cb377-4020"><a href="#cb377-4020" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4021"><a href="#cb377-4021" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Add <span class="in">`extensions = 'Buttons'`</span> to enable table exports.</span>
<span id="cb377-4022"><a href="#cb377-4022" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Export types: <span class="in">`"copy"`</span>, <span class="in">`"csv"`</span>, <span class="in">`"excel"`</span>, <span class="in">`"pdf"`</span>, <span class="in">`"print"`</span>.</span>
<span id="cb377-4023"><a href="#cb377-4023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4024"><a href="#cb377-4024" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-4025"><a href="#cb377-4025" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4026"><a href="#cb377-4026" aria-hidden="true" tabindex="-1"></a><span class="fu">### **üîπ Launching the App**</span></span>
<span id="cb377-4027"><a href="#cb377-4027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4028"><a href="#cb377-4028" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`shinyApp(ui, server)`</span>: Runs the Shiny app combining both UI and server logic.</span>
<span id="cb377-4029"><a href="#cb377-4029" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Apps can be hosted on ShinyApps.io, internal servers, or embedded in R Markdown dashboards.</span>
<span id="cb377-4030"><a href="#cb377-4030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4031"><a href="#cb377-4031" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb377-4032"><a href="#cb377-4032" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4033"><a href="#cb377-4033" aria-hidden="true" tabindex="-1"></a>The Shiny app code below demonstrates how interactive visualizations can be built using R to present health data in an accessible and user-friendly format. Specifically, it explores breast cancer screening uptake across states, years, and age groups in Australia. The app enhances user engagement through customizable features and immediate feedback mechanisms.</span>
<span id="cb377-4034"><a href="#cb377-4034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4035"><a href="#cb377-4035" aria-hidden="true" tabindex="-1"></a>Key capabilities demonstrated include: - Dynamic UI generation using <span class="in">`fluidPage()`</span>, <span class="in">`sidebarLayout()`</span>, and interactive widgets - State selection using a dropdown (<span class="in">`selectInput()`</span>), which scales better than radio buttons - Age group filtering with a multiple selection input - Quantile-based filtering with <span class="in">`sliderInput()`</span> for rate grouping - Color customization of output using <span class="in">`colourInput()`</span> for personalizing table aesthetics - A modal popup (<span class="in">`modalDialog()`</span>) triggered by a help button to explain data sources - Export options via <span class="in">`downloadButton()`</span> and <span class="in">`DT`</span> export buttons for multiple file formats - Real-time data filtering using <span class="in">`reactive()`</span> expressions to tailor output to user input - An interactive line plot rendered via <span class="in">`plotly`</span> and <span class="in">`ggplot2`</span> for visualization - Fully styled, downloadable data table with <span class="in">`DT::renderDT()`</span> and export capabilities</span>
<span id="cb377-4036"><a href="#cb377-4036" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4037"><a href="#cb377-4037" aria-hidden="true" tabindex="-1"></a>See the live app at the following platforms</span>
<span id="cb377-4038"><a href="#cb377-4038" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4039"><a href="#cb377-4039" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**AnalyticsHub YouTube**: <span class="ot">&lt;https://studio.youtube.com/video/5V7SPBH-8BE/edit&gt;</span></span>
<span id="cb377-4040"><a href="#cb377-4040" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Live App**: <span class="ot">&lt;https://j9eu4e-habtamu-mellie0bizuayehu.shinyapps.io/Breast_Cancer_Screening_Shiny_App/&gt;</span></span>
<span id="cb377-4041"><a href="#cb377-4041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4042"><a href="#cb377-4042" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, results='hide', warning=FALSE, message=FALSE}</span></span>
<span id="cb377-4043"><a href="#cb377-4043" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4044"><a href="#cb377-4044" aria-hidden="true" tabindex="-1"></a><span class="in"># Install required packages if not already installed</span></span>
<span id="cb377-4045"><a href="#cb377-4045" aria-hidden="true" tabindex="-1"></a><span class="in">required_packages &lt;- c("shiny", "ggplot2", "plotly", "DT", "dplyr", "shinyjs", "shinyWidgets", "scales", "colourpicker")</span></span>
<span id="cb377-4046"><a href="#cb377-4046" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4047"><a href="#cb377-4047" aria-hidden="true" tabindex="-1"></a><span class="in"># Install missing ones</span></span>
<span id="cb377-4048"><a href="#cb377-4048" aria-hidden="true" tabindex="-1"></a><span class="in">new_packages &lt;- required_packages[!(required_packages %in% installed.packages()[,"Package"])]</span></span>
<span id="cb377-4049"><a href="#cb377-4049" aria-hidden="true" tabindex="-1"></a><span class="in">if(length(new_packages)) install.packages(new_packages)</span></span>
<span id="cb377-4050"><a href="#cb377-4050" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4051"><a href="#cb377-4051" aria-hidden="true" tabindex="-1"></a><span class="in"># Load packages</span></span>
<span id="cb377-4052"><a href="#cb377-4052" aria-hidden="true" tabindex="-1"></a><span class="in">library(shiny)</span></span>
<span id="cb377-4053"><a href="#cb377-4053" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggplot2)</span></span>
<span id="cb377-4054"><a href="#cb377-4054" aria-hidden="true" tabindex="-1"></a><span class="in">library(plotly)</span></span>
<span id="cb377-4055"><a href="#cb377-4055" aria-hidden="true" tabindex="-1"></a><span class="in">library(DT)</span></span>
<span id="cb377-4056"><a href="#cb377-4056" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb377-4057"><a href="#cb377-4057" aria-hidden="true" tabindex="-1"></a><span class="in">library(shinyjs)</span></span>
<span id="cb377-4058"><a href="#cb377-4058" aria-hidden="true" tabindex="-1"></a><span class="in">library(shinyWidgets)</span></span>
<span id="cb377-4059"><a href="#cb377-4059" aria-hidden="true" tabindex="-1"></a><span class="in">library(scales)</span></span>
<span id="cb377-4060"><a href="#cb377-4060" aria-hidden="true" tabindex="-1"></a><span class="in">library(colourpicker)</span></span>
<span id="cb377-4061"><a href="#cb377-4061" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4062"><a href="#cb377-4062" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4063"><a href="#cb377-4063" aria-hidden="true" tabindex="-1"></a><span class="in"># load the data</span></span>
<span id="cb377-4064"><a href="#cb377-4064" aria-hidden="true" tabindex="-1"></a><span class="in">load("C:/Users/User/Desktop/Materials_ Course and proposals/VIP collection for Syntax code or project titles/R codes/Shiny App BC Screening/Breast Cancer Screening.RData")</span></span>
<span id="cb377-4065"><a href="#cb377-4065" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4066"><a href="#cb377-4066" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb377-4067"><a href="#cb377-4067" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4068"><a href="#cb377-4068" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=FALSE}</span></span>
<span id="cb377-4069"><a href="#cb377-4069" aria-hidden="true" tabindex="-1"></a><span class="in"># -------------------Shiny Application for Breast Cancer Screening---------------------</span></span>
<span id="cb377-4070"><a href="#cb377-4070" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4071"><a href="#cb377-4071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4072"><a href="#cb377-4072" aria-hidden="true" tabindex="-1"></a><span class="in"># ------------------- UI and Server Definition ---------------------</span></span>
<span id="cb377-4073"><a href="#cb377-4073" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4074"><a href="#cb377-4074" aria-hidden="true" tabindex="-1"></a><span class="in"># Define custom CSS for styling buttons and other UI elements</span></span>
<span id="cb377-4075"><a href="#cb377-4075" aria-hidden="true" tabindex="-1"></a><span class="in">ui &lt;- fluidPage(</span></span>
<span id="cb377-4076"><a href="#cb377-4076" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb377-4077"><a href="#cb377-4077" aria-hidden="true" tabindex="-1"></a><span class="in">  # Application title displayed at the top of the app</span></span>
<span id="cb377-4078"><a href="#cb377-4078" aria-hidden="true" tabindex="-1"></a><span class="in">  h1("Breast Cancer Screening Uptake"),</span></span>
<span id="cb377-4079"><a href="#cb377-4079" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4080"><a href="#cb377-4080" aria-hidden="true" tabindex="-1"></a><span class="in">  # Apply custom styling to the download button</span></span>
<span id="cb377-4081"><a href="#cb377-4081" aria-hidden="true" tabindex="-1"></a><span class="in">  tags$style(HTML("</span></span>
<span id="cb377-4082"><a href="#cb377-4082" aria-hidden="true" tabindex="-1"></a><span class="in">    #download_data {</span></span>
<span id="cb377-4083"><a href="#cb377-4083" aria-hidden="true" tabindex="-1"></a><span class="in">      background: orange;</span></span>
<span id="cb377-4084"><a href="#cb377-4084" aria-hidden="true" tabindex="-1"></a><span class="in">      font-size: 20px;</span></span>
<span id="cb377-4085"><a href="#cb377-4085" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb377-4086"><a href="#cb377-4086" aria-hidden="true" tabindex="-1"></a><span class="in">  ")),  </span></span>
<span id="cb377-4087"><a href="#cb377-4087" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4088"><a href="#cb377-4088" aria-hidden="true" tabindex="-1"></a><span class="in">  # Layout structure: sidebar for inputs and main panel for outputs</span></span>
<span id="cb377-4089"><a href="#cb377-4089" aria-hidden="true" tabindex="-1"></a><span class="in">  sidebarLayout(</span></span>
<span id="cb377-4090"><a href="#cb377-4090" aria-hidden="true" tabindex="-1"></a><span class="in">    sidebarPanel(</span></span>
<span id="cb377-4091"><a href="#cb377-4091" aria-hidden="true" tabindex="-1"></a><span class="in">      </span></span>
<span id="cb377-4092"><a href="#cb377-4092" aria-hidden="true" tabindex="-1"></a><span class="in">      # Quantile-based slider to filter screening rate</span></span>
<span id="cb377-4093"><a href="#cb377-4093" aria-hidden="true" tabindex="-1"></a><span class="in">      sliderInput("rate_10_group", "Rate Group", </span></span>
<span id="cb377-4094"><a href="#cb377-4094" aria-hidden="true" tabindex="-1"></a><span class="in">                  min = min(breast_cancer_long$rate_10_group, na.rm = TRUE), </span></span>
<span id="cb377-4095"><a href="#cb377-4095" aria-hidden="true" tabindex="-1"></a><span class="in">                  max = max(breast_cancer_long$rate_10_group, na.rm = TRUE), </span></span>
<span id="cb377-4096"><a href="#cb377-4096" aria-hidden="true" tabindex="-1"></a><span class="in">                  value = c(5, 7)),</span></span>
<span id="cb377-4097"><a href="#cb377-4097" aria-hidden="true" tabindex="-1"></a><span class="in">      </span></span>
<span id="cb377-4098"><a href="#cb377-4098" aria-hidden="true" tabindex="-1"></a><span class="in">      # Dropdown menu for state selection (simplifies and scales better than radio buttons)</span></span>
<span id="cb377-4099"><a href="#cb377-4099" aria-hidden="true" tabindex="-1"></a><span class="in">      selectInput("state", "Select State",  </span></span>
<span id="cb377-4100"><a href="#cb377-4100" aria-hidden="true" tabindex="-1"></a><span class="in">                  choices = unique(breast_cancer_long$state), </span></span>
<span id="cb377-4101"><a href="#cb377-4101" aria-hidden="true" tabindex="-1"></a><span class="in">                  selected = "WA"),</span></span>
<span id="cb377-4102"><a href="#cb377-4102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4103"><a href="#cb377-4103" aria-hidden="true" tabindex="-1"></a><span class="in">      # Multi-select dropdown for age groups (allows viewing multiple demographics)</span></span>
<span id="cb377-4104"><a href="#cb377-4104" aria-hidden="true" tabindex="-1"></a><span class="in">      selectInput("age_group", "Women's Age Group", </span></span>
<span id="cb377-4105"><a href="#cb377-4105" aria-hidden="true" tabindex="-1"></a><span class="in">                  choices = unique(breast_cancer_long$age_group), </span></span>
<span id="cb377-4106"><a href="#cb377-4106" aria-hidden="true" tabindex="-1"></a><span class="in">                  multiple = TRUE,</span></span>
<span id="cb377-4107"><a href="#cb377-4107" aria-hidden="true" tabindex="-1"></a><span class="in">                  selected = unique(breast_cancer_long$age_group)[1]),</span></span>
<span id="cb377-4108"><a href="#cb377-4108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4109"><a href="#cb377-4109" aria-hidden="true" tabindex="-1"></a><span class="in">      # Add colour input to allow users to control table font colour</span></span>
<span id="cb377-4110"><a href="#cb377-4110" aria-hidden="true" tabindex="-1"></a><span class="in">      colourInput("color", "Point color", value = "blue"),</span></span>
<span id="cb377-4111"><a href="#cb377-4111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4112"><a href="#cb377-4112" aria-hidden="true" tabindex="-1"></a><span class="in">      # Add a help button that triggers a modal popup for guidance</span></span>
<span id="cb377-4113"><a href="#cb377-4113" aria-hidden="true" tabindex="-1"></a><span class="in">      actionButton("show_help", "Help"),</span></span>
<span id="cb377-4114"><a href="#cb377-4114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4115"><a href="#cb377-4115" aria-hidden="true" tabindex="-1"></a><span class="in">      # Add a download button for exporting filtered dataset</span></span>
<span id="cb377-4116"><a href="#cb377-4116" aria-hidden="true" tabindex="-1"></a><span class="in">      downloadButton("download_data", "Download Data")</span></span>
<span id="cb377-4117"><a href="#cb377-4117" aria-hidden="true" tabindex="-1"></a><span class="in">    ),</span></span>
<span id="cb377-4118"><a href="#cb377-4118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4119"><a href="#cb377-4119" aria-hidden="true" tabindex="-1"></a><span class="in">    mainPanel(</span></span>
<span id="cb377-4120"><a href="#cb377-4120" aria-hidden="true" tabindex="-1"></a><span class="in">      # Render the interactive line chart</span></span>
<span id="cb377-4121"><a href="#cb377-4121" aria-hidden="true" tabindex="-1"></a><span class="in">      plotlyOutput("plot"),</span></span>
<span id="cb377-4122"><a href="#cb377-4122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4123"><a href="#cb377-4123" aria-hidden="true" tabindex="-1"></a><span class="in">      # Render the data table output</span></span>
<span id="cb377-4124"><a href="#cb377-4124" aria-hidden="true" tabindex="-1"></a><span class="in">      DTOutput("table")</span></span>
<span id="cb377-4125"><a href="#cb377-4125" aria-hidden="true" tabindex="-1"></a><span class="in">    )</span></span>
<span id="cb377-4126"><a href="#cb377-4126" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-4127"><a href="#cb377-4127" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb377-4128"><a href="#cb377-4128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4129"><a href="#cb377-4129" aria-hidden="true" tabindex="-1"></a><span class="in"># Define server-side logic for rendering outputs and interactivity</span></span>
<span id="cb377-4130"><a href="#cb377-4130" aria-hidden="true" tabindex="-1"></a><span class="in">server &lt;- function(input, output, session) {</span></span>
<span id="cb377-4131"><a href="#cb377-4131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4132"><a href="#cb377-4132" aria-hidden="true" tabindex="-1"></a><span class="in">  # Show Help Modal: explains data source when help button is clicked</span></span>
<span id="cb377-4133"><a href="#cb377-4133" aria-hidden="true" tabindex="-1"></a><span class="in">  observeEvent(input$show_help, {</span></span>
<span id="cb377-4134"><a href="#cb377-4134" aria-hidden="true" tabindex="-1"></a><span class="in">    showModal(modalDialog(</span></span>
<span id="cb377-4135"><a href="#cb377-4135" aria-hidden="true" tabindex="-1"></a><span class="in">      title = "Help",</span></span>
<span id="cb377-4136"><a href="#cb377-4136" aria-hidden="true" tabindex="-1"></a><span class="in">      "This data was compiled from the Australian Institute of Health and Welfare."</span></span>
<span id="cb377-4137"><a href="#cb377-4137" aria-hidden="true" tabindex="-1"></a><span class="in">    ))</span></span>
<span id="cb377-4138"><a href="#cb377-4138" aria-hidden="true" tabindex="-1"></a><span class="in">  })</span></span>
<span id="cb377-4139"><a href="#cb377-4139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4140"><a href="#cb377-4140" aria-hidden="true" tabindex="-1"></a><span class="in">  # Reactive expression to filter and summarize the dataset based on inputs</span></span>
<span id="cb377-4141"><a href="#cb377-4141" aria-hidden="true" tabindex="-1"></a><span class="in">  filtered_data &lt;- reactive({</span></span>
<span id="cb377-4142"><a href="#cb377-4142" aria-hidden="true" tabindex="-1"></a><span class="in">    req(input$rate_10_group, input$state, input$age_group)  # Ensure all inputs are available</span></span>
<span id="cb377-4143"><a href="#cb377-4143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4144"><a href="#cb377-4144" aria-hidden="true" tabindex="-1"></a><span class="in">    breast_cancer_long %&gt;%</span></span>
<span id="cb377-4145"><a href="#cb377-4145" aria-hidden="true" tabindex="-1"></a><span class="in">      filter(rate_10_group &gt;= input$rate_10_group[1] &amp; </span></span>
<span id="cb377-4146"><a href="#cb377-4146" aria-hidden="true" tabindex="-1"></a><span class="in">               rate_10_group &lt;= input$rate_10_group[2],</span></span>
<span id="cb377-4147"><a href="#cb377-4147" aria-hidden="true" tabindex="-1"></a><span class="in">             state == input$state,</span></span>
<span id="cb377-4148"><a href="#cb377-4148" aria-hidden="true" tabindex="-1"></a><span class="in">             age_group %in% input$age_group) %&gt;%</span></span>
<span id="cb377-4149"><a href="#cb377-4149" aria-hidden="true" tabindex="-1"></a><span class="in">      group_by(year, state, age_group) %&gt;%</span></span>
<span id="cb377-4150"><a href="#cb377-4150" aria-hidden="true" tabindex="-1"></a><span class="in">      summarise(year = as.integer(year),  # Convert year to integer for plotting</span></span>
<span id="cb377-4151"><a href="#cb377-4151" aria-hidden="true" tabindex="-1"></a><span class="in">                rate = round(mean(rate, na.rm = TRUE), 1),  # Average screening rate</span></span>
<span id="cb377-4152"><a href="#cb377-4152" aria-hidden="true" tabindex="-1"></a><span class="in">                .groups = "drop") </span></span>
<span id="cb377-4153"><a href="#cb377-4153" aria-hidden="true" tabindex="-1"></a><span class="in">  })</span></span>
<span id="cb377-4154"><a href="#cb377-4154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4155"><a href="#cb377-4155" aria-hidden="true" tabindex="-1"></a><span class="in">  # Render Table: displays filtered data in an interactive table with export options</span></span>
<span id="cb377-4156"><a href="#cb377-4156" aria-hidden="true" tabindex="-1"></a><span class="in">  output$table &lt;- renderDT({</span></span>
<span id="cb377-4157"><a href="#cb377-4157" aria-hidden="true" tabindex="-1"></a><span class="in">    datatable(filtered_data(), </span></span>
<span id="cb377-4158"><a href="#cb377-4158" aria-hidden="true" tabindex="-1"></a><span class="in">              options = list(</span></span>
<span id="cb377-4159"><a href="#cb377-4159" aria-hidden="true" tabindex="-1"></a><span class="in">                pageLength = 10,  # Show 10 rows per page</span></span>
<span id="cb377-4160"><a href="#cb377-4160" aria-hidden="true" tabindex="-1"></a><span class="in">                dom = 'Bfrtip',  # Include Buttons (copy, csv, pdf, etc.)</span></span>
<span id="cb377-4161"><a href="#cb377-4161" aria-hidden="true" tabindex="-1"></a><span class="in">                buttons = c('copy', 'csv', 'excel', 'pdf', 'print'),</span></span>
<span id="cb377-4162"><a href="#cb377-4162" aria-hidden="true" tabindex="-1"></a><span class="in">                class = "display nowrap compact"  # Responsive and compact table design</span></span>
<span id="cb377-4163"><a href="#cb377-4163" aria-hidden="true" tabindex="-1"></a><span class="in">              ),</span></span>
<span id="cb377-4164"><a href="#cb377-4164" aria-hidden="true" tabindex="-1"></a><span class="in">              extensions = 'Buttons',</span></span>
<span id="cb377-4165"><a href="#cb377-4165" aria-hidden="true" tabindex="-1"></a><span class="in">              style = "bootstrap", </span></span>
<span id="cb377-4166"><a href="#cb377-4166" aria-hidden="true" tabindex="-1"></a><span class="in">              class = "table table-striped table-bordered") %&gt;%</span></span>
<span id="cb377-4167"><a href="#cb377-4167" aria-hidden="true" tabindex="-1"></a><span class="in">      formatStyle(columns = names(filtered_data()), color = input$color)  # Use selected color</span></span>
<span id="cb377-4168"><a href="#cb377-4168" aria-hidden="true" tabindex="-1"></a><span class="in">  })</span></span>
<span id="cb377-4169"><a href="#cb377-4169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4170"><a href="#cb377-4170" aria-hidden="true" tabindex="-1"></a><span class="in">  # Download Handler: enables users to download filtered data</span></span>
<span id="cb377-4171"><a href="#cb377-4171" aria-hidden="true" tabindex="-1"></a><span class="in">  output$download_data &lt;- downloadHandler(</span></span>
<span id="cb377-4172"><a href="#cb377-4172" aria-hidden="true" tabindex="-1"></a><span class="in">    filename = "Breast_cancer_screening_data.csv",</span></span>
<span id="cb377-4173"><a href="#cb377-4173" aria-hidden="true" tabindex="-1"></a><span class="in">    content = function(file) {</span></span>
<span id="cb377-4174"><a href="#cb377-4174" aria-hidden="true" tabindex="-1"></a><span class="in">      write.csv(filtered_data(), file, row.names = FALSE)</span></span>
<span id="cb377-4175"><a href="#cb377-4175" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb377-4176"><a href="#cb377-4176" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb377-4177"><a href="#cb377-4177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4178"><a href="#cb377-4178" aria-hidden="true" tabindex="-1"></a><span class="in">  # Render Plot: displays line plot of screening rates over time by age group</span></span>
<span id="cb377-4179"><a href="#cb377-4179" aria-hidden="true" tabindex="-1"></a><span class="in">  output$plot &lt;- renderPlotly({</span></span>
<span id="cb377-4180"><a href="#cb377-4180" aria-hidden="true" tabindex="-1"></a><span class="in">    df &lt;- filtered_data()</span></span>
<span id="cb377-4181"><a href="#cb377-4181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4182"><a href="#cb377-4182" aria-hidden="true" tabindex="-1"></a><span class="in">    p &lt;- ggplot(df, aes(x = year, y = rate, color = age_group, group = interaction(state, age_group))) +</span></span>
<span id="cb377-4183"><a href="#cb377-4183" aria-hidden="true" tabindex="-1"></a><span class="in">      geom_line(size = 1) +  # Draw lines to show trend</span></span>
<span id="cb377-4184"><a href="#cb377-4184" aria-hidden="true" tabindex="-1"></a><span class="in">      geom_point(size = 3) +  # Add points to emphasize data values</span></span>
<span id="cb377-4185"><a href="#cb377-4185" aria-hidden="true" tabindex="-1"></a><span class="in">      labs(title = "Breast Cancer Screening Uptake", </span></span>
<span id="cb377-4186"><a href="#cb377-4186" aria-hidden="true" tabindex="-1"></a><span class="in">           x = "Year", </span></span>
<span id="cb377-4187"><a href="#cb377-4187" aria-hidden="true" tabindex="-1"></a><span class="in">           y = "Screening Rate",</span></span>
<span id="cb377-4188"><a href="#cb377-4188" aria-hidden="true" tabindex="-1"></a><span class="in">           color = "Age Group") +</span></span>
<span id="cb377-4189"><a href="#cb377-4189" aria-hidden="true" tabindex="-1"></a><span class="in">      theme_minimal()</span></span>
<span id="cb377-4190"><a href="#cb377-4190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4191"><a href="#cb377-4191" aria-hidden="true" tabindex="-1"></a><span class="in">    ggplotly(p)  # Convert ggplot to interactive plotly chart</span></span>
<span id="cb377-4192"><a href="#cb377-4192" aria-hidden="true" tabindex="-1"></a><span class="in">  })</span></span>
<span id="cb377-4193"><a href="#cb377-4193" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb377-4194"><a href="#cb377-4194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-4195"><a href="#cb377-4195" aria-hidden="true" tabindex="-1"></a><span class="in"># Launch the app</span></span>
<span id="cb377-4196"><a href="#cb377-4196" aria-hidden="true" tabindex="-1"></a><span class="in">shinyApp(ui, server)</span></span>
<span id="cb377-4197"><a href="#cb377-4197" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>